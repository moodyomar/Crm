!function(){function t(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function e(t,e){return r(t)||function(t,e){var n=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(u){s=!0,i=u}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(t,e)||s(t,e)||n()}function n(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function r(t){if(Array.isArray(t))return t}function i(t){return function(t){if(Array.isArray(t))return u(t)}(t)||o(t)||s(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function a(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=s(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function s(t,e){if(t){if("string"==typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(t,e):void 0}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function c(t){var e="function"==typeof Map?new Map:void 0;return(c=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return l(t,arguments,w(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),y(r,t)})(t)}function l(t,e,n){return(l=_()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&y(i,n.prototype),i}).apply(null,arguments)}function h(t,e,n){return(h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=w(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function p(t,e,n){return e&&d(t.prototype,e),n&&d(t,n),t}function v(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function g(t){var e=_();return function(){var n,r=w(t);if(e){var i=w(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return m(this,n)}}function m(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?b(t):e}function b(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function w(t){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/6Yf":function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return s}),n.d(e,"c",function(){return a});var r=n("mrSG"),i=n("qOnz"),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Set}return t.prototype.get=function(t){void 0===t&&(t="[DEFAULT]");var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.a;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=Object(r.a)({identifier:"[DEFAULT]",optional:!1},t),n=e.optional,i=this.normalizeInstanceIdentifier(e.identifier);if(!this.isInitialized(i)&&!this.shouldAutoInitialize()){if(n)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(n)return null;throw o}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:"[DEFAULT]"})}catch(l){}try{for(var i=Object(r.g)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=Object(r.e)(o.value,2),s=a[1],u=this.normalizeInstanceIdentifier(a[0]);try{var c=this.getOrInitializeService({instanceIdentifier:u});s.resolve(c)}catch(l){}}}catch(h){e={error:h}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t="[DEFAULT]"),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Object(r.b)(this,void 0,void 0,function(){var t;return Object(r.d)(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Object(r.f)(Object(r.f)([],Object(r.e)(t.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))),Object(r.e)(t.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()}))))];case 1:return e.sent(),[2]}})})},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t="[DEFAULT]"),this.instances.has(t)},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var i=t.instanceIdentifier,o=t.options,a=void 0===o?{}:o,s=this.normalizeInstanceIdentifier(void 0===i?"[DEFAULT]":i);if(this.isInitialized(s))throw Error(this.name+"("+s+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var u=this.getOrInitializeService({instanceIdentifier:s,options:a});try{for(var c=Object(r.g)(this.instancesDeferred.entries()),l=c.next();!l.done;l=c.next()){var h=Object(r.e)(l.value,2),f=h[1];s===this.normalizeInstanceIdentifier(h[0])&&f.resolve(u)}}catch(d){e={error:d}}finally{try{l&&!l.done&&(n=c.return)&&n.call(c)}finally{if(e)throw e.error}}return this.invokeOnInitCallbacks(u,s),u},t.prototype.onInit=function(t){var e=this;return this.onInitCallbacks.add(t),function(){e.onInitCallbacks.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,i;try{for(var o=Object(r.g)(this.onInitCallbacks),a=o.next();!a.done;a=o.next()){var s=a.value;try{s(t,e)}catch(u){}}}catch(c){n={error:c}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,"[DEFAULT]"===e?void 0:e),options:i}),this.instances.set(n,o),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(a){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:"[DEFAULT]":t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}(),s=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},0:function(t,e,n){t.exports=n("zUnb")},"2QA8":function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},"2fFW":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=!1,i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){var e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},"3N8a":function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(t){v(n,t);var e=g(n);function n(t,r){var i;return f(this,n),(i=e.call(this,t,r)).scheduler=t,i.work=r,i.pending=!1,i}return p(n,[{key:"schedule",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.closed)return this;this.state=t;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}},{key:"requestAsyncId",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return setInterval(t.flush.bind(t,this),n)}},{key:"recycleAsyncId",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}},{key:"execute",value:function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}},{key:"_execute",value:function(t,e){var n=!1,r=void 0;try{this.work(t)}catch(i){n=!0,r=!!i&&i||new Error(i)}if(n)return this.unsubscribe(),r}},{key:"_unsubscribe",value:function(){var t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}]),n}(function(t){v(n,t);var e=g(n);function n(t,r){return f(this,n),e.call(this)}return p(n,[{key:"schedule",value:function(t){return this}}]),n}(n("quSY").a))},"3UD+":function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},"5+tZ":function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("lJxs"),i=n("Cfvw"),o=n("zx2A");function a(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return"function"==typeof e?function(o){return o.pipe(a(function(n,o){return Object(i.a)(t(n,o)).pipe(Object(r.a)(function(t,r){return e(n,t,o,r)}))},n))}:("number"==typeof e&&(n=e),function(e){return e.lift(new s(t,n))})}var s=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY;f(this,t),this.project=e,this.concurrent=n}return p(t,[{key:"call",value:function(t,e){return e.subscribe(new u(t,this.project,this.concurrent))}}]),t}(),u=function(t){v(n,t);var e=g(n);function n(t,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return f(this,n),(i=e.call(this,t)).project=r,i.concurrent=o,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return p(n,[{key:"_next",value:function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}},{key:"_tryNext",value:function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}},{key:"_innerSub",value:function(t){var e=new o.a(this),n=this.destination;n.add(e);var r=Object(o.c)(t,e);r!==e&&n.add(r)}},{key:"_complete",value:function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}},{key:"notifyNext",value:function(t){this.destination.next(t)}},{key:"notifyComplete",value:function(){var t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}]),n}(o.b)},"6Uf2":function(t,e,n){"use strict";(function(t){var e=n("zIRd"),r=n("/6Yf"),i=n("qOnz"),o=n("mrSG"),a=n("q/0M"),s="";function u(t){s=t}var c,l=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Object(i.H)(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:Object(i.B)(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),h=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return Object(i.h)(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),f=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new l(e)}}catch(n){}return new h},d=f("localStorage"),p=f("sessionStorage"),v=new a.b("@firebase/database"),y=(c=1,function(){return c++}),g=function(t){var e=Object(i.G)(t),n=new i.c;n.update(e);var r=n.digest();return i.f.encodeByteArray(r)},m=function t(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var r="",o=0;o<e.length;o++){var a=e[o];Array.isArray(a)||a&&"object"==typeof a&&"number"==typeof a.length?r+=t.apply(null,a):r+="object"==typeof a?Object(i.H)(a):a,r+=" "}return r},b=null,_=!0,w=function(t,e){Object(i.d)(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(v.logLevel=a.a.VERBOSE,b=v.log.bind(v),e&&p.set("logging_enabled",!0)):"function"==typeof t?b=t:(b=null,p.remove("logging_enabled"))},k=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===_&&(_=!1,null===b&&!0===p.get("logging_enabled")&&w(!0)),b){var n=m.apply(null,t);b(n)}},C=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];k.apply(void 0,Object(o.f)([t],Object(o.e)(e)))}},O=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+m.apply(void 0,Object(o.f)([],Object(o.e)(t)));v.error(n)},E=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+m.apply(void 0,Object(o.f)([],Object(o.e)(t)));throw v.error(n),new Error(n)},S=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+m.apply(void 0,Object(o.f)([],Object(o.e)(t)));v.warn(n)},I=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},T="[MIN_NAME]",x="[MAX_NAME]",A=function(t,e){if(t===e)return 0;if(t===T||e===x)return-1;if(e===T||t===x)return 1;var n=F(t),r=F(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},j=function(t,e){return t===e?0:t<e?-1:1},P=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Object(i.H)(e))},N=function t(e){if("object"!=typeof e||null===e)return Object(i.H)(e);var n=[];for(var r in e)n.push(r);n.sort();for(var o="{",a=0;a<n.length;a++)0!==a&&(o+=","),o+=Object(i.H)(n[a]),o+=":",o+=t(e[n[a]]);return o+"}"},D=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)r.push(t.substring(i,i+e>n?n:i+e));return r};function R(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var L=function(t){var e,n,r,o,a;Object(i.d)(!I(t),"Invalid JSON number"),0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(o=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-o)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var s=[];for(a=52;a;a-=1)s.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)s.push(n%2?1:0),n=Math.floor(n/2);s.push(e?1:0),s.reverse();var u=s.join(""),c="";for(a=0;a<64;a+=8){var l=parseInt(u.substr(a,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()},M=new RegExp("^-?(0*)\\d{1,10}$"),F=function(t){if(M.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},V=function(t){try{t()}catch(e){setTimeout(function(){throw S("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},U=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},q=function(){function t(t,e){var n=this;this.appName_=t,this.appCheckProvider=e,this.appCheck=null==e?void 0:e.getImmediate({optional:!0}),this.appCheck||null==e||e.get().then(function(t){return n.appCheck=t})}return t.prototype.getToken=function(t){return this.appCheck?this.appCheck.getToken(t):Promise.resolve(null)},t.prototype.addTokenChangeListener=function(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then(function(e){return e.addTokenListener(t)})},t.prototype.notifyForInvalidToken=function(){S('Provided AppCheck credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly.')},t}(),B=function(){function t(t,e,n){var r=this;this.appName_=t,this.firebaseOptions_=e,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.get().then(function(t){return r.auth_=t})}return t.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch(function(t){return t&&"auth/token-not-initialized"===t.code?(k("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)}):Promise.resolve(null)},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):(setTimeout(function(){return t(null)},0),this.authProvider_.get().then(function(e){return e.addAuthTokenListener(t)}))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then(function(e){return e.removeAuthTokenListener(t)})},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';S(t+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},t}(),H=function(){function t(t){this.accessToken=t}return t.prototype.getToken=function(t){return Promise.resolve({accessToken:this.accessToken})},t.prototype.addTokenChangeListener=function(t){t(this.accessToken)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.OWNER="owner",t}(),K=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,z=function(){function t(t,e,n,r,i,o,a){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===a&&(a=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=d.get("host:"+t)||this._host}return t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&d.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host+"/"+(this.includeNamespaceInQueryParams?"?ns="+this.namespace:"")},t}();function W(t,e,n){var r;if(Object(i.d)("string"==typeof e,"typeof type must == string"),Object(i.d)("object"==typeof n,"typeof params must == object"),"websocket"===e)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if("long_polling"!==e)throw new Error("Unknown connection type: "+e);r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}(function(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams})(t)&&(n.ns=t.namespace);var o=[];return R(n,function(t,e){o.push(t+"="+e)}),r+o.join("&")}var G=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Object(i.h)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return Object(i.k)(this.counters_)},t}(),Q={},Y={};function J(t){var e=t.toString();return Q[e]||(Q[e]=new G),Q[e]}var X=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&V(function(){n.onMessage_(t[e])})},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==r(););},t}(),Z=function(){function t(t,e,n,r,i,o,a){var s=this;this.connId=t,this.repoInfo=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=C(t),this.stats_=J(e),this.urlFn=function(t){return s.appCheckToken&&(t.ac=s.appCheckToken),W(e,"long_polling",t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new X(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null},Math.floor(3e4)),function(t){if(Object(i.x)()||"complete"===document.readyState)t();else{var e=!1,n=function n(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(function(){if(!n.isClosed_){n.scriptTagHolder=new $(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(o.e)(t,5),i=r[0],a=r[1],s=r[2];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,"start"===i)n.id=a,n.password=s;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);a?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(a,function(){n.onClosed_()})):n.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(o.e)(t,2),i=r[0],a=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,a)},function(){n.onClosed_()},n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),n.appCheckToken&&(t.ac=n.appCheckToken),"undefined"!=typeof location&&location.hostname&&K.test(location.hostname)&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,function(){})}})},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!(Object(i.x)()||!t.forceAllow_&&(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=Object(i.H)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=Object(i.g)(e),r=D(n,1840),o=0;o<r.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[o]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!Object(i.x)()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=Object(i.H)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),$=function(){function t(e,n,r,o){if(this.onDisconnect=r,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Object(i.x)())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=y(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(a='<script>document.domain="'+document.domain+'";<\/script>');var s="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(u){k("frame writing exception"),u.stack&&k(u.stack),k(u)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||k("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return this.addLongPollTag_(e+=n,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,function(){clearTimeout(i),r()})},t.prototype.addTag=function(t,e){var n=this;Object(i.x)()?this.doNodeLongPoll(t,e):setTimeout(function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){k("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}},Math.floor(1))},t}(),tt=null;"undefined"!=typeof MozWebSocket?tt=MozWebSocket:"undefined"!=typeof WebSocket&&(tt=WebSocket);var et=function(){function t(e,n,r,i,o,a,s){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=C(this.connId),this.stats_=J(n),this.connURL=t.connectionURL_(n,a,s,i),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n,r){var o={v:"5"};return!Object(i.x)()&&"undefined"!=typeof location&&location.hostname&&K.test(location.hostname)&&(o.r="f"),e&&(o.s=e),n&&(o.ls=n),r&&(o.ac=r),W(t,"websocket",o)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,d.set("previous_websocket_failure",!0);try{if(Object(i.x)()){var r={headers:{"User-Agent":"Firebase/5/"+s+"/"+process.platform+"/"+(this.nodeAdmin?"AdminNode":"Node"),"X-Firebase-GMPID":this.applicationId||""}};this.nodeAdmin?r.headers.Authorization=this.authToken||"":r.headers["X-Firebase-AppCheck"]=this.appCheckToken||"";var o=process.env,a=0===this.connURL.indexOf("wss://")?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(r.proxy={origin:a}),this.mySock=new tt(this.connURL,[],r)}else this.mySock=new tt(this.connURL,[],r={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(c){this.log_("Error instantiating WebSocket.");var u=c.message||c.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==tt&&!t.forceDisallow_},t.previouslyFailed=function(){return d.isInMemoryStorage||!0===d.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){d.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=Object(i.B)(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(Object(i.d)(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=Object(i.H)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=D(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),nt=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[Z,et]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,i=et&&et.isAvailable(),a=i&&!et.previouslyFailed();if(e.webSocketOnly&&(i||S("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),a=!0),a)this.transports_=[et];else{var s=this.transports_=[];try{for(var u=Object(o.g)(t.ALL_TRANSPORTS),c=u.next();!c.done;c=u.next()){var l=c.value;l&&l.isAvailable()&&s.push(l)}}catch(h){n={error:h}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),rt=function(){function t(t,e,n,r,i,o,a,s,u,c){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=s,this.onKill_=u,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=C("c:"+this.id+":"),this.transportManager_=new nt(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,r)},Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=U(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){this.sendData_({t:"d",d:t})},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=P("t",t),n=P("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=P("t",t),n=P("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=P("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?O("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):O("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&S("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),U(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):U(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(d.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),it=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.refreshAppCheckToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),ot=function(){function t(t){this.allowedEvents_=t,this.listeners_={},Object(i.d)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=Object(o.f)([],Object(o.e)(this.listeners_[t])),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){Object(i.d)(this.allowedEvents_.find(function(e){return e===t}),"Unknown event: "+t)},t}(),at=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||Object(i.v)()||(window.addEventListener("online",function(){e.online_||(e.online_=!0,e.trigger("online",!0))},!1),window.addEventListener("offline",function(){e.online_&&(e.online_=!1,e.trigger("online",!1))},!1)),e}return Object(o.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(i.d)("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(ot),st=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t}();function ut(){return new st("")}function ct(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function lt(t){return t.pieces_.length-t.pieceNum_}function ht(t){var e=t.pieceNum_;return e<t.pieces_.length&&e++,new st(t.pieces_,e)}function ft(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function dt(t,e){return void 0===e&&(e=0),t.pieces_.slice(t.pieceNum_+e)}function pt(t){if(t.pieceNum_>=t.pieces_.length)return null;for(var e=[],n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new st(e,0)}function vt(t,e){for(var n=[],r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof st)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new st(n,0)}function yt(t){return t.pieceNum_>=t.pieces_.length}function gt(t,e){var n=ct(t),r=ct(e);if(null===n)return e;if(n===r)return gt(ht(t),ht(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function mt(t,e){for(var n=dt(t,0),r=dt(e,0),i=0;i<n.length&&i<r.length;i++){var o=A(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function bt(t,e){if(lt(t)!==lt(e))return!1;for(var n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function _t(t,e){var n=t.pieceNum_,r=e.pieceNum_;if(lt(t)>lt(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var wt=function(t,e){this.errorPrefix_=e,this.parts_=dt(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=Object(i.F)(this.parts_[n]);kt(this)};function kt(t){if(t.byteLength_>768)throw new Error(t.errorPrefix_+"has a key path longer than 768 bytes ("+t.byteLength_+").");if(t.parts_.length>32)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Ct(t))}function Ct(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}var Ot,Et,St=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))},!1),r}return Object(o.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(i.d)("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(ot),It=function(t){function e(n,r,o,a,s,u,c,l){var h=t.call(this)||this;if(h.repoInfo_=n,h.applicationId_=r,h.onDataUpdate_=o,h.onConnectStatus_=a,h.onServerInfoUpdate_=s,h.authTokenProvider_=u,h.appCheckTokenProvider_=c,h.authOverride_=l,h.id=e.nextPersistentConnectionId_++,h.log_=C("p:"+h.id+":"),h.interruptReasons_={},h.listens=new Map,h.outstandingPuts_=[],h.outstandingGets_=[],h.outstandingPutCount_=0,h.outstandingGetCount_=0,h.onDisconnectRequestQueue_=[],h.connected_=!1,h.reconnectDelay_=1e3,h.maxReconnectDelay_=3e5,h.securityDebugCallback_=null,h.lastSessionId=null,h.establishConnectionTimer_=null,h.visible_=!1,h.requestCBHash_={},h.requestNumber_=0,h.realtime_=null,h.authToken_=null,h.appCheckToken_=null,h.forceTokenRefresh_=!1,h.invalidAuthTokenCount_=0,h.invalidAppCheckTokenCount_=0,h.firstConnection_=!0,h.lastConnectionAttemptTime_=null,h.lastConnectionEstablishedTime_=null,l&&!Object(i.x)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return h.scheduleConnect_(0),St.getInstance().on("visible",h.onVisible_,h),-1===n.host.indexOf("fblocal")&&at.getInstance().on("online",h.onOnline_,h),h}return Object(o.c)(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,o={r:r,a:t,b:e};this.log_(Object(i.H)(o)),Object(i.d)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),n&&(this.requestCBHash_[r]=n)},e.prototype.get=function(t){var e=this,n=new i.a,r={p:t._path.toString(),q:t._queryObject},o={action:"g",request:r,onComplete:function(t){var i=t.d;"ok"===t.s?(e.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;var a=this.outstandingGets_.length-1;return this.connected_||setTimeout(function(){var t=e.outstandingGets_[a];void 0!==t&&o===t&&(delete e.outstandingGets_[a],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+a+" timed out on connection"),n.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(a),n.promise},e.prototype.listen=function(t,e,n,r){var o=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),Object(i.d)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Object(i.d)(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");var s={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(a).set(o,s),this.connected_&&this.sendListen_(s)},e.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);var a={p:i};t.tag&&(a.q=r._queryObject,a.t=t.tag),a.h=t.hashFn(),this.sendRequest("q",a,function(a){var s=a.d,u=a.s;e.warnOnListenWarnings_(s,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",a),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,s))})},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&Object(i.h)(t,"w")){var n=Object(i.E)(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e._queryParams.getIndex().toString()+'"',o=e._path.toString();S("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+o+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||Object(i.p)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.refreshAppCheckToken=function(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},function(){})},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=Object(i.A)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))})}},e.prototype.tryAppCheck=function(){var t=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},function(e){var n=e.s,r=e.d||"error";"ok"===n?t.invalidAppCheckTokenCount_=0:t.onAppCheckRevoked_(n,r)})},e.prototype.unlisten=function(t,e){var n=t._path.toString(),r=t._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),Object(i.d)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t._queryObject,e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)})},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,function(t){"ok"!==t.s&&e.log_("reportStats","Error sending stats: "+t.d)})}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+Object(i.H)(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"apc"===t?this.onAppCheckRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):O("Unrecognized action received from server: "+Object(i.H)(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;Object(i.d)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=1e3),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){return Object(o.b)(this,void 0,void 0,function(){var t,n,r,a,s,u,c,l,h,f,d,p,v,y=this;return Object(o.d)(this,function(g){switch(g.label){case 0:if(!this.shouldReconnect_())return[3,4];this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+e.nextConnectionId_++,s=this.lastSessionId,u=!1,c=null,this.realtime_={close:l=function(){c?c.close():(u=!0,r())},sendRequest:function(t){Object(i.d)(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(t)}},h=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,g.label=1;case 1:return g.trys.push([1,3,,4]),[4,Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)])];case 2:return f=o.e.apply(void 0,[g.sent(),2]),d=f[0],p=f[1],u?k("getToken() completed but was canceled"):(k("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=p&&p.token,c=new rt(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,n,r,function(t){S(t+" ("+y.repoInfo_.toString()+")"),y.interrupt("server_kill")},s)),[3,4];case 3:return v=g.sent(),this.log_("Failed to get token: "+v),u||(this.repoInfo_.nodeAdmin&&S(v),l()),[3,4];case 4:return[2]}})})},e.prototype.interrupt=function(t){k("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){k("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Object(i.t)(this.interruptReasons_)&&(this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map(function(t){return N(t)}).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new st(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){k("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onAppCheckRevoked_=function(t,e){k("App check token revoked: "+t+"/"+e),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth(),this.tryAppCheck();try{for(var i=Object(o.g)(this.listens.values()),a=i.next();!a.done;a=i.next()){var s=a.value;try{for(var u=(n=void 0,Object(o.g)(s.values())),c=u.next();!c.done;c=u.next())this.sendListen_(c.value)}catch(f){n={error:f}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(d){t={error:d}}finally{try{a&&!a.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}for(l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)},e.prototype.sendConnectStats_=function(){var t={},e="js";Object(i.x)()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+s.replace(/\./g,"-")]=1,Object(i.v)()?t["framework.cordova"]=1:Object(i.y)()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=at.getInstance().currentlyOnline();return Object(i.t)(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(it),Tt=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),xt=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new Tt(T,t),r=new Tt(T,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return Tt.MIN},t}(),At=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.c)(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return Ot},set:function(t){Ot=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return A(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw Object(i.e)("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return Tt.MIN},e.prototype.maxPost=function(){return new Tt(x,Ot)},e.prototype.makePost=function(t,e){return Object(i.d)("string"==typeof t,"KeyIndex indexValue must always be a string."),new Tt(t,Ot)},e.prototype.toString=function(){return".key"},e}(xt),jt=new At,Pt=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),Nt=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:Rt.EMPTY_NODE,this.right=null!=o?o:Rt.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return Rt.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Rt.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),Dt=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Nt(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Rt=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Nt.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Nt.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new Pt(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new Pt(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new Pt(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new Pt(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new Dt,t}();function Lt(t,e){return A(t.name,e.name)}function Mt(t,e){return A(t,e)}var Ft,Vt,Ut,qt,Bt,Ht=function(t){return"number"==typeof t?"number:"+L(t):"string:"+t},Kt=function(t){if(t.isLeafNode()){var e=t.val();Object(i.d)("string"==typeof e||"number"==typeof e||"object"==typeof e&&Object(i.h)(e,".sv"),"Priority must be a string or number.")}else Object(i.d)(t===Et||t.isEmpty(),"priority of unexpected type.");Object(i.d)(t===Et||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},zt=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Object(i.d)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Kt(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return Ft},set:function(t){Ft=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return yt(e)?this:".priority"===ct(e)?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=ct(e);return null===r?n:n.isEmpty()&&".priority"!==r?this:(Object(i.d)(".priority"!==r||1===lt(e),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(ht(e),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+Ht(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?L(this.value_):this.value_,this.lazyHash_=g(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(Object(i.d)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,o=t.VALUE_TYPE_ORDER.indexOf(n),a=t.VALUE_TYPE_ORDER.indexOf(r);return Object(i.d)(o>=0,"Unknown leaf type: "+n),Object(i.d)(a>=0,"Unknown leaf type: "+r),o===a?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:a-o},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}(),Wt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?A(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return Tt.MIN},e.prototype.maxPost=function(){return new Tt(x,new zt("[PRIORITY-POST]",Ut))},e.prototype.makePost=function(t,e){var n=Vt(t);return new Tt(e,new zt("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(xt)),Gt=Math.log(2),Qt=function(){function t(t){this.count=parseInt(Math.log(t+1)/Gt,10),this.current_=this.count-1;var e=parseInt(Array(this.count+1).join("1"),2);this.bits_=t+1&e}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),Yt=function(t,e,n,r){t.sort(e);var i=function e(r,i){var o,a,s=i-r;if(0===s)return null;if(1===s)return o=t[r],a=n?n(o):o,new Nt(a,o.node,Nt.BLACK,null,null);var u=parseInt(s/2,10)+r,c=e(r,u),l=e(u+1,i);return o=t[u],a=n?n(o):o,new Nt(a,o.node,Nt.BLACK,c,l)},o=function(e){for(var r=null,o=null,a=t.length,s=function(e,r){var o=a-e,s=a;a-=e;var c=i(o+1,s),l=t[o],h=n?n(l):l;u(new Nt(h,l.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var l=e.nextBitIsOne(),h=Math.pow(2,e.count-(c+1));l?s(h,Nt.BLACK):(s(h,Nt.BLACK),s(h,Nt.RED))}return o}(new Qt(t.length));return new Rt(r||e,o)},Jt={},Xt=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return Object(i.d)(Jt&&Wt,"ChildrenNode.ts has not been loaded"),qt=qt||new t({".priority":Jt},{".priority":Wt})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=Object(i.E)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Rt?e:null},t.prototype.hasIndex=function(t){return Object(i.h)(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){Object(i.d)(e!==jt,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,a=[],s=!1,u=n.getIterator(Tt.Wrap),c=u.getNext();c;)s=s||e.isDefinedOn(c.node),a.push(c),c=u.getNext();r=s?Yt(a,e.getCompare()):Jt;var l=e.toString(),h=Object(o.a)({},this.indexSet_);h[l]=e;var f=Object(o.a)({},this.indexes_);return f[l]=r,new t(f,h)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(Object(i.C)(this.indexes_,function(t,o){var a=Object(i.E)(r.indexSet_,o);if(Object(i.d)(a,"Missing index implementation for "+o),t===Jt){if(a.isDefinedOn(e.node)){for(var s=[],u=n.getIterator(Tt.Wrap),c=u.getNext();c;)c.name!==e.name&&s.push(c),c=u.getNext();return s.push(e),Yt(s,a.getCompare())}return Jt}var l=n.get(e.name),h=t;return l&&(h=h.remove(new Tt(e.name,l))),h.insert(e,e.node)}),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(Object(i.C)(this.indexes_,function(t){if(t===Jt)return t;var r=n.get(e.name);return r?t.remove(new Tt(e.name,r)):t}),this.indexSet_)},t}(),Zt=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Kt(this.priorityNode_),this.children_.isEmpty()&&Object(i.d)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return Bt||(Bt=new t(new Rt(Mt),null,Xt.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||Bt},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?Bt:e},t.prototype.getChild=function(t){var e=ct(t);return null===e?this:this.getImmediateChild(e).getChild(ht(t))},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(Object(i.d)(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new Tt(e,n),o=void 0,a=void 0;n.isEmpty()?(o=this.children_.remove(e),a=this.indexMap_.removeFromIndexes(r,this.children_)):(o=this.children_.insert(e,n),a=this.indexMap_.addToIndexes(r,this.children_));var s=o.isEmpty()?Bt:this.priorityNode_;return new t(o,s,a)},t.prototype.updateChild=function(t,e){var n=ct(t);if(null===n)return e;Object(i.d)(".priority"!==ct(t)||1===lt(t),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(ht(t),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(Wt,function(a,s){n[a]=s.val(e),r++,o&&t.INTEGER_REGEXP_.test(a)?i=Math.max(i,Number(a)):o=!1}),!e&&o&&i<2*r){var a=[];for(var s in n)a[s]=n[s];return a}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+Ht(this.getPriority().val())+":"),this.forEachChild(Wt,function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)}),this.lazyHash_=""===t?"":g(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Tt(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new Tt(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new Tt(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this.children_.getIteratorFrom(t.name,Tt.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this.children_.getReverseIteratorFrom(t.name,Tt.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===$t?-1:0},t.prototype.withIndex=function(e){if(e===jt||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===jt||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(Wt),r=e.getIterator(Wt),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===jt?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),$t=new(function(t){function e(){return t.call(this,new Rt(Mt),Zt.EMPTY_NODE,Xt.Default)||this}return Object(o.c)(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return Zt.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(Zt));function te(t,e){if(void 0===e&&(e=null),null===t)return Zt.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),Object(i.d)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new zt(t,te(e));if(t instanceof Array){var n=Zt.EMPTY_NODE;return R(t,function(e,r){if(Object(i.h)(t,e)&&"."!==e.substring(0,1)){var o=te(r);!o.isLeafNode()&&o.isEmpty()||(n=n.updateImmediateChild(e,o))}}),n.updatePriority(te(e))}var r=[],o=!1;if(R(t,function(t,e){if("."!==t.substring(0,1)){var n=te(e);n.isEmpty()||(o=o||!n.getPriority().isEmpty(),r.push(new Tt(t,n)))}}),0===r.length)return Zt.EMPTY_NODE;var a=Yt(r,Lt,function(t){return t.name},Mt);if(o){var s=Yt(r,Wt.getCompare());return new Zt(a,te(e),new Xt({".priority":s},{".priority":Wt}))}return new Zt(a,te(e),Xt.Default)}Object.defineProperties(Tt,{MIN:{value:new Tt(T,Zt.EMPTY_NODE)},MAX:{value:new Tt(x,$t)}}),At.__EMPTY_NODE=Zt.EMPTY_NODE,zt.__childrenNodeConstructor=Zt,Et=$t,Ut=$t,Vt=te;var ee,ne,re=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,Object(i.d)(!yt(e)&&".priority"!==ct(e),"Can't create PathIndex with empty path or .priority key"),n}return Object(o.c)(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?A(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=te(t),r=Zt.EMPTY_NODE.updateChild(this.indexPath_,n);return new Tt(e,r)},e.prototype.maxPost=function(){var t=Zt.EMPTY_NODE.updateChild(this.indexPath_,$t);return new Tt(x,t)},e.prototype.toString=function(){return dt(this.indexPath_,0).join("/")},e}(xt),ie=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?A(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return Tt.MIN},e.prototype.maxPost=function(){return Tt.MAX},e.prototype.makePost=function(t,e){var n=te(t);return new Tt(e,n)},e.prototype.toString=function(){return".value"},e}(xt)),oe="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",ae=(ee=0,ne=[],function(t){var e,n=t===ee;ee=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=oe.charAt(t%64),t=Math.floor(t/64);Object(i.d)(0===t,"Cannot push at time == 0");var o=r.join("");if(n){for(e=11;e>=0&&63===ne[e];e--)ne[e]=0;ne[e]++}else for(e=0;e<12;e++)ne[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)o+=oe.charAt(ne[e]);return Object(i.d)(20===o.length,"nextPushId: Length should be 20."),o}),se=function(t){if("2147483647"===t)return"-";var e=F(t);if(null!=e)return""+(e+1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return x;var o=oe.charAt(oe.indexOf(n[i])+1);return n[i]=o,n.slice(0,i+1).join("")},ue=function(t){if("-2147483648"===t)return T;var e=F(t);if(null!=e)return""+(e-1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=oe.charAt(oe.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))};function ce(t){return{type:"value",snapshotNode:t}}function le(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function he(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function fe(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}var de=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,o,a){Object(i.d)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var s=t.getImmediateChild(e);return s.getChild(r).equals(n.getChild(r))&&s.isEmpty()===n.isEmpty()?t:(null!=a&&(n.isEmpty()?t.hasChild(e)?a.trackChildChange(he(e,s)):Object(i.d)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?a.trackChildChange(le(e,n)):a.trackChildChange(fe(e,n,s))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(Wt,function(t,r){e.hasChild(t)||n.trackChildChange(he(t,r))}),e.isLeafNode()||e.forEachChild(Wt,function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(fe(e,r,i))}else n.trackChildChange(le(e,r))})),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?Zt.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),pe=function(){function t(e){this.indexedFilter_=new de(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new Tt(e,n))||(n=Zt.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=Zt.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(Zt.EMPTY_NODE);var i=this;return e.forEachChild(Wt,function(t,e){i.matches(new Tt(t,e))||(r=r.updateImmediateChild(t,Zt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),ve=function(){function t(t){this.rangedFilter_=new pe(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new Tt(e,n))||(n=Zt.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=Zt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=Zt.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var a=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:this.index_.compare(a,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(a.name,a.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(Zt.EMPTY_NODE);var s=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();)a=i.getNext(),!h&&c(s,a)<=0&&(h=!0),h&&o<this.limit_&&c(a,u)<=0?o++:r=r.updateImmediateChild(a.name,Zt.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,o){var a;if(this.reverse_){var s=this.index_.getCompare();a=function(t,e){return s(e,t)}}else a=this.index_.getCompare();var u=t;Object(i.d)(u.numChildren()===this.limit_,"");var c=new Tt(e,n),l=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(u.hasChild(e)){for(var f=u.getImmediateChild(e),d=r.getChildAfterChild(this.index_,l,this.reverse_);null!=d&&(d.name===e||u.hasChild(d.name));)d=r.getChildAfterChild(this.index_,d,this.reverse_);var p=null==d?1:a(d,c);if(h&&!n.isEmpty()&&p>=0)return null!=o&&o.trackChildChange(fe(e,n,f)),u.updateImmediateChild(e,n);null!=o&&o.trackChildChange(he(e,f));var v=u.updateImmediateChild(e,Zt.EMPTY_NODE);return null!=d&&this.rangedFilter_.matches(d)?(null!=o&&o.trackChildChange(le(d.name,d.node)),v.updateImmediateChild(d.name,d.node)):v}return n.isEmpty()?t:h&&a(l,c)>=0?(null!=o&&(o.trackChildChange(he(l.name,l.node)),o.trackChildChange(le(e,n))),u.updateImmediateChild(e,n).updateImmediateChild(l.name,Zt.EMPTY_NODE)):t},t}(),ye=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Wt}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.hasStartAfter=function(){return this.startAfterSet_},t.prototype.hasEndBefore=function(){return this.endBeforeSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},t.prototype.getIndexStartValue=function(){return Object(i.d)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return Object(i.d)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:T},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return Object(i.d)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return Object(i.d)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:x},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return Object(i.d)(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Wt},t.prototype.copy=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t}();function ge(t,e,n){var r=t.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function me(t,e,n){var r=t.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function be(t,e){var n=t.copy();return n.index_=e,n}function _e(t){var e,n={};return t.isDefault()||(t.index_===Wt?e="$priority":t.index_===ie?e="$value":t.index_===jt?e="$key":(Object(i.d)(t.index_ instanceof re,"Unrecognized index type!"),e=t.index_.toString()),n.orderBy=Object(i.H)(e),t.startSet_&&(n.startAt=Object(i.H)(t.indexStartValue_),t.startNameSet_&&(n.startAt+=","+Object(i.H)(t.indexStartName_))),t.endSet_&&(n.endAt=Object(i.H)(t.indexEndValue_),t.endNameSet_&&(n.endAt+=","+Object(i.H)(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?n.limitToFirst=t.limit_:n.limitToLast=t.limit_)),n}function we(t){var e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_)),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_)),t.limitSet_){e.l=t.limit_;var n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e.vf=n}return t.index_!==Wt&&(e.i=t.index_.toString()),e}var ke=function(t){function e(e,n,r,i){var o=t.call(this)||this;return o.repoInfo_=e,o.onDataUpdate_=n,o.authTokenProvider_=r,o.appCheckTokenProvider_=i,o.log_=C("p:rest:"),o.listens_={},o}return Object(o.c)(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(Object(i.d)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())},e.prototype.listen=function(t,n,r,o){var a=this,s=t._path.toString();this.log_("Listen called for "+s+" "+t._queryIdentifier);var u=e.getListenId_(t,r),c={};this.listens_[u]=c;var l=_e(t._queryParams);this.restRequest_(s+".json",l,function(t,e){var n=e;404===t&&(n=null,t=null),null===t&&a.onDataUpdate_(s,n,!1,r),Object(i.E)(a.listens_,u)===c&&o(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)})},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.get=function(t){var e=this,n=_e(t._queryParams),r=t._path.toString(),o=new i.a;return this.restRequest_(r+".json",n,function(t,n){var i=n;404===t&&(i=null,t=null),null===t?(e.onDataUpdate_(r,i,!1,null),o.resolve(i)):o.reject(new Error(i))}),o.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;return void 0===e&&(e={}),e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(function(a){var s=Object(o.e)(a,2),u=s[0],c=s[1];u&&u.accessToken&&(e.auth=u.accessToken),c&&c.token&&(e.ac=c.token);var l=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+Object(i.D)(e);r.log_("Sending REST request for "+l);var h=new XMLHttpRequest;h.onreadystatechange=function(){if(n&&4===h.readyState){r.log_("REST Response for "+l+" received. status:",h.status,"response:",h.responseText);var t=null;if(h.status>=200&&h.status<300){try{t=Object(i.B)(h.responseText)}catch(e){S("Failed to parse JSON response for "+l+": "+h.responseText)}n(null,t)}else 401!==h.status&&404!==h.status&&S("Got unsuccessful REST response for "+l+" Status: "+h.status),n(h.status);n=null}},h.open("GET",l,!0),h.send()})},e}(it),Ce=function(){function t(){this.rootNode_=Zt.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}();function Oe(){return{value:null,children:new Map}}function Ee(t,e,n){if(yt(e))t.value=n,t.children.clear();else if(null!==t.value)t.value=t.value.updateChild(e,n);else{var r=ct(e);t.children.has(r)||t.children.set(r,Oe()),Ee(t.children.get(r),e=ht(e),n)}}function Se(t,e){if(yt(e))return t.value=null,t.children.clear(),!0;if(null!==t.value){if(t.value.isLeafNode())return!1;var n=t.value;return t.value=null,n.forEachChild(Wt,function(e,n){Ee(t,new st(e),n)}),Se(t,e)}if(t.children.size>0){var r=ct(e);return e=ht(e),t.children.has(r)&&Se(t.children.get(r),e)&&t.children.delete(r),0===t.children.size}return!0}function Ie(t,e,n){null!==t.value?n(e,t.value):function(t,e){t.children.forEach(function(t,n){e(n,t)})}(t,function(t,r){Ie(r,new st(e.toString()+"/"+t),n)})}var Te=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=Object(o.a)({},t);return this.last_&&R(this.last_,function(t,n){e[t]=e[t]-n}),this.last_=t,e},t}(),xe=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Te(t);var n=1e4+2e4*Math.random();U(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;R(e,function(e,o){o>0&&Object(i.h)(t.statsToReport_,e)&&(n[e]=o,r=!0)}),r&&this.server_.reportStats(n),U(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),Ae=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}({});function je(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var Pe,Ne=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=Ae.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return t.prototype.operationForChild=function(e){if(yt(this.path)){if(null!=this.affectedTree.value)return Object(i.d)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new st(e));return new t(ut(),n,this.revert)}return Object(i.d)(ct(this.path)===e,"operationForChild called for unrelated child."),new t(ht(this.path),this.affectedTree,this.revert)},t}(),De=function(){function t(t,e){this.source=t,this.path=e,this.type=Ae.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return yt(this.path)?new t(this.source,ut()):new t(this.source,ht(this.path))},t}(),Re=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=Ae.OVERWRITE}return t.prototype.operationForChild=function(e){return yt(this.path)?new t(this.source,ut(),this.snap.getImmediateChild(e)):new t(this.source,ht(this.path),this.snap)},t}(),Le=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=Ae.MERGE}return t.prototype.operationForChild=function(e){if(yt(this.path)){var n=this.children.subtree(new st(e));return n.isEmpty()?null:n.value?new Re(this.source,ut(),n.value):new t(this.source,ut(),n)}return Object(i.d)(ct(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,ht(this.path),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),Me=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(yt(t))return this.isFullyInitialized()&&!this.filtered_;var e=ct(t);return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),Fe=function(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()};function Ve(t,e,n,r,o,a){var s=r.filter(function(t){return t.type===n});s.sort(function(e,n){return function(t,e,n){if(null==e.childName||null==n.childName)throw Object(i.e)("Should only compare child_ events.");var r=new Tt(e.childName,e.snapshotNode),o=new Tt(n.childName,n.snapshotNode);return t.index_.compare(r,o)}(t,e,n)}),s.forEach(function(n){var r=function(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}(t,n,a);o.forEach(function(i){i.respondsTo(n.type)&&e.push(i.createEvent(r,t.query_))})})}function Ue(t,e){return{eventCache:t,serverCache:e}}function qe(t,e,n,r){return Ue(new Me(e,n,r),t.serverCache)}function Be(t,e,n,r){return Ue(t.eventCache,new Me(e,n,r))}function He(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Ke(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var ze=function(){function t(t,e){void 0===e&&(Pe||(Pe=new Rt(j)),e=Pe),this.value=t,this.children=e}return t.fromObject=function(e){var n=new t(null);return R(e,function(t,e){n=n.set(new st(t),e)}),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:ut(),value:this.value};if(yt(t))return null;var n=ct(t),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(ht(t),e);return null!=i?{path:vt(new st(n),i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},t.prototype.subtree=function(e){if(yt(e))return this;var n=ct(e),r=this.children.get(n);return null!==r?r.subtree(ht(e)):new t(null)},t.prototype.set=function(e,n){if(yt(e))return new t(n,this.children);var r=ct(e),i=(this.children.get(r)||new t(null)).set(ht(e),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(yt(e))return this.children.isEmpty()?new t(null):new t(null,this.children);var n=ct(e),r=this.children.get(n);if(r){var i=r.remove(ht(e)),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new t(null):new t(this.value,o)}return this},t.prototype.get=function(t){if(yt(t))return this.value;var e=ct(t),n=this.children.get(e);return n?n.get(ht(t)):null},t.prototype.setTree=function(e,n){if(yt(e))return n;var r,i=ct(e),o=(this.children.get(i)||new t(null)).setTree(ht(e),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new t(this.value,r)},t.prototype.fold=function(t){return this.fold_(ut(),t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal(function(r,i){n[r]=i.fold_(vt(t,r),e)}),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,ut(),e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(yt(t))return null;var i=ct(t),o=this.children.get(i);return o?o.findOnPath_(ht(t),vt(e,i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,ut(),e)},t.prototype.foreachOnPath_=function(e,n,r){if(yt(e))return this;this.value&&r(n,this.value);var i=ct(e),o=this.children.get(i);return o?o.foreachOnPath_(ht(e),vt(n,i),r):new t(null)},t.prototype.foreach=function(t){this.foreach_(ut(),t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal(function(n,r){r.foreach_(vt(t,n),e)}),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal(function(e,n){n.value&&t(e,n.value)})},t}(),We=function(){function t(t){this.writeTree_=t}return t.empty=function(){return new t(new ze(null))},t}();function Ge(t,e,n){if(yt(e))return new We(new ze(n));var r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,a=gt(i,e);return o=o.updateChild(a,n),new We(t.writeTree_.set(i,o))}var s=new ze(n),u=t.writeTree_.setTree(e,s);return new We(u)}function Qe(t,e,n){var r=t;return R(n,function(t,n){r=Ge(r,vt(e,t),n)}),r}function Ye(t,e){if(yt(e))return We.empty();var n=t.writeTree_.setTree(e,new ze(null));return new We(n)}function Je(t,e){return null!=Xe(t,e)}function Xe(t,e){var n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(gt(n.path,e)):null}function Ze(t){var e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Wt,function(t,n){e.push(new Tt(t,n))}):t.writeTree_.children.inorderTraversal(function(t,n){null!=n.value&&e.push(new Tt(t,n.value))}),e}function $e(t,e){if(yt(e))return t;var n=Xe(t,e);return new We(null!=n?new ze(n):t.writeTree_.subtree(e))}function tn(t){return t.writeTree_.isEmpty()}function en(t,e){return nn(ut(),t.writeTree_,e)}function nn(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);var r=null;return e.children.inorderTraversal(function(e,o){".priority"===e?(Object(i.d)(null!==o.value,"Priority writes must always be leaf nodes"),r=o.value):n=nn(vt(t,e),o,n)}),n.getChild(t).isEmpty()||null===r||(n=n.updateChild(vt(t,".priority"),r)),n}function rn(t,e){return vn(e,t)}function on(t,e){if(t.snap)return _t(t.path,e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&_t(vt(t.path,n),e))return!0;return!1}function an(t){return t.visible}function sn(t,e,n){for(var r=We.empty(),o=0;o<t.length;++o){var a=t[o];if(e(a)){var s=a.path,u=void 0;if(a.snap)_t(n,s)?r=Ge(r,u=gt(n,s),a.snap):_t(s,n)&&(u=gt(s,n),r=Ge(r,ut(),a.snap.getChild(u)));else{if(!a.children)throw Object(i.e)("WriteRecord should have .snap or .children");if(_t(n,s))r=Qe(r,u=gt(n,s),a.children);else if(_t(s,n))if(yt(u=gt(s,n)))r=Qe(r,ut(),a.children);else{var c=Object(i.E)(a.children,ct(u));if(c){var l=c.getChild(ht(u));r=Ge(r,ut(),l)}}}}}return r}function un(t,e,n,r,i){if(r||i){var o=$e(t.visibleWrites,e);return!i&&tn(o)?n:i||null!=n||Je(o,ut())?en(sn(t.allWrites,function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(_t(t.path,e)||_t(e,t.path))},e),n||Zt.EMPTY_NODE):null}var a=Xe(t.visibleWrites,e);if(null!=a)return a;var s=$e(t.visibleWrites,e);return tn(s)?n:null!=n||Je(s,ut())?en(s,n||Zt.EMPTY_NODE):null}function cn(t,e,n,r){return un(t.writeTree,t.treePath,e,n,r)}function ln(t,e){return function(t,e,n){var r=Zt.EMPTY_NODE,i=Xe(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Wt,function(t,e){r=r.updateImmediateChild(t,e)}),r;if(n){var o=$e(t.visibleWrites,e);return n.forEachChild(Wt,function(t,e){var n=en($e(o,new st(t)),e);r=r.updateImmediateChild(t,n)}),Ze(o).forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r}return Ze($e(t.visibleWrites,e)).forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r}(t.writeTree,t.treePath,e)}function hn(t,e,n,r){return function(t,e,n,r,o){Object(i.d)(r||o,"Either existingEventSnap or existingServerSnap must exist");var a=vt(e,n);if(Je(t.visibleWrites,a))return null;var s=$e(t.visibleWrites,a);return tn(s)?o.getChild(n):en(s,o.getChild(n))}(t.writeTree,t.treePath,e,n,r)}function fn(t,e){return function(t,e){return Xe(t.visibleWrites,e)}(t.writeTree,vt(t.treePath,e))}function dn(t,e,n){return function(t,e,n,r){var i=vt(e,n),o=Xe(t.visibleWrites,i);return null!=o?o:r.isCompleteForChild(n)?en($e(t.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(t.writeTree,t.treePath,e,n)}function pn(t,e){return vn(vt(t.treePath,e),t.writeTree)}function vn(t,e){return{treePath:t,writeTree:e}}var yn=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;Object(i.d)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),Object(i.d)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var o=r.type;if("child_added"===e&&"child_removed"===o)this.changeMap.set(n,fe(n,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===o)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===o)this.changeMap.set(n,he(n,r.oldSnap));else if("child_changed"===e&&"child_added"===o)this.changeMap.set(n,le(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==o)throw Object(i.e)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,fe(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),gn=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),mn=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new Me(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return dn(this.writes_,t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Ke(this.viewCache_),i=function(t,e,n,r,i,o){return function(t,e,n,r,i,o,a){var s,u=$e(t.visibleWrites,e),c=Xe(u,ut());if(null!=c)s=c;else{if(null==n)return[];s=en(u,n)}if((s=s.withIndex(a)).isEmpty()||s.isLeafNode())return[];for(var l=[],h=a.getCompare(),f=o?s.getReverseIteratorFrom(r,a):s.getIteratorFrom(r,a),d=f.getNext();d&&l.length<1;)0!==h(d,r)&&l.push(d),d=f.getNext();return l}(t.writeTree,t.treePath,e,n,0,i,o)}(this.writes_,r,e,0,n,t);return 0===i.length?null:i[0]},t}();function bn(t,e,n,r,o,a){var s=e.eventCache;if(null!=fn(r,n))return e;var u=void 0,c=void 0;if(yt(n))if(Object(i.d)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){var l=Ke(e),h=ln(r,l instanceof Zt?l:Zt.EMPTY_NODE);u=t.filter.updateFullNode(e.eventCache.getNode(),h,a)}else{var f=cn(r,Ke(e));u=t.filter.updateFullNode(e.eventCache.getNode(),f,a)}else{var d=ct(n);if(".priority"===d){Object(i.d)(1===lt(n),"Can't have a priority with additional path components");var p=s.getNode(),v=hn(r,n,p,c=e.serverCache.getNode());u=null!=v?t.filter.updatePriority(p,v):s.getNode()}else{var y=ht(n),g=void 0;if(s.isCompleteForChild(d)){c=e.serverCache.getNode();var m=hn(r,n,s.getNode(),c);g=null!=m?s.getNode().getImmediateChild(d).updateChild(y,m):s.getNode().getImmediateChild(d)}else g=dn(r,d,e.serverCache);u=null!=g?t.filter.updateChild(s.getNode(),d,g,y,o,a):s.getNode()}}return qe(e,u,s.isFullyInitialized()||yt(n),t.filter.filtersNodes())}function _n(t,e,n,r,i,o,a,s){var u,c=e.serverCache,l=a?t.filter:t.filter.getIndexedFilter();if(yt(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),h,null)}else{var f=ct(n);if(!c.isCompleteForPath(n)&&lt(n)>1)return e;var d=ht(n),p=c.getNode().getImmediateChild(f).updateChild(d,r);u=".priority"===f?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),f,p,d,gn,null)}var v=Be(e,u,c.isFullyInitialized()||yt(n),l.filtersNodes());return bn(t,v,n,i,new mn(i,v,o),s)}function wn(t,e,n,r,i,o,a){var s,u,c=e.eventCache,l=new mn(i,e,o);if(yt(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,a),s=qe(e,u,!0,t.filter.filtersNodes());else{var h=ct(n);if(".priority"===h)u=t.filter.updatePriority(e.eventCache.getNode(),r),s=qe(e,u,c.isFullyInitialized(),c.isFiltered());else{var f=ht(n),d=c.getNode().getImmediateChild(h),p=void 0;if(yt(f))p=r;else{var v=l.getCompleteChild(h);p=null!=v?".priority"===ft(f)&&v.getChild(pt(f)).isEmpty()?v:v.updateChild(f,r):Zt.EMPTY_NODE}s=d.equals(p)?e:qe(e,t.filter.updateChild(c.getNode(),h,p,f,l,a),c.isFullyInitialized(),t.filter.filtersNodes())}}return s}function kn(t,e){return t.eventCache.isCompleteForChild(e)}function Cn(t,e,n){return n.foreach(function(t,n){e=e.updateChild(t,n)}),e}function On(t,e,n,r,i,o,a,s){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;var u,c=e;u=yt(n)?r:new ze(null).setTree(n,r);var l=e.serverCache.getNode();return u.children.inorderTraversal(function(n,r){if(l.hasChild(n)){var u=Cn(0,e.serverCache.getNode().getImmediateChild(n),r);c=_n(t,c,new st(n),u,i,o,a,s)}}),u.children.inorderTraversal(function(n,r){var u=!e.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!l.hasChild(n)&&!u){var h=Cn(0,e.serverCache.getNode().getImmediateChild(n),r);c=_n(t,c,new st(n),h,i,o,a,s)}}),c}var En,Sn=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n,r=this.query_._queryParams,i=new de(r.getIndex()),o=(n=r).loadsAllData()?new de(n.getIndex()):n.hasLimit()?new ve(n):new pe(n);this.processor_=function(t){return{filter:t}}(o);var a=e.serverCache,s=e.eventCache,u=i.updateFullNode(Zt.EMPTY_NODE,a.getNode(),null),c=o.updateFullNode(Zt.EMPTY_NODE,s.getNode(),null),l=new Me(u,a.isFullyInitialized(),i.filtersNodes()),h=new Me(c,s.isFullyInitialized(),o.filtersNodes());this.viewCache_=Ue(h,l),this.eventGenerator_=new Fe(this.query_)}return Object.defineProperty(t.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),t}();function In(t,e){var n=Ke(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!yt(e)&&!n.getImmediateChild(ct(e)).isEmpty())?n.getChild(e):null}function Tn(t){return 0===t.eventRegistrations_.length}function xn(t,e,n){var r=[];if(n){Object(i.d)(null==e,"A cancel should cancel all event registrations.");var o=t.query._path;t.eventRegistrations_.forEach(function(t){var e=t.createCancelEvent(n,o);e&&r.push(e)})}if(e){for(var a=[],s=0;s<t.eventRegistrations_.length;++s){var u=t.eventRegistrations_[s];if(u.matches(e)){if(e.hasAnyCallback()){a=a.concat(t.eventRegistrations_.slice(s+1));break}}else a.push(u)}t.eventRegistrations_=a}else t.eventRegistrations_=[];return r}function An(t,e,n,r){e.type===Ae.MERGE&&null!==e.source.queryId&&(Object(i.d)(Ke(t.viewCache_),"We should always have a full cache before handling merges"),Object(i.d)(He(t.viewCache_),"Missing event cache, even though we have a server cache"));var o,a,s=t.viewCache_,u=function(t,e,n,r,o){var a,s,u=new yn;if(n.type===Ae.OVERWRITE){var c=n;c.source.fromUser?a=wn(t,e,c.path,c.snap,r,o,u):(Object(i.d)(c.source.fromServer,"Unknown source."),s=c.source.tagged||e.serverCache.isFiltered()&&!yt(c.path),a=_n(t,e,c.path,c.snap,r,o,s,u))}else if(n.type===Ae.MERGE){var l=n;l.source.fromUser?a=function(t,e,n,r,i,o,a){var s=e;return r.foreach(function(r,u){var c=vt(n,r);kn(e,ct(c))&&(s=wn(t,s,c,u,i,o,a))}),r.foreach(function(r,u){var c=vt(n,r);kn(e,ct(c))||(s=wn(t,s,c,u,i,o,a))}),s}(t,e,l.path,l.children,r,o,u):(Object(i.d)(l.source.fromServer,"Unknown source."),s=l.source.tagged||e.serverCache.isFiltered(),a=On(t,e,l.path,l.children,r,o,s,u))}else if(n.type===Ae.ACK_USER_WRITE){var h=n;a=h.revert?function(t,e,n,r,o,a){var s;if(null!=fn(r,n))return e;var u=new mn(r,e,o),c=e.eventCache.getNode(),l=void 0;if(yt(n)||".priority"===ct(n)){var h=void 0;if(e.serverCache.isFullyInitialized())h=cn(r,Ke(e));else{var f=e.serverCache.getNode();Object(i.d)(f instanceof Zt,"serverChildren would be complete if leaf node"),h=ln(r,f)}l=t.filter.updateFullNode(c,h=h,a)}else{var d=ct(n),p=dn(r,d,e.serverCache);null==p&&e.serverCache.isCompleteForChild(d)&&(p=c.getImmediateChild(d)),(l=null!=p?t.filter.updateChild(c,d,p,ht(n),u,a):e.eventCache.getNode().hasChild(d)?t.filter.updateChild(c,d,Zt.EMPTY_NODE,ht(n),u,a):c).isEmpty()&&e.serverCache.isFullyInitialized()&&(s=cn(r,Ke(e))).isLeafNode()&&(l=t.filter.updateFullNode(l,s,a))}return s=e.serverCache.isFullyInitialized()||null!=fn(r,ut()),qe(e,l,s,t.filter.filtersNodes())}(t,e,h.path,r,o,u):function(t,e,n,r,i,o,a){if(null!=fn(i,n))return e;var s=e.serverCache.isFiltered(),u=e.serverCache;if(null!=r.value){if(yt(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return _n(t,e,n,u.getNode().getChild(n),i,o,s,a);if(yt(n)){var c=new ze(null);return u.getNode().forEachChild(jt,function(t,e){c=c.set(new st(t),e)}),On(t,e,n,c,i,o,s,a)}return e}var l=new ze(null);return r.foreach(function(t,e){var r=vt(n,t);u.isCompleteForPath(r)&&(l=l.set(t,u.getNode().getChild(r)))}),On(t,e,n,l,i,o,s,a)}(t,e,h.path,h.affectedTree,r,o,u)}else{if(n.type!==Ae.LISTEN_COMPLETE)throw Object(i.e)("Unknown operation type: "+n.type);a=function(t,e,n,r,i){var o=e.serverCache;return bn(t,Be(e,o.getNode(),o.isFullyInitialized()||yt(n),o.isFiltered()),n,r,gn,i)}(t,e,n.path,r,u)}var f=u.getChanges();return function(t,e,n){var r=e.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=He(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(ce(He(e)))}}(e,a,f),{viewCache:a,changes:f}}(t.processor_,s,e,n,r);return o=t.processor_,a=u.viewCache,Object(i.d)(a.eventCache.getNode().isIndexed(o.filter.getIndex()),"Event snap not indexed"),Object(i.d)(a.serverCache.getNode().isIndexed(o.filter.getIndex()),"Server snap not indexed"),Object(i.d)(u.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=u.viewCache,jn(t,u.changes,u.viewCache.eventCache.getNode(),null)}function jn(t,e,n,r){return function(t,e,n,r){var i=[],o=[];return e.forEach(function(e){"child_changed"===e.type&&t.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&o.push({type:"child_moved",snapshotNode:e.snapshotNode,childName:e.childName})}),Ve(t,i,"child_removed",e,r,n),Ve(t,i,"child_added",e,r,n),Ve(t,i,"child_moved",o,r,n),Ve(t,i,"child_changed",e,r,n),Ve(t,i,"value",e,r,n),i}(t.eventGenerator_,e,n,r?[r]:t.eventRegistrations_)}var Pn,Nn=function(){this.views=new Map};function Dn(t,e,n,r){var a,s,u=e.source.queryId;if(null!==u){var c=t.views.get(u);return Object(i.d)(null!=c,"SyncTree gave us an op for an invalid query."),An(c,e,n,r)}var l=[];try{for(var h=Object(o.g)(t.views.values()),f=h.next();!f.done;f=h.next())l=l.concat(An(c=f.value,e,n,r))}catch(d){a={error:d}}finally{try{f&&!f.done&&(s=h.return)&&s.call(h)}finally{if(a)throw a.error}}return l}function Rn(t,e,n,r,i){var o=t.views.get(e._queryIdentifier);if(!o){var a=cn(n,i?r:null),s=!1;a?s=!0:r instanceof Zt?(a=ln(n,r),s=!1):(a=Zt.EMPTY_NODE,s=!1);var u=Ue(new Me(a,s,!1),new Me(r,i,!1));return new Sn(e,u)}return o}function Ln(t){var e,n,r=[];try{for(var i=Object(o.g)(t.views.values()),a=i.next();!a.done;a=i.next()){var s=a.value;s.query._queryParams.loadsAllData()||r.push(s)}}catch(u){e={error:u}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function Mn(t,e){var n,r,i=null;try{for(var a=Object(o.g)(t.views.values()),s=a.next();!s.done;s=a.next())i=i||In(s.value,e)}catch(u){n={error:u}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return i}function Fn(t,e){return e._queryParams.loadsAllData()?qn(t):t.views.get(e._queryIdentifier)}function Vn(t,e){return null!=Fn(t,e)}function Un(t){return null!=qn(t)}function qn(t){var e,n;try{for(var r=Object(o.g)(t.views.values()),i=r.next();!i.done;i=r.next()){var a=i.value;if(a.query._queryParams.loadsAllData())return a}}catch(s){e={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return null}var Bn=1,Hn=function(t){this.listenProvider_=t,this.syncPointTree_=new ze(null),this.pendingWriteTree_={visibleWrites:We.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map};function Kn(t,e,n,r,o){return function(t,e,n,r,o){Object(i.d)(r>t.lastWriteId,"Stacking an older write on top of newer ones"),void 0===o&&(o=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:o}),o&&(t.visibleWrites=Ge(t.visibleWrites,e,n)),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r,o),o?Jn(t,new Re({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,n)):[]}function zn(t,e,n){void 0===n&&(n=!1);var r=function(t,e){for(var n=0;n<t.allWrites.length;n++){var r=t.allWrites[n];if(r.writeId===e)return r}return null}(t.pendingWriteTree_,e);if(function(t,e){var n=t.allWrites.findIndex(function(t){return t.writeId===e});Object(i.d)(n>=0,"removeWrite called with nonexistent writeId.");var r=t.allWrites[n];t.allWrites.splice(n,1);for(var o=r.visible,a=!1,s=t.allWrites.length-1;o&&s>=0;){var u=t.allWrites[s];u.visible&&(s>=n&&on(u,r.path)?o=!1:_t(r.path,u.path)&&(a=!0)),s--}return!!o&&(a?(function(t){t.visibleWrites=sn(t.allWrites,an,ut()),t.lastWriteId=t.allWrites.length>0?t.allWrites[t.allWrites.length-1].writeId:-1}(t),!0):(r.snap?t.visibleWrites=Ye(t.visibleWrites,r.path):R(r.children,function(e){t.visibleWrites=Ye(t.visibleWrites,vt(r.path,e))}),!0))}(t.pendingWriteTree_,e)){var o=new ze(null);return null!=r.snap?o=o.set(ut(),!0):R(r.children,function(t){o=o.set(new st(t),!0)}),Jn(t,new Ne(r.path,o,n))}return[]}function Wn(t,e,n){return Jn(t,new Re({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,n))}function Gn(t,e,n,r){var a=e._path,s=t.syncPointTree_.get(a),u=[];if(s&&("default"===e._queryIdentifier||Vn(s,e))){var c=function(t,e,n,r){var a,s,u=e._queryIdentifier,c=[],l=[],h=Un(t);if("default"===u)try{for(var f=Object(o.g)(t.views.entries()),d=f.next();!d.done;d=f.next()){var p,v=Object(o.e)(d.value,2),y=v[0];l=l.concat(xn(p=v[1],n,r)),Tn(p)&&(t.views.delete(y),p.query._queryParams.loadsAllData()||c.push(p.query))}}catch(g){a={error:g}}finally{try{d&&!d.done&&(s=f.return)&&s.call(f)}finally{if(a)throw a.error}}else(p=t.views.get(u))&&(l=l.concat(xn(p,n,r)),Tn(p)&&(t.views.delete(u),p.query._queryParams.loadsAllData()||c.push(p.query)));return h&&!Un(t)&&c.push(new(Object(i.d)(En,"Reference.ts has not been loaded"),En)(e._repo,e._path)),{removed:c,events:l}}(s,e,n,r);0===s.views.size&&(t.syncPointTree_=t.syncPointTree_.remove(a));var l=c.removed;u=c.events;var h=-1!==l.findIndex(function(t){return t._queryParams.loadsAllData()}),f=t.syncPointTree_.findOnPath(a,function(t,e){return Un(e)});if(h&&!f){var d=t.syncPointTree_.subtree(a);if(!d.isEmpty())for(var p=function(t){return t.fold(function(t,e,n){if(e&&Un(e))return[qn(e)];var r=[];return e&&(r=Ln(e)),R(n,function(t,e){r=r.concat(e)}),r})}(d),v=0;v<p.length;++v){var y=p[v],g=y.query,m=$n(t,y);t.listenProvider_.startListening(or(g),tr(t,g),m.hashFn,m.onComplete)}}!f&&l.length>0&&!r&&(h?t.listenProvider_.stopListening(or(e),null):l.forEach(function(e){var n=t.queryToTagMap.get(er(e));t.listenProvider_.stopListening(or(e),n)})),function(t,e){for(var n=0;n<e.length;++n){var r=e[n];if(!r._queryParams.loadsAllData()){var i=er(r),o=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(o)}}}(t,l)}return u}function Qn(t,e,n){var r=e._path,o=null,a=!1;t.syncPointTree_.foreachOnPath(r,function(t,e){var n=gt(t,r);o=o||Mn(e,n),a=a||Un(e)});var s,u=t.syncPointTree_.get(r);u?(a=a||Un(u),o=o||Mn(u,ut())):(u=new Nn,t.syncPointTree_=t.syncPointTree_.set(r,u)),null!=o?s=!0:(s=!1,o=Zt.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild(function(t,e){var n=Mn(e,ut());n&&(o=o.updateImmediateChild(t,n))}));var c=Vn(u,e);if(!c&&!e._queryParams.loadsAllData()){var l=er(e);Object(i.d)(!t.queryToTagMap.has(l),"View does not exist, but we have a tag");var h=Bn++;t.queryToTagMap.set(l,h),t.tagToQueryMap.set(h,l)}var f=function(t,e,n,r,i,o){var a=Rn(t,e,r,i,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,a),function(t,e){t.eventRegistrations_.push(e)}(a,n),function(t,e){var n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Wt,function(t,e){r.push(le(t,e))}),n.isFullyInitialized()&&r.push(ce(n.getNode())),jn(t,r,n.getNode(),e)}(a,n)}(u,e,n,rn(t.pendingWriteTree_,r),o,s);if(!c&&!a){var d=Fn(u,e);f=f.concat(function(t,e,n){var r=e._path,o=tr(t,e),a=$n(t,n),s=t.listenProvider_.startListening(or(e),o,a.hashFn,a.onComplete),u=t.syncPointTree_.subtree(r);if(o)Object(i.d)(!Un(u.value),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold(function(t,e,n){if(!yt(t)&&e&&Un(e))return[qn(e).query];var r=[];return e&&(r=r.concat(Ln(e).map(function(t){return t.query}))),R(n,function(t,e){r=r.concat(e)}),r}),l=0;l<c.length;++l){var h=c[l];t.listenProvider_.stopListening(or(h),tr(t,h))}return s}(t,e,d))}return f}function Yn(t,e,n){var r=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,function(t,n){var r=Mn(n,gt(t,e));if(r)return r});return un(r,e,i,n,!0)}function Jn(t,e){return Xn(e,t.syncPointTree_,null,rn(t.pendingWriteTree_,ut()))}function Xn(t,e,n,r){if(yt(t.path))return Zn(t,e,n,r);var i=e.get(ut());null==n&&null!=i&&(n=Mn(i,ut()));var o=[],a=ct(t.path),s=t.operationForChild(a),u=e.children.get(a);if(u&&s){var c=n?n.getImmediateChild(a):null,l=pn(r,a);o=o.concat(Xn(s,u,c,l))}return i&&(o=o.concat(Dn(i,t,r,n))),o}function Zn(t,e,n,r){var i=e.get(ut());null==n&&null!=i&&(n=Mn(i,ut()));var o=[];return e.children.inorderTraversal(function(e,i){var a=n?n.getImmediateChild(e):null,s=pn(r,e),u=t.operationForChild(e);u&&(o=o.concat(Zn(u,i,a,s)))}),i&&(o=o.concat(Dn(i,t,r,n))),o}function $n(t,e){var n=e.query,r=tr(t,n);return{hashFn:function(){return(function(t){return t.viewCache_.serverCache.getNode()}(e)||Zt.EMPTY_NODE).hash()},onComplete:function(e){if("ok"===e)return r?function(t,e,n){var r=nr(t,n);if(r){var i=rr(r),o=i.path,a=i.queryId,s=gt(o,e);return ir(t,o,new De(je(a),s))}return[]}(t,n._path,r):function(t,e){return Jn(t,new De({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(t,n._path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}(e,n);return Gn(t,n,null,i)}}}function tr(t,e){var n=er(e);return t.queryToTagMap.get(n)}function er(t){return t._path.toString()+"$"+t._queryIdentifier}function nr(t,e){return t.tagToQueryMap.get(e)}function rr(t){var e=t.indexOf("$");return Object(i.d)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new st(t.substr(0,e))}}function ir(t,e,n){var r=t.syncPointTree_.get(e);return Object(i.d)(r,"Missing sync point for query tag that we're tracking"),Dn(r,n,rn(t.pendingWriteTree_,e),null)}function or(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(Object(i.d)(Pn,"Reference.ts has not been loaded"),Pn)(t._repo,t._path):t}var ar=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),sr=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=vt(this.path_,e);return new t(this.syncTree_,n)},t.prototype.node=function(){return Yn(this.syncTree_,this.path_)},t}(),ur=function(t,e,n){return t&&"object"==typeof t?(Object(i.d)(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?cr(t[".sv"],e,n):"object"==typeof t[".sv"]?lr(t[".sv"],e):void Object(i.d)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},cr=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Object(i.d)(!1,"Unexpected server value: "+t)}},lr=function(t,e,n){t.hasOwnProperty("increment")||Object(i.d)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&Object(i.d)(!1,"Unexpected increment value: "+r);var o=e.node();if(Object(i.d)(null!=o,"Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return r;var a=o.getValue();return"number"!=typeof a?r:a+r},hr=function(t,e,n,r){return dr(e,new sr(n,t),r)},fr=function(t,e,n){return dr(t,new ar(e),n)};function dr(t,e,n){var r,i=t.getPriority().val(),o=ur(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var a=t,s=ur(a.getValue(),e,n);return s!==a.getValue()||o!==a.getPriority().val()?new zt(s,te(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new zt(o))),u.forEachChild(Wt,function(t,i){var o=dr(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))}),r}var pr=function(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n={children:{},childCount:0}),this.name=t,this.parent=e,this.node=n};function vr(t,e){for(var n=e instanceof st?e:new st(e),r=t,o=ct(n);null!==o;){var a=Object(i.E)(r.node.children,o)||{children:{},childCount:0};r=new pr(o,r,a),o=ct(n=ht(n))}return r}function yr(t){return t.node.value}function gr(t,e){t.node.value=e,kr(t)}function mr(t){return t.node.childCount>0}function br(t,e){R(t.node.children,function(n,r){e(new pr(n,t,r))})}function _r(t,e,n,r){n&&!r&&e(t),br(t,function(t){_r(t,e,!0,r)}),n&&r&&e(t)}function wr(t){return new st(null===t.parent?t.name:wr(t.parent)+"/"+t.name)}function kr(t){null!==t.parent&&function(t,e,n){var r=function(t){return void 0===yr(t)&&!mr(t)}(n),o=Object(i.h)(t.node.children,e);r&&o?(delete t.node.children[e],t.node.childCount--,kr(t)):r||o||(t.node.children[e]=n.node,t.node.childCount++,kr(t))}(t.parent,t.name,t)}var Cr=/[\[\].#$\/\u0000-\u001F\u007F]/,Or=/[\[\].#$\u0000-\u001F\u007F]/,Er=function(t){return"string"==typeof t&&0!==t.length&&!Cr.test(t)},Sr=function(t){return"string"==typeof t&&0!==t.length&&!Or.test(t)},Ir=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!I(t)||t&&"object"==typeof t&&Object(i.h)(t,".sv")},Tr=function(t,e,n,r){r&&void 0===e||xr(Object(i.m)(t,"value"),e,n)},xr=function t(e,n,r){var o=r instanceof st?new wt(r,e):r;if(void 0===n)throw new Error(e+"contains undefined "+Ct(o));if("function"==typeof n)throw new Error(e+"contains a function "+Ct(o)+" with contents = "+n.toString());if(I(n))throw new Error(e+"contains "+n.toString()+" "+Ct(o));if("string"==typeof n&&n.length>10485760/3&&Object(i.F)(n)>10485760)throw new Error(e+"contains a string greater than 10485760 utf8 bytes "+Ct(o)+" ('"+n.substring(0,50)+"...')");if(n&&"object"==typeof n){var a=!1,s=!1;if(R(n,function(n,r){if(".value"===n)a=!0;else if(".priority"!==n&&".sv"!==n&&(s=!0,!Er(n)))throw new Error(e+" contains an invalid key ("+n+") "+Ct(o)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var u,c;!function(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Object(i.F)(e),kt(t)}(o,n),t(e,r,o),c=(u=o).parts_.pop(),u.byteLength_-=Object(i.F)(c),u.parts_.length>0&&(u.byteLength_-=1)}),a&&s)throw new Error(e+' contains ".value" child '+Ct(o)+" in addition to actual children.")}},Ar=function(t,e,n,r){if(!r||void 0!==e){var o=Object(i.m)(t,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(o+" must be an object containing the children to replace.");var a=[];R(e,function(t,e){var r=new st(t);if(xr(o,e,vt(n,r)),".priority"===ft(r)&&!Ir(e))throw new Error(o+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(r)}),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=dt(r=e[n]),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!Er(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(mt);var a=null;for(n=0;n<e.length;n++){if(r=e[n],null!==a&&_t(a,r))throw new Error(t+"contains a path "+a.toString()+" that is ancestor of another path "+r.toString());a=r}}(o,a)}},jr=function(t,e,n){if(!n||void 0!==e){if(I(e))throw new Error(Object(i.m)(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Ir(e))throw new Error(Object(i.m)(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Pr=function(t,e,n){if(!n||void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Object(i.m)(t,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Nr=function(t,e,n,r){if(!(r&&void 0===n||Er(n)))throw new Error(Object(i.m)(t,e)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Dr=function(t,e,n,r){if(!(r&&void 0===n||Sr(n)))throw new Error(Object(i.m)(t,e)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Rr=function(t,e){if(".info"===ct(e))throw new Error(t+" failed = Can't modify data under /.info/")},Lr=function(t,e){var n=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!Er(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==n.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Sr(t)}(n))throw new Error(Object(i.m)(t,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Mr=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(Object(i.m)(t,e)+"must be a boolean.")},Fr=function(){this.eventLists_=[],this.recursionDepth_=0};function Vr(t,e){for(var n=null,r=0;r<e.length;r++){var i=e[r],o=i.getPath();null===n||bt(o,n.path)||(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function Ur(t,e,n){Vr(t,n),Br(t,function(t){return bt(t,e)})}function qr(t,e,n){Vr(t,n),Br(t,function(t){return _t(t,e)||_t(e,t)})}function Br(t,e){t.recursionDepth_++;for(var n=!0,r=0;r<t.eventLists_.length;r++){var i=t.eventLists_[r];i&&(e(i.path)?(Hr(t.eventLists_[r]),t.eventLists_[r]=null):n=!1)}n&&(t.eventLists_=[]),t.recursionDepth_--}function Hr(t){for(var e=0;e<t.events.length;e++){var n=t.events[e];if(null!==n){t.events[e]=null;var r=n.getEventRunner();b&&k("event: "+n.toString()),V(r)}}}var Kr=function(){function t(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Fr,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Oe(),this.transactionQueueTree_=new pr,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t}();function zr(t){var e=t.infoData_.getNode(new st(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function Wr(t){return(e=(e={timestamp:zr(t)})||{}).timestamp=e.timestamp||(new Date).getTime(),e;var e}function Gr(t,e,n,r,o){t.dataUpdateCount++;var a=new st(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;var s=[];if(o)if(r){var u=Object(i.C)(n,function(t){return te(t)});s=function(t,e,n,r){var i=nr(t,r);if(i){var o=rr(i),a=o.path,s=o.queryId,u=gt(a,e),c=ze.fromObject(n);return ir(t,a,new Le(je(s),u,c))}return[]}(t.serverSyncTree_,a,u,o)}else{var c=te(n);s=function(t,e,n,r){var i=nr(t,r);if(null!=i){var o=rr(i),a=o.path,s=o.queryId,u=gt(a,e);return ir(t,a,new Re(je(s),u,n))}return[]}(t.serverSyncTree_,a,c,o)}else if(r){var l=Object(i.C)(n,function(t){return te(t)});s=function(t,e,n){var r=ze.fromObject(n);return Jn(t,new Le({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(t.serverSyncTree_,a,l)}else{var h=te(n);s=Wn(t.serverSyncTree_,a,h)}var f=a;s.length>0&&(f=ai(t,a)),qr(t.eventQueue_,f,s)}function Qr(t,e){Yr(t,"connected",e),!1===e&&function(t){ni(t,"onDisconnectEvents");var e=Wr(t),n=Oe();Ie(t.onDisconnect_,ut(),function(r,i){var o=hr(r,i,t.serverSyncTree_,e);Ee(n,r,o)});var r=[];Ie(n,ut(),function(e,n){r=r.concat(Wn(t.serverSyncTree_,e,n));var i=hi(t,e);ai(t,i)}),t.onDisconnect_=Oe(),qr(t.eventQueue_,ut(),r)}(t)}function Yr(t,e,n){var r=new st("/.info/"+e),i=te(n);t.infoData_.updateSnapshot(r,i);var o=Wn(t.infoSyncTree_,r,i);qr(t.eventQueue_,r,o)}function Jr(t){return t.nextWriteId_++}function Xr(t,e,n,r,i){ni(t,"set",{path:e.toString(),value:n,priority:r});var o=Wr(t),a=te(n,r),s=Yn(t.serverSyncTree_,e),u=fr(a,s,o),c=Jr(t),l=Kn(t.serverSyncTree_,e,u,c,!0);Vr(t.eventQueue_,l),t.server_.put(e.toString(),a.val(!0),function(n,r){var o="ok"===n;o||S("set at "+e+" failed: "+n);var a=zn(t.serverSyncTree_,c,!o);qr(t.eventQueue_,e,a),ri(0,i,n,r)});var h=hi(t,e);ai(t,h),qr(t.eventQueue_,h,[])}function Zr(t,e,n){t.server_.onDisconnectCancel(e.toString(),function(r,i){"ok"===r&&Se(t.onDisconnect_,e),ri(0,n,r,i)})}function $r(t,e,n,r){var i=te(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),function(n,o){"ok"===n&&Ee(t.onDisconnect_,e,i),ri(0,r,n,o)})}function ti(t,e,n){var r;r=".info"===ct(e._path)?Gn(t.infoSyncTree_,e,n):Gn(t.serverSyncTree_,e,n),Ur(t.eventQueue_,e._path,r)}function ei(t){t.persistentConnection_&&t.persistentConnection_.interrupt("repo_interrupt")}function ni(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r="";t.persistentConnection_&&(r=t.persistentConnection_.id+":"),k.apply(void 0,Object(o.f)([r],Object(o.e)(e)))}function ri(t,e,n,r){e&&V(function(){if("ok"===n)e(null);else{var t=(n||"error").toUpperCase(),i=t;r&&(i+=": "+r);var o=new Error(i);o.code=t,e(o)}})}function ii(t,e,n){return Yn(t.serverSyncTree_,e,n)||Zt.EMPTY_NODE}function oi(t,e){if(void 0===e&&(e=t.transactionQueueTree_),e||li(t,e),yr(e)){var n=ui(t,e);Object(i.d)(n.length>0,"Sending zero length transaction queue"),n.every(function(t){return 0===t.status})&&function(t,e,n){for(var r=n.map(function(t){return t.currentWriteId}),o=ii(t,e,r),a=o,s=o.hash(),u=0;u<n.length;u++){var c=n[u];Object(i.d)(0===c.status,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=1,c.retryCount++;var l=gt(e,c.path);a=a.updateChild(l,c.currentOutputSnapshotRaw)}var h=a.val(!0),f=e;t.server_.put(f.toString(),h,function(r){ni(t,"transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var o=[],a=function(e){n[e].status=2,i=i.concat(zn(t.serverSyncTree_,n[e].currentWriteId)),n[e].onComplete&&o.push(function(){return n[e].onComplete(null,!0,n[e].currentOutputSnapshotResolved)}),n[e].unwatcher()},s=0;s<n.length;s++)a(s);for(li(t,vr(t.transactionQueueTree_,e)),oi(t,t.transactionQueueTree_),qr(t.eventQueue_,e,i),s=0;s<o.length;s++)V(o[s])}else{if("datastale"===r)for(s=0;s<n.length;s++)n[s].status=3===n[s].status?4:0;else for(S("transaction at "+f.toString()+" failed: "+r),s=0;s<n.length;s++)n[s].status=4,n[s].abortReason=r;ai(t,e)}},s)}(t,wr(e),n)}else mr(e)&&br(e,function(e){oi(t,e)})}function ai(t,e){var n=si(t,e),r=wr(n);return function(t,e,n){if(0!==e.length){for(var r=[],o=[],a=e.filter(function(t){return 0===t.status}).map(function(t){return t.currentWriteId}),s=function(s){var u,c=e[s],l=gt(n,c.path),h=!1;if(Object(i.d)(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)h=!0,u=c.abortReason,o=o.concat(zn(t.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=25)h=!0,u="maxretry",o=o.concat(zn(t.serverSyncTree_,c.currentWriteId,!0));else{var f=ii(t,c.path,a);c.currentInputSnapshot=f;var d=e[s].update(f.val());if(void 0!==d){xr("transaction failed: Data returned ",d,c.path);var p=te(d);"object"==typeof d&&null!=d&&Object(i.h)(d,".priority")||(p=p.updatePriority(f.getPriority()));var v=c.currentWriteId,y=Wr(t),g=fr(p,f,y);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=g,c.currentWriteId=Jr(t),a.splice(a.indexOf(v),1),o=(o=o.concat(Kn(t.serverSyncTree_,c.path,g,c.currentWriteId,c.applyLocally))).concat(zn(t.serverSyncTree_,v,!0))}else h=!0,u="nodata",o=o.concat(zn(t.serverSyncTree_,c.currentWriteId,!0))}qr(t.eventQueue_,n,o),o=[],h&&(e[s].status=2,setTimeout(e[s].unwatcher,Math.floor(0)),e[s].onComplete&&r.push("nodata"===u?function(){return e[s].onComplete(null,!1,e[s].currentInputSnapshot)}:function(){return e[s].onComplete(new Error(u),!1,null)}))},u=0;u<e.length;u++)s(u);for(li(t,t.transactionQueueTree_),u=0;u<r.length;u++)V(r[u]);oi(t,t.transactionQueueTree_)}}(t,ui(t,n),r),r}function si(t,e){var n,r=t.transactionQueueTree_;for(n=ct(e);null!==n&&void 0===yr(r);)r=vr(r,n),n=ct(e=ht(e));return r}function ui(t,e){var n=[];return ci(t,e,n),n.sort(function(t,e){return t.order-e.order}),n}function ci(t,e,n){var r=yr(e);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);br(e,function(e){ci(t,e,n)})}function li(t,e){var n=yr(e);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,gr(e,n.length>0?n:void 0)}br(e,function(e){li(t,e)})}function hi(t,e){var n=wr(si(t,e)),r=vr(t.transactionQueueTree_,e);return function(t,e,n){for(var r=t.parent;null!==r;){if(e(r))return!0;r=r.parent}}(r,function(e){fi(t,e)}),fi(t,r),_r(r,function(e){fi(t,e)}),n}function fi(t,e){var n=yr(e);if(n){for(var r=[],o=[],a=-1,s=0;s<n.length;s++)3===n[s].status||(1===n[s].status?(Object(i.d)(a===s-1,"All SENT items should be at beginning of queue."),a=s,n[s].status=3,n[s].abortReason="set"):(Object(i.d)(0===n[s].status,"Unexpected transaction status in abort"),n[s].unwatcher(),o=o.concat(zn(t.serverSyncTree_,n[s].currentWriteId,!0)),n[s].onComplete&&r.push(n[s].onComplete.bind(null,new Error("set"),!1,null))));for(-1===a?gr(e,void 0):n.length=a+1,qr(t.eventQueue_,wr(e),o),s=0;s<r.length;s++)V(r[s])}}var di=function(t,e){var n=pi(t),r=n.namespace;return"firebase.com"===n.domain&&E(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||E("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&S("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new z(n.host,n.secure,r,e,"ws"===n.scheme||"wss"===n.scheme,"",r!==n.subdomain),path:new st(n.pathString)}},pi=function(t){var e="",n="",r="",i="",a="",s=!0,u="https",c=443;if("string"==typeof t){var l=t.indexOf("//");l>=0&&(u=t.substring(0,l-1),t=t.substring(l+2));var h=t.indexOf("/");-1===h&&(h=t.length);var f=t.indexOf("?");-1===f&&(f=t.length),e=t.substring(0,Math.min(h,f)),h<f&&(i=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}e+="/"+i}return e}(t.substring(h,f)));var d=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=Object(o.g)(t.split("&")),a=i.next();!a.done;a=i.next()){var s=a.value;if(0!==s.length){var u=s.split("=");2===u.length?r[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):S("Invalid query segment '"+s+"' in query '"+t+"'")}}}catch(c){e={error:c}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,f)));(l=e.indexOf(":"))>=0?(s="https"===u||"wss"===u,c=parseInt(e.substring(l+1),10)):l=e.length;var p=e.slice(0,l);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var v=e.indexOf(".");r=e.substring(0,v).toLowerCase(),n=e.substring(v+1),a=r}"ns"in d&&(a=d.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:s,scheme:u,pathString:i,namespace:a}},vi=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Object(i.H)(this.snapshot.exportVal())},t}(),yi=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),gi=function(){function t(t,e){this.snapshotCallback=t,this.cancelCallback=e}return t.prototype.onValue=function(t,e){this.snapshotCallback.call(null,t,e)},t.prototype.onCancel=function(t){return Object(i.d)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)},Object.defineProperty(t.prototype,"hasCancelCallback",{get:function(){return!!this.cancelCallback},enumerable:!1,configurable:!0}),t.prototype.matches=function(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context},t}(),mi=function(){function t(t,e){this._repo=t,this._path=e}return t.prototype.cancel=function(){var t=new i.a;return Zr(this._repo,this._path,t.wrapCallback(function(){})),t.promise},t.prototype.remove=function(){Rr("OnDisconnect.remove",this._path);var t=new i.a;return $r(this._repo,this._path,null,t.wrapCallback(function(){})),t.promise},t.prototype.set=function(t){Rr("OnDisconnect.set",this._path),Tr("OnDisconnect.set",t,this._path,!1);var e=new i.a;return $r(this._repo,this._path,t,e.wrapCallback(function(){})),e.promise},t.prototype.setWithPriority=function(t,e){Rr("OnDisconnect.setWithPriority",this._path),Tr("OnDisconnect.setWithPriority",t,this._path,!1),jr("OnDisconnect.setWithPriority",e,!1);var n=new i.a;return function(t,e,n,r,i){var o=te(n,r);t.server_.onDisconnectPut(e.toString(),o.val(!0),function(n,r){"ok"===n&&Ee(t.onDisconnect_,e,o),ri(0,i,n,r)})}(this._repo,this._path,t,e,n.wrapCallback(function(){})),n.promise},t.prototype.update=function(t){Rr("OnDisconnect.update",this._path),Ar("OnDisconnect.update",t,this._path,!1);var e=new i.a;return function(t,e,n,r){if(Object(i.t)(n))return k("onDisconnect().update() called with empty data.  Don't do anything."),void ri(0,r,"ok",void 0);t.server_.onDisconnectMerge(e.toString(),n,function(i,o){"ok"===i&&R(n,function(n,r){var i=te(r);Ee(t.onDisconnect_,vt(e,n),i)}),ri(0,r,i,o)})}(this._repo,this._path,t,e.wrapCallback(function(){})),e.promise},t}(),bi=function(){function t(t,e,n,r){this._repo=t,this._path=e,this._queryParams=n,this._orderByCalled=r}return Object.defineProperty(t.prototype,"key",{get:function(){return yt(this._path)?null:ft(this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Ci(this._repo,this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryIdentifier",{get:function(){var t=we(this._queryParams),e=N(t);return"{}"===e?"default":e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryObject",{get:function(){return we(this._queryParams)},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){if(!((e=Object(i.n)(e))instanceof t))return!1;var n=this._repo===e._repo,r=bt(this._path,e._path);return n&&r&&this._queryIdentifier===e._queryIdentifier},t.prototype.toJSON=function(){return this.toString()},t.prototype.toString=function(){return this._repo.toString()+function(t){for(var e="",n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}(this._path)},t}();function _i(t,e){if(!0===t._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function wi(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===jt){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",o="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==T)throw new Error(r);if("string"!=typeof e)throw new Error(o)}if(t.hasEnd()){if(t.getIndexEndName()!==x)throw new Error(r);if("string"!=typeof n)throw new Error(o)}}else if(t.getIndex()===Wt){if(null!=e&&!Ir(e)||null!=n&&!Ir(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Object(i.d)(t.getIndex()instanceof re||t.getIndex()===ie,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function ki(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var Ci=function(t){function e(e,n){return t.call(this,e,n,new ye,!1)||this}return Object(o.c)(e,t),Object.defineProperty(e.prototype,"parent",{get:function(){var t=pt(this._path);return null===t?null:new e(this._repo,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){for(var t=this;null!==t.parent;)t=t.parent;return t},enumerable:!1,configurable:!0}),e}(bi),Oi=function(){function t(t,e,n){this._node=t,this.ref=e,this._index=n}return Object.defineProperty(t.prototype,"priority",{get:function(){return this._node.getPriority().val()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){return this.ref.key},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._node.numChildren()},enumerable:!1,configurable:!0}),t.prototype.child=function(e){var n=new st(e),r=Ii(this.ref,e);return new t(this._node.getChild(n),r,Wt)},t.prototype.exists=function(){return!this._node.isEmpty()},t.prototype.exportVal=function(){return this._node.val(!0)},t.prototype.forEach=function(e){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,function(r,i){return e(new t(i,Ii(n.ref,r),Wt))})},t.prototype.hasChild=function(t){var e=new st(t);return!this._node.getChild(e).isEmpty()},t.prototype.hasChildren=function(){return!this._node.isLeafNode()&&!this._node.isEmpty()},t.prototype.toJSON=function(){return this.exportVal()},t.prototype.val=function(){return this._node.val()},t}();function Ei(t,e){return(t=Object(i.n)(t))._checkNotDeleted("ref"),void 0!==e?Ii(t._root,e):t._root}function Si(t,e){(t=Object(i.n)(t))._checkNotDeleted("refFromURL");var n=di(e,t._repo.repoInfo_.nodeAdmin);Lr("refFromURL",n);var r=n.repoInfo;return t._repo.repoInfo_.isCustomHost()||r.host===t._repo.repoInfo_.host||E("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+t._repo.repoInfo_.host+")"),Ei(t,n.path.toString())}function Ii(t,e){var n;return null===ct((t=Object(i.n)(t))._path)?((n=e)&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Dr("child","path",n,!1)):Dr("child","path",e,!1),new Ci(t._repo,vt(t._path,e))}function Ti(t,e){t=Object(i.n)(t),Rr("push",t._path),Tr("push",e,t._path,!0);var n,r=zr(t._repo),o=ae(r),a=Ii(t,o),s=Ii(t,o);return n=null!=e?Ai(s,e).then(function(){return s}):Promise.resolve(s),a.then=n.then.bind(n),a.catch=n.then.bind(n,void 0),a}function xi(t){return Rr("remove",t._path),Ai(t,null)}function Ai(t,e){t=Object(i.n)(t),Rr("set",t._path),Tr("set",e,t._path,!1);var n=new i.a;return Xr(t._repo,t._path,e,null,n.wrapCallback(function(){})),n.promise}function ji(t,e){t=Object(i.n)(t),Rr("setPriority",t._path),jr("setPriority",e,!1);var n=new i.a;return Xr(t._repo,vt(t._path,".priority"),e,null,n.wrapCallback(function(){})),n.promise}function Pi(t,e,n){if(Rr("setWithPriority",t._path),Tr("setWithPriority",e,t._path,!1),jr("setWithPriority",n,!1),".length"===t.key||".keys"===t.key)throw"setWithPriority failed: "+t.key+" is a read-only object.";var r=new i.a;return Xr(t._repo,t._path,e,n,r.wrapCallback(function(){})),r.promise}function Ni(t,e){Ar("update",e,t._path,!1);var n=new i.a;return function(t,e,n,r){ni(t,"update",{path:e.toString(),value:n});var o=!0,a=Wr(t),s={};if(R(n,function(n,r){o=!1,s[n]=hr(vt(e,n),te(r),t.serverSyncTree_,a)}),o)k("update() called with empty data.  Don't do anything."),ri(0,r,"ok",void 0);else{var u=Jr(t),c=function(t,e,n,r){!function(t,e,n,r){Object(i.d)(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=Qe(t.visibleWrites,e,n),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r);var o=ze.fromObject(n);return Jn(t,new Le({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,o))}(t.serverSyncTree_,e,s,u);Vr(t.eventQueue_,c),t.server_.merge(e.toString(),n,function(n,i){var o="ok"===n;o||S("update at "+e+" failed: "+n);var a=zn(t.serverSyncTree_,u,!o),s=a.length>0?ai(t,e):e;qr(t.eventQueue_,s,a),ri(0,r,n,i)}),R(n,function(n){var r=hi(t,vt(e,n));ai(t,r)}),qr(t.eventQueue_,e,[])}}(t._repo,t._path,e,n.wrapCallback(function(){})),n.promise}var Di=function(){function t(t){this.callbackContext=t}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e._queryParams.getIndex();return new vi("value",this,new Oi(t.snapshotNode,new Ci(e._repo,e._path),n))},t.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,null)}},t.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new yi(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))},t.prototype.hasAnyCallback=function(){return null!==this.callbackContext},t}(),Ri=function(){function t(t,e){this.eventType=t,this.callbackContext=e}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return this.eventType===("children_removed"===e?"child_removed":e)},t.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new yi(this,t,e):null},t.prototype.createEvent=function(t,e){Object(i.d)(null!=t.childName,"Child events should have a childName.");var n=Ii(new Ci(e._repo,e._path),t.childName),r=e._queryParams.getIndex();return new vi(t.type,this,new Oi(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,t.prevName)}},t.prototype.matches=function(e){return e instanceof t&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))},t.prototype.hasAnyCallback=function(){return!!this.callbackContext},t}();function Li(t,e,n,r,i){var o;if("object"==typeof r&&(o=void 0,i=r),"function"==typeof r&&(o=r),i&&i.onlyOnce){var a=n,s=function(e,n){a(e,n),ti(t._repo,t,c)};s.userCallback=n.userCallback,s.context=n.context,n=s}var u=new gi(n,o||void 0),c="value"===e?new Di(u):new Ri(e,u);return function(t,e,n){var r;r=".info"===ct(e._path)?Qn(t.infoSyncTree_,e,n):Qn(t.serverSyncTree_,e,n),Ur(t.eventQueue_,e._path,r)}(t._repo,t,c),function(){return ti(t._repo,t,c)}}function Mi(t,e,n,r){return Li(t,"value",e,n,r)}function Fi(t,e,n,r){return Li(t,"child_added",e,n,r)}function Vi(t,e,n,r){return Li(t,"child_changed",e,n,r)}function Ui(t,e,n,r){return Li(t,"child_moved",e,n,r)}function qi(t,e,n,r){return Li(t,"child_removed",e,n,r)}function Bi(t,e,n){var r=null,i=n?new gi(n):null;"value"===e?r=new Di(i):e&&(r=new Ri(e,i)),ti(t._repo,t,r)}var Hi=function(){},Ki=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(o.c)(e,t),e.prototype._apply=function(t){Tr("endAt",this._value,t._path,!0);var e=me(t._queryParams,this._value,this._key);if(ki(e),wi(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new bi(t._repo,t._path,e,t._orderByCalled)},e}(Hi);function zi(t,e){return Nr("endAt","key",e,!0),new Ki(t,e)}var Wi=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(o.c)(e,t),e.prototype._apply=function(t){Tr("endBefore",this._value,t._path,!1);var e,n,r,i,o=(n=this._value,r=this._key,(e=t._queryParams).index_===jt?("string"==typeof n&&(n=ue(n)),i=me(e,n,r)):i=me(e,n,null==r?T:ue(r)),i.endBeforeSet_=!0,i);if(ki(o),wi(o),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new bi(t._repo,t._path,o,t._orderByCalled)},e}(Hi);function Gi(t,e){return Nr("endBefore","key",e,!0),new Wi(t,e)}var Qi=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(o.c)(e,t),e.prototype._apply=function(t){Tr("startAt",this._value,t._path,!0);var e=ge(t._queryParams,this._value,this._key);if(ki(e),wi(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new bi(t._repo,t._path,e,t._orderByCalled)},e}(Hi);function Yi(t,e){return void 0===t&&(t=null),Nr("startAt","key",e,!0),new Qi(t,e)}var Ji=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(o.c)(e,t),e.prototype._apply=function(t){Tr("startAfter",this._value,t._path,!1);var e,n,r,i,o=(n=this._value,r=this._key,(e=t._queryParams).index_===jt?("string"==typeof n&&(n=se(n)),i=ge(e,n,r)):i=ge(e,n,null==r?x:se(r)),i.startAfterSet_=!0,i);if(ki(o),wi(o),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new bi(t._repo,t._path,o,t._orderByCalled)},e}(Hi);function Xi(t,e){return Nr("startAfter","key",e,!0),new Ji(t,e)}var Zi=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return Object(o.c)(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new bi(t._repo,t._path,(e=this._limit,(n=t._queryParams.copy()).limitSet_=!0,n.limit_=e,n.viewFrom_="l",n),t._orderByCalled);var e,n},e}(Hi);function $i(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Zi(t)}var to=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return Object(o.c)(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new bi(t._repo,t._path,(e=this._limit,(n=t._queryParams.copy()).limitSet_=!0,n.limit_=e,n.viewFrom_="r",n),t._orderByCalled);var e,n},e}(Hi);function eo(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new to(t)}var no=function(t){function e(e){var n=t.call(this)||this;return n._path=e,n}return Object(o.c)(e,t),e.prototype._apply=function(t){_i(t,"orderByChild");var e=new st(this._path);if(yt(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new re(e),r=be(t._queryParams,n);return wi(r),new bi(t._repo,t._path,r,!0)},e}(Hi);function ro(t){if("$key"===t)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===t)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===t)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Dr("orderByChild","path",t,!1),new no(t)}var io=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.c)(e,t),e.prototype._apply=function(t){_i(t,"orderByKey");var e=be(t._queryParams,jt);return wi(e),new bi(t._repo,t._path,e,!0)},e}(Hi);function oo(){return new io}var ao=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.c)(e,t),e.prototype._apply=function(t){_i(t,"orderByPriority");var e=be(t._queryParams,Wt);return wi(e),new bi(t._repo,t._path,e,!0)},e}(Hi);function so(){return new ao}var uo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.c)(e,t),e.prototype._apply=function(t){_i(t,"orderByValue");var e=be(t._queryParams,ie);return wi(e),new bi(t._repo,t._path,e,!0)},e}(Hi);function co(){return new uo}var lo,ho=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(o.c)(e,t),e.prototype._apply=function(t){if(Tr("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Ki(this._value,this._key)._apply(new Qi(this._value,this._key)._apply(t))},e}(Hi);function fo(t,e){return Nr("equalTo","key",e,!0),new ho(t,e)}function po(t){for(var e,n,r=[],a=1;a<arguments.length;a++)r[a-1]=arguments[a];var s=Object(i.n)(t);try{for(var u=Object(o.g)(r),c=u.next();!c.done;c=u.next()){var l=c.value;s=l._apply(s)}}catch(h){e={error:h}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}return s}lo=Ci,Object(i.d)(!En,"__referenceConstructor has already been defined"),En=lo,function(t){Object(i.d)(!Pn,"__referenceConstructor has already been defined"),Pn=t}(Ci);var vo={},yo=!1;function go(t,e,n,r,i){var o=r||t.options.databaseURL;void 0===o&&(t.options.projectId||E("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),k("Using default host for project ",t.options.projectId),o=t.options.projectId+"-default-rtdb.firebaseio.com");var a,s=di(o,i),u=s.repoInfo,c=void 0;"undefined"!=typeof process&&(c=process.env.FIREBASE_DATABASE_EMULATOR_HOST),c?(a=!0,u=(s=di(o="http://"+c+"?ns="+u.namespace,i)).repoInfo):a=!s.repoInfo.secure;var l=i&&a?new H(H.OWNER):new B(t.name,t.options,e);Lr("Invalid Firebase Database URL",s),yt(s.path)||E("Database URL must point to the root of a Firebase Database (not including a child path).");var h=function(t,e,n,r){var i=vo[e.name];i||(vo[e.name]=i={});var o=i[t.toURLString()];return o&&E("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new Kr(t,yo,n,r),i[t.toURLString()]=o,o}(u,t,l,new q(t.name,n));return new mo(h,t)}var mo=function(){function t(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}return Object.defineProperty(t.prototype,"_repo",{get:function(){return this._instanceStarted||(function(t,e,n){if(t.stats_=J(t.repoInfo_),t.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)t.server_=new ke(t.repoInfo_,function(e,n,r,i){Gr(t,e,n,r,i)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(function(){return Qr(t,!0)},0);else{if(null!=n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Object(i.H)(n)}catch(a){throw new Error("Invalid authOverride provided: "+a)}}t.persistentConnection_=new It(t.repoInfo_,e,function(e,n,r,i){Gr(t,e,n,r,i)},function(e){Qr(t,e)},function(e){!function(t,e){R(e,function(e,n){Yr(t,e,n)})}(t,e)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}var r,o;t.authTokenProvider_.addTokenChangeListener(function(e){t.server_.refreshAuthToken(e)}),t.appCheckProvider_.addTokenChangeListener(function(e){t.server_.refreshAppCheckToken(e.token)}),t.statsReporter_=(r=function(){return new xe(t.stats_,t.server_)},o=t.repoInfo_.toString(),Y[o]||(Y[o]=r()),Y[o]),t.infoData_=new Ce,t.infoSyncTree_=new Hn({startListening:function(e,n,r,i){var o=[],a=t.infoData_.getNode(e._path);return a.isEmpty()||(o=Wn(t.infoSyncTree_,e._path,a),setTimeout(function(){i("ok")},0)),o},stopListening:function(){}}),Yr(t,"connected",!1),t.serverSyncTree_=new Hn({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,function(n,r){var o=i(n,r);qr(t.eventQueue_,e._path,o)}),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_root",{get:function(){return this._rootInternal||(this._rootInternal=new Ci(this._repo,ut())),this._rootInternal},enumerable:!1,configurable:!0}),t.prototype._delete=function(){var t,e,n;return this._checkNotDeleted("delete"),t=this._repo,(n=vo[e=this.app.name])&&n[t.key]===t||E("Database "+e+"("+t.repoInfo_+") has already been deleted."),ei(t),delete n[t.key],this._repoInternal=null,this._rootInternal=null,Promise.resolve()},t.prototype._checkNotDeleted=function(t){null===this._rootInternal&&E("Cannot call "+t+" on a deleted database.")},t}();function bo(t){(t=Object(i.n)(t))._checkNotDeleted("goOffline"),ei(t._repo)}function _o(t){var e;(t=Object(i.n)(t))._checkNotDeleted("goOnline"),(e=t._repo).persistentConnection_&&e.persistentConnection_.resume("repo_interrupt")}var wo={".sv":"timestamp"},ko=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}();function Co(t,e,n){var r;if(t=Object(i.n)(t),Rr("Reference.transaction",t._path),".length"===t.key||".keys"===t.key)throw"Reference.transaction failed: "+t.key+" is a read-only object.";var o=null===(r=null==n?void 0:n.applyLocally)||void 0===r||r,a=new i.a,s=Mi(t,function(){});return function(e,n,r,o,s,u){ni(e,"transaction on "+n);var c={path:n,update:r,onComplete:function(e,n,r){var i=null;e?a.reject(e):(i=new Oi(r,new Ci(t._repo,t._path),Wt),a.resolve(new ko(n,i)))},status:null,order:y(),applyLocally:u,retryCount:0,unwatcher:s,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},l=ii(e,n,void 0);c.currentInputSnapshot=l;var h=c.update(l.val());if(void 0===h)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{xr("transaction failed: Data returned ",h,c.path),c.status=0;var f=vr(e.transactionQueueTree_,n),d=yr(f)||[];d.push(c),gr(f,d);var p=void 0;"object"==typeof h&&null!==h&&Object(i.h)(h,".priority")?(p=Object(i.E)(h,".priority"),Object(i.d)(Ir(p),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):p=(Yn(e.serverSyncTree_,n)||Zt.EMPTY_NODE).getPriority().val();var v=Wr(e),g=te(h,p),m=fr(g,l,v);c.currentOutputSnapshotRaw=g,c.currentOutputSnapshotResolved=m,c.currentWriteId=Jr(e);var b=Kn(e.serverSyncTree_,n,m,c.currentWriteId,c.applyLocally);qr(e.eventQueue_,n,b),oi(e,e.transactionQueueTree_)}}(t._repo,t._path,e,0,s,o),a.promise}var Oo=function(){function t(t){this._delegate=t}return t.prototype.cancel=function(t){Object(i.I)("OnDisconnect.cancel",0,1,arguments.length),Object(i.J)("OnDisconnect.cancel","onComplete",t,!0);var e=this._delegate.cancel();return t&&e.then(function(){return t(null)},function(e){return t(e)}),e},t.prototype.remove=function(t){Object(i.I)("OnDisconnect.remove",0,1,arguments.length),Object(i.J)("OnDisconnect.remove","onComplete",t,!0);var e=this._delegate.remove();return t&&e.then(function(){return t(null)},function(e){return t(e)}),e},t.prototype.set=function(t,e){Object(i.I)("OnDisconnect.set",1,2,arguments.length),Object(i.J)("OnDisconnect.set","onComplete",e,!0);var n=this._delegate.set(t);return e&&n.then(function(){return e(null)},function(t){return e(t)}),n},t.prototype.setWithPriority=function(t,e,n){Object(i.I)("OnDisconnect.setWithPriority",2,3,arguments.length),Object(i.J)("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(t,e);return n&&r.then(function(){return n(null)},function(t){return n(t)}),r},t.prototype.update=function(t,e){if(Object(i.I)("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,S("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Object(i.J)("OnDisconnect.update","onComplete",e,!0);var o=this._delegate.update(t);return e&&o.then(function(){return e(null)},function(t){return e(t)}),o},t}(),Eo=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return Object(i.I)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),So=function(){function t(t,e){this._database=t,this._delegate=e}return t.prototype.val=function(){return Object(i.I)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()},t.prototype.exportVal=function(){return Object(i.I)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()},t.prototype.toJSON=function(){return Object(i.I)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.exists=function(){return Object(i.I)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()},t.prototype.child=function(e){return Object(i.I)("DataSnapshot.child",0,1,arguments.length),e=String(e),Dr("DataSnapshot.child","path",e,!1),new t(this._database,this._delegate.child(e))},t.prototype.hasChild=function(t){return Object(i.I)("DataSnapshot.hasChild",1,1,arguments.length),Dr("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)},t.prototype.getPriority=function(){return Object(i.I)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority},t.prototype.forEach=function(e){var n=this;return Object(i.I)("DataSnapshot.forEach",1,1,arguments.length),Object(i.J)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(function(r){return e(new t(n._database,r))})},t.prototype.hasChildren=function(){return Object(i.I)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()},Object.defineProperty(t.prototype,"key",{get:function(){return this._delegate.key},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return Object(i.I)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size},t.prototype.getRef=function(){return Object(i.I)("DataSnapshot.ref",0,0,arguments.length),new To(this._database,this._delegate.ref)},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),Io=function(){function t(t,e){this.database=t,this._delegate=e}return t.prototype.on=function(e,n,r,o){var a,s=this;Object(i.I)("Query.on",2,4,arguments.length),Object(i.J)("Query.on","callback",n,!1);var u=t.getCancelAndContextArgs_("Query.on",r,o),c=function(t,e){n.call(u.context,new So(s.database,t),e)};c.userCallback=n,c.context=u.context;var l=null===(a=u.cancel)||void 0===a?void 0:a.bind(u.context);switch(e){case"value":return Mi(this._delegate,c,l),n;case"child_added":return Fi(this._delegate,c,l),n;case"child_removed":return qi(this._delegate,c,l),n;case"child_changed":return Vi(this._delegate,c,l),n;case"child_moved":return Ui(this._delegate,c,l),n;default:throw new Error(Object(i.m)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},t.prototype.off=function(t,e,n){if(Object(i.I)("Query.off",0,3,arguments.length),Pr("Query.off",t,!0),Object(i.J)("Query.off","callback",e,!0),Object(i.K)("Query.off","context",n,!0),e){var r=function(){};r.userCallback=e,r.context=n,Bi(this._delegate,t,r)}else Bi(this._delegate,t)},t.prototype.get=function(){var t=this;return function(t){return function(t,e){var n=function(t,e){var n=e._path,r=null;t.syncPointTree_.foreachOnPath(n,function(t,e){var i=gt(t,n);r=r||Mn(e,i)});var i=t.syncPointTree_.get(n);i?r=r||Mn(i,ut()):(i=new Nn,t.syncPointTree_=t.syncPointTree_.set(n,i));var o=null!=r,a=o?new Me(r,!0,!1):null;return He(Rn(i,e,rn(t.pendingWriteTree_,e._path),o?a.getNode():Zt.EMPTY_NODE,o).viewCache_)}(t.serverSyncTree_,e);return null!=n?Promise.resolve(n):t.server_.get(e).then(function(n){var r=te(n),i=Wn(t.serverSyncTree_,e._path,r);return Ur(t.eventQueue_,e._path,i),Promise.resolve(r)},function(n){return ni(t,"get for query "+Object(i.H)(e)+" failed: "+n),Promise.reject(new Error(n))})}((t=Object(i.n)(t))._repo,t).then(function(e){return new Oi(e,new Ci(t._repo,t._path),t._queryParams.getIndex())})}(this._delegate).then(function(e){return new So(t.database,e)})},t.prototype.once=function(e,n,r,o){var a=this;Object(i.I)("Query.once",1,4,arguments.length),Object(i.J)("Query.once","callback",n,!0);var s=t.getCancelAndContextArgs_("Query.on",r,o),u=new i.a,c=function(t,e){var r=new So(a.database,t);n&&n.call(s.context,r,e),u.resolve(r)};c.userCallback=n,c.context=s.context;var l=function(t){s.cancel&&s.cancel.call(s.context,t),u.reject(t)};switch(e){case"value":Mi(this._delegate,c,l,{onlyOnce:!0});break;case"child_added":Fi(this._delegate,c,l,{onlyOnce:!0});break;case"child_removed":qi(this._delegate,c,l,{onlyOnce:!0});break;case"child_changed":Vi(this._delegate,c,l,{onlyOnce:!0});break;case"child_moved":Ui(this._delegate,c,l,{onlyOnce:!0});break;default:throw new Error(Object(i.m)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise},t.prototype.limitToFirst=function(e){return Object(i.I)("Query.limitToFirst",1,1,arguments.length),new t(this.database,po(this._delegate,$i(e)))},t.prototype.limitToLast=function(e){return Object(i.I)("Query.limitToLast",1,1,arguments.length),new t(this.database,po(this._delegate,eo(e)))},t.prototype.orderByChild=function(e){return Object(i.I)("Query.orderByChild",1,1,arguments.length),new t(this.database,po(this._delegate,ro(e)))},t.prototype.orderByKey=function(){return Object(i.I)("Query.orderByKey",0,0,arguments.length),new t(this.database,po(this._delegate,oo()))},t.prototype.orderByPriority=function(){return Object(i.I)("Query.orderByPriority",0,0,arguments.length),new t(this.database,po(this._delegate,so()))},t.prototype.orderByValue=function(){return Object(i.I)("Query.orderByValue",0,0,arguments.length),new t(this.database,po(this._delegate,co()))},t.prototype.startAt=function(e,n){return void 0===e&&(e=null),Object(i.I)("Query.startAt",0,2,arguments.length),new t(this.database,po(this._delegate,Yi(e,n)))},t.prototype.startAfter=function(e,n){return void 0===e&&(e=null),Object(i.I)("Query.startAfter",0,2,arguments.length),new t(this.database,po(this._delegate,Xi(e,n)))},t.prototype.endAt=function(e,n){return void 0===e&&(e=null),Object(i.I)("Query.endAt",0,2,arguments.length),new t(this.database,po(this._delegate,zi(e,n)))},t.prototype.endBefore=function(e,n){return void 0===e&&(e=null),Object(i.I)("Query.endBefore",0,2,arguments.length),new t(this.database,po(this._delegate,Gi(e,n)))},t.prototype.equalTo=function(e,n){return Object(i.I)("Query.equalTo",1,2,arguments.length),new t(this.database,po(this._delegate,fo(e,n)))},t.prototype.toString=function(){return Object(i.I)("Query.toString",0,0,arguments.length),this._delegate.toString()},t.prototype.toJSON=function(){return Object(i.I)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.isEqual=function(e){if(Object(i.I)("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(e._delegate)},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:void 0,context:void 0};if(e&&n)r.cancel=e,Object(i.J)(t,"cancel",r.cancel,!0),r.context=n,Object(i.K)(t,"context",r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(Object(i.m)(t,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return new To(this.database,new Ci(this._delegate._repo,this._delegate._path))},enumerable:!1,configurable:!0}),t}(),To=function(t){function e(e,n){var r=t.call(this,e,new bi(n._repo,n._path,new ye,!1))||this;return r.database=e,r._delegate=n,r}return Object(o.c)(e,t),e.prototype.getKey=function(){return Object(i.I)("Reference.key",0,0,arguments.length),this._delegate.key},e.prototype.child=function(t){return Object(i.I)("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new e(this.database,Ii(this._delegate,t))},e.prototype.getParent=function(){Object(i.I)("Reference.parent",0,0,arguments.length);var t=this._delegate.parent;return t?new e(this.database,t):null},e.prototype.getRoot=function(){return Object(i.I)("Reference.root",0,0,arguments.length),new e(this.database,this._delegate.root)},e.prototype.set=function(t,e){Object(i.I)("Reference.set",1,2,arguments.length),Object(i.J)("Reference.set","onComplete",e,!0);var n=Ai(this._delegate,t);return e&&n.then(function(){return e(null)},function(t){return e(t)}),n},e.prototype.update=function(t,e){if(Object(i.I)("Reference.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,S("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Rr("Reference.update",this._delegate._path),Object(i.J)("Reference.update","onComplete",e,!0);var o=Ni(this._delegate,t);return e&&o.then(function(){return e(null)},function(t){return e(t)}),o},e.prototype.setWithPriority=function(t,e,n){Object(i.I)("Reference.setWithPriority",2,3,arguments.length),Object(i.J)("Reference.setWithPriority","onComplete",n,!0);var r=Pi(this._delegate,t,e);return n&&r.then(function(){return n(null)},function(t){return n(t)}),r},e.prototype.remove=function(t){Object(i.I)("Reference.remove",0,1,arguments.length),Object(i.J)("Reference.remove","onComplete",t,!0);var e=xi(this._delegate);return t&&e.then(function(){return t(null)},function(e){return t(e)}),e},e.prototype.transaction=function(t,e,n){var r=this;Object(i.I)("Reference.transaction",1,3,arguments.length),Object(i.J)("Reference.transaction","transactionUpdate",t,!1),Object(i.J)("Reference.transaction","onComplete",e,!0),Mr("Reference.transaction","applyLocally",n,!0);var o=Co(this._delegate,t,{applyLocally:n}).then(function(t){return new Eo(t.committed,new So(r.database,t.snapshot))});return e&&o.then(function(t){return e(null,t.committed,t.snapshot)},function(t){return e(t,!1,null)}),o},e.prototype.setPriority=function(t,e){Object(i.I)("Reference.setPriority",1,2,arguments.length),Object(i.J)("Reference.setPriority","onComplete",e,!0);var n=ji(this._delegate,t);return e&&n.then(function(){return e(null)},function(t){return e(t)}),n},e.prototype.push=function(t,n){var r=this;Object(i.I)("Reference.push",0,2,arguments.length),Object(i.J)("Reference.push","onComplete",n,!0);var o=Ti(this._delegate,t),a=o.then(function(t){return new e(r.database,t)});n&&a.then(function(){return n(null)},function(t){return n(t)});var s=new e(this.database,o);return s.then=a.then.bind(a),s.catch=a.catch.bind(a,void 0),s},e.prototype.onDisconnect=function(){return Rr("Reference.onDisconnect",this._delegate._path),new Oo(new mi(this._delegate._repo,this._delegate._path))},Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(Io),xo=function(){function t(t,e){var n=this;this._delegate=t,this.app=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={}),(t=Object(i.n)(t))._checkNotDeleted("useEmulator"),t._instanceStarted&&E("Cannot call useEmulator() after instance has already been initialized.");var o=t._repoInternal,a=void 0;if(o.repoInfo_.nodeAdmin)r.mockUserToken&&E('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new H(H.OWNER);else if(r.mockUserToken){var s=Object(i.i)(r.mockUserToken,t.app.options.projectId);a=new H(s)}!function(t,e,n,r){t.repoInfo_=new z(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),r&&(t.authTokenProvider_=r)}(o,e,n,a)}(this._delegate,t,e,n)},t.prototype.ref=function(t){if(Object(i.I)("database.ref",0,1,arguments.length),t instanceof To){var e=Si(this._delegate,t.toString());return new To(this,e)}return e=Ei(this._delegate,t),new To(this,e)},t.prototype.refFromURL=function(t){var e="database.refFromURL";Object(i.I)(e,1,1,arguments.length);var n=Si(this._delegate,t);return new To(this,n)},t.prototype.goOffline=function(){return Object(i.I)("database.goOffline",0,0,arguments.length),bo(this._delegate)},t.prototype.goOnline=function(){return Object(i.I)("database.goOnline",0,0,arguments.length),_o(this._delegate)},t.ServerValue={TIMESTAMP:wo,increment:function(t){return function(t){return{".sv":{increment:t}}}(t)}},t}(),Ao=Object.freeze({__proto__:null,forceLongPolling:function(){et.forceDisallow(),Z.forceAllow()},forceWebSockets:function(){Z.forceDisallow()},isWebSocketsAvailable:function(){return et.isAvailable()},setSecurityDebugCallback:function(t,e){t._delegate._repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){!function(t,e){if(void 0===e&&(e=!1),"undefined"!=typeof console){var n;e?(t.statsListener_||(t.statsListener_=new Te(t.stats_)),n=t.statsListener_.get()):n=t.stats_.get();var r=Object.keys(n).reduce(function(t,e){return Math.max(e.length,t)},0);R(n,function(t,e){for(var n=t,i=t.length;i<r+2;i++)n+=" ";console.log(n+e)})}}(t._delegate._repo,e)},statsIncrementCounter:function(t,e){!function(t,e){t.stats_.incrementCounter(e),t.statsReporter_.statsToReport_[e]=!0}(t._delegate._repo,e)},dataUpdateCount:function(t){return t._delegate._repo.dataUpdateCount},interceptServerData:function(t,e){return function(t,e){t.interceptServerDataCallback_=e}(t._delegate._repo,e)},initStandalone:function(t){var e=t.app,n=t.url,i=t.customAuthImpl,o=t.namespace,a=t.nodeAdmin,s=void 0!==a&&a;u(t.version);var c=new r.c("auth-internal",new r.b("database-standalone"));return c.setComponent(new r.a("auth-internal",function(){return i},"PRIVATE")),{instance:new xo(go(e,c,void 0,n,s),e),namespace:o}}}),jo=It;It.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},It.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var Po=Object.freeze({__proto__:null,DataConnection:jo,RealTimeConnection:rt,hijackHash:function(t){var e=It.prototype.put;return It.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){It.prototype.put=e}},ConnectionTarget:z,queryIdentifier:function(t){return t._delegate._queryIdentifier},forceRestClient:function(t){!function(t){yo=t}(t)}}),No=xo.ServerValue;!function(e){u(e.SDK_VERSION);var n=e.INTERNAL.registerComponent(new r.a("database",function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new xo(go(r,i,o,n),r)},"PUBLIC").setServiceProps({Reference:To,Query:Io,Database:xo,DataSnapshot:So,enableLogging:w,INTERNAL:Ao,ServerValue:No,TEST_ACCESS:Po}).setMultipleInstances(!0));e.registerVersion("@firebase/database","0.10.0"),Object(i.x)()&&(t.exports=n)}(e.a)}).call(this,n("3UD+")(t))},"7o/Q":function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("n6bG"),i=n("gRHU"),o=n("quSY"),a=n("2QA8"),s=n("2fFW"),u=n("NJ4a"),c=function(t){v(n,t);var e=g(n);function n(t,r,o){var a;switch(f(this,n),(a=e.call(this)).syncErrorValue=null,a.syncErrorThrown=!1,a.syncErrorThrowable=!1,a.isStopped=!1,arguments.length){case 0:a.destination=i.a;break;case 1:if(!t){a.destination=i.a;break}if("object"==typeof t){t instanceof n?(a.syncErrorThrowable=t.syncErrorThrowable,a.destination=t,t.add(b(a))):(a.syncErrorThrowable=!0,a.destination=new l(b(a),t));break}default:a.syncErrorThrowable=!0,a.destination=new l(b(a),t,r,o)}return a}return p(n,[{key:a.a,value:function(){return this}},{key:"next",value:function(t){this.isStopped||this._next(t)}},{key:"error",value:function(t){this.isStopped||(this.isStopped=!0,this._error(t))}},{key:"complete",value:function(){this.isStopped||(this.isStopped=!0,this._complete())}},{key:"unsubscribe",value:function(){this.closed||(this.isStopped=!0,h(w(n.prototype),"unsubscribe",this).call(this))}},{key:"_next",value:function(t){this.destination.next(t)}},{key:"_error",value:function(t){this.destination.error(t),this.unsubscribe()}},{key:"_complete",value:function(){this.destination.complete(),this.unsubscribe()}},{key:"_unsubscribeAndRecycle",value:function(){var t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}],[{key:"create",value:function(t,e,r){var i=new n(t,e,r);return i.syncErrorThrowable=!1,i}}]),n}(o.a),l=function(t){v(n,t);var e=g(n);function n(t,o,a,s){var u,c;f(this,n),(u=e.call(this))._parentSubscriber=t;var l=b(u);return Object(r.a)(o)?c=o:o&&(c=o.next,a=o.error,s=o.complete,o!==i.a&&(l=Object.create(o),Object(r.a)(l.unsubscribe)&&u.add(l.unsubscribe.bind(l)),l.unsubscribe=u.unsubscribe.bind(b(u)))),u._context=l,u._next=c,u._error=a,u._complete=s,u}return p(n,[{key:"next",value:function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;s.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}},{key:"error",value:function(t){if(!this.isStopped){var e=this._parentSubscriber,n=s.a.useDeprecatedSynchronousErrorHandling;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(u.a)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Object(u.a)(t)}}}},{key:"complete",value:function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};s.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}}},{key:"__tryOrUnsub",value:function(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),s.a.useDeprecatedSynchronousErrorHandling)throw n;Object(u.a)(n)}}},{key:"__tryOrSetError",value:function(t,e,n){if(!s.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return s.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(Object(u.a)(r),!0)}return!1}},{key:"_unsubscribe",value:function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}]),n}(c)},"9ppp":function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t}()},Cfvw:function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r=n("HDdC"),i=n("SeVD"),o=n("quSY"),a=n("kJWO"),s=n("jZKg"),u=n("Lhse"),c=n("c2HN"),l=n("I55L");function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[a.a]}(t))return function(t,e){return new r.a(function(n){var r=new o.a;return r.add(e.schedule(function(){var i=t[a.a]();r.add(i.subscribe({next:function(t){r.add(e.schedule(function(){return n.next(t)}))},error:function(t){r.add(e.schedule(function(){return n.error(t)}))},complete:function(){r.add(e.schedule(function(){return n.complete()}))}}))})),r})}(t,e);if(Object(c.a)(t))return function(t,e){return new r.a(function(n){var r=new o.a;return r.add(e.schedule(function(){return t.then(function(t){r.add(e.schedule(function(){n.next(t),r.add(e.schedule(function(){return n.complete()}))}))},function(t){r.add(e.schedule(function(){return n.error(t)}))})})),r})}(t,e);if(Object(l.a)(t))return Object(s.a)(t,e);if(function(t){return t&&"function"==typeof t[u.a]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.a(function(n){var r,i=new o.a;return i.add(function(){r&&"function"==typeof r.return&&r.return()}),i.add(e.schedule(function(){r=t[u.a](),i.add(e.schedule(function(){if(!n.closed){var t,e;try{var i=r.next();t=i.value,e=i.done}catch(o){return void n.error(o)}e?n.complete():(n.next(t),this.schedule())}}))})),i})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.a?t:new r.a(Object(i.a)(t))}},D0XW:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("3N8a"),i=new(n("IjjT").a)(r.a)},DH7j:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=Array.isArray||function(t){return t&&"number"==typeof t.length}},EY2u:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});var r=n("HDdC"),i=new r.a(function(t){return t.complete()});function o(t){return t?function(t){return new r.a(function(e){return t.schedule(function(){return e.complete()})})}(t):i}},HDdC:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r,i=n("7o/Q"),o=n("2QA8"),a=n("gRHU"),s=n("kJWO"),u=n("SpAZ"),c=n("2fFW"),l=((r=function(){function t(e){f(this,t),this._isScalar=!1,e&&(this._subscribe=e)}return p(t,[{key:"lift",value:function(e){var n=new t;return n.source=this,n.operator=e,n}},{key:"subscribe",value:function(t,e,n){var r=this.operator,s=function(t,e,n){if(t){if(t instanceof i.a)return t;if(t[o.a])return t[o.a]()}return t||e||n?new i.a(t,e,n):new i.a(a.a)}(t,e,n);if(s.add(r?r.call(s,this.source):this.source||c.a.useDeprecatedSynchronousErrorHandling&&!s.syncErrorThrowable?this._subscribe(s):this._trySubscribe(s)),c.a.useDeprecatedSynchronousErrorHandling&&s.syncErrorThrowable&&(s.syncErrorThrowable=!1,s.syncErrorThrown))throw s.syncErrorValue;return s}},{key:"_trySubscribe",value:function(t){try{return this._subscribe(t)}catch(e){c.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){var e=t,n=e.closed,r=e.destination,o=e.isStopped;if(n||o)return!1;t=r&&r instanceof i.a?r:null}return!0}(t)?t.error(e):console.warn(e)}}},{key:"forEach",value:function(t,e){var n=this;return new(e=h(e))(function(e,r){var i;i=n.subscribe(function(e){try{t(e)}catch(n){r(n),i&&i.unsubscribe()}},r,e)})}},{key:"_subscribe",value:function(t){var e=this.source;return e&&e.subscribe(t)}},{key:s.a,value:function(){return this}},{key:"pipe",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return 0===e.length?this:(0===(r=e).length?u.a:1===r.length?r[0]:function(t){return r.reduce(function(t,e){return e(t)},t)})(this);var r}},{key:"toPromise",value:function(t){var e=this;return new(t=h(t))(function(t,n){var r;e.subscribe(function(t){return r=t},function(t){return n(t)},function(){return t(r)})})}}]),t}()).create=function(t){return new r(t)},r);function h(t){if(t||(t=c.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},I55L:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t}},IjjT:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=function(){var t=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.now;f(this,t),this.SchedulerAction=e,this.now=n}return p(t,[{key:"schedule",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;return new this.SchedulerAction(this,t).schedule(n,e)}}]),t}();return t.now=function(){return Date.now()},t}(),i=function(t){v(n,t);var e=g(n);function n(t){var i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.now;return f(this,n),(i=e.call(this,t,function(){return n.delegate&&n.delegate!==b(i)?n.delegate.now():o()})).actions=[],i.active=!1,i.scheduled=void 0,i}return p(n,[{key:"schedule",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0;return n.delegate&&n.delegate!==this?n.delegate.schedule(t,e,r):h(w(n.prototype),"schedule",this).call(this,t,e,r)}},{key:"flush",value:function(t){var e=this.actions;if(this.active)e.push(t);else{var n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}}]),n}(r)},Jgta:function(t,e,n){"use strict";var r=n("zIRd");n.d(e,"a",function(){return r.a}),r.a.registerVersion("firebase","8.5.0","app")},LRne:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("z+Ro"),i=n("yCtX"),o=n("jZKg");function a(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var a=e[e.length-1];return Object(r.a)(a)?(e.pop(),Object(o.a)(e,a)):Object(i.a)(e)}},Lhse:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},NJ4a:function(t,e,n){"use strict";function r(t){setTimeout(function(){throw t},0)}n.d(e,"a",function(){return r})},SeVD:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("ngJS"),i=n("NJ4a"),o=n("Lhse"),a=n("kJWO"),s=n("I55L"),u=n("c2HN"),c=n("XoHu"),l=function(t){if(t&&"function"==typeof t[a.a])return l=t,function(t){var e=l[a.a]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(Object(s.a)(t))return Object(r.a)(t);if(Object(u.a)(t))return n=t,function(t){return n.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,i.a),t};if(t&&"function"==typeof t[o.a])return e=t,function(t){for(var n=e[o.a]();;){var r=void 0;try{r=n.next()}catch(i){return t.error(i),t}if(r.done){t.complete();break}if(t.next(r.value),t.closed)break}return"function"==typeof n.return&&t.add(function(){n.return&&n.return()}),t};var e,n,l,h=Object(c.a)(t)?"an invalid object":"'".concat(t,"'");throw new TypeError("You provided ".concat(h," where a stream was expected. You can provide an Observable, Promise, Array, or Iterable."))}},SpAZ:function(t,e,n){"use strict";function r(t){return t}n.d(e,"a",function(){return r})},VRyK:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("HDdC"),i=n("z+Ro"),o=n("bHdf"),a=n("yCtX");function s(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var s=Number.POSITIVE_INFINITY,u=null,c=e[e.length-1];return Object(i.a)(c)?(u=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(s=e.pop())):"number"==typeof c&&(s=e.pop()),null===u&&1===e.length&&e[0]instanceof r.a?e[0]:Object(o.a)(s)(Object(a.a)(e,u))}},XNiG:function(t,e,n){"use strict";n.d(e,"b",function(){return c}),n.d(e,"a",function(){return l});var r=n("HDdC"),i=n("7o/Q"),o=n("quSY"),a=n("9ppp"),s=n("Ylt2"),u=n("2QA8"),c=function(t){v(n,t);var e=g(n);function n(t){var r;return f(this,n),(r=e.call(this,t)).destination=t,r}return n}(i.a),l=function(){var t=function(t){v(n,t);var e=g(n);function n(){var t;return f(this,n),(t=e.call(this)).observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return p(n,[{key:u.a,value:function(){return new c(this)}},{key:"lift",value:function(t){var e=new d(this,this);return e.operator=t,e}},{key:"next",value:function(t){if(this.closed)throw new a.a;if(!this.isStopped)for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].next(t)}},{key:"error",value:function(t){if(this.closed)throw new a.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].error(t);this.observers.length=0}},{key:"complete",value:function(){if(this.closed)throw new a.a;this.isStopped=!0;for(var t=this.observers,e=t.length,n=t.slice(),r=0;r<e;r++)n[r].complete();this.observers.length=0}},{key:"unsubscribe",value:function(){this.isStopped=!0,this.closed=!0,this.observers=null}},{key:"_trySubscribe",value:function(t){if(this.closed)throw new a.a;return h(w(n.prototype),"_trySubscribe",this).call(this,t)}},{key:"_subscribe",value:function(t){if(this.closed)throw new a.a;return this.hasError?(t.error(this.thrownError),o.a.EMPTY):this.isStopped?(t.complete(),o.a.EMPTY):(this.observers.push(t),new s.a(this,t))}},{key:"asObservable",value:function(){var t=new r.a;return t.source=this,t}}]),n}(r.a);return t.create=function(t,e){return new d(t,e)},t}(),d=function(t){v(n,t);var e=g(n);function n(t,r){var i;return f(this,n),(i=e.call(this)).destination=t,i.source=r,i}return p(n,[{key:"next",value:function(t){var e=this.destination;e&&e.next&&e.next(t)}},{key:"error",value:function(t){var e=this.destination;e&&e.error&&this.destination.error(t)}},{key:"complete",value:function(){var t=this.destination;t&&t.complete&&this.destination.complete()}},{key:"_subscribe",value:function(t){return this.source?this.source.subscribe(t):o.a.EMPTY}}]),n}(l)},XoHu:function(t,e,n){"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,"a",function(){return r})},Ylt2:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(t){v(n,t);var e=g(n);function n(t,r){var i;return f(this,n),(i=e.call(this)).subject=t,i.subscriber=r,i.closed=!1,i}return p(n,[{key:"unsubscribe",value:function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}}}]),n}(n("quSY").a)},bHdf:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("5+tZ"),i=n("SpAZ");function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;return Object(r.a)(i.a,t)}},c2HN:function(t,e,n){"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,"a",function(){return r})},fXoL:function(t,n,r){"use strict";r.d(n,"a",function(){return un}),r.d(n,"b",function(){return du}),r.d(n,"c",function(){return uu}),r.d(n,"d",function(){return au}),r.d(n,"e",function(){return su}),r.d(n,"f",function(){return oc}),r.d(n,"g",function(){return Yu}),r.d(n,"h",function(){return fs}),r.d(n,"i",function(){return Ou}),r.d(n,"j",function(){return Va}),r.d(n,"k",function(){return yu}),r.d(n,"l",function(){return Ha}),r.d(n,"m",function(){return _r}),r.d(n,"n",function(){return Us}),r.d(n,"o",function(){return $i}),r.d(n,"p",function(){return mn}),r.d(n,"q",function(){return sn}),r.d(n,"r",function(){return yo}),r.d(n,"s",function(){return as}),r.d(n,"t",function(){return ss}),r.d(n,"u",function(){return vu}),r.d(n,"v",function(){return ks}),r.d(n,"w",function(){return Xu}),r.d(n,"x",function(){return ws}),r.d(n,"y",function(){return Ku}),r.d(n,"z",function(){return Iu}),r.d(n,"A",function(){return bn}),r.d(n,"B",function(){return fu}),r.d(n,"C",function(){return hu}),r.d(n,"D",function(){return za}),r.d(n,"E",function(){return Ka}),r.d(n,"F",function(){return Or}),r.d(n,"G",function(){return Ga}),r.d(n,"H",function(){return vr}),r.d(n,"I",function(){return wn}),r.d(n,"J",function(){return tc}),r.d(n,"K",function(){return ms}),r.d(n,"L",function(){return Du}),r.d(n,"M",function(){return cn}),r.d(n,"N",function(){return Ya}),r.d(n,"O",function(){return Qa}),r.d(n,"P",function(){return Os}),r.d(n,"Q",function(){return H}),r.d(n,"R",function(){return zu}),r.d(n,"S",function(){return Bu}),r.d(n,"T",function(){return E}),r.d(n,"U",function(){return qu}),r.d(n,"V",function(){return rc}),r.d(n,"W",function(){return Lu}),r.d(n,"X",function(){return pu}),r.d(n,"Y",function(){return eo}),r.d(n,"Z",function(){return Ia}),r.d(n,"ab",function(){return dr}),r.d(n,"bb",function(){return Jn}),r.d(n,"cb",function(){return Vn}),r.d(n,"db",function(){return qn}),r.d(n,"eb",function(){return zn}),r.d(n,"fb",function(){return Hn}),r.d(n,"gb",function(){return Bn}),r.d(n,"hb",function(){return Kn}),r.d(n,"ib",function(){return Ca}),r.d(n,"jb",function(){return nc}),r.d(n,"kb",function(){return Oa}),r.d(n,"lb",function(){return Ea}),r.d(n,"mb",function(){return Un}),r.d(n,"nb",function(){return Q}),r.d(n,"ob",function(){return Eo}),r.d(n,"pb",function(){return qo}),r.d(n,"qb",function(){return Uo}),r.d(n,"rb",function(){return ka}),r.d(n,"sb",function(){return Dt}),r.d(n,"tb",function(){return k}),r.d(n,"ub",function(){return Fn}),r.d(n,"vb",function(){return mo}),r.d(n,"wb",function(){return Tt}),r.d(n,"xb",function(){return La}),r.d(n,"yb",function(){return oi}),r.d(n,"zb",function(){return xo}),r.d(n,"Ab",function(){return ra}),r.d(n,"Bb",function(){return tu}),r.d(n,"Cb",function(){return ot}),r.d(n,"Db",function(){return ft}),r.d(n,"Eb",function(){return T}),r.d(n,"Fb",function(){return x}),r.d(n,"Gb",function(){return ct}),r.d(n,"Hb",function(){return dt}),r.d(n,"Ib",function(){return No}),r.d(n,"Jb",function(){return Fo}),r.d(n,"Kb",function(){return Mo}),r.d(n,"Lb",function(){return Lo}),r.d(n,"Mb",function(){return Vo}),r.d(n,"Nb",function(){return rn}),r.d(n,"Ob",function(){return ma}),r.d(n,"Pb",function(){return xn}),r.d(n,"Qb",function(){return on}),r.d(n,"Rb",function(){return ou}),r.d(n,"Sb",function(){return Bo}),r.d(n,"Tb",function(){return eu}),r.d(n,"Ub",function(){return zo}),r.d(n,"Vb",function(){return Do}),r.d(n,"Wb",function(){return Wo}),r.d(n,"Xb",function(){return Fs}),r.d(n,"Yb",function(){return Vs}),r.d(n,"Zb",function(){return Zs}),r.d(n,"ac",function(){return Po}),r.d(n,"bc",function(){return Zt}),r.d(n,"cc",function(){return yr}),r.d(n,"dc",function(){return lt}),r.d(n,"ec",function(){return ia}),r.d(n,"fc",function(){return jo}),r.d(n,"gc",function(){return va}),r.d(n,"hc",function(){return ya}),r.d(n,"ic",function(){return ga}),r.d(n,"jc",function(){return $s});var o=r("XNiG"),s=r("quSY"),u=r("HDdC"),d=r("VRyK"),y=r("w1tV");function m(t){for(var e in t)if(t[e]===m)return e;throw Error("Could not find renamed property on target object.")}function _(t,e){for(var n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function k(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(k).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return""+t.overriddenName;if(t.name)return""+t.name;var e=t.toString();if(null==e)return""+e;var n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function C(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}var O=m({__forward_ref__:m});function E(t){return t.__forward_ref__=E,t.toString=function(){return k(this())},t}function S(t){return I(t)?t():t}function I(t){return"function"==typeof t&&t.hasOwnProperty(O)&&t.__forward_ref__===E}function T(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function x(t){return{factory:t.factory,providers:t.providers||[],imports:t.imports||[]}}function A(t){return j(t,D)||j(t,L)}function j(t,e){return t.hasOwnProperty(e)?t[e]:null}function P(t){return t&&(t.hasOwnProperty(R)||t.hasOwnProperty(M))?t[R]:null}var N,D=m({"\u0275prov":m}),R=m({"\u0275inj":m}),L=m({ngInjectableDef:m}),M=m({ngInjectorDef:m}),F=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});function V(t){var e=N;return N=t,e}function U(t,e,n){var r=A(t);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&F.Optional)return null;if(void 0!==e)return e;throw new Error("Injector: NOT_FOUND [".concat(k(t),"]"))}function q(t){return{toString:t}.toString()}var B=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),H=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({}),K="undefined"!=typeof globalThis&&globalThis,z="undefined"!=typeof window&&window,W="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,G="undefined"!=typeof global&&global,Q=K||G||z||W,Y={},J=[],X=m({"\u0275cmp":m}),Z=m({"\u0275dir":m}),$=m({"\u0275pipe":m}),tt=m({"\u0275mod":m}),et=m({"\u0275loc":m}),nt=m({"\u0275fac":m}),rt=m({__NG_ELEMENT_ID__:m}),it=0;function ot(t){return q(function(){var e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===B.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||J,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||H.Emulated,id:"c",styles:t.styles||J,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=it++,n.inputs=ht(t.inputs,e),n.outputs=ht(t.outputs),i&&i.forEach(function(t){return t(n)}),n.directiveDefs=r?function(){return("function"==typeof r?r():r).map(at)}:null,n.pipeDefs=o?function(){return("function"==typeof o?o():o).map(st)}:null,n})}function at(t){return pt(t)||function(t){return t[Z]||null}(t)}function st(t){return function(t){return t[$]||null}(t)}var ut={};function ct(t){var e={type:t.type,bootstrap:t.bootstrap||J,declarations:t.declarations||J,imports:t.imports||J,exports:t.exports||J,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&q(function(){ut[t.id]=t.type}),e}function lt(t,e){return q(function(){var n=vt(t,!0);n.declarations=e.declarations||J,n.imports=e.imports||J,n.exports=e.exports||J})}function ht(t,e){if(null==t)return Y;var n={};for(var r in t)if(t.hasOwnProperty(r)){var i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}var ft=ot;function dt(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function pt(t){return t[X]||null}function vt(t,e){var n=t[tt]||null;if(!n&&!0===e)throw new Error("Type ".concat(k(t)," does not have '\u0275mod' property."));return n}function yt(t){return Array.isArray(t)&&"object"==typeof t[1]}function gt(t){return Array.isArray(t)&&!0===t[1]}function mt(t){return 0!=(8&t.flags)}function bt(t){return 2==(2&t.flags)}function _t(t){return 1==(1&t.flags)}function wt(t){return null!==t.template}function kt(t,e){return t.hasOwnProperty(nt)?t[nt]:null}var Ct=function(t){v(n,t);var e=g(n);function n(t,r){var i;return f(this,n),(i=e.call(this,function(t,e){return"".concat(t?"NG0".concat(t,": "):"").concat(e)}(t,r))).code=t,i}return n}(c(Error));function Ot(t){return"string"==typeof t?t:null==t?"":String(t)}function Et(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Ot(t)}function St(t,e){var n=e?" in "+e:"";throw new Ct("201","No provider for ".concat(Et(t)," found").concat(n))}var It=function(){function t(e,n,r){f(this,t),this.previousValue=e,this.currentValue=n,this.firstChange=r}return p(t,[{key:"isFirstChange",value:function(){return this.firstChange}}]),t}();function Tt(){return xt}function xt(t){return t.type.prototype.ngOnChanges&&(t.setInput=jt),At}function At(){var t=Pt(this),e=null==t?void 0:t.current;if(e){var n=t.previous;if(n===Y)t.previous=e;else for(var r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function jt(t,e,n,r){var i=Pt(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:Y,current:null}),o=i.current||(i.current={}),a=i.previous,s=this.declaredInputs[n],u=a[s];o[s]=new It(u&&u.currentValue,e,a===Y),t[r]=e}function Pt(t){return t.__ngSimpleChanges__||null}Tt.ngInherit=!0;var Nt=void 0;function Dt(t){Nt=t}function Rt(t){return!!t.listen}var Lt={createRenderer:function(t,e){return void 0!==Nt?Nt:"undefined"!=typeof document?document:void 0}};function Mt(t){for(;Array.isArray(t);)t=t[0];return t}function Ft(t,e){return Mt(e[t])}function Vt(t,e){return Mt(e[t.index])}function Ut(t,e){return t.data[e]}function qt(t,e){var n=e[t];return yt(n)?n:n[0]}function Bt(t){var e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function Ht(t){return 4==(4&t[2])}function Kt(t){return 128==(128&t[2])}function zt(t,e){return null==e?null:t[e]}function Wt(t){t[18]=0}function Gt(t,e){t[5]+=e;for(var n=t,r=t[3];null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}var Qt={lFrame:ve(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Yt(){return Qt.bindingsEnabled}function Jt(){return Qt.lFrame.lView}function Xt(){return Qt.lFrame.tView}function Zt(t){Qt.lFrame.contextLView=t}function $t(){for(var t=te();null!==t&&64===t.type;)t=t.parent;return t}function te(){return Qt.lFrame.currentTNode}function ee(t,e){var n=Qt.lFrame;n.currentTNode=t,n.isParent=e}function ne(){return Qt.lFrame.isParent}function re(){return Qt.isInCheckNoChangesMode}function ie(t){Qt.isInCheckNoChangesMode=t}function oe(){var t=Qt.lFrame,e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function ae(){return Qt.lFrame.bindingIndex++}function se(t){var e=Qt.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function ue(t){Qt.lFrame.currentDirectiveIndex=t}function ce(){return Qt.lFrame.currentQueryIndex}function le(t){Qt.lFrame.currentQueryIndex=t}function he(t){var e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function fe(t,e,n){if(n&F.SkipSelf){for(var r=e,i=t;!(null!==(r=r.parent)||n&F.Host||(r=he(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}var o=Qt.lFrame=pe();return o.currentTNode=e,o.lView=t,!0}function de(t){var e=pe(),n=t[1];Qt.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function pe(){var t=Qt.lFrame,e=null===t?null:t.child;return null===e?ve(t):e}function ve(t){var e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function ye(){var t=Qt.lFrame;return Qt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var ge=ye;function me(){var t=ye();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function be(){return Qt.lFrame.selectedIndex}function _e(t){Qt.lFrame.selectedIndex=t}function we(){var t=Qt.lFrame;return Ut(t.tView,t.selectedIndex)}function ke(t,e){for(var n=e.directiveStart,r=e.directiveEnd;n<r;n++){var i=t.data[n].type.prototype,o=i.ngAfterContentInit,a=i.ngAfterContentChecked,s=i.ngAfterViewInit,u=i.ngAfterViewChecked,c=i.ngOnDestroy;o&&(t.contentHooks||(t.contentHooks=[])).push(-n,o),a&&((t.contentHooks||(t.contentHooks=[])).push(n,a),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,a)),s&&(t.viewHooks||(t.viewHooks=[])).push(-n,s),u&&((t.viewHooks||(t.viewHooks=[])).push(n,u),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,u)),null!=c&&(t.destroyHooks||(t.destroyHooks=[])).push(n,c)}}function Ce(t,e,n){Se(t,e,3,n)}function Oe(t,e,n,r){(3&t[2])===n&&Se(t,e,n,r)}function Ee(t,e){var n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function Se(t,e,n,r){for(var i=null!=r?r:-1,o=e.length-1,a=0,s=void 0!==r?65535&t[18]:0;s<o;s++)if("number"==typeof e[s+1]){if(a=e[s],null!=r&&a>=r)break}else e[s]<0&&(t[18]+=65536),(a<i||-1==i)&&(Ie(t,n,e,s),t[18]=(4294901760&t[18])+s+2),s++}function Ie(t,e,n,r){var i=n[r]<0,o=n[r+1],a=t[i?-n[r]:n[r]];i?t[2]>>11<t[18]>>16&&(3&t[2])===e&&(t[2]+=2048,o.call(a)):o.call(a)}var Te=function t(e,n,r){f(this,t),this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r};function xe(t,e,n){for(var r=Rt(t),i=0;i<n.length;){var o=n[i];if("number"==typeof o){if(0!==o)break;i++;var a=n[i++],s=n[i++],u=n[i++];r?t.setAttribute(e,s,u,a):e.setAttributeNS(a,s,u)}else{var c=o,l=n[++i];je(c)?r&&t.setProperty(e,c,l):r?t.setAttribute(e,c,l):e.setAttribute(c,l),i++}}return i}function Ae(t){return 3===t||4===t||6===t}function je(t){return 64===t.charCodeAt(0)}function Pe(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else for(var n=-1,r=0;r<e.length;r++){var i=e[r];"number"==typeof i?n=i:0===n||Ne(t,n,i,null,-1===n||2===n?e[++r]:null)}return t}function Ne(t,e,n,r,i){var o=0,a=t.length;if(-1===e)a=-1;else for(;o<t.length;){var s=t[o++];if("number"==typeof s){if(s===e){a=-1;break}if(s>e){a=o-1;break}}}for(;o<t.length;){var u=t[o];if("number"==typeof u)break;if(u===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==a&&(t.splice(a,0,e),o=a+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function De(t){return-1!==t}function Re(t){return 32767&t}function Le(t,e){for(var n=t>>16,r=e;n>0;)r=r[15],n--;return r}var Me=!0;function Fe(t){var e=Me;return Me=t,e}var Ve=0;function Ue(t,e){var n=Be(t,e);if(-1!==n)return n;var r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,qe(r.data,t),qe(e,null),qe(r.blueprint,null));var i=He(t,e),o=t.injectorIndex;if(De(i))for(var a=Re(i),s=Le(i,e),u=s[1].data,c=0;c<8;c++)e[o+c]=s[a+c]|u[a+c];return e[o+8]=i,o}function qe(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Be(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function He(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;for(var n=0,r=null,i=e;null!==i;){var o=i[1],a=o.type;if(null===(r=2===a?o.declTNode:1===a?i[6]:null))return-1;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return-1}function Ke(t,e,n){!function(t,e,n){var r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(rt)&&(r=n[rt]),null==r&&(r=n[rt]=Ve++);var i=255&r,o=1<<i,a=64&i,s=32&i,u=e.data;128&i?a?s?u[t+7]|=o:u[t+6]|=o:s?u[t+5]|=o:u[t+4]|=o:a?s?u[t+3]|=o:u[t+2]|=o:s?u[t+1]|=o:u[t]|=o}(t,e,n)}function ze(t,e,n){if(n&F.Optional)return t;St(e,"NodeInjector")}function We(t,e,n,r){if(n&F.Optional&&void 0===r&&(r=null),0==(n&(F.Self|F.Host))){var i=t[9],o=V(void 0);try{return i?i.get(e,r,n&F.Optional):U(e,r,n&F.Optional)}finally{V(o)}}return ze(r,e,n)}function Ge(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:F.Default,i=arguments.length>4?arguments[4]:void 0;if(null!==t){var o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;var e=t.hasOwnProperty(rt)?t[rt]:void 0;return"number"==typeof e?e>=0?255&e:Ye:e}(n);if("function"==typeof o){if(!fe(e,t,r))return r&F.Host?ze(i,n,r):We(e,n,r,i);try{var a=o();if(null!=a||r&F.Optional)return a;St(n)}finally{ge()}}else if("number"==typeof o){var s=null,u=Be(t,e),c=-1,l=r&F.Host?e[16][6]:null;for((-1===u||r&F.SkipSelf)&&(-1!==(c=-1===u?He(t,e):e[u+8])&&tn(r,!1)?(s=e[1],u=Re(c),e=Le(c,e)):u=-1);-1!==u;){var h=e[1];if($e(o,u,h.data)){var f=Je(u,e,n,s,r,l);if(f!==Qe)return f}-1!==(c=e[u+8])&&tn(r,e[1].data[u+8]===l)&&$e(o,u,e)?(s=h,u=Re(c),e=Le(c,e)):u=-1}}}return We(e,n,r,i)}var Qe={};function Ye(){return new en($t(),Jt())}function Je(t,e,n,r,i,o){var a=e[1],s=a.data[t+8],u=Xe(s,a,n,null==r?bt(s)&&Me:r!=a&&0!=(3&s.type),i&F.Host&&o===s);return null!==u?Ze(e,a,u,s):Qe}function Xe(t,e,n,r,i){for(var o=t.providerIndexes,a=e.data,s=1048575&o,u=t.directiveStart,c=o>>20,l=i?s+c:t.directiveEnd,h=r?s:s+c;h<l;h++){var f=a[h];if(h<u&&n===f||h>=u&&f.type===n)return h}if(i){var d=a[u];if(d&&wt(d)&&d.type===n)return u}return null}function Ze(t,e,n,r){var i=t[n],o=e.data;if(i instanceof Te){var a=i;a.resolving&&function(t,e){throw new Ct("200","Circular dependency in DI detected for "+t)}(Et(o[n]));var s=Fe(a.canSeeViewProviders);a.resolving=!0;var u=a.injectImpl?V(a.injectImpl):null;fe(t,r,F.Default);try{i=t[n]=a.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){var r=e.type.prototype,i=r.ngOnChanges,o=r.ngOnInit,a=r.ngDoCheck;if(i){var s=xt(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,s)}o&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,o),a&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,a),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,a))}(n,o[n],e)}finally{null!==u&&V(u),Fe(s),a.resolving=!1,ge()}}return i}function $e(t,e,n){var r=64&t,i=32&t;return!!((128&t?r?i?n[e+7]:n[e+6]:i?n[e+5]:n[e+4]:r?i?n[e+3]:n[e+2]:i?n[e+1]:n[e])&1<<t)}function tn(t,e){return!(t&F.Self||t&F.Host&&e)}var en=function(){function t(e,n){f(this,t),this._tNode=e,this._lView=n}return p(t,[{key:"get",value:function(t,e){return Ge(this._tNode,this._lView,t,void 0,e)}}]),t}();function nn(t){var e=t;if(I(t))return function(){var t=nn(S(e));return t?t():null};var n=kt(e);if(null===n){var r=P(e);n=r&&r.factory}return n||null}function rn(t){return q(function(){for(var e=t.prototype.constructor,n=e[nt]||nn(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;i&&i!==r;){var o=i[nt]||nn(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return function(t){return new t}})}function on(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;var n=t.attrs;if(n)for(var r=n.length,i=0;i<r;){var o=n[i];if(Ae(o))break;if(0===o)i+=2;else if("number"==typeof o)for(i++;i<r&&"string"==typeof n[i];)i++;else{if(o===e)return n[i+1];i+=2}}return null}($t(),t)}function an(t,e,n){return q(function(){var r=function(t){return function(){if(t){var e=t.apply(void 0,arguments);for(var n in e)this[n]=e[n]}}}(e);function i(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(this instanceof i)return r.apply(this,e),this;var o=l(i,e);return a.annotation=o,a;function a(t,e,n){for(var r=t.hasOwnProperty("__parameters__")?t.__parameters__:Object.defineProperty(t,"__parameters__",{value:[]}).__parameters__;r.length<=n;)r.push(null);return(r[n]=r[n]||[]).push(o),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var sn=function(){function t(e,n){f(this,t),this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=T({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}return p(t,[{key:"toString",value:function(){return"InjectionToken "+this._desc}}]),t}(),un=new sn("AnalyzeForEntryComponents"),cn=Function;function ln(t,e){void 0===e&&(e=t);for(var n=0;n<t.length;n++){var r=t[n];Array.isArray(r)?(e===t&&(e=t.slice(0,n)),ln(r,e)):e!==t&&e.push(r)}return e}function hn(t,e){t.forEach(function(t){return Array.isArray(t)?hn(t,e):e(t)})}function fn(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function dn(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function pn(t,e,n){var r=yn(t,e);return r>=0?t[1|r]=n:function(t,e,n,r){var i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r=~r,e,n),r}function vn(t,e){var n=yn(t,e);if(n>=0)return t[1|n]}function yn(t,e){return function(t,e,n){for(var r=0,i=t.length>>1;i!==r;){var o=r+(i-r>>1),a=t[o<<1];if(e===a)return o<<1;a>e?i=o:r=o+1}return~(i<<1)}(t,e)}var gn,mn=an("Inject",function(t){return{token:t}}),bn=an("Optional"),_n=an("Self"),wn=an("SkipSelf"),kn=an("Host"),Cn={},On=/\n/gm,En=m({provide:String,useValue:m}),Sn=void 0;function In(t){var e=Sn;return Sn=t,e}function Tn(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:F.Default;if(void 0===Sn)throw new Error("inject() must be called from an injection context");return null===Sn?U(t,void 0,e):Sn.get(t,e&F.Optional?null:void 0,e)}function xn(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:F.Default;return(N||Tn)(S(t),e)}function An(t){for(var e=[],n=0;n<t.length;n++){var r=S(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");for(var i=void 0,o=F.Default,a=0;a<r.length;a++){var s=r[a];s instanceof bn||"Optional"===s.ngMetadataName||s===bn?o|=F.Optional:s instanceof wn||"SkipSelf"===s.ngMetadataName||s===wn?o|=F.SkipSelf:s instanceof _n||"Self"===s.ngMetadataName||s===_n?o|=F.Self:s instanceof kn||"Host"===s.ngMetadataName||s===kn?o|=F.Host:i=s instanceof mn||s===mn?s.token:s}e.push(xn(i,o))}else e.push(xn(r))}return e}function jn(t){var e;return(null===(e=function(){if(void 0===gn&&(gn=null,Q.trustedTypes))try{gn=Q.trustedTypes.createPolicy("angular",{createHTML:function(t){return t},createScript:function(t){return t},createScriptURL:function(t){return t}})}catch(e){}return gn}())||void 0===e?void 0:e.createHTML(t))||t}var Pn=function(){function t(e){f(this,t),this.changingThisBreaksApplicationSecurity=e}return p(t,[{key:"toString",value:function(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see https://g.co/ng/security#xss)"}}]),t}(),Nn=function(t){v(n,t);var e=g(n);function n(){return f(this,n),e.apply(this,arguments)}return p(n,[{key:"getTypeName",value:function(){return"HTML"}}]),n}(Pn),Dn=function(t){v(n,t);var e=g(n);function n(){return f(this,n),e.apply(this,arguments)}return p(n,[{key:"getTypeName",value:function(){return"Style"}}]),n}(Pn),Rn=function(t){v(n,t);var e=g(n);function n(){return f(this,n),e.apply(this,arguments)}return p(n,[{key:"getTypeName",value:function(){return"Script"}}]),n}(Pn),Ln=function(t){v(n,t);var e=g(n);function n(){return f(this,n),e.apply(this,arguments)}return p(n,[{key:"getTypeName",value:function(){return"URL"}}]),n}(Pn),Mn=function(t){v(n,t);var e=g(n);function n(){return f(this,n),e.apply(this,arguments)}return p(n,[{key:"getTypeName",value:function(){return"ResourceURL"}}]),n}(Pn);function Fn(t){return t instanceof Pn?t.changingThisBreaksApplicationSecurity:t}function Vn(t,e){var n=Un(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error("Required a safe ".concat(e,", got a ").concat(n," (see https://g.co/ng/security#xss)"))}return n===e}function Un(t){return t instanceof Pn&&t.getTypeName()||null}function qn(t){return new Nn(t)}function Bn(t){return new Dn(t)}function Hn(t){return new Rn(t)}function Kn(t){return new Ln(t)}function zn(t){return new Mn(t)}var Wn=function(){function t(e){f(this,t),this.inertDocumentHelper=e}return p(t,[{key:"getInertBodyElement",value:function(t){t="<body><remove></remove>"+t;try{var e=(new window.DOMParser).parseFromString(jn(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(n){return null}}}]),t}(),Gn=function(){function t(e){if(f(this,t),this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){var n=this.inertDocument.createElement("html");this.inertDocument.appendChild(n);var r=this.inertDocument.createElement("body");n.appendChild(r)}}return p(t,[{key:"getInertBodyElement",value:function(t){var e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=jn(t),e;var n=this.inertDocument.createElement("body");return n.innerHTML=jn(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}},{key:"stripCustomNsAttrs",value:function(t){for(var e=t.attributes,n=e.length-1;0<n;n--){var r=e.item(n).name;"xmlns:ns1"!==r&&0!==r.indexOf("ns1:")||t.removeAttribute(r)}for(var i=t.firstChild;i;)i.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(i),i=i.nextSibling}}]),t}(),Qn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Yn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Jn(t){return(t=String(t)).match(Qn)||t.match(Yn)?t:"unsafe:"+t}function Xn(t){var e,n={},r=a(t.split(","));try{for(r.s();!(e=r.n()).done;){n[e.value]=!0}}catch(i){r.e(i)}finally{r.f()}return n}function Zn(){for(var t={},e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];for(var i=0,o=n;i<o.length;i++){var a=o[i];for(var s in a)a.hasOwnProperty(s)&&(t[s]=!0)}return t}var $n,tr=Xn("area,br,col,hr,img,wbr"),er=Xn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),nr=Xn("rp,rt"),rr=Zn(nr,er),ir=Zn(tr,Zn(er,Xn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Zn(nr,Xn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),rr),or=Xn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),ar=Xn("srcset"),sr=Zn(or,ar,Xn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Xn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),ur=Xn("script,style,template"),cr=function(){function t(){f(this,t),this.sanitizedSomething=!1,this.buf=[]}return p(t,[{key:"sanitizeChildren",value:function(t){for(var e=t.firstChild,n=!0;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);var r=this.checkClobberedElement(e,e.nextSibling);if(r){e=r;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}},{key:"startElement",value:function(t){var e=t.nodeName.toLowerCase();if(!ir.hasOwnProperty(e))return this.sanitizedSomething=!0,!ur.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);for(var n,r=t.attributes,i=0;i<r.length;i++){var o=r.item(i),a=o.name,s=a.toLowerCase();if(sr.hasOwnProperty(s)){var u=o.value;or[s]&&(u=Jn(u)),ar[s]&&(n=u,u=(n=String(n)).split(",").map(function(t){return Jn(t.trim())}).join(", ")),this.buf.push(" ",a,'="',fr(u),'"')}else this.sanitizedSomething=!0}return this.buf.push(">"),!0}},{key:"endElement",value:function(t){var e=t.nodeName.toLowerCase();ir.hasOwnProperty(e)&&!tr.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}},{key:"chars",value:function(t){this.buf.push(fr(t))}},{key:"checkClobberedElement",value:function(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: "+t.outerHTML);return e}}]),t}(),lr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,hr=/([^\#-~ |!])/g;function fr(t){return t.replace(/&/g,"&amp;").replace(lr,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(hr,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function dr(t,e){var n=null;try{$n=$n||function(t){var e=new Gn(t);return function(){try{return!!(new window.DOMParser).parseFromString(jn(""),"text/html")}catch(t){return!1}}()?new Wn(e):e}(t);var r=e?String(e):"";n=$n.getInertBodyElement(r);var i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=$n.getInertBodyElement(r)}while(r!==o);return(new cr).sanitizeChildren(pr(n)||n)}finally{if(n)for(var a=pr(n)||n;a.firstChild;)a.removeChild(a.firstChild)}}function pr(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var vr=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function yr(t){var e,n=(e=Jt())&&e[12];return n?n.sanitize(vr.URL,t)||"":Vn(t,"URL")?Fn(t):Jn(Ot(t))}function gr(t){return t.ngDebugContext}function mr(t){return t.ngOriginalError}function br(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];t.error.apply(t,n)}var _r=function(){function t(){f(this,t),this._console=console}return p(t,[{key:"handleError",value:function(t){var e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||br}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}},{key:"_findContext",value:function(t){return t?gr(t)?gr(t):this._findContext(mr(t)):null}},{key:"_findOriginalError",value:function(t){for(var e=mr(t);e&&mr(e);)e=mr(e);return e}}]),t}();function wr(t,e){t.__ngContext__=e}var kr=("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Q);function Cr(t){return t instanceof Function?t():t}var Or=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});function Er(t,e){return(void 0)(t,e)}function Sr(t){var e=t[3];return gt(e)?e[3]:e}function Ir(t){return xr(t[13])}function Tr(t){return xr(t[4])}function xr(t){for(;null!==t&&!gt(t);)t=t[4];return t}function Ar(t,e,n,r,i){if(null!=r){var o,a=!1;gt(r)?o=r:yt(r)&&(a=!0,r=r[0]);var s=Mt(r);0===t&&null!==n?null==i?Mr(e,n,s):Lr(e,n,s,i||null,!0):1===t&&null!==n?Lr(e,n,s,i||null,!0):2===t?function(t,e,n){var r=Vr(t,e);r&&function(t,e,n,r){Rt(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,s,a):3===t&&e.destroyNode(s),null!=o&&function(t,e,n,r,i){var o=n[7];o!==Mt(n)&&Ar(e,t,r,o,i);for(var a=10;a<n.length;a++){var s=n[a];Kr(s[1],s,t,e,r,o)}}(e,t,o,n,i)}}function jr(t,e,n){return Rt(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function Pr(t,e){var n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,Gt(i,-1)),n.splice(r,1)}function Nr(t,e){if(!(t.length<=10)){var n,r=10+e,i=t[r];if(i){var o=i[17];null!==o&&o!==t&&Pr(o,i),e>0&&(t[r-1][4]=i[4]);var a=dn(t,10+e);Kr(i[1],n=i,n[11],2,null,null),n[0]=null,n[6]=null;var s=a[19];null!==s&&s.detachView(a[1]),i[3]=null,i[4]=null,i[2]&=-129}return i}}function Dr(t,e){if(!(256&e[2])){var n=e[11];Rt(n)&&n.destroyNode&&Kr(t,e,n,3,null,null),function(t){var e=t[13];if(!e)return Rr(t[1],t);for(;e;){var n=null;if(yt(e))n=e[13];else{var r=e[10];r&&(n=r)}if(!n){for(;e&&!e[4]&&e!==t;)yt(e)&&Rr(e[1],e),e=e[3];null===e&&(e=t),yt(e)&&Rr(e[1],e),n=e&&e[4]}e=n}}(e)}}function Rr(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){var n;if(null!=t&&null!=(n=t.destroyHooks))for(var r=0;r<n.length;r+=2){var i=e[n[r]];if(!(i instanceof Te)){var o=n[r+1];if(Array.isArray(o))for(var a=0;a<o.length;a+=2)o[a+1].call(i[o[a]]);else o.call(i)}}}(t,e),function(t,e){var n=t.cleanup,r=e[7],i=-1;if(null!==n)for(var o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){var a=n[o+1],s="function"==typeof a?a(e):Mt(e[a]),u=r[i=n[o+2]],c=n[o+3];"boolean"==typeof c?s.removeEventListener(n[o],u,c):c>=0?r[i=c]():r[i=-c].unsubscribe(),o+=2}else{var l=r[i=n[o+1]];n[o].call(l)}if(null!==r){for(var h=i+1;h<r.length;h++)(0,r[h])();e[7]=null}}(t,e),1===e[1].type&&Rt(e[11])&&e[11].destroy();var n=e[17];if(null!==n&&gt(e[3])){n!==e[3]&&Pr(n,e);var r=e[19];null!==r&&r.detachView(t)}}}function Lr(t,e,n,r,i){Rt(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function Mr(t,e,n){Rt(t)?t.appendChild(e,n):e.appendChild(n)}function Fr(t,e,n,r,i){null!==r?Lr(t,e,n,r,i):Mr(t,e,n)}function Vr(t,e){return Rt(t)?t.parentNode(e):e.parentNode}function Ur(t,e,n,r){var i=function(t,e,n){return function(t,e,n){for(var r=e;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){var i=t.data[r.directiveStart].encapsulation;if(i===H.None||i===H.Emulated)return null}return Vt(r,n)}(t,e.parent,n)}(t,r,e),o=e[11],a=function(t,e,n){return function(t,e,n){return 40&t.type?Vt(t,n):null}(t,0,n)}(r.parent||e[6],0,e);if(null!=i)if(Array.isArray(n))for(var s=0;s<n.length;s++)Fr(o,i,n[s],a,!1);else Fr(o,i,n,a,!1)}function qr(t,e){if(null!==e){var n=e.type;if(3&n)return Vt(e,t);if(4&n)return Br(-1,t[e.index]);if(8&n){var r=e.child;if(null!==r)return qr(t,r);var i=t[e.index];return gt(i)?Br(-1,i):Mt(i)}if(32&n)return Er(e,t)()||Mt(t[e.index]);var o=t[16],a=o[6],s=Sr(o),u=a.projection[e.projection];return null!=u?qr(s,u):qr(t,e.next)}return null}function Br(t,e){var n=10+t+1;if(n<e.length){var r=e[n],i=r[1].firstChild;if(null!==i)return qr(r,i)}return e[7]}function Hr(t,e,n,r,i,o,a){for(;null!=n;){var s=r[n.index],u=n.type;if(a&&0===e&&(s&&wr(Mt(s),r),n.flags|=4),64!=(64&n.flags))if(8&u)Hr(t,e,n.child,r,i,o,!1),Ar(e,t,i,s,o);else if(32&u){for(var c=Er(n,r),l=void 0;l=c();)Ar(e,t,i,l,o);Ar(e,t,i,s,o)}else 16&u?zr(t,e,r,n,i,o):Ar(e,t,i,s,o);n=a?n.projectionNext:n.next}}function Kr(t,e,n,r,i,o){Hr(n,r,t.firstChild,e,i,o,!1)}function zr(t,e,n,r,i,o){var a=n[16],s=a[6].projection[r.projection];if(Array.isArray(s))for(var u=0;u<s.length;u++)Ar(e,t,i,s[u],o);else Hr(t,e,s,a[3],i,o,!0)}function Wr(t,e,n){Rt(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Gr(t,e,n){Rt(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function Qr(t,e,n){for(var r=t.length;;){var i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){var o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}function Yr(t,e,n){for(var r=0;r<t.length;){var i=t[r++];if(n&&"class"===i){if(-1!==Qr((i=t[r]).toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function Jr(t){return 4===t.type&&"ng-template"!==t.value}function Xr(t,e,n){return e===(4!==t.type||n?t.value:"ng-template")}function Zr(t,e,n){for(var r=4,i=t.attrs||[],o=function(t){for(var e=0;e<t.length;e++)if(Ae(t[e]))return e;return t.length}(i),a=!1,s=0;s<e.length;s++){var u=e[s];if("number"!=typeof u){if(!a)if(4&r){if(r=2|1&r,""!==u&&!Xr(t,u,n)||""===u&&1===e.length){if($r(r))return!1;a=!0}}else{var c=8&r?u:e[++s];if(8&r&&null!==t.attrs){if(!Yr(t.attrs,c,n)){if($r(r))return!1;a=!0}continue}var l=ti(8&r?"class":u,i,Jr(t),n);if(-1===l){if($r(r))return!1;a=!0;continue}if(""!==c){var h;h=l>o?"":i[l+1].toLowerCase();var f=8&r?h:null;if(f&&-1!==Qr(f,c,0)||2&r&&c!==h){if($r(r))return!1;a=!0}}}}else{if(!a&&!$r(r)&&!$r(u))return!1;if(a&&$r(u))continue;a=!1,r=u|1&r}}return $r(r)||a}function $r(t){return 0==(1&t)}function ti(t,e,n,r){if(null===e)return-1;var i=0;if(r||!n){for(var o=!1;i<e.length;){var a=e[i];if(a===t)return i;if(3===a||6===a)o=!0;else{if(1===a||2===a){for(var s=e[++i];"string"==typeof s;)s=e[++i];continue}if(4===a)break;if(0===a){i+=4;continue}}i+=o?1:2}return-1}return function(t,e){var n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){var r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function ei(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=0;r<e.length;r++)if(Zr(t,e[r],n))return!0;return!1}function ni(t,e){return t?":not("+e.trim()+")":e}function ri(t){for(var e=t[0],n=1,r=2,i="",o=!1;n<t.length;){var a=t[n];if("string"==typeof a)if(2&r){var s=t[++n];i+="["+a+(s.length>0?'="'+s+'"':"")+"]"}else 8&r?i+="."+a:4&r&&(i+=" "+a);else""===i||$r(a)||(e+=ni(o,i),i=""),r=a,o=o||!$r(r);n++}return""!==i&&(e+=ni(o,i)),e}var ii={};function oi(t){ai(Xt(),Jt(),be()+t,re())}function ai(t,e,n,r){if(!r)if(3==(3&e[2])){var i=t.preOrderCheckHooks;null!==i&&Ce(e,i,n)}else{var o=t.preOrderHooks;null!==o&&Oe(e,o,0,n)}_e(n)}function si(t,e){return t<<17|e<<2}function ui(t){return t>>17&32767}function ci(t){return 2|t}function li(t){return(131068&t)>>2}function hi(t,e){return-131069&t|e<<2}function fi(t){return 1|t}function di(t,e){var n=t.contentQueries;if(null!==n)for(var r=0;r<n.length;r+=2){var i=n[r],o=n[r+1];if(-1!==o){var a=t.data[o];le(i),a.contentQueries(2,e[o],o)}}}function pi(t,e,n,r,i,o,a,s,u,c){var l=e.blueprint.slice();return l[0]=i,l[2]=140|r,Wt(l),l[3]=l[15]=t,l[8]=n,l[10]=a||t&&t[10],l[11]=s||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function vi(t,e,n,r,i){var o,a,s=t.data[e];if(null===s)s=function(t,e,n,r,i){var o=te(),a=ne(),s=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,a?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=s),null!==o&&(a?null==o.child&&null!==s.parent&&(o.child=s):null===o.next&&(o.next=s)),s}(t,e,n,r,i),Qt.lFrame.inI18n&&(s.flags|=64);else if(64&s.type){s.type=n,s.value=r,s.attrs=i;var u=(o=Qt.lFrame,a=o.currentTNode,o.isParent?a:a.parent);s.injectorIndex=null===u?-1:u.injectorIndex}return ee(s,!0),s}function yi(t,e,n,r){if(0===n)return-1;for(var i=e.length,o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function gi(t,e,n){de(e);try{var r=t.viewQuery;null!==r&&Wi(1,r,n);var i=t.template;null!==i&&_i(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&di(t,e),t.staticViewQueries&&Wi(2,t.viewQuery,n);var o=t.components;null!==o&&function(t,e){for(var n=0;n<e.length;n++)qi(t,e[n])}(e,o)}catch(a){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),a}finally{e[2]&=-5,me()}}function mi(t,e,n,r){var i=e[2];if(256!=(256&i)){de(e);var o=re();try{Wt(e),Qt.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&_i(t,e,n,2,r);var a=3==(3&i);if(!o)if(a){var s=t.preOrderCheckHooks;null!==s&&Ce(e,s,null)}else{var u=t.preOrderHooks;null!==u&&Oe(e,u,0,null),Ee(e,0)}if(function(t){for(var e=Ir(t);null!==e;e=Tr(e))if(e[2])for(var n=e[9],r=0;r<n.length;r++){var i=n[r],o=i[3];0==(1024&i[2])&&Gt(o,1),i[2]|=1024}}(e),function(t){for(var e=Ir(t);null!==e;e=Tr(e))for(var n=10;n<e.length;n++){var r=e[n],i=r[1];Kt(r)&&mi(i,r,i.template,r[8])}}(e),null!==t.contentQueries&&di(t,e),!o)if(a){var c=t.contentCheckHooks;null!==c&&Ce(e,c)}else{var l=t.contentHooks;null!==l&&Oe(e,l,1),Ee(e,1)}!function(t,e){var n,r,i,o=t.hostBindingOpCodes;if(null!==o)try{for(var a=0;a<o.length;a++){var s=o[a];if(s<0)_e(~s);else{var u=s,c=o[++a],l=o[++a];n=c,r=u,i=void 0,(i=Qt.lFrame).bindingIndex=i.bindingRootIndex=n,ue(r),l(2,e[u])}}}finally{_e(-1)}}(t,e);var h=t.components;null!==h&&function(t,e){for(var n=0;n<e.length;n++)Vi(t,e[n])}(e,h);var f=t.viewQuery;if(null!==f&&Wi(2,f,r),!o)if(a){var d=t.viewCheckHooks;null!==d&&Ce(e,d)}else{var p=t.viewHooks;null!==p&&Oe(e,p,2),Ee(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Gt(e[3],-1))}finally{me()}}}function bi(t,e,n,r){var i=e[10],o=!re(),a=Ht(e);try{o&&!a&&i.begin&&i.begin(),a&&gi(t,e,r),mi(t,e,n,r)}finally{o&&!a&&i.end&&i.end()}}function _i(t,e,n,r,i){var o=be();try{_e(-1),2&r&&e.length>20&&ai(t,e,20,re()),n(r,i)}finally{_e(o)}}function wi(t,e,n){Yt()&&(function(t,e,n,r){var i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||Ue(n,e),wr(r,e);for(var a=n.initialInputs,s=i;s<o;s++){var u=t.data[s],c=wt(u);c&&Ri(e,n,u);var l=Ze(e,t,s,n);wr(l,e),null!==a&&Li(0,s-i,l,u,0,a),c&&(qt(n.index,e)[8]=l)}}(t,e,n,Vt(n,e)),128==(128&n.flags)&&function(t,e,n){var r=n.directiveStart,i=n.directiveEnd,o=n.index,a=Qt.lFrame.currentDirectiveIndex;try{_e(o);for(var s=r;s<i;s++){var u=t.data[s],c=e[s];ue(s),null===u.hostBindings&&0===u.hostVars&&null===u.hostAttrs||Ai(u,c)}}finally{_e(-1),ue(a)}}(t,e,n))}function ki(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Vt,r=e.localNames;if(null!==r)for(var i=e.index+1,o=0;o<r.length;o+=2){var a=r[o+1],s=-1===a?n(e,t):t[a];t[i++]=s}}function Ci(t){var e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Oi(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function Oi(t,e,n,r,i,o,a,s,u,c){var l=20+r,h=l+i,f=function(t,e){for(var n=[],r=0;r<e;r++)n.push(r<t?null:ii);return n}(l,h),d="function"==typeof c?c():c;return f[1]={type:t,blueprint:f,template:n,queries:null,viewQuery:s,declTNode:e,data:f.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof a?a():a,firstChild:null,schemas:u,consts:d,incompleteFirstPass:!1}}function Ei(t,e,n,r){var i=Qi(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&Yi(t).push(r,i.length-1))}function Si(t,e,n){for(var r in t)if(t.hasOwnProperty(r)){var i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function Ii(t,e,n,r,i,o,a,s){var u,c,l=Vt(e,n),h=e.inputs;!s&&null!=h&&(u=h[r])?(Xi(t,n,u,r,i),bt(e)&&function(t,e){var n=qt(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r="class"===(c=r)?"className":"for"===c?"htmlFor":"formaction"===c?"formAction":"innerHtml"===c?"innerHTML":"readonly"===c?"readOnly":"tabindex"===c?"tabIndex":c,i=null!=a?a(i,e.value||"",r):i,Rt(o)?o.setProperty(l,r,i):je(r)||(l.setProperty?l.setProperty(r,i):l[r]=i))}function Ti(t,e,n,r){var i=!1;if(Yt()){var o=function(t,e,n){var r=t.directiveRegistry,i=null;if(r)for(var o=0;o<r.length;o++){var a=r[o];ei(n,a.selectors,!1)&&(i||(i=[]),Ke(Ue(n,e),t,a.type),wt(a)?(ji(t,n),i.unshift(a)):i.push(a))}return i}(t,e,n),a=null===r?null:{"":-1};if(null!==o){i=!0,Ni(n,t.data.length,o.length);for(var s=0;s<o.length;s++){var u=o[s];u.providersResolver&&u.providersResolver(u)}for(var c=!1,l=!1,h=yi(t,e,o.length,null),f=0;f<o.length;f++){var d=o[f];n.mergedAttrs=Pe(n.mergedAttrs,d.hostAttrs),Di(t,n,e,h,d),Pi(h,d,a),null!==d.contentQueries&&(n.flags|=8),null===d.hostBindings&&null===d.hostAttrs&&0===d.hostVars||(n.flags|=128);var p=d.type.prototype;!c&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),c=!0),l||!p.ngOnChanges&&!p.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),l=!0),h++}!function(t,e){for(var n=e.directiveEnd,r=t.data,i=e.attrs,o=[],a=null,s=null,u=e.directiveStart;u<n;u++){var c=r[u],l=c.inputs,h=null===i||Jr(e)?null:Mi(l,i);o.push(h),a=Si(l,u,a),s=Si(c.outputs,u,s)}null!==a&&(a.hasOwnProperty("class")&&(e.flags|=16),a.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=a,e.outputs=s}(t,n)}a&&function(t,e,n){if(e)for(var r=t.localNames=[],i=0;i<e.length;i+=2){var o=n[e[i+1]];if(null==o)throw new Ct("301","Export of name '".concat(e[i+1],"' not found!"));r.push(e[i],o)}}(n,r,a)}return n.mergedAttrs=Pe(n.mergedAttrs,n.attrs),i}function xi(t,e,n,r,i,o){var a=o.hostBindings;if(a){var s=t.hostBindingOpCodes;null===s&&(s=t.hostBindingOpCodes=[]);var u=~e.index;(function(t){for(var e=t.length;e>0;){var n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(s)!=u&&s.push(u),s.push(r,i,a)}}function Ai(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function ji(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function Pi(t,e,n){if(n){if(e.exportAs)for(var r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;wt(e)&&(n[""]=t)}}function Ni(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Di(t,e,n,r,i){t.data[r]=i;var o=i.factory||(i.factory=kt(i.type)),a=new Te(o,wt(i),null);t.blueprint[r]=a,n[r]=a,xi(t,e,0,r,yi(t,n,i.hostVars,ii),i)}function Ri(t,e,n){var r=Vt(e,t),i=Ci(n),o=t[10],a=Bi(t,pi(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=a}function Li(t,e,n,r,i,o){var a=o[e];if(null!==a)for(var s=r.setInput,u=0;u<a.length;){var c=a[u++],l=a[u++],h=a[u++];null!==s?r.setInput(n,h,c,l):n[l]=h}}function Mi(t,e){for(var n=null,r=0;r<e.length;){var i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function Fi(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function Vi(t,e){var n=qt(e,t);if(Kt(n)){var r=n[1];80&n[2]?mi(r,n,r.template,n[8]):n[5]>0&&Ui(n)}}function Ui(t){for(var e=Ir(t);null!==e;e=Tr(e))for(var n=10;n<e.length;n++){var r=e[n];if(1024&r[2]){var i=r[1];mi(i,r,i.template,r[8])}else r[5]>0&&Ui(r)}var o=t[1].components;if(null!==o)for(var a=0;a<o.length;a++){var s=qt(o[a],t);Kt(s)&&s[5]>0&&Ui(s)}}function qi(t,e){var n=qt(e,t),r=n[1];!function(t,e){for(var n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),gi(r,n,n[8])}function Bi(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Hi(t){for(;t;){t[2]|=64;var e=Sr(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function Ki(t,e,n){var r=e[10];r.begin&&r.begin();try{mi(t,e,t.template,n)}catch(i){throw Ji(e,i),i}finally{r.end&&r.end()}}function zi(t){!function(t){for(var e=0;e<t.components.length;e++){var n=t.components[e],r=Bt(n),i=r[1];bi(i,r,i.template,n)}}(t[8])}function Wi(t,e,n){le(0),e(t,n)}var Gi=Promise.resolve(null);function Qi(t){return t[7]||(t[7]=[])}function Yi(t){return t.cleanup||(t.cleanup=[])}function Ji(t,e){var n=t[9],r=n?n.get(_r,null):null;r&&r.handleError(e)}function Xi(t,e,n,r,i){for(var o=0;o<n.length;){var a=n[o++],s=n[o++],u=e[a],c=t.data[a];null!==c.setInput?c.setInput(u,i,r,s):u[s]=i}}function Zi(t,e,n){var r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(var a=0;a<e.length;a++){var s=e[a];"number"==typeof s?o=s:1==o?i=C(i,s):2==o&&(r=C(r,s+": "+e[++a]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var $i=new sn("INJECTOR",-1),to=function(){function t(){f(this,t)}return p(t,[{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Cn;if(e===Cn){var n=new Error("NullInjectorError: No provider for ".concat(k(t),"!"));throw n.name="NullInjectorError",n}return e}}]),t}(),eo=new sn("Set Injector scope."),no={},ro={},io=[],oo=void 0;function ao(){return void 0===oo&&(oo=new to),oo}function so(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return new uo(t,n,e||ao(),r)}var uo=function(){function t(e,n,r){var i=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;f(this,t),this.parent=r,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;var a=[];n&&hn(n,function(t){return i.processProvider(t,e,n)}),hn([e],function(t){return i.processInjectorType(t,[],a)}),this.records.set($i,ho(void 0,this));var s=this.records.get(eo);this.scope=null!=s?s.value:null,this.source=o||("object"==typeof e?null:k(e))}return p(t,[{key:"destroyed",get:function(){return this._destroyed}},{key:"destroy",value:function(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(function(t){return t.ngOnDestroy()})}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}},{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Cn,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:F.Default;this.assertNotDestroyed();var r,i=In(this);try{if(!(n&F.SkipSelf)){var o=this.records.get(t);if(void 0===o){var a=("function"==typeof(r=t)||"object"==typeof r&&r instanceof sn)&&A(t);o=a&&this.injectableDefInScope(a)?ho(co(t),no):null,this.records.set(t,o)}if(null!=o)return this.hydrate(t,o)}return(n&F.Self?ao():this.parent).get(t,e=n&F.Optional&&e===Cn?null:e)}catch(s){if("NullInjectorError"===s.name){if((s.ngTempTokenPath=s.ngTempTokenPath||[]).unshift(k(t)),i)throw s;return function(t,e,n,r){var i=t.ngTempTokenPath;throw e.__source&&i.unshift(e.__source),t.message=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;var i=k(e);if(Array.isArray(e))i=e.map(k).join(" -> ");else if("object"==typeof e){var o=[];for(var a in e)if(e.hasOwnProperty(a)){var s=e[a];o.push(a+":"+("string"==typeof s?JSON.stringify(s):k(s)))}i="{".concat(o.join(", "),"}")}return"".concat(n).concat(r?"("+r+")":"","[").concat(i,"]: ").concat(t.replace(On,"\n  "))}("\n"+t.message,i,"R3InjectorError",r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(s,t,0,this.source)}throw s}finally{In(i)}}},{key:"_resolveInjectorDefTypes",value:function(){var t=this;this.injectorDefTypes.forEach(function(e){return t.get(e)})}},{key:"toString",value:function(){var t=[];return this.records.forEach(function(e,n){return t.push(k(n))}),"R3Injector[".concat(t.join(", "),"]")}},{key:"assertNotDestroyed",value:function(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}},{key:"processInjectorType",value:function(t,e,n){var r=this;if(!(t=S(t)))return!1;var i=P(t),o=null==i&&t.ngModule||void 0,a=void 0===o?t:o,s=-1!==n.indexOf(a);if(void 0!==o&&(i=P(o)),null==i)return!1;if(null!=i.imports&&!s){var u;n.push(a);try{hn(i.imports,function(t){r.processInjectorType(t,e,n)&&(void 0===u&&(u=[]),u.push(t))})}finally{}if(void 0!==u)for(var c=function(t){var e=u[t],n=e.ngModule,i=e.providers;hn(i,function(t){return r.processProvider(t,n,i||io)})},l=0;l<u.length;l++)c(l)}this.injectorDefTypes.add(a),this.records.set(a,ho(i.factory,no));var h=i.providers;if(null!=h&&!s){var f=t;hn(h,function(t){return r.processProvider(t,f,h)})}return void 0!==o&&void 0!==t.providers}},{key:"processProvider",value:function(t,e,n){var r=po(t=S(t))?t:S(t&&t.provide),i=function(t,e,n){return fo(t)?ho(void 0,t.useValue):ho(lo(t),no)}(t);if(po(t)||!0!==t.multi)this.records.get(r);else{var o=this.records.get(r);o||((o=ho(void 0,no,!0)).factory=function(){return An(o.multi)},this.records.set(r,o)),r=t,o.multi.push(t)}this.records.set(r,i)}},{key:"hydrate",value:function(t,e){var n;return e.value===no&&(e.value=ro,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}},{key:"injectableDefInScope",value:function(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}]),t}();function co(t){var e=A(t),n=null!==e?e.factory:kt(t);if(null!==n)return n;var r=P(t);if(null!==r)return r.factory;if(t instanceof sn)throw new Error("Token ".concat(k(t)," is missing a \u0275prov definition."));if(t instanceof Function)return function(t){var e=t.length;if(e>0){var n=function(t,e){for(var n=[],r=0;r<t;r++)n.push("?");return n}(e);throw new Error("Can't resolve all parameters for ".concat(k(t),": (").concat(n.join(", "),")."))}var r=function(t){var e=t&&(t[D]||t[L]);if(e){var n=function(t){if(t.hasOwnProperty("name"))return t.name;var e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn('DEPRECATED: DI is instantiating a token "'.concat(n,'" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "').concat(n,'" class.')),e}return null}(t);return null!==r?function(){return r.factory(t)}:function(){return new t}}(t);throw new Error("unreachable")}function lo(t,e,n){var r,o=void 0;if(po(t)){var a=S(t);return kt(a)||co(a)}if(fo(t))o=function(){return S(t.useValue)};else if((r=t)&&r.useFactory)o=function(){return t.useFactory.apply(t,i(An(t.deps||[])))};else if(function(t){return!(!t||!t.useExisting)}(t))o=function(){return xn(S(t.useExisting))};else{var s=S(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return kt(s)||co(s);o=function(){return l(s,i(An(t.deps)))}}return o}function ho(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{factory:t,value:e,multi:n?[]:void 0}}function fo(t){return null!==t&&"object"==typeof t&&En in t}function po(t){return"function"==typeof t}var vo=function(t,e,n){return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0,i=so(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)},yo=function(){var t=function(){function t(){f(this,t)}return p(t,null,[{key:"create",value:function(t,e){return Array.isArray(t)?vo(t,e,""):vo(t.providers,t.parent,t.name||"")}}]),t}();return t.THROW_IF_NOT_FOUND=Cn,t.NULL=new to,t.\u0275prov=T({token:t,providedIn:"any",factory:function(){return xn($i)}}),t.__NG_ELEMENT_ID__=-1,t}();function go(t,e){ke(Bt(t)[1],$t())}function mo(t){for(var e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0,r=[t];e;){var i=void 0;if(wt(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);var o=t;o.inputs=bo(t.inputs),o.declaredInputs=bo(t.declaredInputs),o.outputs=bo(t.outputs);var a=i.hostBindings;a&&ko(t,a);var s=i.viewQuery,u=i.contentQueries;if(s&&_o(t,s),u&&wo(t,u),_(t.inputs,i.inputs),_(t.declaredInputs,i.declaredInputs),_(t.outputs,i.outputs),wt(i)&&i.data.animation){var c=t.data;c.animation=(c.animation||[]).concat(i.data.animation)}}var l=i.features;if(l)for(var h=0;h<l.length;h++){var f=l[h];f&&f.ngInherit&&f(t),f===mo&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){for(var e=0,n=null,r=t.length-1;r>=0;r--){var i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Pe(i.hostAttrs,n=Pe(n,i.hostAttrs))}}(r)}function bo(t){return t===Y?{}:t===J?[]:t}function _o(t,e){var n=t.viewQuery;t.viewQuery=n?function(t,r){e(t,r),n(t,r)}:e}function wo(t,e){var n=t.contentQueries;t.contentQueries=n?function(t,r,i){e(t,r,i),n(t,r,i)}:e}function ko(t,e){var n=t.hostBindings;t.hostBindings=n?function(t,r){e(t,r),n(t,r)}:e}var Co=null;function Oo(){if(!Co){var t=Q.Symbol;if(t&&t.iterator)Co=t.iterator;else for(var e=Object.getOwnPropertyNames(Map.prototype),n=0;n<e.length;++n){var r=e[n];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(Co=r)}}return Co}function Eo(t){return!!So(t)&&(Array.isArray(t)||!(t instanceof Map)&&Oo()in t)}function So(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Io(t,e,n){return t[e]=n}function To(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function xo(t,e,n,r){var i=Jt();return To(i,ae(),e)&&(Xt(),function(t,e,n,r,i,o){var a=Vt(t,e);!function(t,e,n,r,i,o,a){if(null==o)Rt(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{var s=null==a?Ot(o):a(o,r||"",i);Rt(t)?t.setAttribute(e,i,s,n):n?e.setAttributeNS(n,i,s):e.setAttribute(i,s)}}(e[11],a,o,t.value,n,r,i)}(we(),i,t,e,n,r)),xo}function Ao(t,e,n,r){return To(t,ae(),n)?e+Ot(n)+r:ii}function jo(t,e,n,r,i,o,a,s){var u=Jt(),c=Xt(),l=t+20,h=c.firstCreatePass?function(t,e,n,r,i,o,a,s,u){var c=e.consts,l=vi(e,t,4,a||null,zt(c,s));Ti(e,n,l,zt(c,u)),ke(e,l);var h=l.tViews=Oi(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(l,c,u,e,n,r,i,o,a):c.data[l];ee(h,!1);var f=u[11].createComment("");Ur(c,u,f,h),wr(f,u),Bi(u,u[l]=Fi(f,u,f,h)),_t(h)&&wi(c,u,h),null!=a&&ki(u,h,s)}function Po(t){return function(t,e){return t[e]}(Qt.lFrame.contextLView,20+t)}function No(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:F.Default,n=Jt();return null===n?xn(t,e):Ge($t(),n,S(t),e)}function Do(t,e,n){var r=Jt();return To(r,ae(),e)&&Ii(Xt(),we(),r,t,e,r[11],n,!1),Do}function Ro(t,e,n,r,i){var o=i?"class":"style";Xi(t,n,e.inputs[o],o,r)}function Lo(t,e,n,r){var i=Jt(),o=Xt(),a=20+t,s=i[11],u=i[a]=jr(s,e,Qt.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,n,r,i,o,a){var s=e.consts,u=vi(e,t,2,i,zt(s,o));return Ti(e,n,u,zt(s,a)),null!==u.attrs&&Zi(u,u.attrs,!1),null!==u.mergedAttrs&&Zi(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(a,o,i,0,e,n,r):o.data[a];ee(c,!0);var l=c.mergedAttrs;null!==l&&xe(s,u,l);var h=c.classes;null!==h&&Gr(s,u,h);var f=c.styles;null!==f&&Wr(s,u,f),64!=(64&c.flags)&&Ur(o,i,u,c),0===Qt.lFrame.elementDepthCount&&wr(u,i),Qt.lFrame.elementDepthCount++,_t(c)&&(wi(o,i,c),function(t,e,n){if(mt(e))for(var r=e.directiveEnd,i=e.directiveStart;i<r;i++){var o=t.data[i];o.contentQueries&&o.contentQueries(1,n[i],i)}}(o,c,i)),null!==r&&ki(i,c)}function Mo(){var t=$t();ne()?Qt.lFrame.isParent=!1:ee(t=t.parent,!1);var e=t;Qt.lFrame.elementDepthCount--;var n=Xt();n.firstCreatePass&&(ke(n,t),mt(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&Ro(n,e,Jt(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&Ro(n,e,Jt(),e.stylesWithoutHost,!1)}function Fo(t,e,n,r){Lo(t,e,n,r),Mo()}function Vo(){return Jt()}function Uo(t){return!!t&&"function"==typeof t.then}function qo(t){return!!t&&"function"==typeof t.subscribe}function Bo(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,i=Jt(),o=Xt(),a=$t();return function(t,e,n,r,i,o){var a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7?arguments[7]:void 0,u=_t(r),c=t.firstCreatePass&&Yi(t),l=Qi(e),h=!0;if(3&r.type){var f=Vt(r,e),d=s?s(f):Y,p=d.target||f,v=l.length,y=s?function(t){return s(Mt(t[r.index])).target}:r.index;if(Rt(n)){var g=null;if(!s&&u&&(g=function(t,e,n,r){var i=t.cleanup;if(null!=i)for(var o=0;o<i.length-1;o+=2){var a=i[o];if(a===n&&i[o+1]===r){var s=e[7],u=i[o+2];return s.length>u?s[u]:null}"string"==typeof a&&(o+=2)}return null}(t,e,i,r.index)),null!==g)(g.__ngLastListenerFn__||g).__ngNextListenerFn__=o,g.__ngLastListenerFn__=o,h=!1;else{o=Ko(r,e,o,!1);var m=n.listen(d.name||p,i,o);l.push(o,m),c&&c.push(i,y,v,v+1)}}else o=Ko(r,e,o,!0),p.addEventListener(i,o,a),l.push(o),c&&c.push(i,y,v,a)}else o=Ko(r,e,o,!1);var b,_=r.outputs;if(h&&null!==_&&(b=_[i])){var w=b.length;if(w)for(var k=0;k<w;k+=2){var C=e[b[k]][b[k+1]].subscribe(o),O=l.length;l.push(o,C),c&&c.push(i,r.index,O,-(O+1))}}}(o,i,i[11],a,t,e,n,r),Bo}function Ho(t,e,n){try{return!1!==e(n)}catch(r){return Ji(t,r),!1}}function Ko(t,e,n,r){return function i(o){if(o===Function)return n;var a=2&t.flags?qt(t.index,e):e;0==(32&e[2])&&Hi(a);for(var s=Ho(e,n,o),u=i.__ngNextListenerFn__;u;)s=Ho(e,u,o)&&s,u=u.__ngNextListenerFn__;return r&&!1===s&&(o.preventDefault(),o.returnValue=!1),s}}function zo(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return function(t){return(Qt.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,Qt.lFrame.contextLView))[8]}(t)}function Wo(t,e,n,r,i){var o=Jt(),a=Ao(o,e,n,r);return a!==ii&&Ii(Xt(),we(),o,t,a,o[11],i,!1),Wo}var Go=[];function Qo(t,e,n,r,i){for(var o=t[n+1],a=null===e,s=r?ui(o):li(o),u=!1;0!==s&&(!1===u||a);){var c=t[s+1];Yo(t[s],e)&&(u=!0,t[s+1]=r?fi(c):ci(c)),s=r?ui(c):li(c)}u&&(t[n+1]=r?ci(o):fi(o))}function Yo(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&yn(t,e)>=0}var Jo={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Xo(t){return t.substring(Jo.key,Jo.keyEnd)}function Zo(t){return t.substring(Jo.value,Jo.valueEnd)}function $o(t,e){var n=Jo.textEnd,r=Jo.key=ta(t,e,n);return n===r?-1:(r=Jo.keyEnd=function(t,e,n){for(var r;e<n&&(45===(r=t.charCodeAt(e))||95===r||(-33&r)>=65&&(-33&r)<=90||r>=48&&r<=57);)e++;return e}(t,r,n),r=ea(t,r,n),r=Jo.value=ta(t,r,n),r=Jo.valueEnd=function(t,e,n){for(var r=-1,i=-1,o=-1,a=e,s=a;a<n;){var u=t.charCodeAt(a++);if(59===u)return s;34===u||39===u?s=a=na(t,u,a,n):e===a-4&&85===o&&82===i&&76===r&&40===u?s=a=na(t,41,a,n):u>32&&(s=a),o=i,i=r,r=-33&u}return s}(t,r,n),ea(t,r,n))}function ta(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function ea(t,e,n,r){return(e=ta(t,e,n))<n&&e++,e}function na(t,e,n,r){for(var i=-1,o=n;o<r;){var a=t.charCodeAt(o++);if(a==e&&92!==i)return o;i=92==a&&92===i?0:a}throw new Error}function ra(t,e){return function(t,e,n,r){var i=Jt(),o=Xt(),a=se(2);o.firstUpdatePass&&sa(o,t,a,!0),e!==ii&&To(i,a,e)&&ha(o,o.data[be()],i,i[11],t,i[a+1]=function(t,e){return null==t||"object"==typeof t&&(t=k(Fn(t))),t}(e),!0,a)}(t,e),ra}function ia(t){!function(t,e,n,r){var i=Xt(),o=se(2);i.firstUpdatePass&&sa(i,null,o,!1);var a=Jt();if(n!==ii&&To(a,o,n)){var s=i.data[be()];if(pa(s,!1)&&!aa(i,o)){var u=s.stylesWithoutHost;null!==u&&(n=C(u,n||"")),Ro(i,s,a,n,!1)}else!function(t,e,n,r,i,o,a,s){i===ii&&(i=Go);for(var u=0,c=0,l=0<i.length?i[0]:null,h=0<o.length?o[0]:null;null!==l||null!==h;){var f=u<i.length?i[u+1]:void 0,d=c<o.length?o[c+1]:void 0,p=null,v=void 0;l===h?(u+=2,c+=2,f!==d&&(p=h,v=d)):null===h||null!==l&&l<h?(u+=2,p=l):(c+=2,p=h,v=d),null!==p&&ha(t,e,n,r,p,v,!1,s),l=u<i.length?i[u]:null,h=c<o.length?o[c]:null}}(i,s,a,a[11],a[o+1],a[o+1]=function(t,e,n){if(null==n||""===n)return Go;var r=[],i=Fn(n);if(Array.isArray(i))for(var o=0;o<i.length;o++)t(r,i[o],!0);else if("object"==typeof i)for(var a in i)i.hasOwnProperty(a)&&t(r,a,i[a]);else"string"==typeof i&&e(r,i);return r}(t,e,n),0,o)}}(la,oa,t)}function oa(t,e){for(var n=function(t){return function(t){Jo.key=0,Jo.keyEnd=0,Jo.value=0,Jo.valueEnd=0,Jo.textEnd=t.length}(t),$o(t,ta(t,0,Jo.textEnd))}(e);n>=0;n=$o(e,n))la(t,Xo(e),Zo(e))}function aa(t,e){return e>=t.expandoStartIndex}function sa(t,e,n,r){var i=t.data;if(null===i[n+1]){var o=i[be()],a=aa(t,n);pa(o,r)&&null===e&&!a&&(e=!1),e=function(t,e,n,r){var i=function(t){var e=Qt.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t),o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=ca(n=ua(null,t,e,n,r),e.attrs,r),o=null);else{var a=e.directiveStylingLast;if(-1===a||t[a]!==i)if(n=ua(i,t,e,n,r),null===o){var s=function(t,e,n){var r=n?e.classBindings:e.styleBindings;if(0!==li(r))return t[ui(r)]}(t,e,r);void 0!==s&&Array.isArray(s)&&function(t,e,n,r){t[ui(n?e.classBindings:e.styleBindings)]=r}(t,e,r,s=ca(s=ua(null,t,e,s[1],r),e.attrs,r))}else o=function(t,e,n){for(var r=void 0,i=e.directiveEnd,o=1+e.directiveStylingLast;o<i;o++)r=ca(r,t[o].hostAttrs,n);return ca(r,e.attrs,n)}(t,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),n}(i,o,e,r),function(t,e,n,r,i,o){var a=o?e.classBindings:e.styleBindings,s=ui(a),u=li(a);t[r]=n;var c,l=!1;if(Array.isArray(n)){var h=n;(null===(c=h[1])||yn(h,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){var f=ui(t[s+1]);t[r+1]=si(f,s),0!==f&&(t[f+1]=hi(t[f+1],r)),t[s+1]=131071&t[s+1]|r<<17}else t[r+1]=si(s,0),0!==s&&(t[s+1]=hi(t[s+1],r)),s=r;else t[r+1]=si(u,0),0===s?s=r:t[u+1]=hi(t[u+1],r),u=r;l&&(t[r+1]=ci(t[r+1])),Qo(t,c,r,!0),Qo(t,c,r,!1),function(t,e,n,r,i){var o=i?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof e&&yn(o,e)>=0&&(n[r+1]=fi(n[r+1]))}(e,c,t,r,o),a=si(s,u),o?e.classBindings=a:e.styleBindings=a}(i,o,e,n,a,r)}}function ua(t,e,n,r,i){var o=null,a=n.directiveEnd,s=n.directiveStylingLast;for(-1===s?s=n.directiveStart:s++;s<a&&(r=ca(r,(o=e[s]).hostAttrs,i),o!==t);)s++;return null!==t&&(n.directiveStylingLast=s),r}function ca(t,e,n){var r=n?1:2,i=-1;if(null!==e)for(var o=0;o<e.length;o++){var a=e[o];"number"==typeof a?i=a:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),pn(t,a,!!n||e[++o]))}return void 0===t?null:t}function la(t,e,n){pn(t,e,Fn(n))}function ha(t,e,n,r,i,o,a,s){if(3&e.type){var u=t.data,c=u[s+1];da(1==(1&c)?fa(u,e,n,i,li(c),a):void 0)||(da(o)||2==(2&c)&&(o=fa(u,null,n,i,s,a)),function(t,e,n,r,i){var o=Rt(t);if(e)i?o?t.addClass(n,r):n.classList.add(r):o?t.removeClass(n,r):n.classList.remove(r);else{var a=-1===r.indexOf("-")?void 0:Or.DashCase;if(null==i)o?t.removeStyle(n,r,a):n.style.removeProperty(r);else{var s="string"==typeof i&&i.endsWith("!important");s&&(i=i.slice(0,-10),a|=Or.Important),o?t.setStyle(n,r,i,a):n.style.setProperty(r,i,s?"important":"")}}}(r,a,Ft(be(),n),i,o))}}function fa(t,e,n,r,i,o){for(var a=null===e,s=void 0;i>0;){var u=t[i],c=Array.isArray(u),l=c?u[1]:u,h=null===l,f=n[i+1];f===ii&&(f=h?Go:void 0);var d=h?vn(f,r):l===r?f:void 0;if(c&&!da(d)&&(d=vn(u,r)),da(d)&&(s=d,a))return s;var p=t[i+1];i=a?ui(p):li(p)}if(null!==e){var v=o?e.residualClasses:e.residualStyles;null!=v&&(s=vn(v,r))}return s}function da(t){return void 0!==t}function pa(t,e){return 0!=(t.flags&(e?16:32))}function va(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=Jt(),r=Xt(),i=t+20,o=r.firstCreatePass?vi(r,i,1,e,null):r.data[i],a=n[i]=function(t,e){return Rt(t)?t.createText(e):t.createTextNode(e)}(n[11],e);Ur(r,n,a,o),ee(o,!1)}function ya(t){return ga("",t,""),ya}function ga(t,e,n){var r=Jt(),i=Ao(r,t,e,n);return i!==ii&&function(t,e,n){var r=Ft(e,t);!function(t,e,n){Rt(t)?t.setValue(e,n):e.textContent=n}(t[11],r,n)}(r,be(),i),ga}function ma(t,e,n){var r=Jt();return To(r,ae(),e)&&Ii(Xt(),we(),r,t,e,r[11],n,!0),ma}var ba=void 0,_a=["en",[["a","p"],["AM","PM"],ba],[["AM","PM"],ba,ba],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ba,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ba,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ba,"{1} 'at' {0}",ba],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){var e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}],wa={};function ka(t,e,n){"string"!=typeof e&&(n=e,e=t[Ia.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),wa[e]=t,n&&(wa[e][Ia.ExtraData]=n)}function Ca(t){var e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t),n=Sa(e);if(n)return n;var r=e.split("-")[0];if(n=Sa(r))return n;if("en"===r)return _a;throw new Error('Missing locale data for the locale "'.concat(t,'".'))}function Oa(t){return Ca(t)[Ia.CurrencyCode]||null}function Ea(t){return Ca(t)[Ia.PluralCase]}function Sa(t){return t in wa||(wa[t]=Q.ng&&Q.ng.common&&Q.ng.common.locales&&Q.ng.common.locales[t]),wa[t]}var Ia=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});function Ta(t){var e;null==(e=t)&&function(t,e,n,r){throw new Error("ASSERTION ERROR: Expected localeId to be defined"+" [Expected=> null != ".concat(e," <=Actual]"))}(0,e),"string"==typeof t&&t.toLowerCase().replace(/_/g,"-")}function xa(t,e,n,r,i){if(t=S(t),Array.isArray(t))for(var o=0;o<t.length;o++)xa(t[o],e,n,r,i);else{var a=Xt(),s=Jt(),u=po(t)?t:S(t.provide),c=lo(t),l=$t(),h=1048575&l.providerIndexes,f=l.directiveStart,d=l.providerIndexes>>20;if(po(t)||!t.multi){var p=new Te(c,i,No),v=Pa(u,e,i?h:h+d,f);-1===v?(Ke(Ue(l,s),a,u),Aa(a,t,e.length),e.push(u),l.directiveStart++,l.directiveEnd++,i&&(l.providerIndexes+=1048576),n.push(p),s.push(p)):(n[v]=p,s[v]=p)}else{var y=Pa(u,e,h+d,f),g=Pa(u,e,h,h+d),m=y>=0&&n[y],b=g>=0&&n[g];if(i&&!b||!i&&!m){Ke(Ue(l,s),a,u);var _=function(t,e,n,r,i){var o=new Te(t,n,No);return o.multi=[],o.index=e,o.componentProviders=0,ja(o,i,r&&!n),o}(i?Da:Na,n.length,i,r,c);!i&&b&&(n[g].providerFactory=_),Aa(a,t,e.length,0),e.push(u),l.directiveStart++,l.directiveEnd++,i&&(l.providerIndexes+=1048576),n.push(_),s.push(_)}else Aa(a,t,y>-1?y:g,ja(n[i?g:y],c,!i&&r));!i&&r&&b&&n[g].componentProviders++}}}function Aa(t,e,n,r){var i=po(e);if(i||e.useClass){var o=(e.useClass||e).prototype.ngOnDestroy;if(o){var a=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){var s=a.indexOf(n);-1===s?a.push(n,[r,o]):a[s+1].push(r,o)}else a.push(n,o)}}}function ja(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Pa(t,e,n,r){for(var i=n;i<r;i++)if(e[i]===t)return i;return-1}function Na(t,e,n,r){return Ra(this.multi,[])}function Da(t,e,n,r){var i,o=this.multi;if(this.providerFactory){var a=this.providerFactory.componentProviders,s=Ze(n,n[1],this.providerFactory.index,r);Ra(o,i=s.slice(0,a));for(var u=a;u<s.length;u++)i.push(s[u])}else Ra(o,i=[]);return i}function Ra(t,e){for(var n=0;n<t.length;n++)e.push((0,t[n])());return e}function La(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return function(n){n.providersResolver=function(n,r){return function(t,e,n){var r=Xt();if(r.firstCreatePass){var i=wt(t);xa(n,r.data,r.blueprint,i,!0),xa(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}}var Ma=function t(){f(this,t)},Fa=function(){function t(){f(this,t)}return p(t,[{key:"resolveComponentFactory",value:function(t){throw function(t){var e=Error("No component factory found for ".concat(k(t),". Did you add it to @NgModule.entryComponents?"));return e.ngComponent=t,e}(t)}}]),t}(),Va=function(){var t=function t(){f(this,t)};return t.NULL=new Fa,t}();function Ua(){}function qa(t,e){return new Ha(Vt(t,e))}var Ba=function(){return qa($t(),Jt())},Ha=function(){var t=function t(e){f(this,t),this.nativeElement=e};return t.__NG_ELEMENT_ID__=Ba,t}(),Ka=function t(){f(this,t)},za=function(){var t=function t(){f(this,t)};return t.__NG_ELEMENT_ID__=function(){return Wa()},t}(),Wa=function(){var t=Jt(),e=qt($t().index,t);return function(t){return t[11]}(yt(e)?e:t)},Ga=function(){var t=function t(){f(this,t)};return t.\u0275prov=T({token:t,providedIn:"root",factory:function(){return null}}),t}(),Qa=function t(e){f(this,t),this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")},Ya=new Qa("11.0.9"),Ja=function(){function t(){f(this,t)}return p(t,[{key:"supports",value:function(t){return Eo(t)}},{key:"create",value:function(t){return new Za(t)}}]),t}(),Xa=function(t,e){return e},Za=function(){function t(e){f(this,t),this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||Xa}return p(t,[{key:"forEachItem",value:function(t){var e;for(e=this._itHead;null!==e;e=e._next)t(e)}},{key:"forEachOperation",value:function(t){for(var e=this._itHead,n=this._removalsHead,r=0,i=null;e||n;){var o=!n||e&&e.currentIndex<ns(n,r,i)?e:n,a=ns(o,r,i),s=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);var u=a-r,c=s-r;if(u!=c){for(var l=0;l<u;l++){var h=l<i.length?i[l]:i[l]=0,f=h+l;c<=f&&f<u&&(i[l]=h+1)}i[o.previousIndex]=c-u}}a!==s&&t(o,a,s)}}},{key:"forEachPreviousItem",value:function(t){var e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}},{key:"forEachAddedItem",value:function(t){var e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}},{key:"forEachMovedItem",value:function(t){var e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}},{key:"forEachRemovedItem",value:function(t){var e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}},{key:"forEachIdentityChange",value:function(t){var e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}},{key:"diff",value:function(t){if(null==t&&(t=[]),!Eo(t))throw new Error("Error trying to diff '".concat(k(t),"'. Only arrays and iterables are allowed"));return this.check(t)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(t){var e=this;this._reset();var n,r,i,o=this._itHead,a=!1;if(Array.isArray(t)){this.length=t.length;for(var s=0;s<this.length;s++)r=t[s],i=this._trackByFn(s,r),null!==o&&Object.is(o.trackById,i)?(a&&(o=this._verifyReinsertion(o,r,i,s)),Object.is(o.item,r)||this._addIdentityChange(o,r)):(o=this._mismatch(o,r,i,s),a=!0),o=o._next}else n=0,function(t,e){if(Array.isArray(t))for(var n=0;n<t.length;n++)e(t[n]);else for(var r,i=t[Oo()]();!(r=i.next()).done;)e(r.value)}(t,function(t){i=e._trackByFn(n,t),null!==o&&Object.is(o.trackById,i)?(a&&(o=e._verifyReinsertion(o,t,i,n)),Object.is(o.item,t)||e._addIdentityChange(o,t)):(o=e._mismatch(o,t,i,n),a=!0),o=o._next,n++}),this.length=n;return this._truncate(o),this.collection=t,this.isDirty}},{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}},{key:"_reset",value:function(){if(this.isDirty){var t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}},{key:"_mismatch",value:function(t,e,n,r){var i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):t=this._addAfter(new $a(e,n),i,r),t}},{key:"_verifyReinsertion",value:function(t,e,n,r){var i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}},{key:"_truncate",value:function(t){for(;null!==t;){var e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}},{key:"_reinsertAfter",value:function(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);var r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}},{key:"_moveAfter",value:function(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}},{key:"_addAfter",value:function(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}},{key:"_insertAfter",value:function(t,e,n){var r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new es),this._linkedRecords.put(t),t.currentIndex=n,t}},{key:"_remove",value:function(t){return this._addToRemovals(this._unlink(t))}},{key:"_unlink",value:function(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);var e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}},{key:"_addToMoves",value:function(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}},{key:"_addToRemovals",value:function(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new es),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}},{key:"_addIdentityChange",value:function(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}]),t}(),$a=function t(e,n){f(this,t),this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null},ts=function(){function t(){f(this,t),this._head=null,this._tail=null}return p(t,[{key:"add",value:function(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}},{key:"get",value:function(t,e){var n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}},{key:"remove",value:function(t){var e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}]),t}(),es=function(){function t(){f(this,t),this.map=new Map}return p(t,[{key:"put",value:function(t){var e=t.trackById,n=this.map.get(e);n||(n=new ts,this.map.set(e,n)),n.add(t)}},{key:"get",value:function(t,e){var n=this.map.get(t);return n?n.get(t,e):null}},{key:"remove",value:function(t){var e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}},{key:"isEmpty",get:function(){return 0===this.map.size}},{key:"clear",value:function(){this.map.clear()}}]),t}();function ns(t,e,n){var r=t.previousIndex;if(null===r)return r;var i=0;return n&&r<n.length&&(i=n[r]),r+e+i}var rs=function(){function t(){f(this,t)}return p(t,[{key:"supports",value:function(t){return t instanceof Map||So(t)}},{key:"create",value:function(){return new is}}]),t}(),is=function(){function t(){f(this,t),this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}return p(t,[{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}},{key:"forEachItem",value:function(t){var e;for(e=this._mapHead;null!==e;e=e._next)t(e)}},{key:"forEachPreviousItem",value:function(t){var e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}},{key:"forEachChangedItem",value:function(t){var e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}},{key:"forEachAddedItem",value:function(t){var e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}},{key:"forEachRemovedItem",value:function(t){var e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}},{key:"diff",value:function(t){if(t){if(!(t instanceof Map||So(t)))throw new Error("Error trying to diff '".concat(k(t),"'. Only maps and objects are allowed"))}else t=new Map;return this.check(t)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(t){var e=this;this._reset();var n=this._mapHead;if(this._appendAfter=null,this._forEach(t,function(t,r){if(n&&n.key===r)e._maybeAddToChanges(n,t),e._appendAfter=n,n=n._next;else{var i=e._getOrCreateRecordForKey(r,t);n=e._insertBeforeOrAppend(n,i)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(var r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}},{key:"_insertBeforeOrAppend",value:function(t,e){if(t){var n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}},{key:"_getOrCreateRecordForKey",value:function(t,e){if(this._records.has(t)){var n=this._records.get(t);this._maybeAddToChanges(n,e);var r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}var o=new os(t);return this._records.set(t,o),o.currentValue=e,this._addToAdditions(o),o}},{key:"_reset",value:function(){if(this.isDirty){var t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}},{key:"_maybeAddToChanges",value:function(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}},{key:"_addToAdditions",value:function(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}},{key:"_addToChanges",value:function(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}},{key:"_forEach",value:function(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(function(n){return e(t[n],n)})}}]),t}(),os=function t(e){f(this,t),this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null},as=function(){var t=function(){function t(e){f(this,t),this.factories=e}return p(t,[{key:"find",value:function(t){var e,n=this.factories.find(function(e){return e.supports(t)});if(null!=n)return n;throw new Error("Cannot find a differ supporting object '".concat(t,"' of type '").concat((e=t).name||typeof e,"'"))}}],[{key:"create",value:function(e,n){if(null!=n){var r=n.factories.slice();e=e.concat(r)}return new t(e)}},{key:"extend",value:function(e){return{provide:t,useFactory:function(n){if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return t.create(e,n)},deps:[[t,new wn,new bn]]}}}]),t}();return t.\u0275prov=T({token:t,providedIn:"root",factory:function(){return new t([new Ja])}}),t}(),ss=function(){var t=function(){function t(e){f(this,t),this.factories=e}return p(t,[{key:"find",value:function(t){var e=this.factories.find(function(e){return e.supports(t)});if(e)return e;throw new Error("Cannot find a differ supporting object '".concat(t,"'"))}}],[{key:"create",value:function(e,n){if(n){var r=n.factories.slice();e=e.concat(r)}return new t(e)}},{key:"extend",value:function(e){return{provide:t,useFactory:function(n){if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return t.create(e,n)},deps:[[t,new wn,new bn]]}}}]),t}();return t.\u0275prov=T({token:t,providedIn:"root",factory:function(){return new t([new rs])}}),t}();function us(t,e,n,r){for(var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];null!==n;){var a=e[n.index];if(null!==a&&r.push(Mt(a)),gt(a))for(var s=10;s<a.length;s++){var u=a[s],c=u[1].firstChild;null!==c&&us(u[1],u,c,r)}var l=n.type;if(8&l)us(t,e,n.child,r);else if(32&l)for(var h=Er(n,e),f=void 0;f=h();)r.push(f);else if(16&l){var d=e[16],p=d[6].projection[n.projection];if(Array.isArray(p))r.push.apply(r,i(p));else{var v=Sr(d);us(v[1],v,p,r,!0)}}n=o?n.projectionNext:n.next}return r}var cs=function(){function t(e,n){f(this,t),this._lView=e,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}return p(t,[{key:"rootNodes",get:function(){var t=this._lView,e=t[1];return us(e,t,e.firstChild,[])}},{key:"context",get:function(){return this._lView[8]}},{key:"destroyed",get:function(){return 256==(256&this._lView[2])}},{key:"destroy",value:function(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){var t=this._lView[3];if(gt(t)){var e=t[8],n=e?e.indexOf(this):-1;n>-1&&(Nr(t,n),dn(e,n))}this._attachedToViewContainer=!1}Dr(this._lView[1],this._lView)}},{key:"onDestroy",value:function(t){Ei(this._lView[1],this._lView,null,t)}},{key:"markForCheck",value:function(){Hi(this._cdRefInjectingView||this._lView)}},{key:"detach",value:function(){this._lView[2]&=-129}},{key:"reattach",value:function(){this._lView[2]|=128}},{key:"detectChanges",value:function(){Ki(this._lView[1],this._lView,this.context)}},{key:"checkNoChanges",value:function(){!function(t,e,n){ie(!0);try{Ki(t,e,n)}finally{ie(!1)}}(this._lView[1],this._lView,this.context)}},{key:"attachToViewContainerRef",value:function(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}},{key:"detachFromAppRef",value:function(){var t;this._appRef=null,Kr(this._lView[1],t=this._lView,t[11],2,null,null)}},{key:"attachToAppRef",value:function(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}]),t}(),ls=function(t){v(n,t);var e=g(n);function n(t){var r;return f(this,n),(r=e.call(this,t))._view=t,r}return p(n,[{key:"detectChanges",value:function(){zi(this._view)}},{key:"checkNoChanges",value:function(){!function(t){ie(!0);try{zi(t)}finally{ie(!1)}}(this._view)}},{key:"context",get:function(){return null}}]),n}(cs),hs=ds,fs=function(){var t=function t(){f(this,t)};return t.__NG_ELEMENT_ID__=hs,t.__ChangeDetectorRef__=!0,t}();function ds(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(t,e,n){if(!n&&bt(t)){var r=qt(t.index,e);return new cs(r,r)}return 47&t.type?new cs(e[16],e):null}($t(),Jt(),t)}var ps=[new rs],vs=new as([new Ja]),ys=new ss(ps),gs=function(){return _s($t(),Jt())},ms=function(){var t=function t(){f(this,t)};return t.__NG_ELEMENT_ID__=gs,t}(),bs=function(t){v(n,t);var e=g(n);function n(t,r,i){var o;return f(this,n),(o=e.call(this))._declarationLView=t,o._declarationTContainer=r,o.elementRef=i,o}return p(n,[{key:"createEmbeddedView",value:function(t){var e=this._declarationTContainer.tViews,n=pi(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];var r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),gi(e,n,t),new cs(n)}}]),n}(ms);function _s(t,e){return 4&t.type?new bs(e,t,qa(t,e)):null}var ws=function t(){f(this,t)},ks=function t(){f(this,t)},Cs=function(){return Ts($t(),Jt())},Os=function(){var t=function t(){f(this,t)};return t.__NG_ELEMENT_ID__=Cs,t}(),Es=function(t){v(n,t);var e=g(n);function n(t,r,i){var o;return f(this,n),(o=e.call(this))._lContainer=t,o._hostTNode=r,o._hostLView=i,o}return p(n,[{key:"element",get:function(){return qa(this._hostTNode,this._hostLView)}},{key:"injector",get:function(){return new en(this._hostTNode,this._hostLView)}},{key:"parentInjector",get:function(){var t=He(this._hostTNode,this._hostLView);if(De(t)){var e=Le(t,this._hostLView),n=Re(t);return new en(e[1].data[n+8],e)}return new en(null,this._hostLView)}},{key:"clear",value:function(){for(;this.length>0;)this.remove(this.length-1)}},{key:"get",value:function(t){var e=Ss(this._lContainer);return null!==e&&e[t]||null}},{key:"length",get:function(){return this._lContainer.length-10}},{key:"createEmbeddedView",value:function(t,e,n){var r=t.createEmbeddedView(e||{});return this.insert(r,n),r}},{key:"createComponent",value:function(t,e,n,r,i){var o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){var a=o.get(ws,null);a&&(i=a)}var s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}},{key:"insert",value:function(t,e){var r=t._lView,i=r[1];if(gt(r[3])){var o=this.indexOf(t);if(-1!==o)this.detach(o);else{var a=r[3],s=new n(a,a[6],a[3]);s.detach(s.indexOf(t))}}var u=this._adjustIndex(e),c=this._lContainer;!function(t,e,n,r){var i=10+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-10?(e[4]=n[i],fn(n,10+r,e)):(n.push(e),e[4]=null),e[3]=n;var a=e[17];null!==a&&n!==a&&function(t,e){var n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(a,e);var s=e[19];null!==s&&s.insertView(t),e[2]|=128}(i,r,c,u);var l=Br(u,c),h=r[11],f=Vr(h,c[7]);return null!==f&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,Kr(t,r,n,1,i,o)}(i,c[6],h,r,f,l),t.attachToViewContainerRef(),fn(Is(c),u,t),t}},{key:"move",value:function(t,e){return this.insert(t,e)}},{key:"indexOf",value:function(t){var e=Ss(this._lContainer);return null!==e?e.indexOf(t):-1}},{key:"remove",value:function(t){var e=this._adjustIndex(t,-1),n=Nr(this._lContainer,e);n&&(dn(Is(this._lContainer),e),Dr(n[1],n))}},{key:"detach",value:function(t){var e=this._adjustIndex(t,-1),n=Nr(this._lContainer,e);return n&&null!=dn(Is(this._lContainer),e)?new cs(n):null}},{key:"_adjustIndex",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return null==t?this.length+e:t}}]),n}(Os);function Ss(t){return t[8]}function Is(t){return t[8]||(t[8]=[])}function Ts(t,e){var n,r=e[t.index];if(gt(r))n=r;else{var i;if(8&t.type)i=Mt(r);else{var o=e[11];i=o.createComment("");var a=Vt(t,e);Lr(o,Vr(o,a),i,function(t,e){return Rt(t)?t.nextSibling(e):e.nextSibling}(o,a),!1)}e[t.index]=n=Fi(r,e,i,t),Bi(e,n)}return new Es(n,t,e)}var xs={},As=function(t){v(n,t);var e=g(n);function n(t){var r;return f(this,n),(r=e.call(this)).ngModule=t,r}return p(n,[{key:"resolveComponentFactory",value:function(t){var e=pt(t);return new Ns(e,this.ngModule)}}]),n}(Va);function js(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}var Ps=new sn("SCHEDULER_TOKEN",{providedIn:"root",factory:function(){return kr}}),Ns=function(t){v(n,t);var e=g(n);function n(t,r){var i;return f(this,n),(i=e.call(this)).componentDef=t,i.ngModule=r,i.componentType=t.type,i.selector=t.selectors.map(ri).join(","),i.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],i.isBoundToModule=!!r,i}return p(n,[{key:"inputs",get:function(){return js(this.componentDef.inputs)}},{key:"outputs",get:function(){return js(this.componentDef.outputs)}},{key:"create",value:function(t,e,n,r){var i,o,a=(r=r||this.ngModule)?function(t,e){return{get:function(n,r,i){var o=t.get(n,xs,i);return o!==xs||r===xs?o:e.get(n,r,i)}}}(t,r.injector):t,s=a.get(Ka,Lt),u=a.get(Ga,null),c=s.createRenderer(null,this.componentDef),l=this.componentDef.selectors[0][0]||"div",h=n?function(t,e,n){if(Rt(t))return t.selectRootElement(e,n===H.ShadowDom);var r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(c,n,this.componentDef.encapsulation):jr(s.createRenderer(null,this.componentDef),l,function(t){var e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(l)),f=this.componentDef.onPush?576:528,d={components:[],scheduler:kr,clean:Gi,playerHandler:null,flags:0},p=Oi(0,null,null,1,0,null,null,null,null,null),v=pi(null,p,d,f,null,null,s,c,u,a);de(v);try{var y=function(t,e,n,r,i,o){var a=n[1];n[20]=t;var s=vi(a,20,2,"#host",null),u=s.mergedAttrs=e.hostAttrs;null!==u&&(Zi(s,u,!0),null!==t&&(xe(i,t,u),null!==s.classes&&Gr(i,t,s.classes),null!==s.styles&&Wr(i,t,s.styles)));var c=r.createRenderer(t,e),l=pi(n,Ci(e),null,e.onPush?64:16,n[20],s,r,c,null,null);return a.firstCreatePass&&(Ke(Ue(s,n),a,e.type),ji(a,s),Ni(s,n.length,1)),Bi(n,l),n[20]=l}(h,this.componentDef,v,s,c);if(h)if(n)xe(c,h,["ng-version",Ya.full]);else{var g=function(t){for(var e=[],n=[],r=1,i=2;r<t.length;){var o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!$r(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]),m=g.attrs,b=g.classes;m&&xe(c,h,m),b&&b.length>0&&Gr(c,h,b.join(" "))}if(o=Ut(p,20),void 0!==e)for(var _=o.projection=[],w=0;w<this.ngContentSelectors.length;w++){var k=e[w];_.push(null!=k?Array.from(k):null)}i=function(t,e,n,r,i){var o=n[1],a=function(t,e,n){var r=$t();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Di(t,r,e,yi(t,e,1,null),n));var i=Ze(e,t,r.directiveStart,r);wr(i,e);var o=Vt(r,e);return o&&wr(o,e),i}(o,n,e);if(r.components.push(a),t[8]=a,i&&i.forEach(function(t){return t(a,e)}),e.contentQueries){var s=$t();e.contentQueries(1,a,s.directiveStart)}var u=$t();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(_e(u.index),xi(n[1],u,0,u.directiveStart,u.directiveEnd,e),Ai(e,a)),a}(y,this.componentDef,v,d,[go]),gi(p,v,null)}finally{me()}return new Ds(this.componentType,i,qa(o,v),v,o)}}]),n}(Ma),Ds=function(t){v(n,t);var e=g(n);function n(t,r,i,o,a){var s;return f(this,n),(s=e.call(this)).location=i,s._rootLView=o,s._tNode=a,s.instance=r,s.hostView=s.changeDetectorRef=new ls(o),s.componentType=t,s}return p(n,[{key:"injector",get:function(){return new en(this._tNode,this._rootLView)}},{key:"destroy",value:function(){this.hostView.destroy()}},{key:"onDestroy",value:function(t){this.hostView.onDestroy(t)}}]),n}(function(){return function t(){f(this,t)}}()),Rs=new Map,Ls=function(t){v(n,t);var e=g(n);function n(t,r){var i;f(this,n),(i=e.call(this))._parent=r,i._bootstrapComponents=[],i.injector=b(i),i.destroyCbs=[],i.componentFactoryResolver=new As(b(i));var o=vt(t),a=t[et]||null;return a&&Ta(a),i._bootstrapComponents=Cr(o.bootstrap),i._r3Injector=so(t,r,[{provide:ws,useValue:b(i)},{provide:Va,useValue:i.componentFactoryResolver}],k(t)),i._r3Injector._resolveInjectorDefTypes(),i.instance=i.get(t),i}return p(n,[{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:yo.THROW_IF_NOT_FOUND,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:F.Default;return t===yo||t===ws||t===$i?this:this._r3Injector.get(t,e,n)}},{key:"destroy",value:function(){var t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(function(t){return t()}),this.destroyCbs=null}},{key:"onDestroy",value:function(t){this.destroyCbs.push(t)}}]),n}(ws),Ms=function(t){v(n,t);var e=g(n);function n(t){var r,i,o;return f(this,n),(r=e.call(this)).moduleType=t,null!==vt(t)&&(i=t,o=new Set,function t(e){var n=vt(e,!0),r=n.id;null!==r&&(function(t,e,n){if(e&&e!==n)throw new Error("Duplicate module registered for ".concat(t," - ").concat(k(e)," vs ").concat(k(e.name)))}(r,Rs.get(r),e),Rs.set(r,e));var i,s=a(Cr(n.imports));try{for(s.s();!(i=s.n()).done;){var u=i.value;o.has(u)||(o.add(u),t(u))}}catch(c){s.e(c)}finally{s.f()}}(i)),r}return p(n,[{key:"create",value:function(t){return new Ls(this.moduleType,t)}}]),n}(ks);function Fs(t,e,n){var r=oe()+t,i=Jt();return i[r]===ii?Io(i,r,n?e.call(n):e()):function(t,e){return t[e]}(i,r)}function Vs(t,e,n,r,i){return function(t,e,n,r,i,o,a){var s=e+n;return function(t,e,n,r){var i=To(t,e,n);return To(t,e+1,r)||i}(t,s,i,o)?Io(t,s+2,a?r.call(a,i,o):r(i,o)):function(t,e){var n=t[e];return n===ii?void 0:n}(t,s+2)}(Jt(),oe(),t,e,n,r,i)}var Us=function(t){v(n,t);var e=g(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return f(this,n),(t=e.call(this)).__isAsync=r,t}return p(n,[{key:"emit",value:function(t){h(w(n.prototype),"next",this).call(this,t)}},{key:"subscribe",value:function(t,e,r){var i,o=function(t){return null},a=function(){return null};t&&"object"==typeof t?(i=this.__isAsync?function(e){setTimeout(function(){return t.next(e)})}:function(e){t.next(e)},t.error&&(o=this.__isAsync?function(e){setTimeout(function(){return t.error(e)})}:function(e){t.error(e)}),t.complete&&(a=this.__isAsync?function(){setTimeout(function(){return t.complete()})}:function(){t.complete()})):(i=this.__isAsync?function(e){setTimeout(function(){return t(e)})}:function(e){t(e)},e&&(o=this.__isAsync?function(t){setTimeout(function(){return e(t)})}:function(t){e(t)}),r&&(a=this.__isAsync?function(){setTimeout(function(){return r()})}:function(){r()}));var u=h(w(n.prototype),"subscribe",this).call(this,i,o,a);return t instanceof s.a&&t.add(u),u}}]),n}(o.a);function qs(){return this._results[Oo()]()}var Bs=function(){function t(){f(this,t),this.dirty=!0,this._results=[],this.changes=new Us,this.length=0;var e=Oo(),n=t.prototype;n[e]||(n[e]=qs)}return p(t,[{key:"map",value:function(t){return this._results.map(t)}},{key:"filter",value:function(t){return this._results.filter(t)}},{key:"find",value:function(t){return this._results.find(t)}},{key:"reduce",value:function(t,e){return this._results.reduce(t,e)}},{key:"forEach",value:function(t){this._results.forEach(t)}},{key:"some",value:function(t){return this._results.some(t)}},{key:"toArray",value:function(){return this._results.slice()}},{key:"toString",value:function(){return this._results.toString()}},{key:"reset",value:function(t){this._results=ln(t),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}},{key:"notifyOnChanges",value:function(){this.changes.emit(this)}},{key:"setDirty",value:function(){this.dirty=!0}},{key:"destroy",value:function(){this.changes.complete(),this.changes.unsubscribe()}}]),t}(),Hs=function(){function t(e){f(this,t),this.queryList=e,this.matches=null}return p(t,[{key:"clone",value:function(){return new t(this.queryList)}},{key:"setDirty",value:function(){this.queryList.setDirty()}}]),t}(),Ks=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];f(this,t),this.queries=e}return p(t,[{key:"createEmbeddedView",value:function(e){var n=e.queries;if(null!==n){for(var r=null!==e.contentQueries?e.contentQueries[0]:n.length,i=[],o=0;o<r;o++){var a=n.getByIndex(o);i.push(this.queries[a.indexInDeclarationView].clone())}return new t(i)}return null}},{key:"insertView",value:function(t){this.dirtyQueriesWithMatches(t)}},{key:"detachView",value:function(t){this.dirtyQueriesWithMatches(t)}},{key:"dirtyQueriesWithMatches",value:function(t){for(var e=0;e<this.queries.length;e++)null!==iu(t,e).matches&&this.queries[e].setDirty()}}]),t}(),zs=function t(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;f(this,t),this.predicate=e,this.descendants=n,this.isStatic=r,this.read=i},Ws=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];f(this,t),this.queries=e}return p(t,[{key:"elementStart",value:function(t,e){for(var n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}},{key:"elementEnd",value:function(t){for(var e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}},{key:"embeddedTView",value:function(e){for(var n=null,r=0;r<this.length;r++){var i=null!==n?n.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,null!==n?n.push(o):n=[o])}return null!==n?new t(n):null}},{key:"template",value:function(t,e){for(var n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}},{key:"getByIndex",value:function(t){return this.queries[t]}},{key:"length",get:function(){return this.queries.length}},{key:"track",value:function(t){this.queries.push(t)}}]),t}(),Gs=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;f(this,t),this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}return p(t,[{key:"elementStart",value:function(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}},{key:"elementEnd",value:function(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}},{key:"template",value:function(t,e){this.elementStart(t,e)}},{key:"embeddedTView",value:function(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}},{key:"isApplyingToNode",value:function(t){if(this._appliesToNextNode&&!1===this.metadata.descendants){for(var e=this._declarationNodeIndex,n=t.parent;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}},{key:"matchTNode",value:function(t,e){var n=this.metadata.predicate;if(Array.isArray(n))for(var r=0;r<n.length;r++){var i=n[r];this.matchTNodeWithReadOption(t,e,Qs(e,i)),this.matchTNodeWithReadOption(t,e,Xe(e,t,i,!1,!1))}else n===ms?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Xe(e,t,n,!1,!1))}},{key:"matchTNodeWithReadOption",value:function(t,e,n){if(null!==n){var r=this.metadata.read;if(null!==r)if(r===Ha||r===Os||r===ms&&4&e.type)this.addMatch(e.index,-2);else{var i=Xe(e,t,r,!1,!1);null!==i&&this.addMatch(e.index,i)}else this.addMatch(e.index,n)}}},{key:"addMatch",value:function(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}]),t}();function Qs(t,e){var n=t.localNames;if(null!==n)for(var r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function Ys(t,e,n,r){return-1===n?function(t,e){return 11&t.type?qa(t,e):4&t.type?_s(t,e):null}(e,t):-2===n?function(t,e,n){return n===Ha?qa(e,t):n===ms?_s(e,t):n===Os?Ts(e,t):void 0}(t,e,r):Ze(t,t[1],n,e)}function Js(t,e,n,r){var i=e[19].queries[r];if(null===i.matches){for(var o=t.data,a=n.matches,s=[],u=0;u<a.length;u+=2){var c=a[u];s.push(c<0?null:Ys(e,o[c],a[u+1],n.metadata.read))}i.matches=s}return i.matches}function Xs(t,e,n,r){var i=t.queries.getByIndex(n),o=i.matches;if(null!==o)for(var a=Js(t,e,i,n),s=0;s<o.length;s+=2){var u=o[s];if(u>0)r.push(a[s/2]);else{for(var c=o[s+1],l=e[-u],h=10;h<l.length;h++){var f=l[h];f[17]===f[3]&&Xs(f[1],f,c,r)}if(null!==l[9])for(var d=l[9],p=0;p<d.length;p++){var v=d[p];Xs(v[1],v,c,r)}}}return r}function Zs(t){var e=Jt(),n=Xt(),r=ce();le(r+1);var i=iu(n,r);if(t.dirty&&Ht(e)===i.metadata.isStatic){if(null===i.matches)t.reset([]);else{var o=i.crossesNgTemplate?Xs(n,e,r,[]):Js(n,e,i,r);t.reset(o),t.notifyOnChanges()}return!0}return!1}function $s(t,e,n){!function(t,e,n,r,i,o){t.firstCreatePass&&ru(t,new zs(n,r,!1,i),-1),nu(t,e)}(Xt(),Jt(),t,e,n)}function tu(t,e,n,r){!function(t,e,n,r,i,o,a,s){t.firstCreatePass&&(ru(t,new zs(n,r,!1,i),a.index),function(t,e){var n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(t,s)),nu(t,e)}(Xt(),Jt(),e,n,r,0,$t(),t)}function eu(){return t=Jt(),e=ce(),t[19].queries[e].queryList;var t,e}function nu(t,e){var n=new Bs;Ei(t,e,n,n.destroy),null===e[19]&&(e[19]=new Ks),e[19].queries.push(new Hs(n))}function ru(t,e,n){null===t.queries&&(t.queries=new Ws),t.queries.track(new Gs(e,n))}function iu(t,e){return t.queries.getByIndex(e)}function ou(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F.Default,e=ds(!0);if(null!=e||t&F.Optional)return e;St("ChangeDetectorRef")}var au=new sn("Application Initializer"),su=function(){var t=function(){function t(e){var n=this;f(this,t),this.appInits=e,this.resolve=Ua,this.reject=Ua,this.initialized=!1,this.done=!1,this.donePromise=new Promise(function(t,e){n.resolve=t,n.reject=e})}return p(t,[{key:"runInitializers",value:function(){var t=this;if(!this.initialized){var e=[],n=function(){t.done=!0,t.resolve()};if(this.appInits)for(var r=0;r<this.appInits.length;r++){var i=this.appInits[r]();Uo(i)&&e.push(i)}Promise.all(e).then(function(){n()}).catch(function(e){t.reject(e)}),0===e.length&&n(),this.initialized=!0}}}]),t}();return t.\u0275fac=function(e){return new(e||t)(xn(au,8))},t.\u0275prov=T({token:t,factory:t.\u0275fac}),t}(),uu=new sn("AppId"),cu={provide:uu,useFactory:function(){return"".concat(lu()).concat(lu()).concat(lu())},deps:[]};function lu(){return String.fromCharCode(97+Math.floor(25*Math.random()))}var hu=new sn("Platform Initializer"),fu=new sn("Platform ID"),du=new sn("appBootstrapListener"),pu=function(){var t=function(){function t(){f(this,t)}return p(t,[{key:"log",value:function(t){console.log(t)}},{key:"warn",value:function(t){console.warn(t)}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=T({token:t,factory:t.\u0275fac}),t}(),vu=new sn("LocaleId"),yu=new sn("DefaultCurrencyCode"),gu=function t(e,n){f(this,t),this.ngModuleFactory=e,this.componentFactories=n},mu=function(t){return new Ms(t)},bu=mu,_u=function(t){return Promise.resolve(mu(t))},wu=function(t){var e=mu(t),n=Cr(vt(t).declarations).reduce(function(t,e){var n=pt(e);return n&&t.push(new Ns(n)),t},[]);return new gu(e,n)},ku=wu,Cu=function(t){return Promise.resolve(wu(t))},Ou=function(){var t=function(){function t(){f(this,t),this.compileModuleSync=bu,this.compileModuleAsync=_u,this.compileModuleAndAllComponentsSync=ku,this.compileModuleAndAllComponentsAsync=Cu}return p(t,[{key:"clearCache",value:function(){}},{key:"clearCacheFor",value:function(t){}},{key:"getModuleId",value:function(t){}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=T({token:t,factory:t.\u0275fac}),t}(),Eu=Promise.resolve(0);function Su(t){"undefined"==typeof Zone?Eu.then(function(){t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}var Iu=function(){function t(e){var n,r,i=e.enableLongStackTrace,o=void 0!==i&&i,a=e.shouldCoalesceEventChangeDetection,s=void 0!==a&&a;if(f(this,t),this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Us(!1),this.onMicrotaskEmpty=new Us(!1),this.onStable=new Us(!1),this.onError=new Us(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),this.shouldCoalesceEventChangeDetection=s,this.lastRequestAnimationFrameId=-1,this.nativeRequestAnimationFrame=function(){var t=Q.requestAnimationFrame,e=Q.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){var n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);var r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,r=!!(n=this).shouldCoalesceEventChangeDetection&&n.nativeRequestAnimationFrame&&function(){!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Q,function(){t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",function(){t.lastRequestAnimationFrameId=-1,Au(t),xu(t)},void 0,function(){},function(){})),t.fakeTopEventTask.invoke()}),Au(t))}(n)},n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0,maybeDelayChangeDetection:r},onInvokeTask:function(t,e,i,o,a,s){try{return ju(n),t.invokeTask(i,o,a,s)}finally{r&&"eventTask"===o.type&&r(),Pu(n)}},onInvoke:function(t,e,r,i,o,a,s){try{return ju(n),t.invoke(r,i,o,a,s)}finally{Pu(n)}},onHasTask:function(t,e,r,i){t.hasTask(r,i),e===r&&("microTask"==i.change?(n._hasPendingMicrotasks=i.microTask,Au(n),xu(n)):"macroTask"==i.change&&(n.hasPendingMacrotasks=i.macroTask))},onHandleError:function(t,e,r,i){return t.handleError(r,i),n.runOutsideAngular(function(){return n.onError.emit(i)}),!1}})}return p(t,[{key:"run",value:function(t,e,n){return this._inner.run(t,e,n)}},{key:"runTask",value:function(t,e,n,r){var i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,Tu,Ua,Ua);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}},{key:"runGuarded",value:function(t,e,n){return this._inner.runGuarded(t,e,n)}},{key:"runOutsideAngular",value:function(t){return this._outer.run(t)}}],[{key:"isInAngularZone",value:function(){return!0===Zone.current.get("isAngularZone")}},{key:"assertInAngularZone",value:function(){if(!t.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}},{key:"assertNotInAngularZone",value:function(){if(t.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}}]),t}(),Tu={};function xu(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(function(){return t.onStable.emit(null)})}finally{t.isStable=!0}}}function Au(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||t.shouldCoalesceEventChangeDetection&&-1!==t.lastRequestAnimationFrameId)}function ju(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Pu(t){t._nesting--,xu(t)}var Nu=function(){function t(){f(this,t),this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Us,this.onMicrotaskEmpty=new Us,this.onStable=new Us,this.onError=new Us}return p(t,[{key:"run",value:function(t,e,n){return t.apply(e,n)}},{key:"runGuarded",value:function(t,e,n){return t.apply(e,n)}},{key:"runOutsideAngular",value:function(t){return t()}},{key:"runTask",value:function(t,e,n,r){return t.apply(e,n)}}]),t}(),Du=function(){var t=function(){function t(e){var n=this;f(this,t),this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run(function(){n.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}return p(t,[{key:"_watchAngularEvents",value:function(){var t=this;this._ngZone.onUnstable.subscribe({next:function(){t._didWork=!0,t._isZoneStable=!1}}),this._ngZone.runOutsideAngular(function(){t._ngZone.onStable.subscribe({next:function(){Iu.assertNotInAngularZone(),Su(function(){t._isZoneStable=!0,t._runCallbacksIfReady()})}})})}},{key:"increasePendingRequestCount",value:function(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}},{key:"decreasePendingRequestCount",value:function(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}},{key:"isStable",value:function(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}},{key:"_runCallbacksIfReady",value:function(){var t=this;if(this.isStable())Su(function(){for(;0!==t._callbacks.length;){var e=t._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(t._didWork)}t._didWork=!1});else{var e=this.getPendingTasks();this._callbacks=this._callbacks.filter(function(t){return!t.updateCb||!t.updateCb(e)||(clearTimeout(t.timeoutId),!1)}),this._didWork=!0}}},{key:"getPendingTasks",value:function(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(function(t){return{source:t.source,creationLocation:t.creationLocation,data:t.data}}):[]}},{key:"addCallback",value:function(t,e,n){var r=this,i=-1;e&&e>0&&(i=setTimeout(function(){r._callbacks=r._callbacks.filter(function(t){return t.timeoutId!==i}),t(r._didWork,r.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:i,updateCb:n})}},{key:"whenStable",value:function(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}},{key:"getPendingRequestCount",value:function(){return this._pendingCount}},{key:"findProviders",value:function(t,e,n){return[]}}]),t}();return t.\u0275fac=function(e){return new(e||t)(xn(Iu))},t.\u0275prov=T({token:t,factory:t.\u0275fac}),t}(),Ru=function(){var t=function(){function t(){f(this,t),this._applications=new Map,Fu.addToWindow(this)}return p(t,[{key:"registerApplication",value:function(t,e){this._applications.set(t,e)}},{key:"unregisterApplication",value:function(t){this._applications.delete(t)}},{key:"unregisterAllApplications",value:function(){this._applications.clear()}},{key:"getTestability",value:function(t){return this._applications.get(t)||null}},{key:"getAllTestabilities",value:function(){return Array.from(this._applications.values())}},{key:"getAllRootElements",value:function(){return Array.from(this._applications.keys())}},{key:"findTestabilityInTree",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Fu.findTestabilityInTree(this,t,e)}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=T({token:t,factory:t.\u0275fac}),t}();function Lu(t){Fu=t}var Mu,Fu=new(function(){function t(){f(this,t)}return p(t,[{key:"addToWindow",value:function(t){}},{key:"findTestabilityInTree",value:function(t,e,n){return null}}]),t}()),Vu=!0,Uu=!1;function qu(){return Uu=!0,Vu}function Bu(){if(Uu)throw new Error("Cannot enable prod mode after platform setup.");Vu=!1}var Hu=new sn("AllowMultipleToken"),Ku=function t(e,n){f(this,t),this.name=e,this.token=n};function zu(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r="Platform: "+e,i=new sn(r);return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=Wu();if(!o||o.injector.get(Hu,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{var a=n.concat(e).concat({provide:i,useValue:!0},{provide:eo,useValue:"platform"});!function(t){if(Mu&&!Mu.destroyed&&!Mu.injector.get(Hu,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Mu=t.get(Gu);var e=t.get(hu,null);e&&e.forEach(function(t){return t()})}(yo.create({providers:a,name:r}))}return function(t){var e=Wu();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function Wu(){return Mu&&!Mu.destroyed?Mu:null}var Gu=function(){var t=function(){function t(e){f(this,t),this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}return p(t,[{key:"bootstrapModuleFactory",value:function(t,e){var n,r,i=this,o=(n=e?e.ngZone:void 0,r=e&&e.ngZoneEventCoalescing||!1,"noop"===n?new Nu:("zone.js"===n?void 0:n)||new Iu({enableLongStackTrace:qu(),shouldCoalesceEventChangeDetection:r})),a=[{provide:Iu,useValue:o}];return o.run(function(){var e=yo.create({providers:a,parent:i.injector,name:t.moduleType.name}),n=t.create(e),r=n.injector.get(_r,null);if(!r)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return o.runOutsideAngular(function(){var t=o.onError.subscribe({next:function(t){r.handleError(t)}});n.onDestroy(function(){Ju(i._modules,n),t.unsubscribe()})}),function(t,e,r){try{var o=((a=n.injector.get(su)).runInitializers(),a.donePromise.then(function(){return Ta(n.injector.get(vu,"en-US")||"en-US"),i._moduleDoBootstrap(n),n}));return Uo(o)?o.catch(function(n){throw e.runOutsideAngular(function(){return t.handleError(n)}),n}):o}catch(s){throw e.runOutsideAngular(function(){return t.handleError(s)}),s}var a}(r,o)})}},{key:"bootstrapModule",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=Qu({},n);return function(t,e,n){var r=new Ms(n);return Promise.resolve(r)}(0,0,t).then(function(t){return e.bootstrapModuleFactory(t,r)})}},{key:"_moduleDoBootstrap",value:function(t){var e=t.injector.get(Yu);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(function(t){return e.bootstrap(t)});else{if(!t.instance.ngDoBootstrap)throw new Error("The module ".concat(k(t.instance.constructor),' was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.'));t.instance.ngDoBootstrap(e)}this._modules.push(t)}},{key:"onDestroy",value:function(t){this._destroyListeners.push(t)}},{key:"injector",get:function(){return this._injector}},{key:"destroy",value:function(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(function(t){return t.destroy()}),this._destroyListeners.forEach(function(t){return t()}),this._destroyed=!0}},{key:"destroyed",get:function(){return this._destroyed}}]),t}();return t.\u0275fac=function(e){return new(e||t)(xn(yo))},t.\u0275prov=T({token:t,factory:t.\u0275fac}),t}();function Qu(t,e){return Array.isArray(e)?e.reduce(Qu,t):Object.assign(Object.assign({},t),e)}var Yu=function(){var t=function(){function t(e,n,r,i,o,a){var s=this;f(this,t),this._zone=e,this._console=n,this._injector=r,this._exceptionHandler=i,this._componentFactoryResolver=o,this._initStatus=a,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:function(){s._zone.run(function(){s.tick()})}});var c=new u.a(function(t){s._stable=s._zone.isStable&&!s._zone.hasPendingMacrotasks&&!s._zone.hasPendingMicrotasks,s._zone.runOutsideAngular(function(){t.next(s._stable),t.complete()})}),l=new u.a(function(t){var e;s._zone.runOutsideAngular(function(){e=s._zone.onStable.subscribe(function(){Iu.assertNotInAngularZone(),Su(function(){s._stable||s._zone.hasPendingMacrotasks||s._zone.hasPendingMicrotasks||(s._stable=!0,t.next(!0))})})});var n=s._zone.onUnstable.subscribe(function(){Iu.assertInAngularZone(),s._stable&&(s._stable=!1,s._zone.runOutsideAngular(function(){t.next(!1)}))});return function(){e.unsubscribe(),n.unsubscribe()}});this.isStable=Object(d.a)(c,l.pipe(Object(y.a)()))}return p(t,[{key:"bootstrap",value:function(t,e){var n,r=this;if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");n=t instanceof Ma?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);var i=n.isBoundToModule?void 0:this._injector.get(ws),o=n.create(yo.NULL,[],e||n.selector,i),a=o.location.nativeElement,s=o.injector.get(Du,null),u=s&&o.injector.get(Ru);return s&&u&&u.registerApplication(a,s),o.onDestroy(function(){r.detachView(o.hostView),Ju(r.components,o),u&&u.unregisterApplication(a)}),this._loadComponent(o),qu()&&this._console.log("Angular is running in development mode. Call enableProdMode() to enable production mode."),o}},{key:"tick",value:function(){var t=this;if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;var e,n=a(this._views);try{for(n.s();!(e=n.n()).done;){e.value.detectChanges()}}catch(r){n.e(r)}finally{n.f()}}catch(i){this._zone.runOutsideAngular(function(){return t._exceptionHandler.handleError(i)})}finally{this._runningTick=!1}}},{key:"attachView",value:function(t){var e=t;this._views.push(e),e.attachToAppRef(this)}},{key:"detachView",value:function(t){var e=t;Ju(this._views,e),e.detachFromAppRef()}},{key:"_loadComponent",value:function(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(du,[]).concat(this._bootstrapListeners).forEach(function(e){return e(t)})}},{key:"ngOnDestroy",value:function(){this._views.slice().forEach(function(t){return t.destroy()}),this._onMicrotaskEmptySubscription.unsubscribe()}},{key:"viewCount",get:function(){return this._views.length}}]),t}();return t.\u0275fac=function(e){return new(e||t)(xn(Iu),xn(pu),xn(yo),xn(_r),xn(Va),xn(su))},t.\u0275prov=T({token:t,factory:t.\u0275fac}),t}();function Ju(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1)}var Xu=function t(){f(this,t)},Zu=function t(){f(this,t)},$u={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"},tc=function(){var t=function(){function t(e,n){f(this,t),this._compiler=e,this._config=n||$u}return p(t,[{key:"load",value:function(t){return this.loadAndCompile(t)}},{key:"loadAndCompile",value:function(t){var n=this,i=e(t.split("#"),2),o=i[0],a=i[1];return void 0===a&&(a="default"),r("zn8P")(o).then(function(t){return t[a]}).then(function(t){return ec(t,o,a)}).then(function(t){return n._compiler.compileModuleAsync(t)})}},{key:"loadFactory",value:function(t){var n=e(t.split("#"),2),i=n[0],o=n[1],a="NgFactory";return void 0===o&&(o="default",a=""),r("zn8P")(this._config.factoryPathPrefix+i+this._config.factoryPathSuffix).then(function(t){return t[o+a]}).then(function(t){return ec(t,i,o)})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(xn(Ou),xn(Zu,8))},t.\u0275prov=T({token:t,factory:t.\u0275fac}),t}();function ec(t,e,n){if(!t)throw new Error("Cannot find '".concat(n,"' in '").concat(e,"'"));return t}var nc=function(t){return null},rc=zu(null,"core",[{provide:fu,useValue:"unknown"},{provide:Gu,deps:[yo]},{provide:Ru,deps:[]},{provide:pu,deps:[]}]),ic=[{provide:Yu,useClass:Yu,deps:[Iu,pu,yo,_r,Va,su]},{provide:Ps,deps:[Iu],useFactory:function(t){var e=[];return t.onStable.subscribe(function(){for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:su,useClass:su,deps:[[new bn,au]]},{provide:Ou,useClass:Ou,deps:[]},cu,{provide:as,useFactory:function(){return vs},deps:[]},{provide:ss,useFactory:function(){return ys},deps:[]},{provide:vu,useFactory:function(t){return Ta(t=t||"undefined"!=typeof $localize&&$localize.locale||"en-US"),t},deps:[[new mn(vu),new bn,new wn]]},{provide:yu,useValue:"USD"}],oc=function(){var t=function t(e){f(this,t)};return t.\u0275mod=ct({type:t}),t.\u0275inj=x({factory:function(e){return new(e||t)(xn(Yu))},providers:ic}),t}()},gRHU:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("2fFW"),i=n("NJ4a"),o={closed:!0,next:function(t){},error:function(t){if(r.a.useDeprecatedSynchronousErrorHandling)throw t;Object(i.a)(t)},complete:function(){}}},jZKg:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("HDdC"),i=n("quSY");function o(t,e){return new r.a(function(n){var r=new i.a,o=0;return r.add(e.schedule(function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},kJWO:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r="function"==typeof Symbol&&Symbol.observable||"@@observable"},lJxs:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}var o=function(){function t(e,n){f(this,t),this.project=e,this.thisArg=n}return p(t,[{key:"call",value:function(t,e){return e.subscribe(new a(t,this.project,this.thisArg))}}]),t}(),a=function(t){v(n,t);var e=g(n);function n(t,r,i){var o;return f(this,n),(o=e.call(this,t)).project=r,o.count=0,o.thisArg=i||b(o),o}return p(n,[{key:"_next",value:function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}]),n}(r.a)},mrSG:function(t,e,n){"use strict";n.d(e,"c",function(){return i}),n.d(e,"a",function(){return o}),n.d(e,"b",function(){return a}),n.d(e,"d",function(){return s}),n.d(e,"g",function(){return u}),n.d(e,"e",function(){return c}),n.d(e,"f",function(){return l});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function a(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}u((r=r.apply(t,e||[])).next())})}function s(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function l(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}},n6bG:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.d(e,"a",function(){return r})},ngJS:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(t){return function(e){for(var n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}}},pxpQ:function(t,e,n){"use strict";n.d(e,"b",function(){return c}),n.d(e,"a",function(){return h});var r,i=n("7o/Q"),o=n("EY2u"),a=n("LRne"),s=n("HDdC"),u=((r=function(){function t(e,n,r){f(this,t),this.kind=e,this.value=n,this.error=r,this.hasValue="N"===e}return p(t,[{key:"observe",value:function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}},{key:"do",value:function(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}},{key:"accept",value:function(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}},{key:"toObservable",value:function(){switch(this.kind){case"N":return Object(a.a)(this.value);case"E":return t=this.error,new s.a(function(e){return e.error(t)});case"C":return Object(o.b)()}var t;throw new Error("unexpected notification kind value")}}],[{key:"createNext",value:function(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}},{key:"createError",value:function(e){return new t("E",void 0,e)}},{key:"createComplete",value:function(){return t.completeNotification}}]),t}()).completeNotification=new r("C"),r.undefinedValueNotification=new r("N",void 0),r);function c(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(n){return n.lift(new l(t,e))}}var l=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;f(this,t),this.scheduler=e,this.delay=n}return p(t,[{key:"call",value:function(t,e){return e.subscribe(new h(t,this.scheduler,this.delay))}}]),t}(),h=function(t){v(n,t);var e=g(n);function n(t,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return f(this,n),(i=e.call(this,t)).scheduler=r,i.delay=o,i}return p(n,[{key:"scheduleMessage",value:function(t){this.destination.add(this.scheduler.schedule(n.dispatch,this.delay,new d(t,this.destination)))}},{key:"_next",value:function(t){this.scheduleMessage(u.createNext(t))}},{key:"_error",value:function(t){this.scheduleMessage(u.createError(t)),this.unsubscribe()}},{key:"_complete",value:function(){this.scheduleMessage(u.createComplete()),this.unsubscribe()}}],[{key:"dispatch",value:function(t){var e=t.notification,n=t.destination;e.observe(n),this.unsubscribe()}}]),n}(i.a),d=function t(e,n){f(this,t),this.notification=e,this.destination=n}},"q/0M":function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}var i;n.d(e,"a",function(){return a}),n.d(e,"b",function(){return h}),n.d(e,"c",function(){return f}),n.d(e,"d",function(){return d});var o=[],a=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),s={debug:a.DEBUG,verbose:a.VERBOSE,info:a.INFO,warn:a.WARN,error:a.ERROR,silent:a.SILENT},u=a.INFO,c=((i={})[a.DEBUG]="log",i[a.VERBOSE]="log",i[a.INFO]="info",i[a.WARN]="warn",i[a.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),a=c[e];if(!a)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[a].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in a))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?s[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,a.DEBUG],t)),this._logHandler.apply(this,r([this,a.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,a.VERBOSE],t)),this._logHandler.apply(this,r([this,a.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,a.INFO],t)),this._logHandler.apply(this,r([this,a.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,a.WARN],t)),this._logHandler.apply(this,r([this,a.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,a.ERROR],t)),this._logHandler.apply(this,r([this,a.ERROR],t))},t}();function f(t){o.forEach(function(e){e.setLogLevel(t)})}function d(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=s[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var s=i.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}}).filter(function(t){return t}).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:a[n].toLowerCase(),message:s,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},qOnz:function(t,e,n){"use strict";n.d(e,"a",function(){return f}),n.d(e,"b",function(){return E}),n.d(e,"c",function(){return F}),n.d(e,"d",function(){return i}),n.d(e,"e",function(){return o}),n.d(e,"f",function(){return s}),n.d(e,"g",function(){return u}),n.d(e,"h",function(){return N}),n.d(e,"i",function(){return d}),n.d(e,"j",function(){return V}),n.d(e,"k",function(){return l}),n.d(e,"l",function(){return h}),n.d(e,"m",function(){return H}),n.d(e,"n",function(){return Q}),n.d(e,"o",function(){return p}),n.d(e,"p",function(){return P}),n.d(e,"q",function(){return g}),n.d(e,"r",function(){return m}),n.d(e,"s",function(){return _}),n.d(e,"t",function(){return R}),n.d(e,"u",function(){return w}),n.d(e,"v",function(){return v}),n.d(e,"w",function(){return y}),n.d(e,"x",function(){return C}),n.d(e,"y",function(){return b}),n.d(e,"z",function(){return k}),n.d(e,"A",function(){return j}),n.d(e,"B",function(){return T}),n.d(e,"C",function(){return L}),n.d(e,"D",function(){return M}),n.d(e,"E",function(){return D}),n.d(e,"F",function(){return G}),n.d(e,"G",function(){return W}),n.d(e,"H",function(){return x}),n.d(e,"I",function(){return B}),n.d(e,"J",function(){return K}),n.d(e,"K",function(){return z});var r=n("mrSG"),i=function(t,e){if(!t)throw o(e)},o=function(t){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+t)},a=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},s={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],a=i+1<t.length,s=a?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&s)<<2|c>>6,h=63&c;u||(h=64,a||(l=64)),r.push(n[o>>2],n[(3&o)<<4|s>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(a(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(s=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(1023&a))}else{o=t[n++];var s=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0,s=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();r.push(o<<2|a>>4),64!==s&&(r.push(a<<4&240|s>>2),64!==u&&r.push(s<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},u=function(t){var e=a(t);return s.encodeByteArray(e,!0)},c=function(t){try{return s.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function l(t){return h(void 0,t)}function h(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=h(t[n],e[n]));return t}var f=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();function d(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object(r.a)({iss:"https://securetoken.google.com/"+n,aud:n,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[s.encodeString(JSON.stringify({alg:"none",type:"JWT"}),!1),s.encodeString(JSON.stringify(a),!1),""].join(".")}function p(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function v(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(p())}function y(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function g(){return"object"==typeof self&&self.self===self}function m(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function b(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function _(){return p().indexOf("Electron/")>=0}function w(){var t=p();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function k(){return p().indexOf("MSAppHost/")>=0}function C(){return!1}var O=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,E.prototype.create),o}return Object(r.c)(e,t),e}(Error),E=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],a=o?S(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",u=new O(i,s,r);return u},t}();function S(t,e){return t.replace(I,function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"})}var I=/\{\$([^}]+)}/g;function T(t){return JSON.parse(t)}function x(t){return JSON.stringify(t)}var A=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=T(c(o[0])||""),n=T(c(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(a){}return{header:e,claims:n,data:r,signature:i}},j=function(t){var e=A(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},P=function(t){var e=A(t).claims;return"object"==typeof e&&!0===e.admin};function N(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function D(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function R(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function L(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function M(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach(function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}var F=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,a=this.chain_[0],s=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^s&(u^c),o=1518500249):(i=s^u^c,o=1859775393):r<60?(i=s&u|c&(s|u),o=2400959708):(i=s^u^c,o=3395469782);var h=(a<<5|a>>>27)+i+l+o+n[r]&4294967295;l=c,c=u,u=4294967295&(s<<30|s>>>2),s=a,a=h}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function V(t,e){var n=new U(t,e);return n.subscribe.bind(n)}var U=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=q),void 0===r.error&&(r.error=q),void 0===r.complete&&(r.complete=q);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function q(){}var B=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function H(t,e){return t+" failed: "+e+" argument "}function K(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(H(t,e)+"must be a valid function.")}function z(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(H(t,e)+"must be a valid context object.")}var W=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var o=t.charCodeAt(r);if(o>=55296&&o<=56319){var a=o-55296;r++,i(r<t.length,"Surrogate pair missing trail surrogate."),o=65536+(a<<10)+(t.charCodeAt(r)-56320)}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=63&o|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=63&o|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=63&o|128)}return e},G=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};function Q(t){return t&&t._delegate?t._delegate:t}},qgXg:function(t,e,n){"use strict";n.d(e,"b",function(){return i}),n.d(e,"a",function(){return o});var r=function(t){v(n,t);var e=g(n);function n(t,r){var i;return f(this,n),(i=e.call(this,t,r)).scheduler=t,i.work=r,i}return p(n,[{key:"schedule",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e>0?h(w(n.prototype),"schedule",this).call(this,t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}},{key:"execute",value:function(t,e){return e>0||this.closed?h(w(n.prototype),"execute",this).call(this,t,e):this._execute(t,e)}},{key:"requestAsyncId",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return null!==r&&r>0||null===r&&this.delay>0?h(w(n.prototype),"requestAsyncId",this).call(this,t,e,r):t.flush(this)}}]),n}(n("3N8a").a),i=new(function(t){v(n,t);var e=g(n);function n(){return f(this,n),e.apply(this,arguments)}return n}(n("IjjT").a))(r),o=i},quSY:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r,i,o=n("DH7j"),a=n("XoHu"),s=n("n6bG"),u=function(){function t(t){return Error.call(this),this.message=t?"".concat(t.length," errors occurred during unsubscription:\n").concat(t.map(function(t,e){return"".concat(e+1,") ").concat(t.toString())}).join("\n  ")):"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t}(),c=((i=function(){function t(e){f(this,t),this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}return p(t,[{key:"unsubscribe",value:function(){var e;if(!this.closed){var n=this._parentOrParents,r=this._ctorUnsubscribe,i=this._unsubscribe,c=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(var h=0;h<n.length;++h)n[h].remove(this);if(Object(s.a)(i)){r&&(this._unsubscribe=void 0);try{i.call(this)}catch(v){e=v instanceof u?l(v.errors):[v]}}if(Object(o.a)(c))for(var f=-1,d=c.length;++f<d;){var p=c[f];if(Object(a.a)(p))try{p.unsubscribe()}catch(v){e=e||[],v instanceof u?e=e.concat(l(v.errors)):e.push(v)}}if(e)throw new u(e)}}},{key:"add",value:function(e){var n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){var r=n;(n=new t)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var i=n._parentOrParents;if(null===i)n._parentOrParents=this;else if(i instanceof t){if(i===this)return n;n._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return n;i.push(this)}var o=this._subscriptions;return null===o?this._subscriptions=[n]:o.push(n),n}},{key:"remove",value:function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}]),t}()).EMPTY=((r=new i).closed=!0,r),i);function l(t){return t.reduce(function(t,e){return t.concat(e instanceof u?e.errors:e)},[])}},spgP:function(t,e,a){"use strict";(function(t){a.d(e,"a",function(){return N}),a.d(e,"b",function(){return S}),a.d(e,"c",function(){return E}),a.d(e,"d",function(){return _}),a.d(e,"e",function(){return O}),a.d(e,"f",function(){return j}),a.d(e,"g",function(){return T}),a.d(e,"h",function(){return w}),a.d(e,"i",function(){return C}),a.d(e,"j",function(){return x});var u=a("qgXg"),c=a("D0XW"),l=a("vkgz"),h=a("tf+s"),d=a("pxpQ"),v=a("fXoL"),y=a("Jgta");function g(){}var m=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.b;f(this,t),this.zone=e,this.delegate=n}return p(t,[{key:"now",value:function(){return this.delegate.now()}},{key:"schedule",value:function(t,e,n){var r=this.zone;return this.delegate.schedule(function(e){var n=this;r.runGuarded(function(){t.apply(n,[e])})},e,n)}}]),t}(),b=function(){function t(e){f(this,t),this.zone=e,this.task=null}return p(t,[{key:"call",value:function(t,e){var n=this.unscheduleTask.bind(this);return this.task=this.zone.run(function(){return Zone.current.scheduleMacroTask("firebaseZoneBlock",g,{},g,g)}),e.pipe(Object(l.a)({next:n,complete:n,error:n})).subscribe(t).add(n)}},{key:"unscheduleTask",value:function(){var t=this;setTimeout(function(){null!=t.task&&"scheduled"===t.task.state&&(t.task.invoke(),t.task=null)},10)}}]),t}(),_=function t(e){f(this,t),this.ngZone=e,this.outsideAngular=e.runOutsideAngular(function(){return new m(Zone.current)}),this.insideAngular=e.run(function(){return new m(Zone.current,c.a)})};function w(t){return function(e){return(e=e.lift(new b(t.ngZone))).pipe(Object(h.a)(t.outsideAngular),Object(d.b)(t.insideAngular))}}var k=["ngOnDestroy"],C=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return new Proxy(t,{get:function(o,a){return n.runOutsideAngular(function(){var o;if(t[a])return(null===(o=null==r?void 0:r.spy)||void 0===o?void 0:o.get)&&r.spy.get(a,t[a]),t[a];if(k.indexOf(a)>-1)return function(){};var s=e.toPromise().then(function(t){var e=t&&t[a];return"function"==typeof e?e.bind(t):e&&e.then?e.then(function(t){return n.run(function(){return t})}):n.run(function(){return e})});return new Proxy(function(){},{get:function(t,e){return s[e]},apply:function(t,e,n){return s.then(function(t){var e,o=t&&t.apply(void 0,i(n));return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(a,n,o),o})}})})}})},O=function(t,e){e.forEach(function(e){Object.getOwnPropertyNames(e.prototype||e).forEach(function(n){Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})},E=new v.q("angularfire2.app.options"),S=new v.q("angularfire2.app.nameOrConfig"),I=new v.O("6.1.4");function T(e,n,r){var i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";var o=y.a.apps.filter(function(t){return t&&t.name===i.name})[0]||n.runOutsideAngular(function(){return y.a.initializeApp(e,i)});try{JSON.stringify(e)!==JSON.stringify(o.options)&&A("error","".concat(o.name," Firebase App already initialized with different options").concat(t.hot?", you may need to reload as Firebase is not HMR aware.":"."))}catch(a){}return o}var x=function(){A("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},A=function(t){for(var e,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];Object(v.U)()&&"undefined"!=typeof console&&(e=console)[t].apply(e,r)};function j(e,a,u,c,l){var h,f=globalThis.\u0275AngularfireInstanceCache.get(e)||[],d=r(h=f)||o(h)||s(h)||n(),p=d[0],v=d.slice(1);if(p){try{l.some(function(t,e){var n=v[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n})&&A("error","".concat(a," was already initialized on the ").concat(u.name," Firebase App instance with different settings.").concat(t.hot?" You may need to reload as Firebase is not HMR aware.":""))}catch(g){}return p}var y=c();return globalThis.\u0275AngularfireInstanceCache.set(e,[y].concat(i(l))),y}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);var P={provide:function t(){f(this,t)},useFactory:T,deps:[E,v.z,[new v.A,S]]},N=function(){var t=function(){function t(e){f(this,t),y.a.registerVersion("angularfire",I.full,e.toString()),y.a.registerVersion("angular",v.N.full)}return p(t,null,[{key:"initializeApp",value:function(e,n){return{ngModule:t,providers:[{provide:E,useValue:e},{provide:S,useValue:n}]}}}]),t}();return t.\u0275mod=v.Gb({type:t}),t.\u0275inj=v.Fb({factory:function(e){return new(e||t)(v.Pb(v.B))},providers:[P]}),t}()}).call(this,a("3UD+")(t))},"tf+s":function(t,e,n){"use strict";n.d(e,"a",function(){return b});var r=n("HDdC"),i=1,o=Promise.resolve(),a={};function s(t){return t in a&&(delete a[t],!0)}var u=function(t){var e=i++;return a[e]=!0,o.then(function(){return s(e)&&t()}),e},c=function(t){s(t)},l=function(t){v(n,t);var e=g(n);function n(t,r){var i;return f(this,n),(i=e.call(this,t,r)).scheduler=t,i.work=r,i}return p(n,[{key:"requestAsyncId",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return null!==r&&r>0?h(w(n.prototype),"requestAsyncId",this).call(this,t,e,r):(t.actions.push(this),t.scheduled||(t.scheduled=u(t.flush.bind(t,null))))}},{key:"recycleAsyncId",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(null!==r&&r>0||null===r&&this.delay>0)return h(w(n.prototype),"recycleAsyncId",this).call(this,t,e,r);0===t.actions.length&&(c(e),t.scheduled=void 0)}}]),n}(n("3N8a").a),d=new(function(t){v(n,t);var e=g(n);function n(){return f(this,n),e.apply(this,arguments)}return p(n,[{key:"flush",value:function(t){this.active=!0,this.scheduled=void 0;var e,n=this.actions,r=-1,i=n.length;t=t||n.shift();do{if(e=t.execute(t.state,t.delay))break}while(++r<i&&(t=n.shift()));if(this.active=!1,e){for(;++r<i&&(t=n.shift());)t.unsubscribe();throw e}}}]),n}(n("IjjT").a))(l),y=n("DH7j"),m=function(t){v(n,t);var e=g(n);function n(t){var r,i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d;return f(this,n),(r=e.call(this)).source=t,r.delayTime=o,r.scheduler=a,i=o,(Object(y.a)(i)||!(i-parseFloat(i)+1>=0)||o<0)&&(r.delayTime=0),a&&"function"==typeof a.schedule||(r.scheduler=d),r}return p(n,[{key:"_subscribe",value:function(t){return this.scheduler.schedule(n.dispatch,this.delayTime,{source:this.source,subscriber:t})}}],[{key:"create",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d;return new n(t,e,r)}},{key:"dispatch",value:function(t){var e=t.source,n=t.subscriber;return this.add(e.subscribe(n))}}]),n}(r.a);function b(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(n){return n.lift(new _(t,e))}}var _=function(){function t(e,n){f(this,t),this.scheduler=e,this.delay=n}return p(t,[{key:"call",value:function(t,e){return new m(e,this.delay,this.scheduler).subscribe(t)}}]),t}()},vkgz:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("7o/Q");function i(){}var o=n("n6bG");function a(t,e,n){return function(r){return r.lift(new s(t,e,n))}}var s=function(){function t(e,n,r){f(this,t),this.nextOrObserver=e,this.error=n,this.complete=r}return p(t,[{key:"call",value:function(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}]),t}(),u=function(t){v(n,t);var e=g(n);function n(t,r,a,s){var u;return f(this,n),(u=e.call(this,t))._tapNext=i,u._tapError=i,u._tapComplete=i,u._tapError=a||i,u._tapComplete=s||i,Object(o.a)(r)?(u._context=b(u),u._tapNext=r):r&&(u._context=r,u._tapNext=r.next||i,u._tapError=r.error||i,u._tapComplete=r.complete||i),u}return p(n,[{key:"_next",value:function(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}},{key:"_error",value:function(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}},{key:"_complete",value:function(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}]),n}(r.a)},w1tV:function(t,e,n){"use strict";n.d(e,"a",function(){return _});var r=n("XNiG"),i=n("HDdC"),o=n("7o/Q"),a=n("quSY");function s(){return function(t){return t.lift(new c(t))}}var u,c=function(){function t(e){f(this,t),this.connectable=e}return p(t,[{key:"call",value:function(t,e){var n=this.connectable;n._refCount++;var r=new l(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}]),t}(),l=function(t){v(n,t);var e=g(n);function n(t,r){var i;return f(this,n),(i=e.call(this,t)).connectable=r,i}return p(n,[{key:"_unsubscribe",value:function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,e>1)this.connection=null;else{var n=this.connection,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null}}]),n}(o.a),d=function(t){v(n,t);var e=g(n);function n(t,r){var i;return f(this,n),(i=e.call(this)).source=t,i.subjectFactory=r,i._refCount=0,i._isComplete=!1,i}return p(n,[{key:"_subscribe",value:function(t){return this.getSubject().subscribe(t)}},{key:"getSubject",value:function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}},{key:"connect",value:function(){var t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new a.a).add(this.source.subscribe(new m(this.getSubject(),this))),t.closed&&(this._connection=null,t=a.a.EMPTY)),t}},{key:"refCount",value:function(){return s()(this)}}]),n}(i.a),y={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:(u=d.prototype)._subscribe},_isComplete:{value:u._isComplete,writable:!0},getSubject:{value:u.getSubject},connect:{value:u.connect},refCount:{value:u.refCount}},m=function(t){v(n,t);var e=g(n);function n(t,r){var i;return f(this,n),(i=e.call(this,t)).connectable=r,i}return p(n,[{key:"_error",value:function(t){this._unsubscribe(),h(w(n.prototype),"_error",this).call(this,t)}},{key:"_complete",value:function(){this.connectable._isComplete=!0,this._unsubscribe(),h(w(n.prototype),"_complete",this).call(this)}},{key:"_unsubscribe",value:function(){var t=this.connectable;if(t){this.connectable=null;var e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}]),n}(r.b);function b(){return new r.a}function _(){return function(t){return s()((e=b,function(t){var n;n="function"==typeof e?e:function(){return e};var r=Object.create(t,y);return r.source=t,r.subjectFactory=n,r})(t));var e}}},yCtX:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("HDdC"),i=n("ngJS"),o=n("jZKg");function a(t,e){return e?Object(o.a)(t,e):new r.a(Object(i.a)(t))}},"z+Ro":function(t,e,n){"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,"a",function(){return r})},zIRd:function(t,e,n){"use strict";var r,i,o=n("mrSG"),a=n("qOnz"),s=n("/6Yf"),u=n("q/0M"),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new a.b("app","Firebase",c),h="@firebase/app",f=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/app-check"]="fire-app-check",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),d=new u.b("@firebase/app"),p=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Object(a.k)(t),this.container=new s.b(e.name),this._addComponent(new s.a("app",function(){return r},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(t){return r._addComponent(t)})}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(t){return t.delete()}))}).then(function(){t.isDeleted_=!0})},t.prototype._getService=function(t,e){return void 0===e&&(e="[DEFAULT]"),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e="[DEFAULT]"),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){d.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();p.prototype.name&&p.prototype.options||p.prototype.delete||console.log("dc");var v=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name="[DEFAULT]");var s=o.name;if("string"!=typeof s||!s)throw l.create("bad-app-name",{appName:String(s)});if(Object(a.h)(e,s))throw l.create("duplicate-app",{appName:s});var u=new t(n,o,r);return e[s]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=f[t])&&void 0!==r?r:t;n&&(i+="-"+n);var a=i.match(/\s|\//),u=e.match(/\s|\//);if(a||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return a&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),a&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void d.warn(c.join(" "))}o(new s.a(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:u.c,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument");Object(u.d)(t,e)},apps:null,SDK_VERSION:"8.5.0",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||"[DEFAULT]",!Object(a.h)(e,t))throw l.create("no-app",{appName:t});return e[t]}function o(o){var s=o.name;if(n.has(s))return d.debug("There were multiple attempts to register component "+s+"."),"PUBLIC"===o.type?r[s]:null;if(n.set(s,o),"PUBLIC"===o.type){var u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[s])throw l.create("invalid-app-argument",{appName:s});return t[s]()};void 0!==o.serviceProps&&Object(a.l)(u,o.serviceProps),r[s]=u,t.prototype[s]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,s).apply(this,o.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++)e[h[c]]._addComponent(o);return"PUBLIC"===o.type?r[s]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map(function(t){return e[t]})}}),i.App=t,r}(p);return e.INTERNAL=Object(o.a)(Object(o.a)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Object(a.l)(e,t)},createSubscribe:a.j,ErrorFactory:a.b,deepExtend:a.l}),e}(),y=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null}).filter(function(t){return t}).join(" ")},t}();if(Object(a.q)()&&void 0!==self.firebase){d.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var g=self.firebase.SDK_VERSION;g&&g.indexOf("LITE")>=0&&d.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var m=v.initializeApp;v.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(a.w)()&&d.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),m.apply(void 0,t)};var b=v;!function(t,e){t.INTERNAL.registerComponent(new s.a("platform-logger",function(t){return new y(t)},"PRIVATE")),t.registerVersion(h,"0.6.21",void 0),t.registerVersion("fire-js","")}(b),e.a=b},zUnb:function(n,r,o){"use strict";o.r(r);var s=o("fXoL"),u={apiKey:"AIzaSyAKpcfozDMhwDnpuxai9nKLBF2gCLTjD3I",authDomain:"fir-project-361bd.firebaseapp.com",databaseURL:"https://fir-project-361bd-default-rtdb.firebaseio.com",projectId:"fir-project-361bd",storageBucket:"fir-project-361bd.appspot.com",messagingSenderId:"297139999479",appId:"1:297139999479:web:d768d4078904094eb9f9f2",measurementId:"G-XTELP515X9"},c=null;function l(){return c}var d,y=new s.q("DocumentToken"),_=((d=function t(){f(this,t)}).\u0275fac=function(t){return new(t||d)},d.\u0275prov=Object(s.Eb)({factory:k,token:d,providedIn:"platform"}),d);function k(){return Object(s.Pb)(E)}var C,O=new s.q("Location Initialized"),E=((C=function(t){v(n,t);var e=g(n);function n(t){var r;return f(this,n),(r=e.call(this))._doc=t,r._init(),r}return p(n,[{key:"_init",value:function(){this.location=l().getLocation(),this._history=l().getHistory()}},{key:"getBaseHrefFromDOM",value:function(){return l().getBaseHref(this._doc)}},{key:"onPopState",value:function(t){l().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}},{key:"onHashChange",value:function(t){l().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}},{key:"href",get:function(){return this.location.href}},{key:"protocol",get:function(){return this.location.protocol}},{key:"hostname",get:function(){return this.location.hostname}},{key:"port",get:function(){return this.location.port}},{key:"pathname",get:function(){return this.location.pathname},set:function(t){this.location.pathname=t}},{key:"search",get:function(){return this.location.search}},{key:"hash",get:function(){return this.location.hash}},{key:"pushState",value:function(t,e,n){S()?this._history.pushState(t,e,n):this.location.hash=n}},{key:"replaceState",value:function(t,e,n){S()?this._history.replaceState(t,e,n):this.location.hash=n}},{key:"forward",value:function(){this._history.forward()}},{key:"back",value:function(){this._history.back()}},{key:"getState",value:function(){return this._history.state}}]),n}(_)).\u0275fac=function(t){return new(t||C)(s.Pb(y))},C.\u0275prov=Object(s.Eb)({factory:I,token:C,providedIn:"platform"}),C);function S(){return!!window.history.pushState}function I(){return new E(Object(s.Pb)(y))}function T(t,e){if(0==t.length)return e;if(0==e.length)return t;var n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function x(t){var e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function A(t){return t&&"?"!==t[0]?"?"+t:t}var j,P=((j=function t(){f(this,t)}).\u0275fac=function(t){return new(t||j)},j.\u0275prov=Object(s.Eb)({factory:N,token:j,providedIn:"root"}),j);function N(t){var e=Object(s.Pb)(y).location;return new F(Object(s.Pb)(_),e&&e.origin||"")}var D,R,L,M=new s.q("appBaseHref"),F=((L=function(t){v(n,t);var e=g(n);function n(t,r){var i;if(f(this,n),(i=e.call(this))._platformLocation=t,null==r&&(r=i._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");return i._baseHref=r,m(i)}return p(n,[{key:"onPopState",value:function(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}},{key:"getBaseHref",value:function(){return this._baseHref}},{key:"prepareExternalUrl",value:function(t){return T(this._baseHref,t)}},{key:"path",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this._platformLocation.pathname+A(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?"".concat(e).concat(n):e}},{key:"pushState",value:function(t,e,n,r){var i=this.prepareExternalUrl(n+A(r));this._platformLocation.pushState(t,e,i)}},{key:"replaceState",value:function(t,e,n,r){var i=this.prepareExternalUrl(n+A(r));this._platformLocation.replaceState(t,e,i)}},{key:"forward",value:function(){this._platformLocation.forward()}},{key:"back",value:function(){this._platformLocation.back()}}]),n}(P)).\u0275fac=function(t){return new(t||L)(s.Pb(_),s.Pb(M,8))},L.\u0275prov=s.Eb({token:L,factory:L.\u0275fac}),L),V=((R=function(t){v(n,t);var e=g(n);function n(t,r){var i;return f(this,n),(i=e.call(this))._platformLocation=t,i._baseHref="",null!=r&&(i._baseHref=r),i}return p(n,[{key:"onPopState",value:function(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}},{key:"getBaseHref",value:function(){return this._baseHref}},{key:"path",value:function(){var t=this._platformLocation.hash;return null==t&&(t="#"),t.length>0?t.substring(1):t}},{key:"prepareExternalUrl",value:function(t){var e=T(this._baseHref,t);return e.length>0?"#"+e:e}},{key:"pushState",value:function(t,e,n,r){var i=this.prepareExternalUrl(n+A(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}},{key:"replaceState",value:function(t,e,n,r){var i=this.prepareExternalUrl(n+A(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}},{key:"forward",value:function(){this._platformLocation.forward()}},{key:"back",value:function(){this._platformLocation.back()}}]),n}(P)).\u0275fac=function(t){return new(t||R)(s.Pb(_),s.Pb(M,8))},R.\u0275prov=s.Eb({token:R,factory:R.\u0275fac}),R),U=((D=function(){function t(e,n){var r=this;f(this,t),this._subject=new s.n,this._urlChangeListeners=[],this._platformStrategy=e;var i=this._platformStrategy.getBaseHref();this._platformLocation=n,this._baseHref=x(B(i)),this._platformStrategy.onPopState(function(t){r._subject.emit({url:r.path(!0),pop:!0,state:t.state,type:t.type})})}return p(t,[{key:"path",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.normalize(this._platformStrategy.path(t))}},{key:"getState",value:function(){return this._platformLocation.getState()}},{key:"isCurrentPathEqualTo",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this.path()==this.normalize(t+A(e))}},{key:"normalize",value:function(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,B(e)))}},{key:"prepareExternalUrl",value:function(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}},{key:"go",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+A(e)),n)}},{key:"replaceState",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+A(e)),n)}},{key:"forward",value:function(){this._platformStrategy.forward()}},{key:"back",value:function(){this._platformStrategy.back()}},{key:"onUrlChange",value:function(t){var e=this;this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(function(t){e._notifyUrlChangeListeners(t.url,t.state)}))}},{key:"_notifyUrlChangeListeners",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0;this._urlChangeListeners.forEach(function(n){return n(t,e)})}},{key:"subscribe",value:function(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}]),t}()).\u0275fac=function(t){return new(t||D)(s.Pb(P),s.Pb(_))},D.normalizeQueryParams=A,D.joinWithSlash=T,D.stripTrailingSlash=x,D.\u0275prov=Object(s.Eb)({factory:q,token:D,providedIn:"root"}),D);function q(){return new U(Object(s.Pb)(P),Object(s.Pb)(_))}function B(t){return t.replace(/\/index.html$/,"")}var H,K=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({}),z=s.lb,W=function t(){f(this,t)},G=((H=function(t){v(n,t);var e=g(n);function n(t){var r;return f(this,n),(r=e.call(this)).locale=t,r}return p(n,[{key:"getPluralCategory",value:function(t,e){switch(z(e||this.locale)(t)){case K.Zero:return"zero";case K.One:return"one";case K.Two:return"two";case K.Few:return"few";case K.Many:return"many";default:return"other"}}}]),n}(W)).\u0275fac=function(t){return new(t||H)(s.Pb(s.u))},H.\u0275prov=s.Eb({token:H,factory:H.\u0275fac}),H);function Q(t,n){n=encodeURIComponent(n);var r,i=a(t.split(";"));try{for(i.s();!(r=i.n()).done;){var o=r.value,s=o.indexOf("="),u=e(-1==s?[o,""]:[o.slice(0,s),o.slice(s+1)],2),c=u[0],l=u[1];if(c.trim()===n)return decodeURIComponent(l)}}catch(h){i.e(h)}finally{i.f()}return null}var Y,J,X,Z=((Y=function(){function t(e,n,r,i){f(this,t),this._iterableDiffers=e,this._keyValueDiffers=n,this._ngEl=r,this._renderer=i,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}return p(t,[{key:"klass",set:function(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}},{key:"ngClass",set:function(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(Object(s.ob)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}},{key:"ngDoCheck",value:function(){if(this._iterableDiffer){var t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){var e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}},{key:"_applyKeyValueChanges",value:function(t){var e=this;t.forEachAddedItem(function(t){return e._toggleClass(t.key,t.currentValue)}),t.forEachChangedItem(function(t){return e._toggleClass(t.key,t.currentValue)}),t.forEachRemovedItem(function(t){t.previousValue&&e._toggleClass(t.key,!1)})}},{key:"_applyIterableChanges",value:function(t){var e=this;t.forEachAddedItem(function(t){if("string"!=typeof t.item)throw new Error("NgClass can only toggle CSS classes expressed as strings, got "+Object(s.tb)(t.item));e._toggleClass(t.item,!0)}),t.forEachRemovedItem(function(t){return e._toggleClass(t.item,!1)})}},{key:"_applyClasses",value:function(t){var e=this;t&&(Array.isArray(t)||t instanceof Set?t.forEach(function(t){return e._toggleClass(t,!0)}):Object.keys(t).forEach(function(n){return e._toggleClass(n,!!t[n])}))}},{key:"_removeClasses",value:function(t){var e=this;t&&(Array.isArray(t)||t instanceof Set?t.forEach(function(t){return e._toggleClass(t,!1)}):Object.keys(t).forEach(function(t){return e._toggleClass(t,!1)}))}},{key:"_toggleClass",value:function(t,e){var n=this;(t=t.trim())&&t.split(/\s+/g).forEach(function(t){e?n._renderer.addClass(n._ngEl.nativeElement,t):n._renderer.removeClass(n._ngEl.nativeElement,t)})}}]),t}()).\u0275fac=function(t){return new(t||Y)(s.Ib(s.s),s.Ib(s.t),s.Ib(s.l),s.Ib(s.D))},Y.\u0275dir=s.Db({type:Y,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),Y),$=function(){function t(e,n,r,i){f(this,t),this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}return p(t,[{key:"first",get:function(){return 0===this.index}},{key:"last",get:function(){return this.index===this.count-1}},{key:"even",get:function(){return this.index%2==0}},{key:"odd",get:function(){return!this.even}}]),t}(),tt=((J=function(){function t(e,n,r){f(this,t),this._viewContainer=e,this._template=n,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}return p(t,[{key:"ngForOf",set:function(t){this._ngForOf=t,this._ngForOfDirty=!0}},{key:"ngForTrackBy",get:function(){return this._trackByFn},set:function(t){this._trackByFn=t}},{key:"ngForTemplate",set:function(t){t&&(this._template=t)}},{key:"ngDoCheck",value:function(){if(this._ngForOfDirty){this._ngForOfDirty=!1;var t=this._ngForOf;if(!this._differ&&t)try{this._differ=this._differs.find(t).create(this.ngForTrackBy)}catch(r){throw new Error("Cannot find a differ supporting object '".concat(t,"' of type '").concat((e=t).name||typeof e,"'. NgFor only supports binding to Iterables such as Arrays."))}}var e;if(this._differ){var n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}},{key:"_applyChanges",value:function(t){var e=this,n=[];t.forEachOperation(function(t,r,i){if(null==t.previousIndex){var o=e._viewContainer.createEmbeddedView(e._template,new $(null,e._ngForOf,-1,-1),null===i?void 0:i),a=new et(t,o);n.push(a)}else if(null==i)e._viewContainer.remove(null===r?void 0:r);else if(null!==r){var s=e._viewContainer.get(r);e._viewContainer.move(s,i);var u=new et(t,s);n.push(u)}});for(var r=0;r<n.length;r++)this._perViewChange(n[r].view,n[r].record);for(var i=0,o=this._viewContainer.length;i<o;i++){var a=this._viewContainer.get(i);a.context.index=i,a.context.count=o,a.context.ngForOf=this._ngForOf}t.forEachIdentityChange(function(t){e._viewContainer.get(t.currentIndex).context.$implicit=t.item})}},{key:"_perViewChange",value:function(t,e){t.context.$implicit=e.item}}],[{key:"ngTemplateContextGuard",value:function(t,e){return!0}}]),t}()).\u0275fac=function(t){return new(t||J)(s.Ib(s.P),s.Ib(s.K),s.Ib(s.s))},J.\u0275dir=s.Db({type:J,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),J),et=function t(e,n){f(this,t),this.record=e,this.view=n},nt=((X=function(){function t(e,n){f(this,t),this._viewContainer=e,this._context=new rt,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=n}return p(t,[{key:"ngIf",set:function(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}},{key:"ngIfThen",set:function(t){it("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}},{key:"ngIfElse",set:function(t){it("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}},{key:"_updateView",value:function(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}}],[{key:"ngTemplateContextGuard",value:function(t,e){return!0}}]),t}()).\u0275fac=function(t){return new(t||X)(s.Ib(s.P),s.Ib(s.K))},X.\u0275dir=s.Db({type:X,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),X),rt=function t(){f(this,t),this.$implicit=null,this.ngIf=null};function it(t,e){if(e&&!e.createEmbeddedView)throw new Error("".concat(t," must be a TemplateRef, but received '").concat(Object(s.tb)(e),"'."))}var ot,at=((ot=function t(){f(this,t)}).\u0275mod=s.Gb({type:ot}),ot.\u0275inj=s.Fb({factory:function(t){return new(t||ot)},providers:[{provide:W,useClass:G}]}),ot);function st(t){return"server"===t}var ut,ct=((ut=function t(){f(this,t)}).\u0275prov=Object(s.Eb)({token:ut,providedIn:"root",factory:function(){return new lt(Object(s.Pb)(y),window)}}),ut),lt=function(){function t(e,n){f(this,t),this.document=e,this.window=n,this.offset=function(){return[0,0]}}return p(t,[{key:"setOffset",value:function(t){this.offset=Array.isArray(t)?function(){return t}:t}},{key:"getScrollPosition",value:function(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}},{key:"scrollToPosition",value:function(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}},{key:"scrollToAnchor",value:function(t){var e;if(this.supportsScrolling()){var n=null!==(e=this.document.getElementById(t))&&void 0!==e?e:this.document.getElementsByName(t)[0];void 0!==n&&(this.scrollToElement(n),this.attemptFocus(n))}}},{key:"setHistoryScrollRestoration",value:function(t){if(this.supportScrollRestoration()){var e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}},{key:"scrollToElement",value:function(t){var e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}},{key:"attemptFocus",value:function(t){return t.focus(),this.document.activeElement===t}},{key:"supportScrollRestoration",value:function(){try{if(!this.supportsScrolling())return!1;var t=ht(this.window.history)||ht(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(e){return!1}}},{key:"supportsScrolling",value:function(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}]),t}();function ht(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}var ft,dt,pt,vt,yt=function(t){v(n,t);var e=g(n);function n(){return f(this,n),e.apply(this,arguments)}return p(n,[{key:"getProperty",value:function(t,e){return t[e]}},{key:"log",value:function(t){window.console&&window.console.log&&window.console.log(t)}},{key:"logGroup",value:function(t){window.console&&window.console.group&&window.console.group(t)}},{key:"logGroupEnd",value:function(){window.console&&window.console.groupEnd&&window.console.groupEnd()}},{key:"onAndCancel",value:function(t,e,n){return t.addEventListener(e,n,!1),function(){t.removeEventListener(e,n,!1)}}},{key:"dispatchEvent",value:function(t,e){t.dispatchEvent(e)}},{key:"remove",value:function(t){return t.parentNode&&t.parentNode.removeChild(t),t}},{key:"getValue",value:function(t){return t.value}},{key:"createElement",value:function(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}},{key:"createHtmlDocument",value:function(){return document.implementation.createHTMLDocument("fakeTitle")}},{key:"getDefaultDocument",value:function(){return document}},{key:"isElementNode",value:function(t){return t.nodeType===Node.ELEMENT_NODE}},{key:"isShadowRoot",value:function(t){return t instanceof DocumentFragment}},{key:"getGlobalEventTarget",value:function(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}},{key:"getHistory",value:function(){return window.history}},{key:"getLocation",value:function(){return window.location}},{key:"getBaseHref",value:function(t){var e,n=gt||(gt=document.querySelector("base"))?gt.getAttribute("href"):null;return null==n?null:(e=n,ft||(ft=document.createElement("a")),ft.setAttribute("href",e),"/"===ft.pathname.charAt(0)?ft.pathname:"/"+ft.pathname)}},{key:"resetBaseElement",value:function(){gt=null}},{key:"getUserAgent",value:function(){return window.navigator.userAgent}},{key:"performanceNow",value:function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}},{key:"supportsCookies",value:function(){return!0}},{key:"getCookie",value:function(t){return Q(document.cookie,t)}}],[{key:"makeCurrent",value:function(){var t;t=new n,c||(c=t)}}]),n}(function(t){v(n,t);var e=g(n);function n(){return f(this,n),e.call(this)}return p(n,[{key:"supportsDOMEvents",value:function(){return!0}}]),n}(function(){return function t(){f(this,t)}}())),gt=null,mt=new s.q("TRANSITION_ID"),bt=[{provide:s.d,useFactory:function(t,e,n){return function(){n.get(s.e).donePromise.then(function(){var n=l();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(function(e){return e.getAttribute("ng-transition")===t}).forEach(function(t){return n.remove(t)})})}},deps:[mt,y,s.r],multi:!0}],_t=function(){function t(){f(this,t)}return p(t,[{key:"addToWindow",value:function(t){s.nb.getAngularTestability=function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},s.nb.getAllAngularTestabilities=function(){return t.getAllTestabilities()},s.nb.getAllAngularRootElements=function(){return t.getAllRootElements()},s.nb.frameworkStabilizers||(s.nb.frameworkStabilizers=[]),s.nb.frameworkStabilizers.push(function(t){var e=s.nb.getAllAngularTestabilities(),n=e.length,r=!1,i=function(e){r=r||e,0==--n&&t(r)};e.forEach(function(t){t.whenStable(i)})})}},{key:"findTestabilityInTree",value:function(t,e,n){if(null==e)return null;var r=t.getTestability(e);return null!=r?r:n?l().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}],[{key:"init",value:function(){Object(s.W)(new t)}}]),t}(),wt=new s.q("EventManagerPlugins"),kt=((dt=function(){function t(e,n){var r=this;f(this,t),this._zone=n,this._eventNameToPlugin=new Map,e.forEach(function(t){return t.manager=r}),this._plugins=e.slice().reverse()}return p(t,[{key:"addEventListener",value:function(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}},{key:"addGlobalEventListener",value:function(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}},{key:"getZone",value:function(){return this._zone}},{key:"_findPluginFor",value:function(t){var e=this._eventNameToPlugin.get(t);if(e)return e;for(var n=this._plugins,r=0;r<n.length;r++){var i=n[r];if(i.supports(t))return this._eventNameToPlugin.set(t,i),i}throw new Error("No event manager plugin found for event "+t)}}]),t}()).\u0275fac=function(t){return new(t||dt)(s.Pb(wt),s.Pb(s.z))},dt.\u0275prov=s.Eb({token:dt,factory:dt.\u0275fac}),dt),Ct=function(){function t(e){f(this,t),this._doc=e}return p(t,[{key:"addGlobalEventListener",value:function(t,e,n){var r=l().getGlobalEventTarget(this._doc,t);if(!r)throw new Error("Unsupported event target ".concat(r," for event ").concat(e));return this.addEventListener(r,e,n)}}]),t}(),Ot=((vt=function(){function t(){f(this,t),this._stylesSet=new Set}return p(t,[{key:"addStyles",value:function(t){var e=this,n=new Set;t.forEach(function(t){e._stylesSet.has(t)||(e._stylesSet.add(t),n.add(t))}),this.onStylesAdded(n)}},{key:"onStylesAdded",value:function(t){}},{key:"getAllStyles",value:function(){return Array.from(this._stylesSet)}}]),t}()).\u0275fac=function(t){return new(t||vt)},vt.\u0275prov=s.Eb({token:vt,factory:vt.\u0275fac}),vt),Et=((pt=function(t){v(n,t);var e=g(n);function n(t){var r;return f(this,n),(r=e.call(this))._doc=t,r._hostNodes=new Set,r._styleNodes=new Set,r._hostNodes.add(t.head),r}return p(n,[{key:"_addStylesToHost",value:function(t,e){var n=this;t.forEach(function(t){var r=n._doc.createElement("style");r.textContent=t,n._styleNodes.add(e.appendChild(r))})}},{key:"addHost",value:function(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}},{key:"removeHost",value:function(t){this._hostNodes.delete(t)}},{key:"onStylesAdded",value:function(t){var e=this;this._hostNodes.forEach(function(n){return e._addStylesToHost(t,n)})}},{key:"ngOnDestroy",value:function(){this._styleNodes.forEach(function(t){return l().remove(t)})}}]),n}(Ot)).\u0275fac=function(t){return new(t||pt)(s.Pb(y))},pt.\u0275prov=s.Eb({token:pt,factory:pt.\u0275fac}),pt),St={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},It=/%COMP%/g;function Tt(t,e,n){for(var r=0;r<e.length;r++){var i=e[r];Array.isArray(i)?Tt(t,i,n):(i=i.replace(It,t),n.push(i))}return n}function xt(t){return function(e){if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}var At,jt,Pt,Nt,Dt=((At=function(){function t(e,n,r){f(this,t),this.eventManager=e,this.sharedStylesHost=n,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new Rt(e)}return p(t,[{key:"createRenderer",value:function(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case s.Q.Emulated:var n=this.rendererByCompId.get(e.id);return n||(n=new Lt(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n;case 1:case s.Q.ShadowDom:return new Mt(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){var r=Tt(e.id,e.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}},{key:"begin",value:function(){}},{key:"end",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||At)(s.Pb(kt),s.Pb(Et),s.Pb(s.c))},At.\u0275prov=s.Eb({token:At,factory:At.\u0275fac}),At),Rt=function(){function t(e){f(this,t),this.eventManager=e,this.data=Object.create(null)}return p(t,[{key:"destroy",value:function(){}},{key:"createElement",value:function(t,e){return e?document.createElementNS(St[e]||e,t):document.createElement(t)}},{key:"createComment",value:function(t){return document.createComment(t)}},{key:"createText",value:function(t){return document.createTextNode(t)}},{key:"appendChild",value:function(t,e){t.appendChild(e)}},{key:"insertBefore",value:function(t,e,n){t&&t.insertBefore(e,n)}},{key:"removeChild",value:function(t,e){t&&t.removeChild(e)}},{key:"selectRootElement",value:function(t,e){var n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error('The selector "'.concat(t,'" did not match any elements'));return e||(n.textContent=""),n}},{key:"parentNode",value:function(t){return t.parentNode}},{key:"nextSibling",value:function(t){return t.nextSibling}},{key:"setAttribute",value:function(t,e,n,r){if(r){e=r+":"+e;var i=St[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}},{key:"removeAttribute",value:function(t,e,n){if(n){var r=St[n];r?t.removeAttributeNS(r,e):t.removeAttribute("".concat(n,":").concat(e))}else t.removeAttribute(e)}},{key:"addClass",value:function(t,e){t.classList.add(e)}},{key:"removeClass",value:function(t,e){t.classList.remove(e)}},{key:"setStyle",value:function(t,e,n,r){r&(s.F.DashCase|s.F.Important)?t.style.setProperty(e,n,r&s.F.Important?"important":""):t.style[e]=n}},{key:"removeStyle",value:function(t,e,n){n&s.F.DashCase?t.style.removeProperty(e):t.style[e]=""}},{key:"setProperty",value:function(t,e,n){t[e]=n}},{key:"setValue",value:function(t,e){t.nodeValue=e}},{key:"listen",value:function(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,xt(n)):this.eventManager.addEventListener(t,e,xt(n))}}]),t}(),Lt=function(t){v(n,t);var e=g(n);function n(t,r,i,o){var a;f(this,n),(a=e.call(this,t)).component=i;var s=Tt(o+"-"+i.id,i.styles,[]);return r.addStyles(s),a.contentAttr="_ngcontent-%COMP%".replace(It,o+"-"+i.id),a.hostAttr="_nghost-%COMP%".replace(It,o+"-"+i.id),a}return p(n,[{key:"applyToHost",value:function(t){h(w(n.prototype),"setAttribute",this).call(this,t,this.hostAttr,"")}},{key:"createElement",value:function(t,e){var r=h(w(n.prototype),"createElement",this).call(this,t,e);return h(w(n.prototype),"setAttribute",this).call(this,r,this.contentAttr,""),r}}]),n}(Rt),Mt=function(t){v(n,t);var e=g(n);function n(t,r,i,o){var a;f(this,n),(a=e.call(this,t)).sharedStylesHost=r,a.hostEl=i,a.shadowRoot=i.attachShadow({mode:"open"}),a.sharedStylesHost.addHost(a.shadowRoot);for(var s=Tt(o.id,o.styles,[]),u=0;u<s.length;u++){var c=document.createElement("style");c.textContent=s[u],a.shadowRoot.appendChild(c)}return a}return p(n,[{key:"nodeOrShadowRoot",value:function(t){return t===this.hostEl?this.shadowRoot:t}},{key:"destroy",value:function(){this.sharedStylesHost.removeHost(this.shadowRoot)}},{key:"appendChild",value:function(t,e){return h(w(n.prototype),"appendChild",this).call(this,this.nodeOrShadowRoot(t),e)}},{key:"insertBefore",value:function(t,e,r){return h(w(n.prototype),"insertBefore",this).call(this,this.nodeOrShadowRoot(t),e,r)}},{key:"removeChild",value:function(t,e){return h(w(n.prototype),"removeChild",this).call(this,this.nodeOrShadowRoot(t),e)}},{key:"parentNode",value:function(t){return this.nodeOrShadowRoot(h(w(n.prototype),"parentNode",this).call(this,this.nodeOrShadowRoot(t)))}}]),n}(Rt),Ft=((jt=function(t){v(n,t);var e=g(n);function n(t){return f(this,n),e.call(this,t)}return p(n,[{key:"supports",value:function(t){return!0}},{key:"addEventListener",value:function(t,e,n){var r=this;return t.addEventListener(e,n,!1),function(){return r.removeEventListener(t,e,n)}}},{key:"removeEventListener",value:function(t,e,n){return t.removeEventListener(e,n)}}]),n}(Ct)).\u0275fac=function(t){return new(t||jt)(s.Pb(y))},jt.\u0275prov=s.Eb({token:jt,factory:jt.\u0275fac}),jt),Vt=["alt","control","meta","shift"],Ut={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},qt={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Bt={alt:function(t){return t.altKey},control:function(t){return t.ctrlKey},meta:function(t){return t.metaKey},shift:function(t){return t.shiftKey}},Ht=((Pt=function(t){v(n,t);var e=g(n);function n(t){return f(this,n),e.call(this,t)}return p(n,[{key:"supports",value:function(t){return null!=n.parseEventName(t)}},{key:"addEventListener",value:function(t,e,r){var i=n.parseEventName(e),o=n.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(function(){return l().onAndCancel(t,i.domEventName,o)})}}],[{key:"parseEventName",value:function(t){var e=t.toLowerCase().split("."),r=e.shift();if(0===e.length||"keydown"!==r&&"keyup"!==r)return null;var i=n._normalizeKey(e.pop()),o="";if(Vt.forEach(function(t){var n=e.indexOf(t);n>-1&&(e.splice(n,1),o+=t+".")}),o+=i,0!=e.length||0===i.length)return null;var a={};return a.domEventName=r,a.fullKey=o,a}},{key:"getEventFullKey",value:function(t){var e="",n=function(t){var e=t.key;if(null==e){if(null==(e=t.keyIdentifier))return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&qt.hasOwnProperty(e)&&(e=qt[e]))}return Ut[e]||e}(t);return" "===(n=n.toLowerCase())?n="space":"."===n&&(n="dot"),Vt.forEach(function(r){r!=n&&(0,Bt[r])(t)&&(e+=r+".")}),e+=n}},{key:"eventCallback",value:function(t,e,r){return function(i){n.getEventFullKey(i)===t&&r.runGuarded(function(){return e(i)})}}},{key:"_normalizeKey",value:function(t){switch(t){case"esc":return"escape";default:return t}}}]),n}(Ct)).\u0275fac=function(t){return new(t||Pt)(s.Pb(y))},Pt.\u0275prov=s.Eb({token:Pt,factory:Pt.\u0275fac}),Pt),Kt=[{provide:s.B,useValue:"browser"},{provide:s.C,useValue:function(){yt.makeCurrent(),_t.init()},multi:!0},{provide:y,useFactory:function(){return Object(s.sb)(document),document},deps:[]}],zt=Object(s.R)(s.V,"browser",Kt),Wt=[[],{provide:s.Y,useValue:"root"},{provide:s.m,useFactory:function(){return new s.m},deps:[]},{provide:wt,useClass:Ft,multi:!0,deps:[y,s.z,s.B]},{provide:wt,useClass:Ht,multi:!0,deps:[y]},[],{provide:Dt,useClass:Dt,deps:[kt,Et,s.c]},{provide:s.E,useExisting:Dt},{provide:Ot,useExisting:Et},{provide:Et,useClass:Et,deps:[y]},{provide:s.L,useClass:s.L,deps:[s.z]},{provide:kt,useClass:kt,deps:[wt,s.z]},[]],Gt=((Nt=function(){function t(e){if(f(this,t),e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}return p(t,null,[{key:"withServerTransition",value:function(e){return{ngModule:t,providers:[{provide:s.c,useValue:e.appId},{provide:mt,useExisting:s.c},bt]}}}]),t}()).\u0275mod=s.Gb({type:Nt}),Nt.\u0275inj=s.Fb({factory:function(t){return new(t||Nt)(s.Pb(Nt,12))},providers:Wt,imports:[at,s.f]}),Nt);"undefined"!=typeof window&&window;var Qt=o("HDdC"),Yt=o("DH7j"),Jt=o("lJxs"),Xt=o("XoHu"),Zt=o("Cfvw");function $t(t,e){return new Qt.a(function(n){var r=t.length;if(0!==r)for(var i=new Array(r),o=0,a=0,s=function(s){var u=Object(Zt.a)(t[s]),c=!1;n.add(u.subscribe({next:function(t){c||(c=!0,a++),i[s]=t},error:function(t){return n.error(t)},complete:function(){++o!==r&&c||(a===r&&n.next(e?e.reduce(function(t,e,n){return t[e]=i[n],t},{}):i),n.complete())}}))},u=0;u<r;u++)s(u);else n.complete()})}var te,ee,ne=new s.q("NgValueAccessor"),re={provide:ne,useExisting:Object(s.T)(function(){return ie}),multi:!0},ie=((te=function(){function t(e,n){f(this,t),this._renderer=e,this._elementRef=n,this.onChange=function(t){},this.onTouched=function(){}}return p(t,[{key:"writeValue",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"checked",t)}},{key:"registerOnChange",value:function(t){this.onChange=t}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"setDisabledState",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}]),t}()).\u0275fac=function(t){return new(t||te)(s.Ib(s.D),s.Ib(s.l))},te.\u0275dir=s.Db({type:te,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(t,e){1&t&&s.Sb("change",function(t){return e.onChange(t.target.checked)})("blur",function(){return e.onTouched()})},features:[s.xb([re])]}),te),oe={provide:ne,useExisting:Object(s.T)(function(){return se}),multi:!0},ae=new s.q("CompositionEventMode"),se=((ee=function(){function t(e,n,r){var i;f(this,t),this._renderer=e,this._elementRef=n,this._compositionMode=r,this.onChange=function(t){},this.onTouched=function(){},this._composing=!1,null==this._compositionMode&&(this._compositionMode=(i=l()?l().getUserAgent():"",!/android (\d+)/.test(i.toLowerCase())))}return p(t,[{key:"writeValue",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}},{key:"registerOnChange",value:function(t){this.onChange=t}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"setDisabledState",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}},{key:"_handleInput",value:function(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}},{key:"_compositionStart",value:function(){this._composing=!0}},{key:"_compositionEnd",value:function(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}]),t}()).\u0275fac=function(t){return new(t||ee)(s.Ib(s.D),s.Ib(s.l),s.Ib(ae,8))},ee.\u0275dir=s.Db({type:ee,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&s.Sb("input",function(t){return e._handleInput(t.target.value)})("blur",function(){return e.onTouched()})("compositionstart",function(){return e._compositionStart()})("compositionend",function(t){return e._compositionEnd(t.target.value)})},features:[s.xb([oe])]}),ee);function ue(t){return null==t||0===t.length}function ce(t){return null!=t&&"number"==typeof t.length}var le=new s.q("NgValidators"),he=new s.q("NgAsyncValidators"),fe=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,de=function(){function t(){f(this,t)}return p(t,null,[{key:"min",value:function(t){return function(e){if(ue(e.value)||ue(t))return null;var n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}},{key:"max",value:function(t){return function(e){if(ue(e.value)||ue(t))return null;var n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}},{key:"required",value:function(t){return ue(t.value)?{required:!0}:null}},{key:"requiredTrue",value:function(t){return!0===t.value?null:{required:!0}}},{key:"email",value:function(t){return ue(t.value)||fe.test(t.value)?null:{email:!0}}},{key:"minLength",value:function(t){return function(e){return ue(e.value)||!ce(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}}},{key:"maxLength",value:function(t){return function(e){return ce(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}}},{key:"pattern",value:function(e){return e?("string"==typeof e?(r="","^"!==e.charAt(0)&&(r+="^"),r+=e,"$"!==e.charAt(e.length-1)&&(r+="$"),n=new RegExp(r)):(r=e.toString(),n=e),function(t){if(ue(t.value))return null;var e=t.value;return n.test(e)?null:{pattern:{requiredPattern:r,actualValue:e}}}):t.nullValidator;var n,r}},{key:"nullValidator",value:function(t){return null}},{key:"compose",value:function(t){if(!t)return null;var e=t.filter(pe);return 0==e.length?null:function(t){return ye(ge(t,e))}}},{key:"composeAsync",value:function(t){if(!t)return null;var e=t.filter(pe);return 0==e.length?null:function(t){return function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(1===e.length){var r=e[0];if(Object(Yt.a)(r))return $t(r,null);if(Object(Xt.a)(r)&&Object.getPrototypeOf(r)===Object.prototype){var o=Object.keys(r);return $t(o.map(function(t){return r[t]}),o)}}if("function"==typeof e[e.length-1]){var a=e.pop();return $t(e=1===e.length&&Object(Yt.a)(e[0])?e[0]:e,null).pipe(Object(Jt.a)(function(t){return a.apply(void 0,i(t))}))}return $t(e,null)}(ge(t,e).map(ve)).pipe(Object(Jt.a)(ye))}}}]),t}();function pe(t){return null!=t}function ve(t){var e=Object(s.qb)(t)?Object(Zt.a)(t):t;return Object(s.pb)(e),e}function ye(t){var e={};return t.forEach(function(t){e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function ge(t,e){return e.map(function(e){return e(t)})}function me(t){return t.map(function(t){return function(t){return!t.validate}(t)?t:function(e){return t.validate(e)}})}function be(t){return null!=t?de.compose(me(t)):null}function _e(t){return null!=t?de.composeAsync(me(t)):null}function we(t,e){return null===t?[e]:Array.isArray(t)?[].concat(i(t),[e]):[t,e]}var ke,Ce,Oe,Ee,Se,Ie,Te,xe,Ae,je,Pe=((Ce=function(){function t(){f(this,t),this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}return p(t,[{key:"value",get:function(){return this.control?this.control.value:null}},{key:"valid",get:function(){return this.control?this.control.valid:null}},{key:"invalid",get:function(){return this.control?this.control.invalid:null}},{key:"pending",get:function(){return this.control?this.control.pending:null}},{key:"disabled",get:function(){return this.control?this.control.disabled:null}},{key:"enabled",get:function(){return this.control?this.control.enabled:null}},{key:"errors",get:function(){return this.control?this.control.errors:null}},{key:"pristine",get:function(){return this.control?this.control.pristine:null}},{key:"dirty",get:function(){return this.control?this.control.dirty:null}},{key:"touched",get:function(){return this.control?this.control.touched:null}},{key:"status",get:function(){return this.control?this.control.status:null}},{key:"untouched",get:function(){return this.control?this.control.untouched:null}},{key:"statusChanges",get:function(){return this.control?this.control.statusChanges:null}},{key:"valueChanges",get:function(){return this.control?this.control.valueChanges:null}},{key:"path",get:function(){return null}},{key:"_setValidators",value:function(t){this._rawValidators=t||[],this._composedValidatorFn=be(this._rawValidators)}},{key:"_setAsyncValidators",value:function(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=_e(this._rawAsyncValidators)}},{key:"validator",get:function(){return this._composedValidatorFn||null}},{key:"asyncValidator",get:function(){return this._composedAsyncValidatorFn||null}},{key:"_registerOnDestroy",value:function(t){this._onDestroyCallbacks.push(t)}},{key:"_invokeOnDestroyCallbacks",value:function(){this._onDestroyCallbacks.forEach(function(t){return t()}),this._onDestroyCallbacks=[]}},{key:"reset",value:function(t){this.control&&this.control.reset(t)}},{key:"hasError",value:function(t,e){return!!this.control&&this.control.hasError(t,e)}},{key:"getError",value:function(t,e){return this.control?this.control.getError(t,e):null}}]),t}()).\u0275fac=function(t){return new(t||Ce)},Ce.\u0275dir=s.Db({type:Ce}),Ce),Ne=((ke=function(t){v(n,t);var e=g(n);function n(){return f(this,n),e.apply(this,arguments)}return p(n,[{key:"formDirective",get:function(){return null}},{key:"path",get:function(){return null}}]),n}(Pe)).\u0275fac=function(t){return De(t||ke)},ke.\u0275dir=s.Db({type:ke,features:[s.vb]}),ke),De=s.Nb(Ne),Re=function(t){v(n,t);var e=g(n);function n(){var t;return f(this,n),(t=e.apply(this,arguments))._parent=null,t.name=null,t.valueAccessor=null,t}return n}(Pe),Le=function(){function t(e){f(this,t),this._cd=e}return p(t,[{key:"ngClassUntouched",get:function(){var t,e,n;return null!==(n=null===(e=null===(t=this._cd)||void 0===t?void 0:t.control)||void 0===e?void 0:e.untouched)&&void 0!==n&&n}},{key:"ngClassTouched",get:function(){var t,e,n;return null!==(n=null===(e=null===(t=this._cd)||void 0===t?void 0:t.control)||void 0===e?void 0:e.touched)&&void 0!==n&&n}},{key:"ngClassPristine",get:function(){var t,e,n;return null!==(n=null===(e=null===(t=this._cd)||void 0===t?void 0:t.control)||void 0===e?void 0:e.pristine)&&void 0!==n&&n}},{key:"ngClassDirty",get:function(){var t,e,n;return null!==(n=null===(e=null===(t=this._cd)||void 0===t?void 0:t.control)||void 0===e?void 0:e.dirty)&&void 0!==n&&n}},{key:"ngClassValid",get:function(){var t,e,n;return null!==(n=null===(e=null===(t=this._cd)||void 0===t?void 0:t.control)||void 0===e?void 0:e.valid)&&void 0!==n&&n}},{key:"ngClassInvalid",get:function(){var t,e,n;return null!==(n=null===(e=null===(t=this._cd)||void 0===t?void 0:t.control)||void 0===e?void 0:e.invalid)&&void 0!==n&&n}},{key:"ngClassPending",get:function(){var t,e,n;return null!==(n=null===(e=null===(t=this._cd)||void 0===t?void 0:t.control)||void 0===e?void 0:e.pending)&&void 0!==n&&n}}]),t}(),Me=((Ee=function(t){v(n,t);var e=g(n);function n(t){return f(this,n),e.call(this,t)}return n}(Le)).\u0275fac=function(t){return new(t||Ee)(s.Ib(Re,2))},Ee.\u0275dir=s.Db({type:Ee,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&s.Ab("ng-untouched",e.ngClassUntouched)("ng-touched",e.ngClassTouched)("ng-pristine",e.ngClassPristine)("ng-dirty",e.ngClassDirty)("ng-valid",e.ngClassValid)("ng-invalid",e.ngClassInvalid)("ng-pending",e.ngClassPending)},features:[s.vb]}),Ee),Fe=((Oe=function(t){v(n,t);var e=g(n);function n(t){return f(this,n),e.call(this,t)}return n}(Le)).\u0275fac=function(t){return new(t||Oe)(s.Ib(Ne,10))},Oe.\u0275dir=s.Db({type:Oe,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:14,hostBindings:function(t,e){2&t&&s.Ab("ng-untouched",e.ngClassUntouched)("ng-touched",e.ngClassTouched)("ng-pristine",e.ngClassPristine)("ng-dirty",e.ngClassDirty)("ng-valid",e.ngClassValid)("ng-invalid",e.ngClassInvalid)("ng-pending",e.ngClassPending)},features:[s.vb]}),Oe),Ve={provide:ne,useExisting:Object(s.T)(function(){return Ue}),multi:!0},Ue=((Se=function(){function t(e,n){f(this,t),this._renderer=e,this._elementRef=n,this.onChange=function(t){},this.onTouched=function(){}}return p(t,[{key:"writeValue",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}},{key:"registerOnChange",value:function(t){this.onChange=function(e){t(""==e?null:parseFloat(e))}}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"setDisabledState",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}]),t}()).\u0275fac=function(t){return new(t||Se)(s.Ib(s.D),s.Ib(s.l))},Se.\u0275dir=s.Db({type:Se,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,e){1&t&&s.Sb("input",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},features:[s.xb([Ve])]}),Se),qe={provide:ne,useExisting:Object(s.T)(function(){return He}),multi:!0},Be=((Te=function(){function t(){f(this,t),this._accessors=[]}return p(t,[{key:"add",value:function(t,e){this._accessors.push([t,e])}},{key:"remove",value:function(t){for(var e=this._accessors.length-1;e>=0;--e)if(this._accessors[e][1]===t)return void this._accessors.splice(e,1)}},{key:"select",value:function(t){var e=this;this._accessors.forEach(function(n){e._isSameGroup(n,t)&&n[1]!==t&&n[1].fireUncheck(t.value)})}},{key:"_isSameGroup",value:function(t,e){return!!t[0].control&&t[0]._parent===e._control._parent&&t[1].name===e.name}}]),t}()).\u0275fac=function(t){return new(t||Te)},Te.\u0275prov=s.Eb({token:Te,factory:Te.\u0275fac}),Te),He=((Ie=function(){function t(e,n,r,i){f(this,t),this._renderer=e,this._elementRef=n,this._registry=r,this._injector=i,this.onChange=function(){},this.onTouched=function(){}}return p(t,[{key:"ngOnInit",value:function(){this._control=this._injector.get(Re),this._checkName(),this._registry.add(this._control,this)}},{key:"ngOnDestroy",value:function(){this._registry.remove(this)}},{key:"writeValue",value:function(t){this._state=t===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}},{key:"registerOnChange",value:function(t){var e=this;this._fn=t,this.onChange=function(){t(e.value),e._registry.select(e)}}},{key:"fireUncheck",value:function(t){this.writeValue(t)}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"setDisabledState",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}},{key:"_checkName",value:function(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}]),t}()).\u0275fac=function(t){return new(t||Ie)(s.Ib(s.D),s.Ib(s.l),s.Ib(Be),s.Ib(s.r))},Ie.\u0275dir=s.Db({type:Ie,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(t,e){1&t&&s.Sb("change",function(){return e.onChange()})("blur",function(){return e.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[s.xb([qe])]}),Ie),Ke={provide:ne,useExisting:Object(s.T)(function(){return ze}),multi:!0},ze=((xe=function(){function t(e,n){f(this,t),this._renderer=e,this._elementRef=n,this.onChange=function(t){},this.onTouched=function(){}}return p(t,[{key:"writeValue",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(t))}},{key:"registerOnChange",value:function(t){this.onChange=function(e){t(""==e?null:parseFloat(e))}}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"setDisabledState",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}]),t}()).\u0275fac=function(t){return new(t||xe)(s.Ib(s.D),s.Ib(s.l))},xe.\u0275dir=s.Db({type:xe,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(t,e){1&t&&s.Sb("change",function(t){return e.onChange(t.target.value)})("input",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},features:[s.xb([Ke])]}),xe),We={provide:ne,useExisting:Object(s.T)(function(){return Ge}),multi:!0},Ge=((Ae=function(){function t(e,n){f(this,t),this._renderer=e,this._elementRef=n,this._optionMap=new Map,this._idCounter=0,this.onChange=function(t){},this.onTouched=function(){},this._compareWith=Object.is}return p(t,[{key:"compareWith",set:function(t){this._compareWith=t}},{key:"writeValue",value:function(t){this.value=t;var e=this._getOptionId(t);null==e&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);var n=function(t,e){return null==t?""+e:(e&&"object"==typeof e&&(e="Object"),"".concat(t,": ").concat(e).slice(0,50))}(e,t);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}},{key:"registerOnChange",value:function(t){var e=this;this.onChange=function(n){e.value=e._getOptionValue(n),t(e.value)}}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"setDisabledState",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}},{key:"_registerOption",value:function(){return(this._idCounter++).toString()}},{key:"_getOptionId",value:function(t){for(var e=0,n=Array.from(this._optionMap.keys());e<n.length;e++){var r=n[e];if(this._compareWith(this._optionMap.get(r),t))return r}return null}},{key:"_getOptionValue",value:function(t){var e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e):t}}]),t}()).\u0275fac=function(t){return new(t||Ae)(s.Ib(s.D),s.Ib(s.l))},Ae.\u0275dir=s.Db({type:Ae,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,e){1&t&&s.Sb("change",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},inputs:{compareWith:"compareWith"},features:[s.xb([We])]}),Ae),Qe={provide:ne,useExisting:Object(s.T)(function(){return Ye}),multi:!0},Ye=((je=function(){function t(e,n){f(this,t),this._renderer=e,this._elementRef=n,this._optionMap=new Map,this._idCounter=0,this.onChange=function(t){},this.onTouched=function(){},this._compareWith=Object.is}return p(t,[{key:"compareWith",set:function(t){this._compareWith=t}},{key:"writeValue",value:function(t){var e,n=this;if(this.value=t,Array.isArray(t)){var r=t.map(function(t){return n._getOptionId(t)});e=function(t,e){t._setSelected(r.indexOf(e.toString())>-1)}}else e=function(t,e){t._setSelected(!1)};this._optionMap.forEach(e)}},{key:"registerOnChange",value:function(t){var e=this;this.onChange=function(n){var r=[];if(void 0!==n.selectedOptions)for(var i=n.selectedOptions,o=0;o<i.length;o++){var a=i.item(o),s=e._getOptionValue(a.value);r.push(s)}else for(var u=n.options,c=0;c<u.length;c++){var l=u.item(c);if(l.selected){var h=e._getOptionValue(l.value);r.push(h)}}e.value=r,t(r)}}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"setDisabledState",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}},{key:"_registerOption",value:function(t){var e=(this._idCounter++).toString();return this._optionMap.set(e,t),e}},{key:"_getOptionId",value:function(t){for(var e=0,n=Array.from(this._optionMap.keys());e<n.length;e++){var r=n[e];if(this._compareWith(this._optionMap.get(r)._value,t))return r}return null}},{key:"_getOptionValue",value:function(t){var e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e)._value:t}}]),t}()).\u0275fac=function(t){return new(t||je)(s.Ib(s.D),s.Ib(s.l))},je.\u0275dir=s.Db({type:je,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,e){1&t&&s.Sb("change",function(t){return e.onChange(t.target)})("blur",function(){return e.onTouched()})},inputs:{compareWith:"compareWith"},features:[s.xb([Qe])]}),je);function Je(t,e){Ze(t,e,!0),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(function(n){t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&$e(t,e)})}(t,e),function(t,e){var n=function(t,n){e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)};t.registerOnChange(n),e._registerOnDestroy(function(){t._unregisterOnChange(n)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(function(){t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&$e(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function(t,e){if(e.valueAccessor.setDisabledState){var n=function(t){e.valueAccessor.setDisabledState(t)};t.registerOnDisabledChange(n),e._registerOnDestroy(function(){t._unregisterOnDisabledChange(n)})}}(t,e)}function Xe(t,e){t.forEach(function(t){t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Ze(t,e,n){var r=function(t){return t._rawValidators}(t);null!==e.validator?t.setValidators(we(r,e.validator)):"function"==typeof r&&t.setValidators([r]);var i=function(t){return t._rawAsyncValidators}(t);if(null!==e.asyncValidator?t.setAsyncValidators(we(i,e.asyncValidator)):"function"==typeof i&&t.setAsyncValidators([i]),n){var o=function(){return t.updateValueAndValidity()};Xe(e._rawValidators,o),Xe(e._rawAsyncValidators,o)}}function $e(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}var tn=[ie,ze,Ue,Ge,Ye,He];function en(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1)}function nn(t){return(sn(t)?t.validators:t)||null}function rn(t){return Array.isArray(t)?be(t):t||null}function on(t,e){return(sn(e)?e.asyncValidators:t)||null}function an(t){return Array.isArray(t)?_e(t):t||null}function sn(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}var un,cn,ln,hn,fn,dn,pn,vn,yn=function(){function t(e,n){f(this,t),this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=function(){},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=n,this._composedValidatorFn=rn(this._rawValidators),this._composedAsyncValidatorFn=an(this._rawAsyncValidators)}return p(t,[{key:"validator",get:function(){return this._composedValidatorFn},set:function(t){this._rawValidators=this._composedValidatorFn=t}},{key:"asyncValidator",get:function(){return this._composedAsyncValidatorFn},set:function(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}},{key:"parent",get:function(){return this._parent}},{key:"valid",get:function(){return"VALID"===this.status}},{key:"invalid",get:function(){return"INVALID"===this.status}},{key:"pending",get:function(){return"PENDING"==this.status}},{key:"disabled",get:function(){return"DISABLED"===this.status}},{key:"enabled",get:function(){return"DISABLED"!==this.status}},{key:"dirty",get:function(){return!this.pristine}},{key:"untouched",get:function(){return!this.touched}},{key:"updateOn",get:function(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}},{key:"setValidators",value:function(t){this._rawValidators=t,this._composedValidatorFn=rn(t)}},{key:"setAsyncValidators",value:function(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=an(t)}},{key:"clearValidators",value:function(){this.validator=null}},{key:"clearAsyncValidators",value:function(){this.asyncValidator=null}},{key:"markAsTouched",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}},{key:"markAllAsTouched",value:function(){this.markAsTouched({onlySelf:!0}),this._forEachChild(function(t){return t.markAllAsTouched()})}},{key:"markAsUntouched",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=!1,this._pendingTouched=!1,this._forEachChild(function(t){t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}},{key:"markAsDirty",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}},{key:"markAsPristine",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!0,this._pendingDirty=!1,this._forEachChild(function(t){t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}},{key:"markAsPending",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.status="PENDING",!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}},{key:"disable",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this._parentMarkedDirty(t.onlySelf);this.status="DISABLED",this.errors=null,this._forEachChild(function(e){e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(function(t){return t(!0)})}},{key:"enable",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this._parentMarkedDirty(t.onlySelf);this.status="VALID",this._forEachChild(function(e){e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(function(t){return t(!1)})}},{key:"_updateAncestors",value:function(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}},{key:"setParent",value:function(t){this._parent=t}},{key:"updateValueAndValidity",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),"VALID"!==this.status&&"PENDING"!==this.status||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}},{key:"_updateTreeValidity",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{emitEvent:!0};this._forEachChild(function(e){return e._updateTreeValidity(t)}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}},{key:"_setInitialStatus",value:function(){this.status=this._allControlsDisabled()?"DISABLED":"VALID"}},{key:"_runValidator",value:function(){return this.validator?this.validator(this):null}},{key:"_runAsyncValidator",value:function(t){var e=this;if(this.asyncValidator){this.status="PENDING",this._hasOwnPendingAsyncValidator=!0;var n=ve(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(function(n){e._hasOwnPendingAsyncValidator=!1,e.setErrors(n,{emitEvent:t})})}}},{key:"_cancelExistingSubscription",value:function(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}},{key:"setErrors",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}},{key:"get",value:function(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;var r=t;return e.forEach(function(t){r=r instanceof mn?r.controls.hasOwnProperty(t)?r.controls[t]:null:r instanceof bn&&r.at(t)||null}),r}(this,t)}},{key:"getError",value:function(t,e){var n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}},{key:"hasError",value:function(t,e){return!!this.getError(t,e)}},{key:"root",get:function(){for(var t=this;t._parent;)t=t._parent;return t}},{key:"_updateControlsErrors",value:function(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}},{key:"_initObservables",value:function(){this.valueChanges=new s.n,this.statusChanges=new s.n}},{key:"_calculateStatus",value:function(){return this._allControlsDisabled()?"DISABLED":this.errors?"INVALID":this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus("PENDING")?"PENDING":this._anyControlsHaveStatus("INVALID")?"INVALID":"VALID"}},{key:"_anyControlsHaveStatus",value:function(t){return this._anyControls(function(e){return e.status===t})}},{key:"_anyControlsDirty",value:function(){return this._anyControls(function(t){return t.dirty})}},{key:"_anyControlsTouched",value:function(){return this._anyControls(function(t){return t.touched})}},{key:"_updatePristine",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}},{key:"_updateTouched",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}},{key:"_isBoxedValue",value:function(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}},{key:"_registerOnCollectionChange",value:function(t){this._onCollectionChange=t}},{key:"_setUpdateStrategy",value:function(t){sn(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}},{key:"_parentMarkedDirty",value:function(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}]),t}(),gn=function(t){v(n,t);var e=g(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1?arguments[1]:void 0,o=arguments.length>2?arguments[2]:void 0;return f(this,n),(t=e.call(this,nn(i),on(o,i)))._onChange=[],t._applyFormState(r),t._setUpdateStrategy(i),t._initObservables(),t.updateValueAndValidity({onlySelf:!0,emitEvent:!!o}),t}return p(n,[{key:"setValue",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.value=this._pendingValue=t,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(function(t){return t(e.value,!1!==n.emitViewToModelChange)}),this.updateValueAndValidity(n)}},{key:"patchValue",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.setValue(t,e)}},{key:"reset",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}},{key:"_updateValue",value:function(){}},{key:"_anyControls",value:function(t){return!1}},{key:"_allControlsDisabled",value:function(){return this.disabled}},{key:"registerOnChange",value:function(t){this._onChange.push(t)}},{key:"_unregisterOnChange",value:function(t){en(this._onChange,t)}},{key:"registerOnDisabledChange",value:function(t){this._onDisabledChange.push(t)}},{key:"_unregisterOnDisabledChange",value:function(t){en(this._onDisabledChange,t)}},{key:"_forEachChild",value:function(t){}},{key:"_syncPendingControls",value:function(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}},{key:"_applyFormState",value:function(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}]),n}(yn),mn=function(t){v(n,t);var e=g(n);function n(t,r,i){var o;return f(this,n),(o=e.call(this,nn(r),on(i,r))).controls=t,o._initObservables(),o._setUpdateStrategy(r),o._setUpControls(),o.updateValueAndValidity({onlySelf:!0,emitEvent:!!i}),o}return p(n,[{key:"registerControl",value:function(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}},{key:"addControl",value:function(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"removeControl",value:function(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(function(){}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}},{key:"setControl",value:function(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(function(){}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"contains",value:function(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}},{key:"setValue",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkAllValuesPresent(t),Object.keys(t).forEach(function(r){e._throwIfControlMissing(r),e.controls[r].setValue(t[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}},{key:"patchValue",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object.keys(t).forEach(function(r){e.controls[r]&&e.controls[r].patchValue(t[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}},{key:"reset",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._forEachChild(function(n,r){n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}},{key:"getRawValue",value:function(){return this._reduceChildren({},function(t,e,n){return t[n]=e instanceof gn?e.value:e.getRawValue(),t})}},{key:"_syncPendingControls",value:function(){var t=this._reduceChildren(!1,function(t,e){return!!e._syncPendingControls()||t});return t&&this.updateValueAndValidity({onlySelf:!0}),t}},{key:"_throwIfControlMissing",value:function(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error("Cannot find form control with name: ".concat(t,"."))}},{key:"_forEachChild",value:function(t){var e=this;Object.keys(this.controls).forEach(function(n){return t(e.controls[n],n)})}},{key:"_setUpControls",value:function(){var t=this;this._forEachChild(function(e){e.setParent(t),e._registerOnCollectionChange(t._onCollectionChange)})}},{key:"_updateValue",value:function(){this.value=this._reduceValue()}},{key:"_anyControls",value:function(t){for(var e=0,n=Object.keys(this.controls);e<n.length;e++){var r=n[e],i=this.controls[r];if(this.contains(r)&&t(i))return!0}return!1}},{key:"_reduceValue",value:function(){var t=this;return this._reduceChildren({},function(e,n,r){return(n.enabled||t.disabled)&&(e[r]=n.value),e})}},{key:"_reduceChildren",value:function(t,e){var n=t;return this._forEachChild(function(t,r){n=e(n,t,r)}),n}},{key:"_allControlsDisabled",value:function(){for(var t=0,e=Object.keys(this.controls);t<e.length;t++){var n=e[t];if(this.controls[n].enabled)return!1}return Object.keys(this.controls).length>0||this.disabled}},{key:"_checkAllValuesPresent",value:function(t){this._forEachChild(function(e,n){if(void 0===t[n])throw new Error("Must supply a value for form control with name: '".concat(n,"'."))})}}]),n}(yn),bn=function(t){v(n,t);var e=g(n);function n(t,r,i){var o;return f(this,n),(o=e.call(this,nn(r),on(i,r))).controls=t,o._initObservables(),o._setUpdateStrategy(r),o._setUpControls(),o.updateValueAndValidity({onlySelf:!0,emitEvent:!!i}),o}return p(n,[{key:"at",value:function(t){return this.controls[t]}},{key:"push",value:function(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"insert",value:function(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}},{key:"removeAt",value:function(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(function(){}),this.controls.splice(t,1),this.updateValueAndValidity()}},{key:"setControl",value:function(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(function(){}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"length",get:function(){return this.controls.length}},{key:"setValue",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkAllValuesPresent(t),t.forEach(function(t,r){e._throwIfControlMissing(r),e.at(r).setValue(t,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}},{key:"patchValue",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.forEach(function(t,r){e.at(r)&&e.at(r).patchValue(t,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}},{key:"reset",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._forEachChild(function(n,r){n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}},{key:"getRawValue",value:function(){return this.controls.map(function(t){return t instanceof gn?t.value:t.getRawValue()})}},{key:"clear",value:function(){this.controls.length<1||(this._forEachChild(function(t){return t._registerOnCollectionChange(function(){})}),this.controls.splice(0),this.updateValueAndValidity())}},{key:"_syncPendingControls",value:function(){var t=this.controls.reduce(function(t,e){return!!e._syncPendingControls()||t},!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}},{key:"_throwIfControlMissing",value:function(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error("Cannot find form control at index "+t)}},{key:"_forEachChild",value:function(t){this.controls.forEach(function(e,n){t(e,n)})}},{key:"_updateValue",value:function(){var t=this;this.value=this.controls.filter(function(e){return e.enabled||t.disabled}).map(function(t){return t.value})}},{key:"_anyControls",value:function(t){return this.controls.some(function(e){return e.enabled&&t(e)})}},{key:"_setUpControls",value:function(){var t=this;this._forEachChild(function(e){return t._registerControl(e)})}},{key:"_checkAllValuesPresent",value:function(t){this._forEachChild(function(e,n){if(void 0===t[n])throw new Error("Must supply a value for form control at index: ".concat(n,"."))})}},{key:"_allControlsDisabled",value:function(){var t,e=a(this.controls);try{for(e.s();!(t=e.n()).done;){if(t.value.enabled)return!1}}catch(n){e.e(n)}finally{e.f()}return this.controls.length>0||this.disabled}},{key:"_registerControl",value:function(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}]),n}(yn),_n={provide:Ne,useExisting:Object(s.T)(function(){return kn})},wn=Promise.resolve(null),kn=((un=function(t){v(n,t);var e=g(n);function n(t,r){var i;return f(this,n),(i=e.call(this)).submitted=!1,i._directives=[],i.ngSubmit=new s.n,i.form=new mn({},be(t),_e(r)),i}return p(n,[{key:"ngAfterViewInit",value:function(){this._setUpdateStrategy()}},{key:"formDirective",get:function(){return this}},{key:"control",get:function(){return this.form}},{key:"path",get:function(){return[]}},{key:"controls",get:function(){return this.form.controls}},{key:"addControl",value:function(t){var e=this;wn.then(function(){var n=e._findContainer(t.path);t.control=n.registerControl(t.name,t.control),Je(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),e._directives.push(t)})}},{key:"getControl",value:function(t){return this.form.get(t.path)}},{key:"removeControl",value:function(t){var e=this;wn.then(function(){var n=e._findContainer(t.path);n&&n.removeControl(t.name),en(e._directives,t)})}},{key:"addFormGroup",value:function(t){var e=this;wn.then(function(){var n=e._findContainer(t.path),r=new mn({});(function(t,e){Ze(t,e,!1)})(r,t),n.registerControl(t.name,r),r.updateValueAndValidity({emitEvent:!1})})}},{key:"removeFormGroup",value:function(t){var e=this;wn.then(function(){var n=e._findContainer(t.path);n&&n.removeControl(t.name)})}},{key:"getFormGroup",value:function(t){return this.form.get(t.path)}},{key:"updateModel",value:function(t,e){var n=this;wn.then(function(){n.form.get(t.path).setValue(e)})}},{key:"setValue",value:function(t){this.control.setValue(t)}},{key:"onSubmit",value:function(t){return this.submitted=!0,e=this._directives,this.form._syncPendingControls(),e.forEach(function(t){var e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)}),this.ngSubmit.emit(t),!1;var e}},{key:"onReset",value:function(){this.resetForm()}},{key:"resetForm",value:function(t){this.form.reset(t),this.submitted=!1}},{key:"_setUpdateStrategy",value:function(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}},{key:"_findContainer",value:function(t){return t.pop(),t.length?this.form.get(t):this.form}}]),n}(Ne)).\u0275fac=function(t){return new(t||un)(s.Ib(le,10),s.Ib(he,10))},un.\u0275dir=s.Db({type:un,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,e){1&t&&s.Sb("submit",function(t){return e.onSubmit(t)})("reset",function(){return e.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[s.xb([_n]),s.vb]}),un),Cn={provide:Re,useExisting:Object(s.T)(function(){return En})},On=Promise.resolve(null),En=((ln=function(t){v(n,t);var e=g(n);function n(t,r,i,o){var a;return f(this,n),(a=e.call(this)).control=new gn,a._registered=!1,a.update=new s.n,a._parent=t,a._setValidators(r),a._setAsyncValidators(i),a.valueAccessor=function(t,e){if(!e)return null;Array.isArray(e);var n=void 0,r=void 0,i=void 0;return e.forEach(function(t){var e;t.constructor===se?n=t:(e=t,tn.some(function(t){return e.constructor===t})?r=t:i=t)}),i||r||n||null}(0,o),a}return p(n,[{key:"ngOnChanges",value:function(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),function(t,e){if(!t.hasOwnProperty("model"))return!1;var n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}},{key:"ngOnDestroy",value:function(){this.formDirective&&this.formDirective.removeControl(this)}},{key:"path",get:function(){return this._parent?[].concat(i(this._parent.path),[this.name]):[this.name]}},{key:"formDirective",get:function(){return this._parent?this._parent.formDirective:null}},{key:"viewToModelUpdate",value:function(t){this.viewModel=t,this.update.emit(t)}},{key:"_setUpControl",value:function(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}},{key:"_setUpdateStrategy",value:function(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}},{key:"_isStandalone",value:function(){return!this._parent||!(!this.options||!this.options.standalone)}},{key:"_setUpStandalone",value:function(){Je(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}},{key:"_checkForErrors",value:function(){this._isStandalone()||this._checkParentType(),this._checkName()}},{key:"_checkParentType",value:function(){}},{key:"_checkName",value:function(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}},{key:"_updateValue",value:function(t){var e=this;On.then(function(){e.control.setValue(t,{emitViewToModelChange:!1})})}},{key:"_updateDisabled",value:function(t){var e=this,n=t.isDisabled.currentValue,r=""===n||n&&"false"!==n;On.then(function(){r&&!e.control.disabled?e.control.disable():!r&&e.control.disabled&&e.control.enable()})}}]),n}(Re)).\u0275fac=function(t){return new(t||ln)(s.Ib(Ne,9),s.Ib(le,10),s.Ib(he,10),s.Ib(ne,10))},ln.\u0275dir=s.Db({type:ln,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[s.xb([Cn]),s.vb,s.wb]}),ln),Sn=((cn=function t(){f(this,t)}).\u0275fac=function(t){return new(t||cn)},cn.\u0275dir=s.Db({type:cn,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),cn),In={provide:le,useExisting:Object(s.T)(function(){return Tn}),multi:!0},Tn=((hn=function(){function t(){f(this,t),this._required=!1}return p(t,[{key:"required",get:function(){return this._required},set:function(t){this._required=null!=t&&!1!==t&&""+t!="false",this._onChange&&this._onChange()}},{key:"validate",value:function(t){return this.required?de.required(t):null}},{key:"registerOnValidatorChange",value:function(t){this._onChange=t}}]),t}()).\u0275fac=function(t){return new(t||hn)},hn.\u0275dir=s.Db({type:hn,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,e){2&t&&s.zb("required",e.required?"":null)},inputs:{required:"required"},features:[s.xb([In])]}),hn),xn={provide:le,useExisting:Object(s.T)(function(){return An}),multi:!0},An=((fn=function(){function t(){f(this,t),this._enabled=!1}return p(t,[{key:"email",set:function(t){this._enabled=""===t||!0===t||"true"===t,this._onChange&&this._onChange()}},{key:"validate",value:function(t){return this._enabled?de.email(t):null}},{key:"registerOnValidatorChange",value:function(t){this._onChange=t}}]),t}()).\u0275fac=function(t){return new(t||fn)},fn.\u0275dir=s.Db({type:fn,selectors:[["","email","","formControlName",""],["","email","","formControl",""],["","email","","ngModel",""]],inputs:{email:"email"},features:[s.xb([xn])]}),fn),jn={provide:le,useExisting:Object(s.T)(function(){return Pn}),multi:!0},Pn=((vn=function(){function t(){f(this,t),this._validator=de.nullValidator}return p(t,[{key:"ngOnChanges",value:function(t){"minlength"in t&&(this._createValidator(),this._onChange&&this._onChange())}},{key:"validate",value:function(t){return null==this.minlength?null:this._validator(t)}},{key:"registerOnValidatorChange",value:function(t){this._onChange=t}},{key:"_createValidator",value:function(){this._validator=de.minLength("number"==typeof this.minlength?this.minlength:parseInt(this.minlength,10))}}]),t}()).\u0275fac=function(t){return new(t||vn)},vn.\u0275dir=s.Db({type:vn,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(t,e){2&t&&s.zb("minlength",e.minlength?e.minlength:null)},inputs:{minlength:"minlength"},features:[s.xb([jn]),s.wb]}),vn),Nn=((pn=function t(){f(this,t)}).\u0275mod=s.Gb({type:pn}),pn.\u0275inj=s.Fb({factory:function(t){return new(t||pn)}}),pn),Dn=((dn=function t(){f(this,t)}).\u0275mod=s.Gb({type:dn}),dn.\u0275inj=s.Fb({factory:function(t){return new(t||dn)},providers:[Be],imports:[Nn]}),dn),Rn=o("LRne"),Ln=o("XNiG"),Mn=o("9ppp"),Fn=function(t){v(n,t);var e=g(n);function n(t){var r;return f(this,n),(r=e.call(this))._value=t,r}return p(n,[{key:"value",get:function(){return this.getValue()}},{key:"_subscribe",value:function(t){var e=h(w(n.prototype),"_subscribe",this).call(this,t);return e&&!e.closed&&t.next(this._value),e}},{key:"getValue",value:function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Mn.a;return this._value}},{key:"next",value:function(t){h(w(n.prototype),"next",this).call(this,this._value=t)}}]),n}(Ln.a),Vn=o("z+Ro"),Un=o("7o/Q"),qn=function(t){v(n,t);var e=g(n);function n(){return f(this,n),e.apply(this,arguments)}return p(n,[{key:"notifyNext",value:function(t,e,n,r,i){this.destination.next(e)}},{key:"notifyError",value:function(t,e){this.destination.error(t)}},{key:"notifyComplete",value:function(t){this.destination.complete()}}]),n}(Un.a),Bn=function(t){v(n,t);var e=g(n);function n(t,r,i){var o;return f(this,n),(o=e.call(this)).parent=t,o.outerValue=r,o.outerIndex=i,o.index=0,o}return p(n,[{key:"_next",value:function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}},{key:"_error",value:function(t){this.parent.notifyError(t,this),this.unsubscribe()}},{key:"_complete",value:function(){this.parent.notifyComplete(this),this.unsubscribe()}}]),n}(Un.a),Hn=o("SeVD");function Kn(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new Bn(t,n,r);if(!i.closed)return e instanceof Qt.a?e.subscribe(i):Object(Hn.a)(e)(i)}var zn=o("yCtX"),Wn={},Gn=function(){function t(e){f(this,t),this.resultSelector=e}return p(t,[{key:"call",value:function(t,e){return e.subscribe(new Qn(t,this.resultSelector))}}]),t}(),Qn=function(t){v(n,t);var e=g(n);function n(t,r){var i;return f(this,n),(i=e.call(this,t)).resultSelector=r,i.active=0,i.values=[],i.observables=[],i}return p(n,[{key:"_next",value:function(t){this.values.push(Wn),this.observables.push(t)}},{key:"_complete",value:function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(var n=0;n<e;n++)this.add(Kn(this,t[n],void 0,n))}}},{key:"notifyComplete",value:function(t){0==(this.active-=1)&&this.destination.complete()}},{key:"notifyNext",value:function(t,e,n){var r=this.values,i=this.toRespond?r[n]===Wn?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}},{key:"_tryResultSelector",value:function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}]),n}(qn),Yn=function(){function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t}(),Jn=o("bHdf");function Xn(){return Object(Jn.a)(1)(Object(Rn.a).apply(void 0,arguments))}var Zn=o("EY2u");function $n(t){return new Qt.a(function(e){var n;try{n=t()}catch(r){return void e.error(r)}return(n?Object(Zt.a)(n):Object(Zn.b)()).subscribe(e)})}var tr=o("zx2A");function er(t,e){return"function"==typeof e?function(n){return n.pipe(er(function(n,r){return Object(Zt.a)(t(n,r)).pipe(Object(Jt.a)(function(t,i){return e(n,t,r,i)}))}))}:function(e){return e.lift(new nr(t))}}var nr=function(){function t(e){f(this,t),this.project=e}return p(t,[{key:"call",value:function(t,e){return e.subscribe(new rr(t,this.project))}}]),t}(),rr=function(t){v(n,t);var e=g(n);function n(t,r){var i;return f(this,n),(i=e.call(this,t)).project=r,i.index=0,i}return p(n,[{key:"_next",value:function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}},{key:"_innerSub",value:function(t){var e=this.innerSubscription;e&&e.unsubscribe();var n=new tr.a(this),r=this.destination;r.add(n),this.innerSubscription=Object(tr.c)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}},{key:"_complete",value:function(){var t=this.innerSubscription;t&&!t.closed||h(w(n.prototype),"_complete",this).call(this),this.unsubscribe()}},{key:"_unsubscribe",value:function(){this.innerSubscription=void 0}},{key:"notifyComplete",value:function(){this.innerSubscription=void 0,this.isStopped&&h(w(n.prototype),"_complete",this).call(this)}},{key:"notifyNext",value:function(t){this.destination.next(t)}}]),n}(tr.b),ir=function(){function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t}();function or(t){return function(e){return 0===t?Object(Zn.b)():e.lift(new ar(t))}}var ar=function(){function t(e){if(f(this,t),this.total=e,this.total<0)throw new ir}return p(t,[{key:"call",value:function(t,e){return e.subscribe(new sr(t,this.total))}}]),t}(),sr=function(t){v(n,t);var e=g(n);function n(t,r){var i;return f(this,n),(i=e.call(this,t)).total=r,i.count=0,i}return p(n,[{key:"_next",value:function(t){var e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}]),n}(Un.a);function ur(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e[e.length-1];return Object(Vn.a)(r)?(e.pop(),function(t){return Xn(e,t,r)}):function(t){return Xn(e,t)}}function cr(t,e){var n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new lr(t,e,n))}}var lr=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];f(this,t),this.accumulator=e,this.seed=n,this.hasSeed=r}return p(t,[{key:"call",value:function(t,e){return e.subscribe(new hr(t,this.accumulator,this.seed,this.hasSeed))}}]),t}(),hr=function(t){v(n,t);var e=g(n);function n(t,r,i,o){var a;return f(this,n),(a=e.call(this,t)).accumulator=r,a._seed=i,a.hasSeed=o,a.index=0,a}return p(n,[{key:"seed",get:function(){return this._seed},set:function(t){this.hasSeed=!0,this._seed=t}},{key:"_next",value:function(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}},{key:"_tryNext",value:function(t){var e,n=this.index++;try{e=this.accumulator(this.seed,t,n)}catch(r){this.destination.error(r)}this.seed=e,this.destination.next(e)}}]),n}(Un.a);function fr(t,e){return function(n){return n.lift(new dr(t,e))}}var dr=function(){function t(e,n){f(this,t),this.predicate=e,this.thisArg=n}return p(t,[{key:"call",value:function(t,e){return e.subscribe(new pr(t,this.predicate,this.thisArg))}}]),t}(),pr=function(t){v(n,t);var e=g(n);function n(t,r,i){var o;return f(this,n),(o=e.call(this,t)).predicate=r,o.thisArg=i,o.count=0,o}return p(n,[{key:"_next",value:function(t){var e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}]),n}(Un.a);function vr(t){return function(e){var n=new yr(t),r=e.lift(n);return n.caught=r}}var yr=function(){function t(e){f(this,t),this.selector=e}return p(t,[{key:"call",value:function(t,e){return e.subscribe(new gr(t,this.selector,this.caught))}}]),t}(),gr=function(t){v(n,t);var e=g(n);function n(t,r,i){var o;return f(this,n),(o=e.call(this,t)).selector=r,o.caught=i,o}return p(n,[{key:"error",value:function(t){if(!this.isStopped){var e;try{e=this.selector(t,this.caught)}catch(o){return void h(w(n.prototype),"error",this).call(this,o)}this._unsubscribeAndRecycle();var r=new tr.a(this);this.add(r);var i=Object(tr.c)(e,r);i!==r&&this.add(i)}}}]),n}(tr.b),mr=o("5+tZ");function br(t,e){return Object(mr.a)(t,e,1)}function _r(t){return function(e){return 0===t?Object(Zn.b)():e.lift(new wr(t))}}var wr=function(){function t(e){if(f(this,t),this.total=e,this.total<0)throw new ir}return p(t,[{key:"call",value:function(t,e){return e.subscribe(new kr(t,this.total))}}]),t}(),kr=function(t){v(n,t);var e=g(n);function n(t,r){var i;return f(this,n),(i=e.call(this,t)).total=r,i.ring=new Array,i.count=0,i}return p(n,[{key:"_next",value:function(t){var e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}},{key:"_complete",value:function(){var t=this.destination,e=this.count;if(e>0)for(var n=this.count>=this.total?this.total:this.count,r=this.ring,i=0;i<n;i++){var o=e++%n;t.next(r[o])}t.complete()}}]),n}(Un.a);function Cr(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sr;return function(e){return e.lift(new Or(t))}}var Or=function(){function t(e){f(this,t),this.errorFactory=e}return p(t,[{key:"call",value:function(t,e){return e.subscribe(new Er(t,this.errorFactory))}}]),t}(),Er=function(t){v(n,t);var e=g(n);function n(t,r){var i;return f(this,n),(i=e.call(this,t)).errorFactory=r,i.hasValue=!1,i}return p(n,[{key:"_next",value:function(t){this.hasValue=!0,this.destination.next(t)}},{key:"_complete",value:function(){if(this.hasValue)return this.destination.complete();var t;try{t=this.errorFactory()}catch(qC){t=qC}this.destination.error(t)}}]),n}(Un.a);function Sr(){return new Yn}function Ir(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(e){return e.lift(new Tr(t))}}var Tr=function(){function t(e){f(this,t),this.defaultValue=e}return p(t,[{key:"call",value:function(t,e){return e.subscribe(new xr(t,this.defaultValue))}}]),t}(),xr=function(t){v(n,t);var e=g(n);function n(t,r){var i;return f(this,n),(i=e.call(this,t)).defaultValue=r,i.isEmpty=!0,i}return p(n,[{key:"_next",value:function(t){this.isEmpty=!1,this.destination.next(t)}},{key:"_complete",value:function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}]),n}(Un.a),Ar=o("SpAZ");function jr(t,e){var n=arguments.length>=2;return function(r){return r.pipe(t?fr(function(e,n){return t(e,n,r)}):Ar.a,or(1),n?Ir(e):Cr(function(){return new Yn}))}}var Pr=o("vkgz"),Nr=o("quSY"),Dr=function(){function t(e){f(this,t),this.callback=e}return p(t,[{key:"call",value:function(t,e){return e.subscribe(new Rr(t,this.callback))}}]),t}(),Rr=function(t){v(n,t);var e=g(n);function n(t,r){var i;return f(this,n),(i=e.call(this,t)).add(new Nr.a(r)),i}return n}(Un.a),Lr=function t(e,n){f(this,t),this.id=e,this.url=n},Mr=function(t){v(n,t);var e=g(n);function n(t,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"imperative",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return f(this,n),(i=e.call(this,t,r)).navigationTrigger=o,i.restoredState=a,i}return p(n,[{key:"toString",value:function(){return"NavigationStart(id: ".concat(this.id,", url: '").concat(this.url,"')")}}]),n}(Lr),Fr=function(t){v(n,t);var e=g(n);function n(t,r,i){var o;return f(this,n),(o=e.call(this,t,r)).urlAfterRedirects=i,o}return p(n,[{key:"toString",value:function(){return"NavigationEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"')")}}]),n}(Lr),Vr=function(t){v(n,t);var e=g(n);function n(t,r,i){var o;return f(this,n),(o=e.call(this,t,r)).reason=i,o}return p(n,[{key:"toString",value:function(){return"NavigationCancel(id: ".concat(this.id,", url: '").concat(this.url,"')")}}]),n}(Lr),Ur=function(t){v(n,t);var e=g(n);function n(t,r,i){var o;return f(this,n),(o=e.call(this,t,r)).error=i,o}return p(n,[{key:"toString",value:function(){return"NavigationError(id: ".concat(this.id,", url: '").concat(this.url,"', error: ").concat(this.error,")")}}]),n}(Lr),qr=function(t){v(n,t);var e=g(n);function n(t,r,i,o){var a;return f(this,n),(a=e.call(this,t,r)).urlAfterRedirects=i,a.state=o,a}return p(n,[{key:"toString",value:function(){return"RoutesRecognized(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(Lr),Br=function(t){v(n,t);var e=g(n);function n(t,r,i,o){var a;return f(this,n),(a=e.call(this,t,r)).urlAfterRedirects=i,a.state=o,a}return p(n,[{key:"toString",value:function(){return"GuardsCheckStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(Lr),Hr=function(t){v(n,t);var e=g(n);function n(t,r,i,o,a){var s;return f(this,n),(s=e.call(this,t,r)).urlAfterRedirects=i,s.state=o,s.shouldActivate=a,s}return p(n,[{key:"toString",value:function(){return"GuardsCheckEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,", shouldActivate: ").concat(this.shouldActivate,")")}}]),n}(Lr),Kr=function(t){v(n,t);var e=g(n);function n(t,r,i,o){var a;return f(this,n),(a=e.call(this,t,r)).urlAfterRedirects=i,a.state=o,a}return p(n,[{key:"toString",value:function(){return"ResolveStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(Lr),zr=function(t){v(n,t);var e=g(n);function n(t,r,i,o){var a;return f(this,n),(a=e.call(this,t,r)).urlAfterRedirects=i,a.state=o,a}return p(n,[{key:"toString",value:function(){return"ResolveEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(Lr),Wr=function(){function t(e){f(this,t),this.route=e}return p(t,[{key:"toString",value:function(){return"RouteConfigLoadStart(path: ".concat(this.route.path,")")}}]),t}(),Gr=function(){function t(e){f(this,t),this.route=e}return p(t,[{key:"toString",value:function(){return"RouteConfigLoadEnd(path: ".concat(this.route.path,")")}}]),t}(),Qr=function(){function t(e){f(this,t),this.snapshot=e}return p(t,[{key:"toString",value:function(){return"ChildActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),t}(),Yr=function(){function t(e){f(this,t),this.snapshot=e}return p(t,[{key:"toString",value:function(){return"ChildActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),t}(),Jr=function(){function t(e){f(this,t),this.snapshot=e}return p(t,[{key:"toString",value:function(){return"ActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),t}(),Xr=function(){function t(e){f(this,t),this.snapshot=e}return p(t,[{key:"toString",value:function(){return"ActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),t}(),Zr=function(){function t(e,n,r){f(this,t),this.routerEvent=e,this.position=n,this.anchor=r}return p(t,[{key:"toString",value:function(){return"Scroll(anchor: '".concat(this.anchor,"', position: '").concat(this.position?"".concat(this.position[0],", ").concat(this.position[1]):null,"')")}}]),t}(),$r=function(){function t(e){f(this,t),this.params=e||{}}return p(t,[{key:"has",value:function(t){return Object.prototype.hasOwnProperty.call(this.params,t)}},{key:"get",value:function(t){if(this.has(t)){var e=this.params[t];return Array.isArray(e)?e[0]:e}return null}},{key:"getAll",value:function(t){if(this.has(t)){var e=this.params[t];return Array.isArray(e)?e:[e]}return[]}},{key:"keys",get:function(){return Object.keys(this.params)}}]),t}();function ti(t){return new $r(t)}function ei(t){var e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function ni(t,e,n){var r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;for(var i={},o=0;o<r.length;o++){var a=r[o],s=t[o];if(a.startsWith(":"))i[a.substring(1)]=s;else if(a!==s.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function ri(t,e){var n,r=Object.keys(t),i=Object.keys(e);if(!r||!i||r.length!=i.length)return!1;for(var o=0;o<r.length;o++)if(!ii(t[n=r[o]],e[n]))return!1;return!0}function ii(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;var n=i(t).sort(),r=i(e).sort();return n.every(function(t,e){return r[e]===t})}return t===e}function oi(t){return Array.prototype.concat.apply([],t)}function ai(t){return t.length>0?t[t.length-1]:null}function si(t,e){for(var n in t)t.hasOwnProperty(n)&&e(t[n],n)}function ui(t){return Object(s.pb)(t)?t:Object(s.qb)(t)?Object(Zt.a)(Promise.resolve(t)):Object(Rn.a)(t)}function ci(t,e,n){return n?function(t,e){return ri(t,e)}(t.queryParams,e.queryParams)&&li(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(function(n){return ii(t[n],e[n])})}(t.queryParams,e.queryParams)&&hi(t.root,e.root)}function li(t,e){if(!yi(t.segments,e.segments))return!1;if(t.numberOfChildren!==e.numberOfChildren)return!1;for(var n in e.children){if(!t.children[n])return!1;if(!li(t.children[n],e.children[n]))return!1}return!0}function hi(t,e){return fi(t,e,e.segments)}function fi(t,e,n){if(t.segments.length>n.length)return!!yi(t.segments.slice(0,n.length),n)&&!e.hasChildren();if(t.segments.length===n.length){if(!yi(t.segments,n))return!1;for(var r in e.children){if(!t.children[r])return!1;if(!hi(t.children[r],e.children[r]))return!1}return!0}var i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!!yi(t.segments,i)&&!!t.children.primary&&fi(t.children.primary,e,o)}var di=function(){function t(e,n,r){f(this,t),this.root=e,this.queryParams=n,this.fragment=r}return p(t,[{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=ti(this.queryParams)),this._queryParamMap}},{key:"toString",value:function(){return bi.serialize(this)}}]),t}(),pi=function(){function t(e,n){var r=this;f(this,t),this.segments=e,this.children=n,this.parent=null,si(n,function(t,e){return t.parent=r})}return p(t,[{key:"hasChildren",value:function(){return this.numberOfChildren>0}},{key:"numberOfChildren",get:function(){return Object.keys(this.children).length}},{key:"toString",value:function(){return _i(this)}}]),t}(),vi=function(){function t(e,n){f(this,t),this.path=e,this.parameters=n}return p(t,[{key:"parameterMap",get:function(){return this._parameterMap||(this._parameterMap=ti(this.parameters)),this._parameterMap}},{key:"toString",value:function(){return Ii(this)}}]),t}();function yi(t,e){return t.length===e.length&&t.every(function(t,n){return t.path===e[n].path})}var gi=function t(){f(this,t)},mi=function(){function t(){f(this,t)}return p(t,[{key:"parse",value:function(t){var e=new Pi(t);return new di(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}},{key:"serialize",value:function(t){return"".concat("/"+wi(t.root,!0)).concat((e=t.queryParams,n=Object.keys(e).map(function(t){var n=e[t];return Array.isArray(n)?n.map(function(e){return"".concat(Ci(t),"=").concat(Ci(e))}).join("&"):"".concat(Ci(t),"=").concat(Ci(n))}),n.length?"?"+n.join("&"):"")).concat("string"==typeof t.fragment?"#"+encodeURI(t.fragment):"");var e,n}}]),t}(),bi=new mi;function _i(t){return t.segments.map(function(t){return Ii(t)}).join("/")}function wi(t,e){if(!t.hasChildren())return _i(t);if(e){var n=t.children.primary?wi(t.children.primary,!1):"",r=[];return si(t.children,function(t,e){"primary"!==e&&r.push("".concat(e,":").concat(wi(t,!1)))}),r.length>0?"".concat(n,"(").concat(r.join("//"),")"):n}var i=function(t,e){var n=[];return si(t.children,function(t,r){"primary"===r&&(n=n.concat(e(t,r)))}),si(t.children,function(t,r){"primary"!==r&&(n=n.concat(e(t,r)))}),n}(t,function(e,n){return"primary"===n?[wi(t.children.primary,!1)]:["".concat(n,":").concat(wi(e,!1))]});return 1===Object.keys(t.children).length&&null!=t.children.primary?"".concat(_i(t),"/").concat(i[0]):"".concat(_i(t),"/(").concat(i.join("//"),")")}function ki(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ci(t){return ki(t).replace(/%3B/gi,";")}function Oi(t){return ki(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ei(t){return decodeURIComponent(t)}function Si(t){return Ei(t.replace(/\+/g,"%20"))}function Ii(t){return"".concat(Oi(t.path)).concat((e=t.parameters,Object.keys(e).map(function(t){return";".concat(Oi(t),"=").concat(Oi(e[t]))}).join("")));var e}var Ti=/^[^\/()?;=#]+/;function xi(t){var e=t.match(Ti);return e?e[0]:""}var Ai=/^[^=?&#]+/,ji=/^[^?&#]+/,Pi=function(){function t(e){f(this,t),this.url=e,this.remaining=e}return p(t,[{key:"parseRootSegment",value:function(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new pi([],{}):new pi([],this.parseChildren())}},{key:"parseQueryParams",value:function(){var t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}},{key:"parseFragment",value:function(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}},{key:"parseChildren",value:function(){if(""===this.remaining)return{};this.consumeOptional("/");var t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());var e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));var n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new pi(t,e)),n}},{key:"parseSegment",value:function(){var t=xi(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error("Empty path url segment cannot have parameters: '".concat(this.remaining,"'."));return this.capture(t),new vi(Ei(t),this.parseMatrixParams())}},{key:"parseMatrixParams",value:function(){for(var t={};this.consumeOptional(";");)this.parseParam(t);return t}},{key:"parseParam",value:function(t){var e=xi(this.remaining);if(e){this.capture(e);var n="";if(this.consumeOptional("=")){var r=xi(this.remaining);r&&(n=r,this.capture(n))}t[Ei(e)]=Ei(n)}}},{key:"parseQueryParam",value:function(t){var e=function(t){var e=t.match(Ai);return e?e[0]:""}(this.remaining);if(e){this.capture(e);var n="";if(this.consumeOptional("=")){var r=function(t){var e=t.match(ji);return e?e[0]:""}(this.remaining);r&&(n=r,this.capture(n))}var i=Si(e),o=Si(n);if(t.hasOwnProperty(i)){var a=t[i];Array.isArray(a)||(a=[a],t[i]=a),a.push(o)}else t[i]=o}}},{key:"parseParens",value:function(t){var e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){var n=xi(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error("Cannot parse url '".concat(this.url,"'"));var i=void 0;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i="primary");var o=this.parseChildren();e[i]=1===Object.keys(o).length?o.primary:new pi([],o),this.consumeOptional("//")}return e}},{key:"peekStartsWith",value:function(t){return this.remaining.startsWith(t)}},{key:"consumeOptional",value:function(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}},{key:"capture",value:function(t){if(!this.consumeOptional(t))throw new Error('Expected "'.concat(t,'".'))}}]),t}(),Ni=function(){function t(e){f(this,t),this._root=e}return p(t,[{key:"root",get:function(){return this._root.value}},{key:"parent",value:function(t){var e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}},{key:"children",value:function(t){var e=Di(t,this._root);return e?e.children.map(function(t){return t.value}):[]}},{key:"firstChild",value:function(t){var e=Di(t,this._root);return e&&e.children.length>0?e.children[0].value:null}},{key:"siblings",value:function(t){var e=Ri(t,this._root);return e.length<2?[]:e[e.length-2].children.map(function(t){return t.value}).filter(function(e){return e!==t})}},{key:"pathFromRoot",value:function(t){return Ri(t,this._root).map(function(t){return t.value})}}]),t}();function Di(t,e){if(t===e.value)return e;var n,r=a(e.children);try{for(r.s();!(n=r.n()).done;){var i=Di(t,n.value);if(i)return i}}catch(o){r.e(o)}finally{r.f()}return null}function Ri(t,e){if(t===e.value)return[e];var n,r=a(e.children);try{for(r.s();!(n=r.n()).done;){var i=Ri(t,n.value);if(i.length)return i.unshift(e),i}}catch(o){r.e(o)}finally{r.f()}return[]}var Li=function(){function t(e,n){f(this,t),this.value=e,this.children=n}return p(t,[{key:"toString",value:function(){return"TreeNode(".concat(this.value,")")}}]),t}();function Mi(t){var e={};return t&&t.children.forEach(function(t){return e[t.value.outlet]=t}),e}var Fi=function(t){v(n,t);var e=g(n);function n(t,r){var i;return f(this,n),(i=e.call(this,t)).snapshot=r,Ki(b(i),t),i}return p(n,[{key:"toString",value:function(){return this.snapshot.toString()}}]),n}(Ni);function Vi(t,e){var n=function(t,e){var n=new Bi([],{},{},"",{},"primary",e,null,t.root,-1,{});return new Hi("",new Li(n,[]))}(t,e),r=new Fn([new vi("",{})]),i=new Fn({}),o=new Fn({}),a=new Fn({}),s=new Fn(""),u=new Ui(r,i,a,s,o,"primary",e,n.root);return u.snapshot=n.root,new Fi(new Li(u,[]),n)}var Ui=function(){function t(e,n,r,i,o,a,s,u){f(this,t),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=a,this.component=s,this._futureSnapshot=u}return p(t,[{key:"routeConfig",get:function(){return this._futureSnapshot.routeConfig}},{key:"root",get:function(){return this._routerState.root}},{key:"parent",get:function(){return this._routerState.parent(this)}},{key:"firstChild",get:function(){return this._routerState.firstChild(this)}},{key:"children",get:function(){return this._routerState.children(this)}},{key:"pathFromRoot",get:function(){return this._routerState.pathFromRoot(this)}},{key:"paramMap",get:function(){return this._paramMap||(this._paramMap=this.params.pipe(Object(Jt.a)(function(t){return ti(t)}))),this._paramMap}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Object(Jt.a)(function(t){return ti(t)}))),this._queryParamMap}},{key:"toString",value:function(){return this.snapshot?this.snapshot.toString():"Future(".concat(this._futureSnapshot,")")}}]),t}();function qi(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"emptyOnly",n=t.pathFromRoot,r=0;if("always"!==e)for(r=n.length-1;r>=1;){var i=n[r],o=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return function(t){return t.reduce(function(t,e){return{params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}},{params:{},data:{},resolve:{}})}(n.slice(r))}var Bi=function(){function t(e,n,r,i,o,a,s,u,c,l,h){f(this,t),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=a,this.component=s,this.routeConfig=u,this._urlSegment=c,this._lastPathIndex=l,this._resolve=h}return p(t,[{key:"root",get:function(){return this._routerState.root}},{key:"parent",get:function(){return this._routerState.parent(this)}},{key:"firstChild",get:function(){return this._routerState.firstChild(this)}},{key:"children",get:function(){return this._routerState.children(this)}},{key:"pathFromRoot",get:function(){return this._routerState.pathFromRoot(this)}},{key:"paramMap",get:function(){return this._paramMap||(this._paramMap=ti(this.params)),this._paramMap}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=ti(this.queryParams)),this._queryParamMap}},{key:"toString",value:function(){return"Route(url:'".concat(this.url.map(function(t){return t.toString()}).join("/"),"', path:'").concat(this.routeConfig?this.routeConfig.path:"","')")}}]),t}(),Hi=function(t){v(n,t);var e=g(n);function n(t,r){var i;return f(this,n),(i=e.call(this,r)).url=t,Ki(b(i),r),i}return p(n,[{key:"toString",value:function(){return zi(this._root)}}]),n}(Ni);function Ki(t,e){e.value._routerState=t,e.children.forEach(function(e){return Ki(t,e)})}function zi(t){var e=t.children.length>0?" { ".concat(t.children.map(zi).join(", ")," } "):"";return"".concat(t.value).concat(e)}function Wi(t){if(t.snapshot){var e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,ri(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),ri(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(!ri(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),ri(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Gi(t,e){return ri(t.params,e.params)&&function(t,e){return yi(t,e)&&t.every(function(t,n){return ri(t.parameters,e[n].parameters)})}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||Gi(t.parent,e.parent))}function Qi(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){var r=n.value;r._futureSnapshot=e.value;var i=function(t,e,n){return e.children.map(function(e){var r,i=a(n.children);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(t.shouldReuseRoute(e.value,o.value.snapshot))return Qi(t,e,o)}}catch(s){i.e(s)}finally{i.f()}return Qi(t,e)})}(t,e,n);return new Li(r,i)}var o=t.retrieve(e.value);if(o){var s=o.route;return Yi(e,s),s}var u,c=new Ui(new Fn((u=e.value).url),new Fn(u.params),new Fn(u.queryParams),new Fn(u.fragment),new Fn(u.data),u.outlet,u.component,u),l=e.children.map(function(e){return Qi(t,e)});return new Li(c,l)}function Yi(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(var n=0;n<t.children.length;++n)Yi(t.children[n],e.children[n])}function Ji(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Xi(t){return"object"==typeof t&&null!=t&&t.outlets}function Zi(t,e,n,r,i){var o={};return r&&si(r,function(t,e){o[e]=Array.isArray(t)?t.map(function(t){return""+t}):""+t}),new di(n.root===t?e:$i(n.root,t,e),o,i)}function $i(t,e,n){var r={};return si(t.children,function(t,i){r[i]=t===e?n:$i(t,e,n)}),new pi(t.segments,r)}var to=function(){function t(e,n,r){if(f(this,t),this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Ji(r[0]))throw new Error("Root segment cannot have matrix parameters");var i=r.find(Xi);if(i&&i!==ai(r))throw new Error("{outlets:{}} has to be the last command")}return p(t,[{key:"toRoot",value:function(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}]),t}(),eo=function t(e,n,r){f(this,t),this.segmentGroup=e,this.processChildren=n,this.index=r};function no(t,e,n){if(t||(t=new pi([],{})),0===t.segments.length&&t.hasChildren())return ro(t,e,n);var r=function(t,e,n){for(var r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};i<t.segments.length;){if(r>=n.length)return o;var a=t.segments[i],s=n[r];if(Xi(s))break;var u=""+s,c=r<n.length-1?n[r+1]:null;if(i>0&&void 0===u)break;if(u&&c&&"object"==typeof c&&void 0===c.outlets){if(!so(u,c,a))return o;r+=2}else{if(!so(u,{},a))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){var o=new pi(t.segments.slice(0,r.pathIndex),{});return o.children.primary=new pi(t.segments.slice(r.pathIndex),t.children),ro(o,0,i)}return r.match&&0===i.length?new pi(t.segments,{}):r.match&&!t.hasChildren()?io(t,e,n):r.match?ro(t,0,i):io(t,e,n)}function ro(t,e,n){if(0===n.length)return new pi(t.segments,{});var r=function(t){return Xi(t[0])?t[0].outlets:{primary:t}}(n),i={};return si(r,function(n,r){"string"==typeof n&&(n=[n]),null!==n&&(i[r]=no(t.children[r],e,n))}),si(t.children,function(t,e){void 0===r[e]&&(i[e]=t)}),new pi(t.segments,i)}function io(t,e,n){for(var r=t.segments.slice(0,e),i=0;i<n.length;){var o=n[i];if(Xi(o)){var a=oo(o.outlets);return new pi(r,a)}if(0===i&&Ji(n[0]))r.push(new vi(t.segments[e].path,n[0])),i++;else{var s=Xi(o)?o.outlets.primary:""+o,u=i<n.length-1?n[i+1]:null;s&&u&&Ji(u)?(r.push(new vi(s,ao(u))),i+=2):(r.push(new vi(s,{})),i++)}}return new pi(r,{})}function oo(t){var e={};return si(t,function(t,n){"string"==typeof t&&(t=[t]),null!==t&&(e[n]=io(new pi([],{}),0,t))}),e}function ao(t){var e={};return si(t,function(t,n){return e[n]=""+t}),e}function so(t,e,n){return t==n.path&&ri(e,n.parameters)}var uo=function(){function t(e,n,r,i){f(this,t),this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i}return p(t,[{key:"activate",value:function(t){var e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),Wi(this.futureState.root),this.activateChildRoutes(e,n,t)}},{key:"deactivateChildRoutes",value:function(t,e,n){var r=this,i=Mi(e);t.children.forEach(function(t){var e=t.value.outlet;r.deactivateRoutes(t,i[e],n),delete i[e]}),si(i,function(t,e){r.deactivateRouteAndItsChildren(t,n)})}},{key:"deactivateRoutes",value:function(t,e,n){var r=t.value,i=e?e.value:null;if(r===i)if(r.component){var o=n.getContext(r.outlet);o&&this.deactivateChildRoutes(t,e,o.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}},{key:"deactivateRouteAndItsChildren",value:function(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}},{key:"detachAndStoreRouteSubtree",value:function(t,e){var n=e.getContext(t.value.outlet);if(n&&n.outlet){var r=n.outlet.detach(),i=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:r,route:t,contexts:i})}}},{key:"deactivateRouteAndOutlet",value:function(t,e){for(var n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,i=Mi(t),o=0,a=Object.keys(i);o<a.length;o++){var s=a[o];this.deactivateRouteAndItsChildren(i[s],r)}n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated())}},{key:"activateChildRoutes",value:function(t,e,n){var r=this,i=Mi(e);t.children.forEach(function(t){r.activateRoutes(t,i[t.value.outlet],n),r.forwardEvent(new Xr(t.value.snapshot))}),t.children.length&&this.forwardEvent(new Yr(t.value.snapshot))}},{key:"activateRoutes",value:function(t,e,n){var r=t.value,i=e?e.value:null;if(Wi(r),r===i)if(r.component){var o=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,o.children)}else this.activateChildRoutes(t,e,n);else if(r.component){var a=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){var s=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),a.children.onOutletReAttached(s.contexts),a.attachRef=s.componentRef,a.route=s.route.value,a.outlet&&a.outlet.attach(s.componentRef,s.route.value),co(s.route)}else{var u=function(t){for(var e=t.parent;e;e=e.parent){var n=e.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig;if(n&&n.component)return null}return null}(r.snapshot),c=u?u.module.componentFactoryResolver:null;a.attachRef=null,a.route=r,a.resolver=c,a.outlet&&a.outlet.activateWith(r,c),this.activateChildRoutes(t,null,a.children)}}else this.activateChildRoutes(t,null,n)}}]),t}();function co(t){Wi(t.value),t.children.forEach(co)}var lo=function t(e,n){f(this,t),this.routes=e,this.module=n};function ho(t){return"function"==typeof t}function fo(t){return t instanceof di}var po=Symbol("INITIAL_VALUE");function vo(){return er(function(t){return function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=void 0,i=void 0;return Object(Vn.a)(e[e.length-1])&&(i=e.pop()),"function"==typeof e[e.length-1]&&(r=e.pop()),1===e.length&&Object(Yt.a)(e[0])&&(e=e[0]),Object(zn.a)(e,i).lift(new Gn(r))}(t.map(function(t){return t.pipe(or(1),ur(po))})).pipe(cr(function(t,e){var n=!1;return e.reduce(function(t,r,i){if(t!==po)return t;if(r===po&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||fo(r))return r}return t},t)},po),fr(function(t){return t!==po}),Object(Jt.a)(function(t){return fo(t)?t:!0===t}),or(1))})}var yo,go=((yo=function t(){f(this,t)}).\u0275fac=function(t){return new(t||yo)},yo.\u0275cmp=s.Cb({type:yo,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&s.Jb(0,"router-outlet")},directives:function(){return[ma]},encapsulation:2}),yo);function mo(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=0;n<t.length;n++){var r=t[n];bo(r,_o(e,r))}}function bo(t,e){t.children&&mo(t.children,e)}function _o(t,e){return e?t||e.path?t&&!e.path?t+"/":!t&&e.path?e.path:"".concat(t,"/").concat(e.path):"":t}function wo(t){var e=t.children&&t.children.map(wo),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&"primary"!==n.outlet&&(n.component=go),n}function ko(t){return t.outlet||"primary"}function Co(t,e){var n=t.filter(function(t){return ko(t)===e});return n.push.apply(n,i(t.filter(function(t){return ko(t)!==e}))),n}var Oo={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Eo(t,e,n){var r;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},Oo):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};var i=(e.matcher||ni)(n,t,e);if(!i)return Object.assign({},Oo);var o={};si(i.posParams,function(t,e){o[e]=t.path});var a=i.consumed.length>0?Object.assign(Object.assign({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:a,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function So(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"corrected";if(n.length>0&&function(t,e,n){return n.some(function(n){return Io(t,e,n)&&"primary"!==ko(n)})}(t,n,r)){var o=new pi(e,function(t,e,n,r){var i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;var o,s=a(n);try{for(s.s();!(o=s.n()).done;){var u=o.value;if(""===u.path&&"primary"!==ko(u)){var c=new pi([],{});c._sourceSegment=t,c._segmentIndexShift=e.length,i[ko(u)]=c}}}catch(l){s.e(l)}finally{s.f()}return i}(t,e,r,new pi(n,t.children)));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(function(n){return Io(t,e,n)})}(t,n,r)){var s=new pi(t.segments,function(t,e,n,r,i,o){var s,u={},c=a(r);try{for(c.s();!(s=c.n()).done;){var l=s.value;if(Io(t,n,l)&&!i[ko(l)]){var h=new pi([],{});h._sourceSegment=t,h._segmentIndexShift="legacy"===o?t.segments.length:e.length,u[ko(l)]=h}}}catch(f){c.e(f)}finally{c.f()}return Object.assign(Object.assign({},i),u)}(t,e,n,r,t.children,i));return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:n}}var u=new pi(t.segments,t.children);return u._sourceSegment=t,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:n}}function Io(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function To(t,e,n,r){return!!(ko(t)===r||"primary"!==r&&Io(e,n,t))&&("**"===t.path||Eo(e,t,n).matched)}function xo(t,e,n){return 0===e.length&&!t.children[n]}var Ao=function t(e){f(this,t),this.segmentGroup=e||null},jo=function t(e){f(this,t),this.urlTree=e};function Po(t){return new Qt.a(function(e){return e.error(new Ao(t))})}function No(t){return new Qt.a(function(e){return e.error(new jo(t))})}function Do(t){return new Qt.a(function(e){return e.error(new Error("Only absolute redirects can have named outlets. redirectTo: '".concat(t,"'")))})}var Ro=function(){function t(e,n,r,i,o){f(this,t),this.configLoader=n,this.urlSerializer=r,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=e.get(s.x)}return p(t,[{key:"apply",value:function(){var t=this,e=So(this.urlTree.root,[],[],this.config).segmentGroup,n=new pi(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,n,"primary").pipe(Object(Jt.a)(function(e){return t.createUrlTree(Lo(e),t.urlTree.queryParams,t.urlTree.fragment)})).pipe(vr(function(e){if(e instanceof jo)return t.allowRedirects=!1,t.match(e.urlTree);if(e instanceof Ao)throw t.noMatchError(e);throw e}))}},{key:"match",value:function(t){var e=this;return this.expandSegmentGroup(this.ngModule,this.config,t.root,"primary").pipe(Object(Jt.a)(function(n){return e.createUrlTree(Lo(n),t.queryParams,t.fragment)})).pipe(vr(function(t){if(t instanceof Ao)throw e.noMatchError(t);throw t}))}},{key:"noMatchError",value:function(t){return new Error("Cannot match any routes. URL Segment: '".concat(t.segmentGroup,"'"))}},{key:"createUrlTree",value:function(t,e,n){var r=t.segments.length>0?new pi([],{primary:t}):t;return new di(r,e,n)}},{key:"expandSegmentGroup",value:function(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(Object(Jt.a)(function(t){return new pi([],t)})):this.expandSegment(t,n,e,n.segments,r,!0)}},{key:"expandChildren",value:function(t,e,n){for(var r=this,i=[],o=0,a=Object.keys(n.children);o<a.length;o++){var s=a[o];"primary"===s?i.unshift(s):i.push(s)}return Object(Zt.a)(i).pipe(br(function(i){var o=n.children[i],a=Co(e,i);return r.expandSegmentGroup(t,a,o,i).pipe(Object(Jt.a)(function(t){return{segment:t,outlet:i}}))}),cr(function(t,e){return t[e.outlet]=e.segment,t},{}),function(t,e){var n=arguments.length>=2;return function(r){return r.pipe(t?fr(function(e,n){return t(e,n,r)}):Ar.a,_r(1),n?Ir(e):Cr(function(){return new Yn}))}}())}},{key:"expandSegment",value:function(t,e,n,r,i,o){var a=this;return Object(Zt.a)(n).pipe(br(function(s){return a.expandSegmentAgainstRoute(t,e,n,s,r,i,o).pipe(vr(function(t){if(t instanceof Ao)return Object(Rn.a)(null);throw t}))}),jr(function(t){return!!t}),vr(function(t,n){if(t instanceof Yn||"EmptyError"===t.name){if(xo(e,r,i))return Object(Rn.a)(new pi([],{}));throw new Ao(e)}throw t}))}},{key:"expandSegmentAgainstRoute",value:function(t,e,n,r,i,o,a){return To(r,e,i,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):Po(e):Po(e)}},{key:"expandSegmentAgainstRouteUsingRedirect",value:function(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}},{key:"expandWildCardWithParamsAgainstRouteUsingRedirect",value:function(t,e,n,r){var i=this,o=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?No(o):this.lineralizeSegments(n,o).pipe(Object(mr.a)(function(n){var o=new pi(n,{});return i.expandSegment(t,o,e,n,r,!1)}))}},{key:"expandRegularSegmentAgainstRouteUsingRedirect",value:function(t,e,n,r,i,o){var a=this,s=Eo(e,r,i),u=s.matched,c=s.consumedSegments,l=s.lastChild,h=s.positionalParamSegments;if(!u)return Po(e);var f=this.applyRedirectCommands(c,r.redirectTo,h);return r.redirectTo.startsWith("/")?No(f):this.lineralizeSegments(r,f).pipe(Object(mr.a)(function(r){return a.expandSegment(t,e,n,r.concat(i.slice(l)),o,!1)}))}},{key:"matchSegmentAgainstRoute",value:function(t,e,n,r,i){var o=this;if("**"===n.path)return n.loadChildren?this.configLoader.load(t.injector,n).pipe(Object(Jt.a)(function(t){return n._loadedConfig=t,new pi(r,{})})):Object(Rn.a)(new pi(r,{}));var a=Eo(e,n,r),s=a.matched,u=a.consumedSegments,c=a.lastChild;if(!s)return Po(e);var l=r.slice(c);return this.getChildConfig(t,n,r).pipe(Object(mr.a)(function(t){var r=t.module,a=t.routes,s=So(e,u,l,a),c=s.segmentGroup,h=s.slicedSegments,f=new pi(c.segments,c.children);if(0===h.length&&f.hasChildren())return o.expandChildren(r,a,f).pipe(Object(Jt.a)(function(t){return new pi(u,t)}));if(0===a.length&&0===h.length)return Object(Rn.a)(new pi(u,{}));var d=ko(n)===i;return o.expandSegment(r,f,a,h,d?"primary":i,!0).pipe(Object(Jt.a)(function(t){return new pi(u.concat(t.segments),t.children)}))}))}},{key:"getChildConfig",value:function(t,e,n){var r=this;return e.children?Object(Rn.a)(new lo(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Object(Rn.a)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(Object(mr.a)(function(n){return n?r.configLoader.load(t.injector,e).pipe(Object(Jt.a)(function(t){return e._loadedConfig=t,t})):function(t){return new Qt.a(function(e){return e.error(ei("Cannot load children because the guard of the route \"path: '".concat(t.path,"'\" returned false")))})}(e)})):Object(Rn.a)(new lo([],t))}},{key:"runCanLoadGuards",value:function(t,e,n){var r=this,i=e.canLoad;if(!i||0===i.length)return Object(Rn.a)(!0);var o=i.map(function(r){var i,o=t.get(r);if(function(t){return t&&ho(t.canLoad)}(o))i=o.canLoad(e,n);else{if(!ho(o))throw new Error("Invalid CanLoad guard");i=o(e,n)}return ui(i)});return Object(Rn.a)(o).pipe(vo(),Object(Pr.a)(function(t){if(fo(t)){var e=ei('Redirecting to "'.concat(r.urlSerializer.serialize(t),'"'));throw e.url=t,e}}),Object(Jt.a)(function(t){return!0===t}))}},{key:"lineralizeSegments",value:function(t,e){for(var n=[],r=e.root;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Object(Rn.a)(n);if(r.numberOfChildren>1||!r.children.primary)return Do(t.redirectTo);r=r.children.primary}}},{key:"applyRedirectCommands",value:function(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}},{key:"applyRedirectCreatreUrlTree",value:function(t,e,n,r){var i=this.createSegmentGroup(t,e.root,n,r);return new di(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}},{key:"createQueryParams",value:function(t,e){var n={};return si(t,function(t,r){if("string"==typeof t&&t.startsWith(":")){var i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}},{key:"createSegmentGroup",value:function(t,e,n,r){var i=this,o=this.createSegments(t,e.segments,n,r),a={};return si(e.children,function(e,o){a[o]=i.createSegmentGroup(t,e,n,r)}),new pi(o,a)}},{key:"createSegments",value:function(t,e,n,r){var i=this;return e.map(function(e){return e.path.startsWith(":")?i.findPosParam(t,e,r):i.findOrReturn(e,n)})}},{key:"findPosParam",value:function(t,e,n){var r=n[e.path.substring(1)];if(!r)throw new Error("Cannot redirect to '".concat(t,"'. Cannot find '").concat(e.path,"'."));return r}},{key:"findOrReturn",value:function(t,e){var n,r=0,i=a(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(o.path===t.path)return e.splice(r),o;r++}}catch(s){i.e(s)}finally{i.f()}return t}}]),t}();function Lo(t){for(var e={},n=0,r=Object.keys(t.children);n<r.length;n++){var i=r[n],o=Lo(t.children[i]);(o.segments.length>0||o.hasChildren())&&(e[i]=o)}return function(t){if(1===t.numberOfChildren&&t.children.primary){var e=t.children.primary;return new pi(t.segments.concat(e.segments),e.children)}return t}(new pi(t.segments,e))}var Mo=function t(e){f(this,t),this.path=e,this.route=this.path[this.path.length-1]},Fo=function t(e,n){f(this,t),this.component=e,this.route=n};function Vo(t,e,n){var r=t._root;return qo(r,e?e._root:null,n,[r.value])}function Uo(t,e,n){var r=function(t){if(!t)return null;for(var e=t.parent;e;e=e.parent){var n=e.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function qo(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{canDeactivateChecks:[],canActivateChecks:[]},o=Mi(e);return t.children.forEach(function(t){!function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{canDeactivateChecks:[],canActivateChecks:[]},o=t.value,a=e?e.value:null,s=n?n.getContext(t.value.outlet):null;if(a&&o.routeConfig===a.routeConfig){var u=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!yi(t.url,e.url);case"pathParamsOrQueryParamsChange":return!yi(t.url,e.url)||!ri(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Gi(t,e)||!ri(t.queryParams,e.queryParams);case"paramsChange":default:return!Gi(t,e)}}(a,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Mo(r)):(o.data=a.data,o._resolvedData=a._resolvedData),qo(t,e,o.component?s?s.children:null:n,r,i),u&&s&&s.outlet&&s.outlet.isActivated&&i.canDeactivateChecks.push(new Fo(s.outlet.component,a))}else a&&Bo(e,s,i),i.canActivateChecks.push(new Mo(r)),qo(t,null,o.component?s?s.children:null:n,r,i)}(t,o[t.value.outlet],n,r.concat([t.value]),i),delete o[t.value.outlet]}),si(o,function(t,e){return Bo(t,n.getContext(e),i)}),i}function Bo(t,e,n){var r=Mi(t),i=t.value;si(r,function(t,r){Bo(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new Fo(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}var Ho=function t(){f(this,t)};function Ko(t){return new Qt.a(function(e){return e.error(t)})}var zo=function(){function t(e,n,r,i,o,a){f(this,t),this.rootComponentType=e,this.config=n,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=o,this.relativeLinkResolution=a}return p(t,[{key:"recognize",value:function(){var t=So(this.urlTree.root,[],[],this.config.filter(function(t){return void 0===t.redirectTo}),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,"primary");if(null===e)return null;var n=new Bi([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},"primary",this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Li(n,e),i=new Hi(this.url,r);return this.inheritParamsAndData(i._root),i}},{key:"inheritParamsAndData",value:function(t){var e=this,n=t.value,r=qi(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),t.children.forEach(function(t){return e.inheritParamsAndData(t)})}},{key:"processSegmentGroup",value:function(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}},{key:"processChildren",value:function(t,e){for(var n=[],r=0,o=Object.keys(e.children);r<o.length;r++){var s=o[r],u=e.children[s],c=Co(t,s),l=this.processSegmentGroup(c,u,s);if(null===l)return null;n.push.apply(n,i(l))}var h=function(t){var e,n=[],r=a(t);try{var o=function(){var t,r=e.value;if(!function(t){var e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}(r))return n.push(r),"continue";var o=n.find(function(t){return r.value.routeConfig===t.value.routeConfig});void 0!==o?(t=o.children).push.apply(t,i(r.children)):n.push(r)};for(r.s();!(e=r.n()).done;)o()}catch(s){r.e(s)}finally{r.f()}return n}(n);return h.sort(function(t,e){return"primary"===t.value.outlet?-1:"primary"===e.value.outlet?1:t.value.outlet.localeCompare(e.value.outlet)}),h}},{key:"processSegment",value:function(t,e,n,r){var i,o=a(t);try{for(o.s();!(i=o.n()).done;){var s=i.value,u=this.processSegmentAgainstRoute(s,e,n,r);if(null!==u)return u}}catch(c){o.e(c)}finally{o.f()}return xo(e,n,r)?[]:null}},{key:"processSegmentAgainstRoute",value:function(t,e,n,r){if(t.redirectTo||!To(t,e,n,r))return null;var i,o=[],a=[];if("**"===t.path){var s=n.length>0?ai(n).parameters:{};i=new Bi(n,s,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Qo(t),ko(t),t.component,t,Wo(e),Go(e)+n.length,Yo(t))}else{var u=Eo(e,t,n);if(!u.matched)return null;o=u.consumedSegments,a=n.slice(u.lastChild),i=new Bi(o,u.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Qo(t),ko(t),t.component,t,Wo(e),Go(e)+o.length,Yo(t))}var c=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),l=So(e,o,a,c.filter(function(t){return void 0===t.redirectTo}),this.relativeLinkResolution),h=l.segmentGroup,f=l.slicedSegments;if(0===f.length&&h.hasChildren()){var d=this.processChildren(c,h);return null===d?null:[new Li(i,d)]}if(0===c.length&&0===f.length)return[new Li(i,[])];var p=ko(t)===r,v=this.processSegment(c,h,f,p?"primary":r);return null===v?null:[new Li(i,v)]}}]),t}();function Wo(t){for(var e=t;e._sourceSegment;)e=e._sourceSegment;return e}function Go(t){for(var e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;e._sourceSegment;)n+=(e=e._sourceSegment)._segmentIndexShift?e._segmentIndexShift:0;return n-1}function Qo(t){return t.data||{}}function Yo(t){return t.resolve||{}}function Jo(t){return er(function(e){var n=t(e);return n?Object(Zt.a)(n).pipe(Object(Jt.a)(function(){return e})):Object(Rn.a)(e)})}var Xo=function(t){v(n,t);var e=g(n);function n(){return f(this,n),e.apply(this,arguments)}return n}(function(){function t(){f(this,t)}return p(t,[{key:"shouldDetach",value:function(t){return!1}},{key:"store",value:function(t,e){}},{key:"shouldAttach",value:function(t){return!1}},{key:"retrieve",value:function(t){return null}},{key:"shouldReuseRoute",value:function(t,e){return t.routeConfig===e.routeConfig}}]),t}()),Zo=new s.q("ROUTES"),$o=function(){function t(e,n,r,i){f(this,t),this.loader=e,this.compiler=n,this.onLoadStartListener=r,this.onLoadEndListener=i}return p(t,[{key:"load",value:function(t,e){var n=this;return this.onLoadStartListener&&this.onLoadStartListener(e),this.loadModuleFactory(e.loadChildren).pipe(Object(Jt.a)(function(r){n.onLoadEndListener&&n.onLoadEndListener(e);var i=r.create(t);return new lo(oi(i.injector.get(Zo)).map(wo),i)}))}},{key:"loadModuleFactory",value:function(t){var e=this;return"string"==typeof t?Object(Zt.a)(this.loader.load(t)):ui(t()).pipe(Object(mr.a)(function(t){return t instanceof s.v?Object(Rn.a)(t):Object(Zt.a)(e.compiler.compileModuleAsync(t))}))}}]),t}(),ta=function t(){f(this,t),this.outlet=null,this.route=null,this.resolver=null,this.children=new ea,this.attachRef=null},ea=function(){function t(){f(this,t),this.contexts=new Map}return p(t,[{key:"onChildOutletCreated",value:function(t,e){var n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}},{key:"onChildOutletDestroyed",value:function(t){var e=this.getContext(t);e&&(e.outlet=null)}},{key:"onOutletDeactivated",value:function(){var t=this.contexts;return this.contexts=new Map,t}},{key:"onOutletReAttached",value:function(t){this.contexts=t}},{key:"getOrCreateContext",value:function(t){var e=this.getContext(t);return e||(e=new ta,this.contexts.set(t,e)),e}},{key:"getContext",value:function(t){return this.contexts.get(t)||null}}]),t}(),na=function(){function t(){f(this,t)}return p(t,[{key:"shouldProcessUrl",value:function(t){return!0}},{key:"extract",value:function(t){return t}},{key:"merge",value:function(t,e){return t}}]),t}();function ra(t){throw t}function ia(t,e,n){return e.parse("/")}function oa(t,e){return Object(Rn.a)(null)}var aa,sa,ua,ca=((ua=function(){function t(e,n,r,i,o,a,u,c){var l=this;f(this,t),this.rootComponentType=e,this.urlSerializer=n,this.rootContexts=r,this.location=i,this.config=c,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.lastLocationChangeInfo=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new Ln.a,this.errorHandler=ra,this.malformedUriErrorHandler=ia,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:oa,afterPreactivation:oa},this.urlHandlingStrategy=new na,this.routeReuseStrategy=new Xo,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.ngModule=o.get(s.x),this.console=o.get(s.X);var h=o.get(s.z);this.isNgZoneEnabled=h instanceof s.z&&s.z.isInAngularZone(),this.resetConfig(c),this.currentUrlTree=new di(new pi([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new $o(a,u,function(t){return l.triggerEvent(new Wr(t))},function(t){return l.triggerEvent(new Gr(t))}),this.routerState=Vi(this.currentUrlTree,this.rootComponentType),this.transitions=new Fn({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}return p(t,[{key:"setupNavigations",value:function(t){var e=this,n=this.events;return t.pipe(fr(function(t){return 0!==t.id}),Object(Jt.a)(function(t){return Object.assign(Object.assign({},t),{extractedUrl:e.urlHandlingStrategy.extract(t.rawUrl)})}),er(function(t){var r,i,o,a,s=!1,u=!1;return Object(Rn.a)(t).pipe(Object(Pr.a)(function(t){e.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:e.lastSuccessfulNavigation?Object.assign(Object.assign({},e.lastSuccessfulNavigation),{previousNavigation:null}):null}}),er(function(t){var r,i,o,a,s=!e.navigated||t.extractedUrl.toString()!==e.browserUrlTree.toString();if(("reload"===e.onSameUrlNavigation||s)&&e.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Object(Rn.a)(t).pipe(er(function(t){var r=e.transitions.getValue();return n.next(new Mr(t.id,e.serializeUrl(t.extractedUrl),t.source,t.restoredState)),r!==e.transitions.getValue()?Zn.a:Promise.resolve(t)}),(r=e.ngModule.injector,i=e.configLoader,o=e.urlSerializer,a=e.config,er(function(t){return function(t,e,n,r,i){return new Ro(t,e,n,r,i).apply()}(r,i,o,t.extractedUrl,a).pipe(Object(Jt.a)(function(e){return Object.assign(Object.assign({},t),{urlAfterRedirects:e})}))})),Object(Pr.a)(function(t){e.currentNavigation=Object.assign(Object.assign({},e.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,n,r,i,o){return Object(mr.a)(function(r){return function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"emptyOnly",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"legacy";try{var a=new zo(t,e,n,r,i,o).recognize();return null===a?Ko(new Ho):Object(Rn.a)(a)}catch(qC){return Ko(qC)}}(t,n,r.urlAfterRedirects,(a=r.urlAfterRedirects,e.serializeUrl(a)),i,o).pipe(Object(Jt.a)(function(t){return Object.assign(Object.assign({},r),{targetSnapshot:t})}));var a})}(e.rootComponentType,e.config,0,e.paramsInheritanceStrategy,e.relativeLinkResolution),Object(Pr.a)(function(t){"eager"===e.urlUpdateStrategy&&(t.extras.skipLocationChange||e.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),e.browserUrlTree=t.urlAfterRedirects);var r=new qr(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);n.next(r)}));if(s&&e.rawUrlTree&&e.urlHandlingStrategy.shouldProcessUrl(e.rawUrlTree)){var u=t.id,c=t.extractedUrl,l=t.source,h=t.restoredState,f=t.extras,d=new Mr(u,e.serializeUrl(c),l,h);n.next(d);var p=Vi(c,e.rootComponentType).snapshot;return Object(Rn.a)(Object.assign(Object.assign({},t),{targetSnapshot:p,urlAfterRedirects:c,extras:Object.assign(Object.assign({},f),{skipLocationChange:!1,replaceUrl:!1})}))}return e.rawUrlTree=t.rawUrl,e.browserUrlTree=t.urlAfterRedirects,t.resolve(null),Zn.a}),Jo(function(t){var n=t.targetSnapshot,r=t.id,i=t.extractedUrl,o=t.rawUrl,a=t.extras,s=a.skipLocationChange,u=a.replaceUrl;return e.hooks.beforePreactivation(n,{navigationId:r,appliedUrlTree:i,rawUrlTree:o,skipLocationChange:!!s,replaceUrl:!!u})}),Object(Pr.a)(function(t){var n=new Br(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.triggerEvent(n)}),Object(Jt.a)(function(t){return Object.assign(Object.assign({},t),{guards:Vo(t.targetSnapshot,t.currentSnapshot,e.rootContexts)})}),function(t,e){return Object(mr.a)(function(n){var r=n.targetSnapshot,i=n.currentSnapshot,o=n.guards,a=o.canActivateChecks,s=o.canDeactivateChecks;return 0===s.length&&0===a.length?Object(Rn.a)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return Object(Zt.a)(t).pipe(Object(mr.a)(function(t){return function(t,e,n,r,i){var o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||0===o.length)return Object(Rn.a)(!0);var a=o.map(function(o){var a,s=Uo(o,e,i);if(function(t){return t&&ho(t.canDeactivate)}(s))a=ui(s.canDeactivate(t,e,n,r));else{if(!ho(s))throw new Error("Invalid CanDeactivate guard");a=ui(s(t,e,n,r))}return a.pipe(jr())});return Object(Rn.a)(a).pipe(vo())}(t.component,t.route,n,e,r)}),jr(function(t){return!0!==t},!0))}(s,r,i,t).pipe(Object(mr.a)(function(n){return n&&"boolean"==typeof n?function(t,e,n,r){return Object(Zt.a)(e).pipe(br(function(e){return Xn(function(t,e){return null!==t&&e&&e(new Qr(t)),Object(Rn.a)(!0)}(e.route.parent,r),function(t,e){return null!==t&&e&&e(new Jr(t)),Object(Rn.a)(!0)}(e.route,r),function(t,e,n){var r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(function(t){return function(t){var e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)}).filter(function(t){return null!==t}).map(function(e){return $n(function(){var i=e.guards.map(function(i){var o,a=Uo(i,e.node,n);if(function(t){return t&&ho(t.canActivateChild)}(a))o=ui(a.canActivateChild(r,t));else{if(!ho(a))throw new Error("Invalid CanActivateChild guard");o=ui(a(r,t))}return o.pipe(jr())});return Object(Rn.a)(i).pipe(vo())})});return Object(Rn.a)(i).pipe(vo())}(t,e.path,n),function(t,e,n){var r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Object(Rn.a)(!0);var i=r.map(function(r){return $n(function(){var i,o=Uo(r,e,n);if(function(t){return t&&ho(t.canActivate)}(o))i=ui(o.canActivate(e,t));else{if(!ho(o))throw new Error("Invalid CanActivate guard");i=ui(o(e,t))}return i.pipe(jr())})});return Object(Rn.a)(i).pipe(vo())}(t,e.route,n))}),jr(function(t){return!0!==t},!0))}(r,a,t,e):Object(Rn.a)(n)}),Object(Jt.a)(function(t){return Object.assign(Object.assign({},n),{guardsResult:t})}))})}(e.ngModule.injector,function(t){return e.triggerEvent(t)}),Object(Pr.a)(function(t){if(fo(t.guardsResult)){var n=ei('Redirecting to "'.concat(e.serializeUrl(t.guardsResult),'"'));throw n.url=t.guardsResult,n}var r=new Hr(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);e.triggerEvent(r)}),fr(function(t){if(!t.guardsResult){e.resetUrlToCurrentUrlTree();var r=new Vr(t.id,e.serializeUrl(t.extractedUrl),"");return n.next(r),t.resolve(!1),!1}return!0}),Jo(function(t){if(t.guards.canActivateChecks.length)return Object(Rn.a)(t).pipe(Object(Pr.a)(function(t){var n=new Kr(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.triggerEvent(n)}),er(function(t){var r,i,o=!1;return Object(Rn.a)(t).pipe((r=e.paramsInheritanceStrategy,i=e.ngModule.injector,Object(mr.a)(function(t){var e=t.targetSnapshot,n=t.guards.canActivateChecks;if(!n.length)return Object(Rn.a)(t);var o=0;return Object(Zt.a)(n).pipe(br(function(t){return function(t,e,n,r){return function(t,e,n,r){var i=Object.keys(t);if(0===i.length)return Object(Rn.a)({});var o={};return Object(Zt.a)(i).pipe(Object(mr.a)(function(i){return function(t,e,n,r){var i=Uo(t,e,r);return ui(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe(Object(Pr.a)(function(t){o[i]=t}))}),_r(1),Object(mr.a)(function(){return Object.keys(o).length===i.length?Object(Rn.a)(o):Zn.a}))}(t._resolve,t,e,r).pipe(Object(Jt.a)(function(e){return t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),qi(t,n).resolve),null}))}(t.route,e,r,i)}),Object(Pr.a)(function(){return o++}),_r(1),Object(mr.a)(function(e){return o===n.length?Object(Rn.a)(t):Zn.a}))})),Object(Pr.a)({next:function(){return o=!0},complete:function(){if(!o){var r=new Vr(t.id,e.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");n.next(r),t.resolve(!1)}}}))}),Object(Pr.a)(function(t){var n=new zr(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.triggerEvent(n)}))}),Jo(function(t){var n=t.targetSnapshot,r=t.id,i=t.extractedUrl,o=t.rawUrl,a=t.extras,s=a.skipLocationChange,u=a.replaceUrl;return e.hooks.afterPreactivation(n,{navigationId:r,appliedUrlTree:i,rawUrlTree:o,skipLocationChange:!!s,replaceUrl:!!u})}),Object(Jt.a)(function(t){var n=function(t,e,n){var r=Qi(t,e._root,n?n._root:void 0);return new Fi(r,e)}(e.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:n})}),Object(Pr.a)(function(t){e.currentUrlTree=t.urlAfterRedirects,e.rawUrlTree=e.urlHandlingStrategy.merge(e.currentUrlTree,t.rawUrl),e.routerState=t.targetRouterState,"deferred"===e.urlUpdateStrategy&&(t.extras.skipLocationChange||e.setBrowserUrl(e.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),e.browserUrlTree=t.urlAfterRedirects)}),(i=e.rootContexts,o=e.routeReuseStrategy,a=function(t){return e.triggerEvent(t)},Object(Jt.a)(function(t){return new uo(o,t.targetRouterState,t.currentRouterState,a).activate(i),t})),Object(Pr.a)({next:function(){s=!0},complete:function(){s=!0}}),(r=function(){if(!s&&!u){e.resetUrlToCurrentUrlTree();var r=new Vr(t.id,e.serializeUrl(t.extractedUrl),"Navigation ID ".concat(t.id," is not equal to the current navigation id ").concat(e.navigationId));n.next(r),t.resolve(!1)}e.currentNavigation=null},function(t){return t.lift(new Dr(r))}),vr(function(r){if(u=!0,(s=r)&&s.ngNavigationCancelingError){var i=fo(r.url);i||(e.navigated=!0,e.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));var o=new Vr(t.id,e.serializeUrl(t.extractedUrl),r.message);n.next(o),i?setTimeout(function(){var n=e.urlHandlingStrategy.merge(r.url,e.rawUrlTree);e.scheduleNavigation(n,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===e.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{e.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);var a=new Ur(t.id,e.serializeUrl(t.extractedUrl),r);n.next(a);try{t.resolve(e.errorHandler(r))}catch(pv){t.reject(pv)}}var s;return Zn.a}))}))}},{key:"resetRootComponentType",value:function(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}},{key:"getTransition",value:function(){var t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}},{key:"setTransition",value:function(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}},{key:"initialNavigation",value:function(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}},{key:"setUpLocationChangeListener",value:function(){var t=this;this.locationSubscription||(this.locationSubscription=this.location.subscribe(function(e){var n=t.extractLocationChangeInfoFromEvent(e);t.shouldScheduleNavigation(t.lastLocationChangeInfo,n)&&setTimeout(function(){var e=n.source,r=n.state,i=n.urlTree,o={replaceUrl:!0};if(r){var a=Object.assign({},r);delete a.navigationId,0!==Object.keys(a).length&&(o.state=a)}t.scheduleNavigation(i,e,r,o)},0),t.lastLocationChangeInfo=n}))}},{key:"extractLocationChangeInfoFromEvent",value:function(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}},{key:"shouldScheduleNavigation",value:function(t,e){if(!t)return!0;var n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}},{key:"url",get:function(){return this.serializeUrl(this.currentUrlTree)}},{key:"getCurrentNavigation",value:function(){return this.currentNavigation}},{key:"triggerEvent",value:function(t){this.events.next(t)}},{key:"resetConfig",value:function(t){mo(t),this.config=t.map(wo),this.navigated=!1,this.lastSuccessfulId=-1}},{key:"ngOnDestroy",value:function(){this.dispose()}},{key:"dispose",value:function(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0)}},{key:"createUrlTree",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.relativeTo,r=e.queryParams,o=e.fragment,a=e.queryParamsHandling,s=e.preserveFragment,u=n||this.routerState.root,c=s?this.currentUrlTree.fragment:o,l=null;switch(a){case"merge":l=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":l=this.currentUrlTree.queryParams;break;default:l=r||null}return null!==l&&(l=this.removeEmptyProps(l)),function(t,e,n,r,o){if(0===n.length)return Zi(e.root,e.root,e,r,o);var a=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new to(!0,0,t);var e=0,n=!1,r=t.reduce(function(t,r,o){if("object"==typeof r&&null!=r){if(r.outlets){var a={};return si(r.outlets,function(t,e){a[e]="string"==typeof t?t.split("/"):t}),[].concat(i(t),[{outlets:a}])}if(r.segmentPath)return[].concat(i(t),[r.segmentPath])}return"string"!=typeof r?[].concat(i(t),[r]):0===o?(r.split("/").forEach(function(r,i){0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[].concat(i(t),[r])},[]);return new to(n,e,r)}(n);if(a.toRoot())return Zi(e.root,new pi([],{}),e,r,o);var s=function(t,e,n){if(t.isAbsolute)return new eo(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){var r=n.snapshot._urlSegment;return new eo(r,r===e.root,0)}var i=Ji(t.commands[0])?0:1;return function(t,e,n){for(var r=t,i=e,o=n;o>i;){if(o-=i,!(r=r.parent))throw new Error("Invalid number of '../'");i=r.segments.length}return new eo(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+i,t.numberOfDoubleDots)}(a,e,t),u=s.processChildren?ro(s.segmentGroup,s.index,a.commands):no(s.segmentGroup,s.index,a.commands);return Zi(s.segmentGroup,u,e,r,o)}(u,this.currentUrlTree,t,l,c)}},{key:"navigateByUrl",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipLocationChange:!1},n=fo(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}},{key:"navigate",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipLocationChange:!1};return function(t){for(var e=0;e<t.length;e++){var n=t[e];if(null==n)throw new Error("The requested path contains ".concat(n," segment at index ").concat(e))}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}},{key:"serializeUrl",value:function(t){return this.urlSerializer.serialize(t)}},{key:"parseUrl",value:function(t){var e;try{e=this.urlSerializer.parse(t)}catch(qC){e=this.malformedUriErrorHandler(qC,this.urlSerializer,t)}return e}},{key:"isActive",value:function(t,e){if(fo(t))return ci(this.currentUrlTree,t,e);var n=this.parseUrl(t);return ci(this.currentUrlTree,n,e)}},{key:"removeEmptyProps",value:function(t){return Object.keys(t).reduce(function(e,n){var r=t[n];return null!=r&&(e[n]=r),e},{})}},{key:"processNavigations",value:function(){var t=this;this.navigations.subscribe(function(e){t.navigated=!0,t.lastSuccessfulId=e.id,t.events.next(new Fr(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(t.currentUrlTree))),t.lastSuccessfulNavigation=t.currentNavigation,t.currentNavigation=null,e.resolve(!0)},function(e){t.console.warn("Unhandled Navigation Error: ")})}},{key:"scheduleNavigation",value:function(t,e,n,r,i){var o,a,s,u=this.getTransition(),c="imperative"!==e&&"imperative"===(null==u?void 0:u.source),l=(this.lastSuccessfulId===u.id||this.currentNavigation?u.rawUrl:u.urlAfterRedirects).toString()===t.toString();if(c&&l)return Promise.resolve(!0);i?(o=i.resolve,a=i.reject,s=i.promise):s=new Promise(function(t,e){o=t,a=e});var h=++this.navigationId;return this.setTransition({id:h,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:o,reject:a,promise:s,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),s.catch(function(t){return Promise.reject(t)})}},{key:"setBrowserUrl",value:function(t,e,n,r){var i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}},{key:"resetStateAndUrl",value:function(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}},{key:"resetUrlToCurrentUrlTree",value:function(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}]),t}()).\u0275fac=function(t){return new(t||ua)(s.Pb(s.M),s.Pb(gi),s.Pb(ea),s.Pb(U),s.Pb(s.r),s.Pb(s.w),s.Pb(s.i),s.Pb(void 0))},ua.\u0275prov=s.Eb({token:ua,factory:ua.\u0275fac}),ua),la=((sa=function(){function t(e,n,r,i,o){f(this,t),this.router=e,this.route=n,this.commands=[],this.onChanges=new Ln.a,null==r&&i.setAttribute(o.nativeElement,"tabindex","0")}return p(t,[{key:"ngOnChanges",value:function(t){this.onChanges.next(this)}},{key:"routerLink",set:function(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}},{key:"onClick",value:function(){var t={skipLocationChange:fa(this.skipLocationChange),replaceUrl:fa(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}},{key:"urlTree",get:function(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:fa(this.preserveFragment)})}}]),t}()).\u0275fac=function(t){return new(t||sa)(s.Ib(ca),s.Ib(Ui),s.Qb("tabindex"),s.Ib(s.D),s.Ib(s.l))},sa.\u0275dir=s.Db({type:sa,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,e){1&t&&s.Sb("click",function(){return e.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state"},features:[s.wb]}),sa),ha=((aa=function(){function t(e,n,r){var i=this;f(this,t),this.router=e,this.route=n,this.locationStrategy=r,this.commands=[],this.onChanges=new Ln.a,this.subscription=e.events.subscribe(function(t){t instanceof Fr&&i.updateTargetUrlAndHref()})}return p(t,[{key:"routerLink",set:function(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}},{key:"ngOnChanges",value:function(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"onClick",value:function(t,e,n,r,i){if(0!==t||e||n||r||i)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;var o={skipLocationChange:fa(this.skipLocationChange),replaceUrl:fa(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,o),!1}},{key:"updateTargetUrlAndHref",value:function(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}},{key:"urlTree",get:function(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:fa(this.preserveFragment)})}}]),t}()).\u0275fac=function(t){return new(t||aa)(s.Ib(ca),s.Ib(Ui),s.Ib(P))},aa.\u0275dir=s.Db({type:aa,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,e){1&t&&s.Sb("click",function(t){return e.onClick(t.button,t.ctrlKey,t.shiftKey,t.altKey,t.metaKey)}),2&t&&(s.Ob("href",e.href,s.cc),s.zb("target",e.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state"},features:[s.wb]}),aa);function fa(t){return""===t||!!t}var da,pa,va,ya,ga=((pa=function(){function t(e,n,r,i,o,a){var s=this;f(this,t),this.router=e,this.element=n,this.renderer=r,this.cdr=i,this.link=o,this.linkWithHref=a,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.routerEventsSubscription=e.events.subscribe(function(t){t instanceof Fr&&s.update()})}return p(t,[{key:"ngAfterContentInit",value:function(){var t=this;Object(Rn.a)(this.links.changes,this.linksWithHrefs.changes,Object(Rn.a)(null)).pipe(Object(Jn.a)()).subscribe(function(e){t.update(),t.subscribeToEachLinkOnChanges()})}},{key:"subscribeToEachLinkOnChanges",value:function(){var t,e=this;null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe();var n=[].concat(i(this.links.toArray()),i(this.linksWithHrefs.toArray()),[this.link,this.linkWithHref]).filter(function(t){return!!t}).map(function(t){return t.onChanges});this.linkInputChangesSubscription=Object(Zt.a)(n).pipe(Object(Jn.a)()).subscribe(function(t){e.isActive!==e.isLinkActive(e.router)(t)&&e.update()})}},{key:"routerLinkActive",set:function(t){var e=Array.isArray(t)?t:t.split(" ");this.classes=e.filter(function(t){return!!t})}},{key:"ngOnChanges",value:function(t){this.update()}},{key:"ngOnDestroy",value:function(){var t;this.routerEventsSubscription.unsubscribe(),null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe()}},{key:"update",value:function(){var t=this;this.links&&this.linksWithHrefs&&this.router.navigated&&Promise.resolve().then(function(){var e=t.hasActiveLinks();t.isActive!==e&&(t.isActive=e,t.cdr.markForCheck(),t.classes.forEach(function(n){e?t.renderer.addClass(t.element.nativeElement,n):t.renderer.removeClass(t.element.nativeElement,n)}))})}},{key:"isLinkActive",value:function(t){var e=this;return function(n){return t.isActive(n.urlTree,e.routerLinkActiveOptions.exact)}}},{key:"hasActiveLinks",value:function(){var t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}]),t}()).\u0275fac=function(t){return new(t||pa)(s.Ib(ca),s.Ib(s.l),s.Ib(s.D),s.Ib(s.h),s.Ib(la,8),s.Ib(ha,8))},pa.\u0275dir=s.Db({type:pa,selectors:[["","routerLinkActive",""]],contentQueries:function(t,e,n){var r;1&t&&(s.Bb(n,la,!0),s.Bb(n,ha,!0)),2&t&&(s.Zb(r=s.Tb())&&(e.links=r),s.Zb(r=s.Tb())&&(e.linksWithHrefs=r))},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},exportAs:["routerLinkActive"],features:[s.wb]}),pa),ma=((da=function(){function t(e,n,r,i,o){f(this,t),this.parentContexts=e,this.location=n,this.resolver=r,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new s.n,this.deactivateEvents=new s.n,this.name=i||"primary",e.onChildOutletCreated(this.name,this)}return p(t,[{key:"ngOnDestroy",value:function(){this.parentContexts.onChildOutletDestroyed(this.name)}},{key:"ngOnInit",value:function(){if(!this.activated){var t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}},{key:"isActivated",get:function(){return!!this.activated}},{key:"component",get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}},{key:"activatedRoute",get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}},{key:"activatedRouteData",get:function(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}},{key:"detach",value:function(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();var t=this.activated;return this.activated=null,this._activatedRoute=null,t}},{key:"attach",value:function(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}},{key:"deactivate",value:function(){if(this.activated){var t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}},{key:"activateWith",value:function(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;var n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new ba(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}]),t}()).\u0275fac=function(t){return new(t||da)(s.Ib(ea),s.Ib(s.P),s.Ib(s.j),s.Qb("name"),s.Ib(s.h))},da.\u0275dir=s.Db({type:da,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),da),ba=function(){function t(e,n,r){f(this,t),this.route=e,this.childContexts=n,this.parent=r}return p(t,[{key:"get",value:function(t,e){return t===Ui?this.route:t===ea?this.childContexts:this.parent.get(t,e)}}]),t}(),_a=function t(){f(this,t)},wa=function(){function t(){f(this,t)}return p(t,[{key:"preload",value:function(t,e){return Object(Rn.a)(null)}}]),t}(),ka=((ya=function(){function t(e,n,r,i,o){f(this,t),this.router=e,this.injector=i,this.preloadingStrategy=o,this.loader=new $o(n,r,function(t){return e.triggerEvent(new Wr(t))},function(t){return e.triggerEvent(new Gr(t))})}return p(t,[{key:"setUpPreloading",value:function(){var t=this;this.subscription=this.router.events.pipe(fr(function(t){return t instanceof Fr}),br(function(){return t.preload()})).subscribe(function(){})}},{key:"preload",value:function(){var t=this.injector.get(s.x);return this.processRoutes(t,this.router.config)}},{key:"ngOnDestroy",value:function(){this.subscription&&this.subscription.unsubscribe()}},{key:"processRoutes",value:function(t,e){var n,r=[],i=a(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(o.loadChildren&&!o.canLoad&&o._loadedConfig){var s=o._loadedConfig;r.push(this.processRoutes(s.module,s.routes))}else o.loadChildren&&!o.canLoad?r.push(this.preloadConfig(t,o)):o.children&&r.push(this.processRoutes(t,o.children))}}catch(u){i.e(u)}finally{i.f()}return Object(Zt.a)(r).pipe(Object(Jn.a)(),Object(Jt.a)(function(t){}))}},{key:"preloadConfig",value:function(t,e){var n=this;return this.preloadingStrategy.preload(e,function(){return n.loader.load(t.injector,e).pipe(Object(mr.a)(function(t){return e._loadedConfig=t,n.processRoutes(t.module,t.routes)}))})}}]),t}()).\u0275fac=function(t){return new(t||ya)(s.Pb(ca),s.Pb(s.w),s.Pb(s.i),s.Pb(s.r),s.Pb(_a))},ya.\u0275prov=s.Eb({token:ya,factory:ya.\u0275fac}),ya),Ca=((va=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};f(this,t),this.router=e,this.viewportScroller=n,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}return p(t,[{key:"init",value:function(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}},{key:"createScrollEvents",value:function(){var t=this;return this.router.events.subscribe(function(e){e instanceof Mr?(t.store[t.lastId]=t.viewportScroller.getScrollPosition(),t.lastSource=e.navigationTrigger,t.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Fr&&(t.lastId=e.id,t.scheduleScrollEvent(e,t.router.parseUrl(e.urlAfterRedirects).fragment))})}},{key:"consumeScrollEvents",value:function(){var t=this;return this.router.events.subscribe(function(e){e instanceof Zr&&(e.position?"top"===t.options.scrollPositionRestoration?t.viewportScroller.scrollToPosition([0,0]):"enabled"===t.options.scrollPositionRestoration&&t.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===t.options.anchorScrolling?t.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==t.options.scrollPositionRestoration&&t.viewportScroller.scrollToPosition([0,0]))})}},{key:"scheduleScrollEvent",value:function(t,e){this.router.triggerEvent(new Zr(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}},{key:"ngOnDestroy",value:function(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}]),t}()).\u0275fac=function(t){return new(t||va)(s.Pb(ca),s.Pb(ct),s.Pb(void 0))},va.\u0275prov=s.Eb({token:va,factory:va.\u0275fac}),va),Oa=new s.q("ROUTER_CONFIGURATION"),Ea=new s.q("ROUTER_FORROOT_GUARD"),Sa=[U,{provide:gi,useClass:mi},{provide:ca,useFactory:function(t,e,n,r,i,o,a){var s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{},u=arguments.length>8?arguments[8]:void 0,c=arguments.length>9?arguments[9]:void 0,h=new ca(null,t,e,n,r,i,o,oi(a));if(u&&(h.urlHandlingStrategy=u),c&&(h.routeReuseStrategy=c),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(s,h),s.enableTracing){var f=l();h.events.subscribe(function(t){f.logGroup("Router Event: "+t.constructor.name),f.log(t.toString()),f.log(t),f.logGroupEnd()})}return h},deps:[gi,ea,U,s.r,s.w,s.i,Zo,Oa,[function(){return function t(){f(this,t)}}(),new s.A],[function(){return function t(){f(this,t)}}(),new s.A]]},ea,{provide:Ui,useFactory:function(t){return t.routerState.root},deps:[ca]},{provide:s.w,useClass:s.J},ka,wa,function(){function t(){f(this,t)}return p(t,[{key:"preload",value:function(t,e){return e().pipe(vr(function(){return Object(Rn.a)(null)}))}}]),t}(),{provide:Oa,useValue:{enableTracing:!1}}];function Ia(){return new s.y("Router",ca)}var Ta,xa=((Ta=function(){function t(e,n){f(this,t)}return p(t,null,[{key:"forRoot",value:function(e,n){return{ngModule:t,providers:[Sa,Na(e),{provide:Ea,useFactory:Pa,deps:[[ca,new s.A,new s.I]]},{provide:Oa,useValue:n||{}},{provide:P,useFactory:ja,deps:[_,[new s.p(M),new s.A],Oa]},{provide:Ca,useFactory:Aa,deps:[ca,ct,Oa]},{provide:_a,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:wa},{provide:s.y,multi:!0,useFactory:Ia},[Ra,{provide:s.d,multi:!0,useFactory:La,deps:[Ra]},{provide:Fa,useFactory:Ma,deps:[Ra]},{provide:s.b,multi:!0,useExisting:Fa}]]}}},{key:"forChild",value:function(e){return{ngModule:t,providers:[Na(e)]}}}]),t}()).\u0275mod=s.Gb({type:Ta}),Ta.\u0275inj=s.Fb({factory:function(t){return new(t||Ta)(s.Pb(Ea,8),s.Pb(ca,8))}}),Ta);function Aa(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new Ca(t,e,n)}function ja(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.useHash?new V(t,e):new F(t,e)}function Pa(t){return"guarded"}function Na(t){return[{provide:s.a,multi:!0,useValue:t},{provide:Zo,multi:!0,useValue:t}]}var Da,Ra=((Da=function(){function t(e){f(this,t),this.injector=e,this.initNavigation=!1,this.resultOfPreactivationDone=new Ln.a}return p(t,[{key:"appInitializer",value:function(){var t=this;return this.injector.get(O,Promise.resolve(null)).then(function(){var e=null,n=new Promise(function(t){return e=t}),r=t.injector.get(ca),i=t.injector.get(Oa);return"disabled"===i.initialNavigation?(r.setUpLocationChangeListener(),e(!0)):"enabled"===i.initialNavigation||"enabledBlocking"===i.initialNavigation?(r.hooks.afterPreactivation=function(){return t.initNavigation?Object(Rn.a)(null):(t.initNavigation=!0,e(!0),t.resultOfPreactivationDone)},r.initialNavigation()):e(!0),n})}},{key:"bootstrapListener",value:function(t){var e=this.injector.get(Oa),n=this.injector.get(ka),r=this.injector.get(Ca),i=this.injector.get(ca),o=this.injector.get(s.g);t===o.components[0]&&("enabledNonBlocking"!==e.initialNavigation&&void 0!==e.initialNavigation||i.initialNavigation(),n.setUpPreloading(),r.init(),i.resetRootComponentType(o.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}}]),t}()).\u0275fac=function(t){return new(t||Da)(s.Pb(s.r))},Da.\u0275prov=s.Eb({token:Da,factory:Da.\u0275fac}),Da);function La(t){return t.appInitializer.bind(t)}function Ma(t){return t.bootstrapListener.bind(t)}var Fa=new s.q("Router Initializer"),Va=o("D0XW"),Ua=o("VRyK"),qa=o("w1tV");function Ba(t,e){return function(n){return n.lift(new Ha(t,e))}}var Ha=function(){function t(e,n){f(this,t),this.compare=e,this.keySelector=n}return p(t,[{key:"call",value:function(t,e){return e.subscribe(new Ka(t,this.compare,this.keySelector))}}]),t}(),Ka=function(t){v(n,t);var e=g(n);function n(t,r,i){var o;return f(this,n),(o=e.call(this,t)).keySelector=i,o.hasKey=!1,"function"==typeof r&&(o.compare=r),o}return p(n,[{key:"compare",value:function(t,e){return t===e}},{key:"_next",value:function(t){var e;try{var n=this.keySelector;e=n?n(t):t}catch(i){return this.destination.error(i)}var r=!1;if(this.hasKey)try{r=(0,this.compare)(this.key,e)}catch(i){return this.destination.error(i)}else this.hasKey=!0;r||(this.key=e,this.destination.next(t))}}]),n}(Un.a),za=function(){function t(e,n){f(this,t),this.observables=e,this.project=n}return p(t,[{key:"call",value:function(t,e){return e.subscribe(new Wa(t,this.observables,this.project))}}]),t}(),Wa=function(t){v(n,t);var e=g(n);function n(t,r,i){var o;f(this,n),(o=e.call(this,t)).observables=r,o.project=i,o.toRespond=[];var a=r.length;o.values=new Array(a);for(var s=0;s<a;s++)o.toRespond.push(s);for(var u=0;u<a;u++)o.add(Kn(b(o),r[u],void 0,u));return o}return p(n,[{key:"notifyNext",value:function(t,e,n){this.values[n]=e;var r=this.toRespond;if(r.length>0){var i=r.indexOf(n);-1!==i&&r.splice(i,1)}}},{key:"notifyComplete",value:function(){}},{key:"_next",value:function(t){if(0===this.toRespond.length){var e=[t].concat(i(this.values));this.project?this._tryProject(e):this.destination.next(e)}}},{key:"_tryProject",value:function(t){var e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}]),n}(qn),Ga=function(){function t(e){f(this,t),this.predicate=e}return p(t,[{key:"call",value:function(t,e){return e.subscribe(new Qa(t,this.predicate))}}]),t}(),Qa=function(t){v(n,t);var e=g(n);function n(t,r){var i;return f(this,n),(i=e.call(this,t)).predicate=r,i.skipping=!0,i.index=0,i}return p(n,[{key:"_next",value:function(t){var e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)}},{key:"tryCallPredicate",value:function(t){try{var e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(n){this.destination.error(n)}}}]),n}(Un.a),Ya=o("spgP"),Ja=(o("6Uf2"),o("pxpQ")),Xa=o("qgXg"),Za=o("Ylt2"),$a=function(t){v(n,t);var e=g(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY,o=arguments.length>2?arguments[2]:void 0;return f(this,n),(t=e.call(this)).scheduler=o,t._events=[],t._infiniteTimeWindow=!1,t._bufferSize=r<1?1:r,t._windowTime=i<1?1:i,i===Number.POSITIVE_INFINITY?(t._infiniteTimeWindow=!0,t.next=t.nextInfiniteTimeWindow):t.next=t.nextTimeWindow,t}return p(n,[{key:"nextInfiniteTimeWindow",value:function(t){if(!this.isStopped){var e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}h(w(n.prototype),"next",this).call(this,t)}},{key:"nextTimeWindow",value:function(t){this.isStopped||(this._events.push(new ts(this._getNow(),t)),this._trimBufferThenGetEvents()),h(w(n.prototype),"next",this).call(this,t)}},{key:"_subscribe",value:function(t){var e,n=this._infiniteTimeWindow,r=n?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,o=r.length;if(this.closed)throw new Mn.a;if(this.isStopped||this.hasError?e=Nr.a.EMPTY:(this.observers.push(t),e=new Za.a(this,t)),i&&t.add(t=new Ja.a(t,i)),n)for(var a=0;a<o&&!t.closed;a++)t.next(r[a]);else for(var s=0;s<o&&!t.closed;s++)t.next(r[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),e}},{key:"_getNow",value:function(){return(this.scheduler||Xa.a).now()}},{key:"_trimBufferThenGetEvents",value:function(){for(var t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length,o=0;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r}}]),n}(Ln.a),ts=function t(e,n){f(this,t),this.time=e,this.value=n};function es(t,e,n){var r;return r=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},function(t){return t.lift(function(t){var e,n,r=t.bufferSize,i=void 0===r?Number.POSITIVE_INFINITY:r,o=t.windowTime,a=void 0===o?Number.POSITIVE_INFINITY:o,s=t.refCount,u=t.scheduler,c=0,l=!1,h=!1;return function(t){var r;c++,!e||l?(l=!1,e=new $a(i,a,u),r=e.subscribe(this),n=t.subscribe({next:function(t){e.next(t)},error:function(t){l=!0,e.error(t)},complete:function(){h=!0,n=void 0,e.complete()}}),h&&(n=void 0)):r=e.subscribe(this),this.add(function(){c--,r.unsubscribe(),r=void 0,n&&!h&&s&&0===c&&(n.unsubscribe(),n=void 0,e=void 0)})}}(r))}}function ns(t,e){return e?er(function(){return t},e):er(function(){return t})}var rs,is=o("tf+s"),os=new s.q("angularfire2.auth.use-emulator"),as=new s.q("angularfire2.auth.settings"),ss=new s.q("angularfire2.auth.tenant-id"),us=new s.q("angularfire2.auth.langugage-code"),cs=new s.q("angularfire2.auth.use-device-language"),ls=new s.q("angularfire.auth.persistence"),hs=((rs=function t(e,n,r,i,a,s,u,c,l,h){f(this,t);var d=new Ya.d(i),p=Object(Ya.h)(d),v=new Ln.a,y=Object(Rn.a)(void 0).pipe(Object(Ja.b)(d.outsideAngular),er(function(){return i.runOutsideAngular(function(){return o.e(5).then(o.bind(null,"6nsN"))})}),Object(Jt.a)(function(){return Object(Ya.g)(e,i,n)}),Object(Jt.a)(function(t){return i.runOutsideAngular(function(){var e=a,n=s;return Object(Ya.f)(t.name+".auth","AngularFireAuth",t,function(){var r=i.runOutsideAngular(function(){return t.auth()});return e&&r.useEmulator("http://"+e.join(":")),u&&(r.tenantId=u),r.languageCode=c,l&&r.useDeviceLanguage(),n&&(r.settings=n),h&&r.setPersistence(h),r},[e,u,c,l,n,h])})}),es({bufferSize:1,refCount:!1}));if(st(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Object(Rn.a)(null);else{y.pipe(jr()).subscribe();var g=y.pipe(er(function(t){return t.getRedirectResult().then(function(t){return t},function(){return null})}),p,es({bufferSize:1,refCount:!1})),m=function(t){return new Qt.a(function(e){return{unsubscribe:i.runOutsideAngular(function(){return t(e)})}})},b=y.pipe(er(function(t){return m(t.onAuthStateChanged.bind(t))})),_=y.pipe(er(function(t){return m(t.onIdTokenChanged.bind(t))}));this.authState=g.pipe(ns(b),Object(is.a)(d.outsideAngular),Object(Ja.b)(d.insideAngular)),this.user=g.pipe(ns(_),Object(is.a)(d.outsideAngular),Object(Ja.b)(d.insideAngular)),this.idToken=this.user.pipe(er(function(t){return t?Object(Zt.a)(t.getIdToken()):Object(Rn.a)(null)})),this.idTokenResult=this.user.pipe(er(function(t){return t?Object(Zt.a)(t.getIdTokenResult()):Object(Rn.a)(null)})),this.credential=Object(Ua.a)(g,v,this.authState.pipe(fr(function(t){return!t}))).pipe(Object(Jt.a)(function(t){return(null==t?void 0:t.user)?t:null}),Object(is.a)(d.outsideAngular),Object(Ja.b)(d.insideAngular))}return Object(Ya.i)(this,y,i,{spy:{apply:function(t,e,n){(t.startsWith("signIn")||t.startsWith("createUser"))&&n.then(function(t){return v.next(t)})}}})}).\u0275fac=function(t){return new(t||rs)(s.Pb(Ya.c),s.Pb(Ya.b,8),s.Pb(s.B),s.Pb(s.z),s.Pb(os,8),s.Pb(as,8),s.Pb(ss,8),s.Pb(us,8),s.Pb(cs,8),s.Pb(ls,8))},rs.\u0275prov=Object(s.Eb)({factory:function(){return new rs(Object(s.Pb)(Ya.c),Object(s.Pb)(Ya.b,8),Object(s.Pb)(s.B),Object(s.Pb)(s.z),Object(s.Pb)(os,8),Object(s.Pb)(as,8),Object(s.Pb)(ss,8),Object(s.Pb)(us,8),Object(s.Pb)(cs,8),Object(s.Pb)(ls,8))},token:rs,providedIn:"any"}),rs);Object(Ya.e)(hs,[{app:null,applyActionCode:null,checkActionCode:null,confirmPasswordReset:null,createUserWithEmailAndPassword:null,currentUser:null,fetchSignInMethodsForEmail:null,isSignInWithEmailLink:null,getRedirectResult:null,languageCode:null,settings:null,onAuthStateChanged:null,onIdTokenChanged:null,sendSignInLinkToEmail:null,sendPasswordResetEmail:null,setPersistence:null,signInAndRetrieveDataWithCredential:null,signInAnonymously:null,signInWithCredential:null,signInWithCustomToken:null,signInWithEmailAndPassword:null,signInWithPhoneNumber:null,signInWithEmailLink:null,signInWithPopup:null,signInWithRedirect:null,signOut:null,tenantId:null,updateCurrentUser:null,useDeviceLanguage:null,useEmulator:null,verifyPasswordResetCode:null}]);var fs,ds=((fs=function t(){f(this,t)}).\u0275mod=s.Gb({type:fs}),fs.\u0275inj=s.Fb({factory:function(t){return new(t||fs)},providers:[hs]}),fs),ps=o("Jgta");function vs(t){return null==t}function ys(t){return"function"==typeof t.set}function gs(t,e){return ys(e)?e:t.ref(e)}function ms(t,e){if("string"==typeof t)return e.stringCase();if(ys(t))return e.firebaseCase();if("function"==typeof t.exportVal)return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof t)}function bs(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"on",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Va.a;return new Qt.a(function(i){var o;return o=t[n](e,function(t,e){r.schedule(function(){i.next({snapshot:t,prevKey:e})}),"once"===n&&r.schedule(function(){return i.complete()})},function(t){r.schedule(function(){return i.error(t)})}),"on"===n?{unsubscribe:function(){null!=o&&t.off(e,o)}}:{unsubscribe:function(){}}}).pipe(Object(Jt.a)(function(t){var n=t.snapshot,r=t.prevKey,i=null;return n.exists()&&(i=n.key),{type:e,payload:n,prevKey:r,key:i}}),Object(qa.a)())}function _s(t,e){for(var n=t.length,r=0;r<n;r++)if(t[r].payload.key===e)return r;return-1}function ws(t,e){var n=e.payload,r=e.prevKey,o=e.key,a=_s(t,o),s=function(t,e){if(vs(e))return 0;var n=_s(t,e);return-1===n?t.length:n+1}(t,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){var u=null;e.payload.forEach(function(e){var n={payload:e,type:"value",prevKey:u,key:e.key};return u=e.key,t=[].concat(i(t),[n]),!1})}return t;case"child_added":if(a>-1){var c=t[a-1];(c&&c.key||null)!==r&&(t=t.filter(function(t){return t.payload.key!==n.key})).splice(s,0,e)}else{if(null==r)return[e].concat(i(t));(t=t.slice()).splice(s,0,e)}return t;case"child_removed":return t.filter(function(t){return t.payload.key!==n.key});case"child_changed":return t.map(function(t){return t.payload.key===o?e:t});case"child_moved":if(a>-1){var l=t.splice(a,1)[0];return(t=t.slice()).splice(s,0,l),t}return t;default:return t}}function ks(t){return(vs(t)||0===t.length)&&(t=["child_added","child_removed","child_changed","child_moved"]),t}function Cs(t,e,n){return function(t,e,n){return bs(t,"value","once",n).pipe(er(function(r){var i=[Object(Rn.a)(r)];return e.forEach(function(e){return i.push(bs(t,e,"on",n))}),Object(Ua.a).apply(void 0,i).pipe(cr(ws,[]))}),Ba())}(t,e=ks(e),n)}function Os(t,e,n){var r=(e=ks(e)).map(function(e){return bs(t,e,"on",n)});return Object(Ua.a).apply(void 0,i(r))}function Es(t,e){return function(n,r){return ms(n,{stringCase:function(){return t.child(n)[e](r)},firebaseCase:function(){return n[e](r)},snapshotCase:function(){return n.ref[e](r)}})}}function Ss(t,e){return function(){return bs(t,"value","on",e)}}var Is,Ts,xs=new s.q("angularfire2.realtimeDatabaseURL"),As=new s.q("angularfire2.database.use-emulator"),js=((Ts=function(){function n(t,e,r,o,a,s,u){f(this,n),this.schedulers=new Ya.d(a),this.keepUnstableUntilFirst=Object(Ya.h)(this.schedulers);var c=s,l=Object(Ya.g)(t,a,e);!ps.a.auth&&u&&Object(Ya.j)(),this.database=Object(Ya.f)("".concat(l.name,".database.").concat(r),"AngularFireDatabase",l,function(){var t=a.runOutsideAngular(function(){return l.database(r||void 0)});return c&&t.useEmulator.apply(t,i(c)),t},[c])}return p(n,[{key:"list",value:function(n,r){var o=this,a=this.schedulers.ngZone.runOutsideAngular(function(){return gs(o.database,n)}),s=a;return r&&(s=r(a)),function(n,r){var o,a=r.schedulers.outsideAngular,s=r.schedulers.ngZone.run(function(){return n.ref});return{query:n,update:Es(s,"update"),set:Es(s,"set"),push:function(t){return s.push(t)},remove:(o=s,function(t){return t?ms(t,{stringCase:function(){return o.child(t).remove()},firebaseCase:function(){return t.remove()},snapshotCase:function(){return t.ref.remove()}}):o.remove()}),snapshotChanges:function(t){return Cs(n,t,a).pipe(r.keepUnstableUntilFirst)},stateChanges:function(t){return Os(n,t,a).pipe(r.keepUnstableUntilFirst)},auditTrail:function(t){return function(t,n,r){return function(t,n,r){return function(t,e){return bs(t,"value","on",e).pipe(Object(Jt.a)(function(t){var e;return t.payload.forEach(function(t){return e=t.key,!1}),{data:t,lastKeyToLoad:e}}))}(t,r).pipe(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){var n;return"function"==typeof e[e.length-1]&&(n=e.pop()),t.lift(new za(e,n))}}(n),Object(Jt.a)(function(t){var n=e(t,2),r=n[0],i=n[1],o=r.lastKeyToLoad,a=i.map(function(t){return t.key});return{actions:i,lastKeyToLoad:o,loadedKeys:a}}),(i=function(t){return-1===t.loadedKeys.indexOf(t.lastKeyToLoad)},function(t){return t.lift(new Ga(i))}),Object(Jt.a)(function(t){return t.actions}));var i}(t,Os(t,n).pipe(cr(function(t,e){return[].concat(i(t),[e])},[])),r)}(n,t,a).pipe(r.keepUnstableUntilFirst)},valueChanges:function(e,i){return Cs(n,e,a).pipe(Object(Jt.a)(function(e){return e.map(function(e){return i&&i.idField?Object.assign(Object.assign({},e.payload.val()),t({},i.idField,e.key)):e.payload.val()})}),r.keepUnstableUntilFirst)}}}(s,this)}},{key:"object",value:function(t){var e,n,r=this,i=this.schedulers.ngZone.runOutsideAngular(function(){return gs(r.database,t)});return n=this,{query:e=i,snapshotChanges:function(){return Ss(e,n.schedulers.outsideAngular)().pipe(n.keepUnstableUntilFirst)},update:function(t){return e.ref.update(t)},set:function(t){return e.ref.set(t)},remove:function(){return e.ref.remove()},valueChanges:function(){return Ss(e,n.schedulers.outsideAngular)().pipe(n.keepUnstableUntilFirst,Object(Jt.a)(function(t){return t.payload.exists()?t.payload.val():null}))}}}},{key:"createPushId",value:function(){var t=this;return this.schedulers.ngZone.runOutsideAngular(function(){return t.database.ref()}).push().key}}]),n}()).\u0275fac=function(t){return new(t||Ts)(s.Pb(Ya.c),s.Pb(Ya.b,8),s.Pb(xs,8),s.Pb(s.B),s.Pb(s.z),s.Pb(As,8),s.Pb(os,8))},Ts.\u0275prov=Object(s.Eb)({factory:function(){return new Ts(Object(s.Pb)(Ya.c),Object(s.Pb)(Ya.b,8),Object(s.Pb)(xs,8),Object(s.Pb)(s.B),Object(s.Pb)(s.z),Object(s.Pb)(As,8),Object(s.Pb)(os,8))},token:Ts,providedIn:"any"}),Ts),Ps=((Is=function(){function t(e){f(this,t),this.afs=e,this.customers_ar=[],this.realCustomers_ar=[],this.showSidebar=!0,this.getCustomers()}return p(t,[{key:"getCustomersArrayData",value:function(){return this.customers_ar}},{key:"addUser",value:function(t){t.password="*****",this.afs.list("users").push(t)}},{key:"addCustomer",value:function(t){this.afs.list("customers").push(t)}},{key:"delCustomer",value:function(t){this.afs.list("customers/"+t).remove()}},{key:"editCustomer",value:function(t,e){this.afs.object("customers/"+t).update(e)}},{key:"getObserCustomer",value:function(){var t=localStorage.fb_user;return this.afs.list("customers",function(e){return e.orderByChild("user_id").equalTo(t)}).snapshotChanges()}},{key:"getCustomers",value:function(){var t=this;this.getObserCustomer().subscribe(function(e){t.customers_ar.splice(0,t.customers_ar.length),e.map(function(e){var n=e.payload.val();n.id=e.payload.key,t.customers_ar.push(n)}),t.realCustomers_ar=i(t.customers_ar),console.log(t.customers_ar)})}},{key:"filterArrayBy",value:function(t,e){var n,r=this,o=this.realCustomers_ar.filter(function(n){return n[e].includes(r.capitalizeFirstLetter(t))});(n=this.customers_ar).splice.apply(n,[0,this.customers_ar.length].concat(i(o)))}},{key:"capitalizeFirstLetter",value:function(t){return t.charAt(0).toUpperCase()+t.slice(1)}}]),t}()).\u0275fac=function(t){return new(t||Is)(s.Pb(js))},Is.\u0275prov=s.Eb({token:Is,factory:Is.\u0275fac,providedIn:"root"}),Is),Ns=["f"];function Ds(t,e){1&t&&(s.Lb(0,"small",24),s.gc(1,"You must fill your name"),s.Kb())}function Rs(t,e){1&t&&(s.Lb(0,"small",24),s.gc(1,"You must fill your last"),s.Kb())}function Ls(t,e){1&t&&(s.Lb(0,"small",24),s.gc(1,"Enter a valid email"),s.Kb())}function Ms(t,e){1&t&&(s.Lb(0,"small",24),s.gc(1,"Enter a valid phone"),s.Kb())}var Fs,Vs,Us,qs,Bs,Hs=function(){return{background:"silver"}},Ks=((Fs=function(){function t(e,n){f(this,t),this.dbFb=e,this.router=n}return p(t,[{key:"ngOnInit",value:function(){}},{key:"onSub",value:function(){if("VALID"==this.myForm.form.status){var t=this.myForm.form.value;console.log(t),t.user_id=localStorage.fb_user,t.first=this.dbFb.capitalizeFirstLetter(t.first),t.last=this.dbFb.capitalizeFirstLetter(t.last),this.dbFb.addCustomer(t),alert("success"),this.router.navigate(["/admin"])}}}]),t}()).\u0275fac=function(t){return new(t||Fs)(s.Ib(Ps),s.Ib(ca))},Fs.\u0275cmp=s.Cb({type:Fs,selectors:[["app-add-customer"]],viewQuery:function(t,e){var n;1&t&&s.jc(Ns,!0),2&t&&s.Zb(n=s.Tb())&&(e.myForm=n.first)},decls:46,vars:7,consts:[[1,"container"],[1,"p-2","my-4"],[1,"col-lg-6",3,"ngSubmit"],["f","ngForm"],[1,"row"],[1,"col-lg-6"],["name","first","ngModel","","required","","type","text",1,"form-control","mt-2"],["firstInput","ngModel"],["class","text-danger",4,"ngIf"],["name","last","ngModel","","required","","type","text",1,"form-control","mt-2"],["lastInput","ngModel"],[1,"col-lg-6","mt-3"],["name","email","ngModel","","required","","email","","type","text",1,"form-control","mt-2"],["emailInput","ngModel"],["name","phone","ngModel","","required","","minlength","5","type","tel",1,"form-control","mt-2"],["phoneInput","ngModel"],[1,"col-12","mt-3"],["name","address","ngModel","","rows","2",1,"form-control"],["addressInput","ngModel"],["name","notes","ngModel","","rows","4",1,"form-control"],["notesInput","ngModel"],[1,"mt-5","d-flex","justify-content-between"],["routerLink","/admin",1,"btn","btn-dark","me-2"],[1,"btn","btn-info"],[1,"text-danger"]],template:function(t,e){if(1&t&&(s.Lb(0,"div",0),s.Lb(1,"div",1),s.Lb(2,"h2"),s.gc(3,"Add Customer Form"),s.Kb(),s.Kb(),s.Lb(4,"form",2,3),s.Sb("ngSubmit",function(){return e.onSub()}),s.Lb(6,"div",4),s.Lb(7,"div",5),s.Lb(8,"label"),s.gc(9,"*First name"),s.Kb(),s.Jb(10,"input",6,7),s.fc(12,Ds,2,0,"small",8),s.Kb(),s.Lb(13,"div",5),s.Lb(14,"label"),s.gc(15,"*Last name"),s.Kb(),s.Jb(16,"input",9,10),s.fc(18,Rs,2,0,"small",8),s.Kb(),s.Lb(19,"div",11),s.Lb(20,"label"),s.gc(21,"*Email"),s.Kb(),s.Jb(22,"input",12,13),s.fc(24,Ls,2,0,"small",8),s.Kb(),s.Lb(25,"div",11),s.Lb(26,"label"),s.gc(27,"*Phone"),s.Kb(),s.Jb(28,"input",14,15),s.fc(30,Ms,2,0,"small",8),s.Kb(),s.Lb(31,"div",16),s.Lb(32,"label"),s.gc(33,"Address"),s.Kb(),s.Jb(34,"textarea",17,18),s.Kb(),s.Lb(36,"div",16),s.Lb(37,"label"),s.gc(38,"Notes"),s.Kb(),s.Jb(39,"textarea",19,20),s.Kb(),s.Kb(),s.Lb(41,"div",21),s.Lb(42,"a",22),s.gc(43,"Cancel"),s.Kb(),s.Lb(44,"button",23),s.gc(45,"Save"),s.Kb(),s.Kb(),s.Kb(),s.Kb()),2&t){var n=s.ac(11),r=s.ac(17),i=s.ac(23),o=s.ac(29);s.yb(1),s.ec(s.Xb(6,Hs)),s.yb(11),s.Vb("ngIf",n.touched&&n.invalid),s.yb(6),s.Vb("ngIf",r.touched&&r.invalid),s.yb(6),s.Vb("ngIf",i.touched&&i.invalid),s.yb(6),s.Vb("ngIf",o.touched&&o.invalid)}},directives:[Sn,Fe,kn,se,Me,En,Tn,nt,An,Pn,ha],styles:["input.ng-touched.ng-invalid[_ngcontent-%COMP%]{border:1px solid #dc3848}"]}),Fs),zs=o("mrSG"),Ws=((Us=function(){function t(e,n){f(this,t),this.afAuth=e,this.router=n,this.user={}}return p(t,[{key:"logInFb",value:function(t,e){return Object(zs.b)(this,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.afAuth.signInWithEmailAndPassword(t,e);case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},n,this)}))}},{key:"signUpNewUser",value:function(t){return Object(zs.b)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.afAuth.createUserWithEmailAndPassword(t.email,t.password);case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",(console.log(e.t0),e.t0));case 9:case"end":return e.stop()}},e,this,[[0,6]])}))}},{key:"getUserData",value:function(){return this.user}},{key:"checkUserAuth",value:function(){var t=this;this.afAuth.authState.subscribe(function(e){if(e)for(var n in e)t.user[n]=e[n];else alert("You must login first to see the admin panel"),t.router.navigate(["/"]);console.log(e)})}},{key:"logOut",value:function(){return Object(zs.b)(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.afAuth.signOut();case 2:localStorage.removeItem("fb_user"),this.router.navigate(["/"]),setTimeout(function(){window.location.reload()},400);case 5:case"end":return t.stop()}},t,this)}))}}]),t}()).\u0275fac=function(t){return new(t||Us)(s.Pb(hs),s.Pb(ca))},Us.\u0275prov=s.Eb({token:Us,factory:Us.\u0275fac,providedIn:"root"}),Us),Gs=((Vs=function(){function t(e,n){f(this,t),this.authSer=e,this.dbFb=n,this.user={}}return p(t,[{key:"toggleNavOnMobile",value:function(){this.dbFb.showSidebar=!this.dbFb.showSidebar,console.log(this.dbFb.showSidebar)}},{key:"ngOnInit",value:function(){this.user=this.authSer.getUserData()}},{key:"logout",value:function(){this.authSer.logOut()}}]),t}()).\u0275fac=function(t){return new(t||Vs)(s.Ib(Ws),s.Ib(Ps))},Vs.\u0275cmp=s.Cb({type:Vs,selectors:[["app-header-admin"]],decls:13,vars:1,consts:[[1,"container-fluid","bg-dark","text-light","shadow"],[1,"d-flex","justify-content-between","align-items-center"],[1,"col-lg-3"],[1,"mt-2","toggleNavOnMobile",3,"click"],[1,"text-end","col-lg-9"],["aria-hidden","true",1,"headerIcon","fa","fa-user-circle","me-2"],[1,"hideInMobile"],[1,"badge","ms-3","btn-danger",3,"click"],["aria-hidden","true",1,"fa","fa-sign-out"]],template:function(t,e){1&t&&(s.Lb(0,"div",0),s.Lb(1,"div",1),s.Lb(2,"div",2),s.Lb(3,"h3",3),s.Sb("click",function(){return e.toggleNavOnMobile()}),s.gc(4,"CRM APP"),s.Kb(),s.Kb(),s.Lb(5,"nav",4),s.Lb(6,"span"),s.Jb(7,"i",5),s.Lb(8,"span",6),s.gc(9),s.Kb(),s.Kb(),s.Lb(10,"button",7),s.Sb("click",function(){return e.logout()}),s.Jb(11,"i",8),s.gc(12," Logout"),s.Kb(),s.Kb(),s.Kb(),s.Kb()),2&t&&(s.yb(9),s.hc(e.user.email||"Loading..."))},styles:["nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;padding:0 12px}nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#ffc108}nav[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{color:#fff700;font-weight:700}.headerIcon[_ngcontent-%COMP%]:hover{color:#ffc108}@media screen and (max-width:992px){.hideInMobile[_ngcontent-%COMP%]{display:none}.toggleNavOnMobile[_ngcontent-%COMP%]:active{color:#ffc108}}"]}),Vs),Qs=function(){return["active"]},Ys=((qs=function(){function t(e){f(this,t),this.dbFb=e,this.showSideNavbar=!1}return p(t,[{key:"ngOnInit",value:function(){console.log(this.showSideNavbar),this.showSideNavbar=this.dbFb.showSidebar,console.log(this.showSideNavbar)}}]),t}()).\u0275fac=function(t){return new(t||qs)(s.Ib(Ps))},qs.\u0275cmp=s.Cb({type:qs,selectors:[["app-side-nav-admin"]],decls:13,vars:4,consts:[[1,"bg-dark","side_nav","shadow"],["routerLink","/admin",3,"routerLinkActive"],["aria-hidden","true",1,"fa","fa-users"],["routerLink","/admin/contacts",3,"routerLinkActive"],["aria-hidden","true",1,"fa","fa-address-book"],["routerLink","/admin/leads"],["aria-hidden","true",1,"fa","fa-id-card-o"],["routerLink","/admin/reports"],["aria-hidden","true",1,"fa","fa-flag"]],template:function(t,e){1&t&&(s.Lb(0,"div",0),s.Lb(1,"a",1),s.Jb(2,"i",2),s.gc(3," Customers"),s.Kb(),s.Lb(4,"a",3),s.Jb(5,"i",4),s.gc(6," Contacts"),s.Kb(),s.Lb(7,"a",5),s.Jb(8,"i",6),s.gc(9," Leads"),s.Kb(),s.Lb(10,"a",7),s.Jb(11,"i",8),s.gc(12," Reports"),s.Kb(),s.Kb()),2&t&&(s.yb(1),s.Vb("routerLinkActive",s.Xb(2,Qs)),s.yb(3),s.Vb("routerLinkActive",s.Xb(3,Qs)))},directives:[ha,ga],styles:["a[_ngcontent-%COMP%]{padding:12px;color:#fff;text-decoration:none;display:block;border-bottom:2px solid #fff}a[_ngcontent-%COMP%]:hover{background-color:#5a5a5a}a[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{color:#ffc108}a[_ngcontent-%COMP%]:active{background:#e5e5e5;box-shadow:inset 0 0 5px #c1c1c1;outline:none}@media screen and (min-width:992px){.side_nav[_ngcontent-%COMP%]{min-height:calc(100vh - 70px)}}"]}),qs),Js=function(t,e){return{"d-block":t,"d-none":e}},Xs=((Bs=function(){function t(e,n){f(this,t),this.authSer=e,this.dbFb=n,this.showSideNavbar=!1}return p(t,[{key:"ngOnInit",value:function(){this.authSer.checkUserAuth(),this.showSideNavbar=this.dbFb.showSidebar,console.log(this.showSideNavbar)}}]),t}()).\u0275fac=function(t){return new(t||Bs)(s.Ib(Ws),s.Ib(Ps))},Bs.\u0275cmp=s.Cb({type:Bs,selectors:[["app-app-admin"]],decls:7,vars:4,consts:[[1,"container-fluid"],[1,"row"],[1,"col-lg-2","p-0"],[3,"ngClass"],[1,"col-lg-10"]],template:function(t,e){1&t&&(s.Jb(0,"app-header-admin"),s.Lb(1,"div",0),s.Lb(2,"div",1),s.Lb(3,"div",2),s.Jb(4,"app-side-nav-admin",3),s.Kb(),s.Lb(5,"div",4),s.Jb(6,"router-outlet"),s.Kb(),s.Kb(),s.Kb()),2&t&&(s.yb(4),s.Vb("ngClass",s.Yb(1,Js,e.showSideNavbar,!e.showSideNavbar)))},directives:[Gs,Ys,Z,ma],styles:[""]}),Bs);function Zs(t,e){if(1&t&&(s.Lb(0,"tr"),s.Lb(1,"td"),s.gc(2),s.Kb(),s.Lb(3,"td"),s.gc(4),s.Kb(),s.Lb(5,"td"),s.gc(6),s.Kb(),s.Lb(7,"td"),s.gc(8),s.Kb(),s.Lb(9,"td"),s.gc(10),s.Kb(),s.Lb(11,"td"),s.gc(12),s.Kb(),s.Kb()),2&t){var n=e.$implicit,r=e.index;s.yb(2),s.ic(" ",r+1," "),s.yb(2),s.hc(n.name),s.yb(2),s.hc(n.email),s.yb(2),s.hc(n.city),s.yb(2),s.hc(n.phone),s.yb(2),s.hc(n.birth)}}var $s,tu=(($s=function(){function t(e){f(this,t),this.afs=e,this._ar=[]}return p(t,[{key:"ngOnInit",value:function(){setTimeout(function(){var t=document.querySelector("h2");(null==t?void 0:t.classList.contains("slideOff"))&&t.classList.toggle("slideOn")},200),this.getListContactUser()}},{key:"getObserContactsUser",value:function(){return this.afs.list("users").snapshotChanges()}},{key:"getListContactUser",value:function(){var t=this;this.getObserContactsUser().subscribe(function(e){t._ar.splice(0,t._ar.length),e.map(function(e){var n=e.payload.val();t._ar.push(n)})})}}]),t}()).\u0275fac=function(t){return new(t||$s)(s.Ib(js))},$s.\u0275cmp=s.Cb({type:$s,selectors:[["app-contact-list"]],decls:23,vars:1,consts:[[1,"container"],[1,"py-2","px-3","my-4"],[1,"slideOff"],["aria-hidden","true",1,"fa","fa-address-book"],[1,"mt-4"],[1,"table","table-striped","table-bordered"],[4,"ngFor","ngForOf"]],template:function(t,e){1&t&&(s.Lb(0,"div",0),s.Lb(1,"div",1),s.Lb(2,"h2",2),s.Jb(3,"i",3),s.gc(4," Contacts "),s.Kb(),s.Kb(),s.Kb(),s.Lb(5,"div",4),s.Lb(6,"table",5),s.Lb(7,"thead"),s.Lb(8,"tr"),s.Lb(9,"th"),s.gc(10,"#"),s.Kb(),s.Lb(11,"th"),s.gc(12,"Name"),s.Kb(),s.Lb(13,"th"),s.gc(14,"Email"),s.Kb(),s.Lb(15,"th"),s.gc(16,"City"),s.Kb(),s.Lb(17,"th"),s.gc(18,"Phone"),s.Kb(),s.Lb(19,"th"),s.gc(20,"Birth year"),s.Kb(),s.Kb(),s.Kb(),s.Lb(21,"tbody"),s.fc(22,Zs,13,6,"tr",6),s.Kb(),s.Kb(),s.Kb()),2&t&&(s.yb(22),s.Vb("ngForOf",e._ar))},directives:[tt],styles:[".slideOff[_ngcontent-%COMP%]{transform:scale(0);opacity:0;transition:all .3s ease-out}.slideOn[_ngcontent-%COMP%]{transform:scale(1);opacity:1;transition:all .3s ease-in}"]}),$s),eu=["f"];function nu(t,e){1&t&&(s.Lb(0,"small",25),s.gc(1,"* You must fill your name"),s.Kb())}function ru(t,e){1&t&&(s.Lb(0,"small",25),s.gc(1,"* You must fill your name"),s.Kb())}function iu(t,e){1&t&&(s.Lb(0,"small",25),s.gc(1,"* Enter valid email"),s.Kb())}function ou(t,e){1&t&&(s.Lb(0,"small",25),s.gc(1,"* Enter valid phone"),s.Kb())}var au,su,uu=function(){return{background:"silver"}},cu=((au=function(){function t(e,n,r,i){f(this,t),this.afs=e,this.route=n,this.dbFb=r,this.router=i,this.user={}}return p(t,[{key:"ngOnInit",value:function(){this.getUserInfo()}},{key:"onSub",value:function(){var t=this.route.snapshot.paramMap.get("id");if(console.log(this.myForm.form),"VALID"==this.myForm.form.status){var e=this.myForm.form.value;e.user_id=localStorage.fb_user,e.first=this.dbFb.capitalizeFirstLetter(e.first),e.last=this.dbFb.capitalizeFirstLetter(e.last),this.dbFb.editCustomer(t,e),alert("Customer updated!"),this.router.navigate(["/admin"])}}},{key:"getUserInfoObser",value:function(){var t=this.route.snapshot.paramMap.get("id");return this.afs.list("customers/"+t).snapshotChanges()}},{key:"getUserInfo",value:function(){var t=this;this.getUserInfoObser().subscribe(function(e){console.log(e),e.map(function(e){t.user[e.key]=e.payload.val()}),console.log(t.user)})}}]),t}()).\u0275fac=function(t){return new(t||au)(s.Ib(js),s.Ib(Ui),s.Ib(Ps),s.Ib(ca))},au.\u0275cmp=s.Cb({type:au,selectors:[["app-customer-edit"]],viewQuery:function(t,e){var n;1&t&&s.jc(eu,!0),2&t&&s.Zb(n=s.Tb())&&(e.myForm=n.first)},decls:47,vars:13,consts:[[1,"container"],[1,"py-2","px-3","my-4"],["aria-hidden","true",1,"fa","fa-user"],[1,"col-lg-6",3,"ngSubmit"],["f","ngForm"],[1,"row"],[1,"col-lg-6"],["name","first","required","","type","text",1,"form-control","mt-2",3,"ngModel"],["firstInput","ngModel"],["class","text-danger",4,"ngIf"],["name","last","required","","type","text",1,"form-control","mt-2",3,"ngModel"],["lastInput","ngModel"],[1,"col-lg-6","mt-3"],["name","email","required","","email","","type","text",1,"form-control","mt-2",3,"ngModel"],["emailInput","ngModel"],["name","phone","required","","minlength","5","type","tel",1,"form-control","mt-2",3,"ngModel"],["phoneInput","ngModel"],[1,"col-12","mt-3"],["name","address","rows","2",1,"form-control",3,"ngModel"],["addressInput","ngModel"],["name","notes","rows","4",1,"form-control",3,"ngModel"],["notesInput","ngModel"],[1,"mt-5","d-flex","justify-content-between"],["routerLink","/admin",1,"btn","btn-dark","me-2"],[1,"btn","btn-warning"],[1,"text-danger"]],template:function(t,e){if(1&t&&(s.Lb(0,"div",0),s.Lb(1,"div",1),s.Lb(2,"h2"),s.Jb(3,"i",2),s.gc(4," Edit Customer"),s.Kb(),s.Kb(),s.Lb(5,"form",3,4),s.Sb("ngSubmit",function(){return e.onSub()}),s.Lb(7,"div",5),s.Lb(8,"div",6),s.Lb(9,"label"),s.gc(10,"*First name"),s.Kb(),s.Jb(11,"input",7,8),s.fc(13,nu,2,0,"small",9),s.Kb(),s.Lb(14,"div",6),s.Lb(15,"label"),s.gc(16,"*Last name"),s.Kb(),s.Jb(17,"input",10,11),s.fc(19,ru,2,0,"small",9),s.Kb(),s.Lb(20,"div",12),s.Lb(21,"label"),s.gc(22,"*Email"),s.Kb(),s.Jb(23,"input",13,14),s.fc(25,iu,2,0,"small",9),s.Kb(),s.Lb(26,"div",12),s.Lb(27,"label"),s.gc(28,"*Phone"),s.Kb(),s.Jb(29,"input",15,16),s.fc(31,ou,2,0,"small",9),s.Kb(),s.Lb(32,"div",17),s.Lb(33,"label"),s.gc(34,"Address"),s.Kb(),s.Jb(35,"textarea",18,19),s.Kb(),s.Lb(37,"div",17),s.Lb(38,"label"),s.gc(39,"Notes"),s.Kb(),s.Jb(40,"textarea",20,21),s.Kb(),s.Kb(),s.Lb(42,"div",22),s.Lb(43,"a",23),s.gc(44,"Cancel"),s.Kb(),s.Lb(45,"button",24),s.gc(46,"Update"),s.Kb(),s.Kb(),s.Kb(),s.Kb()),2&t){var n=s.ac(12),r=s.ac(18),i=s.ac(24),o=s.ac(30);s.yb(1),s.ec(s.Xb(12,uu)),s.yb(10),s.Vb("ngModel",e.user.first),s.yb(2),s.Vb("ngIf",n.touched&&n.invalid),s.yb(4),s.Vb("ngModel",e.user.last),s.yb(2),s.Vb("ngIf",r.touched&&r.invalid),s.yb(4),s.Vb("ngModel",e.user.email),s.yb(2),s.Vb("ngIf",i.touched&&i.invalid),s.yb(4),s.Vb("ngModel",e.user.phone),s.yb(2),s.Vb("ngIf",o.touched&&o.invalid),s.yb(4),s.Vb("ngModel",e.user.address),s.yb(5),s.Vb("ngModel",e.user.notes)}},directives:[Sn,Fe,kn,se,Tn,Me,En,nt,An,Pn,ha],styles:[""]}),au),lu=function(){return{background:"#DDD"}},hu=((su=function(){function t(e,n){f(this,t),this.afs=e,this.route=n,this.user={}}return p(t,[{key:"ngOnInit",value:function(){this.getUserInfo()}},{key:"getUserInfoObser",value:function(){var t=this.route.snapshot.paramMap.get("id");return this.afs.list("customers/"+t).snapshotChanges()}},{key:"getUserInfo",value:function(){var t=this;this.getUserInfoObser().subscribe(function(e){console.log(e),e.map(function(e){t.user[e.key]=e.payload.val()}),console.log(t.user)})}}]),t}()).\u0275fac=function(t){return new(t||su)(s.Ib(js),s.Ib(Ui))},su.\u0275cmp=s.Cb({type:su,selectors:[["app-customer-info"]],decls:37,vars:9,consts:[[1,"container"],[1,"py-2","px-3","my-4"],["aria-hidden","true",1,"fa","fa-user"],[1,"col-lg-6"],["f","ngForm"],[1,"row"],["disabled","","name","first","type","text",1,"form-control","mt-2",3,"value"],["disabled","","name","last","type","text",1,"form-control","mt-2",3,"value"],[1,"col-lg-6","mt-3"],["disabled","","name","email","type","text",1,"form-control","mt-2",3,"value"],["disabled","","name","phone","minlength","5","type","tel",1,"form-control","mt-2",3,"value"],[1,"col-12","mt-3"],["disabled","","name","address","rows","2",1,"form-control","mt-2"],["disabled","","name","notes","rows","4",1,"form-control","mt-2"],[1,"mt-5","d-flex","justify-content-between"],["routerLink","/admin",1,"btn","btn-dark","me-2"]],template:function(t,e){1&t&&(s.Lb(0,"div",0),s.Lb(1,"div",1),s.Lb(2,"h2"),s.Jb(3,"i",2),s.gc(4,"Customer info:"),s.Kb(),s.Kb(),s.Lb(5,"form",3,4),s.Lb(7,"div",5),s.Lb(8,"div",3),s.Lb(9,"label"),s.gc(10,"*First name"),s.Kb(),s.Jb(11,"input",6),s.Kb(),s.Lb(12,"div",3),s.Lb(13,"label"),s.gc(14,"*Last name"),s.Kb(),s.Jb(15,"input",7),s.Kb(),s.Lb(16,"div",8),s.Lb(17,"label"),s.gc(18,"*Email"),s.Kb(),s.Jb(19,"input",9),s.Kb(),s.Lb(20,"div",8),s.Lb(21,"label"),s.gc(22,"*Phone"),s.Kb(),s.Jb(23,"input",10),s.Kb(),s.Lb(24,"div",11),s.Lb(25,"label"),s.gc(26,"Address"),s.Kb(),s.Lb(27,"textarea",12),s.gc(28),s.Kb(),s.Kb(),s.Lb(29,"div",11),s.Lb(30,"label"),s.gc(31,"Notes"),s.Kb(),s.Lb(32,"textarea",13),s.gc(33),s.Kb(),s.Kb(),s.Kb(),s.Lb(34,"div",14),s.Lb(35,"a",15),s.gc(36,"Back"),s.Kb(),s.Kb(),s.Kb(),s.Kb()),2&t&&(s.yb(1),s.ec(s.Xb(8,lu)),s.yb(10),s.Vb("value",e.user.first),s.yb(4),s.Vb("value",e.user.last),s.yb(4),s.Vb("value",e.user.email),s.yb(4),s.Vb("value",e.user.phone),s.yb(5),s.hc(e.user.address),s.yb(5),s.hc(e.user.notes))},directives:[Sn,Fe,kn,ha],styles:[""]}),su);function fu(t,e){1&t&&(s.Lb(0,"span"),s.gc(1,"0"),s.Kb())}function du(t,e){if(1&t){var n=s.Mb();s.Lb(0,"tr"),s.Lb(1,"td",18),s.fc(2,fu,2,0,"span",19),s.gc(3),s.Lb(4,"a",20),s.Jb(5,"i",21),s.Kb(),s.Lb(6,"a",20),s.Jb(7,"i",22),s.Kb(),s.Lb(8,"i",23),s.Sb("click",function(){s.bc(n);var t=e.$implicit;return s.Ub().delCustomer(t.id)}),s.Kb(),s.Kb(),s.Lb(9,"td"),s.gc(10),s.Kb(),s.Lb(11,"td"),s.gc(12),s.Kb(),s.Lb(13,"td"),s.gc(14),s.Kb(),s.Lb(15,"td"),s.gc(16),s.Kb(),s.Kb()}if(2&t){var r=e.$implicit,i=e.index;s.yb(2),s.Vb("ngIf",i<9),s.yb(1),s.ic("",i+1," "),s.yb(1),s.Wb("routerLink","/admin/customerInfo/",r.id,""),s.yb(2),s.Wb("routerLink","/admin/customerEdit/",r.id,""),s.yb(4),s.hc(r.first),s.yb(2),s.hc(r.last),s.yb(2),s.hc(r.phone),s.yb(2),s.hc(r.email)}}var pu,vu,yu=((vu=function(){function t(e){f(this,t),this.dbFb=e,this._ar=[]}return p(t,[{key:"ngOnInit",value:function(){setTimeout(function(){var t=document.querySelector("h2");(null==t?void 0:t.classList.contains("slideOff"))&&t.classList.toggle("slideOn")},200),this._ar=this.dbFb.getCustomersArrayData()}},{key:"delCustomer",value:function(t){confirm("Are you sure you want to delete?")&&this.dbFb.delCustomer(t)}},{key:"searchByFirstName",value:function(t){this.dbFb.filterArrayBy(t.target.value,"first")}},{key:"searchByLastName",value:function(t){this.dbFb.filterArrayBy(t.target.value,"last")}},{key:"searchByPhone",value:function(t){this.dbFb.filterArrayBy(t.target.value,"phone")}}]),t}()).\u0275fac=function(t){return new(t||vu)(s.Ib(Ps))},vu.\u0275cmp=s.Cb({type:vu,selectors:[["app-customer-list"]],decls:41,vars:1,consts:[[1,"container"],[1,"py-2","px-3","my-4"],[1,"slideOff"],["aria-hidden","true",1,"fa","fa-users"],[1,"row"],[1,"col-lg-3","d-flex"],[1,"input-group-prepend"],["id","basic-addon1",1,"input-group-text","d-block"],["aria-hidden","true",1,"fa","fa-search"],["type","text","placeholder","First name",1,"form-control",3,"input"],["type","text","placeholder","Last name",1,"form-control",3,"input"],["type","text","placeholder","Phone",1,"form-control",3,"input"],[1,"col-lg-3"],["routerLink","/admin/addCustomer",1,"btn","btn-warning","w-100"],["aria-hidden","true",1,"fa","fa-plus-circle"],[1,"table","table-striped","table-border","mt-4"],[1,"customeWidth"],[4,"ngFor","ngForOf"],[1,"w-25"],[4,"ngIf"],[3,"routerLink"],["aria-hidden","true",1,"fa","fa-eye","ms-3"],["aria-hidden","true",1,"fa","fa-pencil"],["aria-hidden","true",1,"fa","fa-trash",3,"click"]],template:function(t,e){1&t&&(s.Lb(0,"div",0),s.Lb(1,"div",1),s.Lb(2,"h2",2),s.Jb(3,"i",3),s.gc(4," Customers"),s.Kb(),s.Kb(),s.Lb(5,"div",4),s.Lb(6,"div",5),s.Lb(7,"div",6),s.Lb(8,"span",7),s.Jb(9,"i",8),s.Kb(),s.Kb(),s.Lb(10,"input",9),s.Sb("input",function(t){return e.searchByFirstName(t)}),s.Kb(),s.Kb(),s.Lb(11,"div",5),s.Lb(12,"div",6),s.Lb(13,"span",7),s.Jb(14,"i",8),s.Kb(),s.Kb(),s.Lb(15,"input",10),s.Sb("input",function(t){return e.searchByLastName(t)}),s.Kb(),s.Kb(),s.Lb(16,"div",5),s.Lb(17,"div",6),s.Lb(18,"span",7),s.Jb(19,"i",8),s.Kb(),s.Kb(),s.Lb(20,"input",11),s.Sb("input",function(t){return e.searchByPhone(t)}),s.Kb(),s.Kb(),s.Lb(21,"div",12),s.Lb(22,"a",13),s.Jb(23,"i",14),s.gc(24," Add customer"),s.Kb(),s.Kb(),s.Kb(),s.Kb(),s.Lb(25,"div"),s.Lb(26,"table",15),s.Lb(27,"thead"),s.Lb(28,"tr"),s.Lb(29,"th",16),s.gc(30,"#"),s.Kb(),s.Lb(31,"th"),s.gc(32,"First name"),s.Kb(),s.Lb(33,"th"),s.gc(34,"Last name"),s.Kb(),s.Lb(35,"th"),s.gc(36,"Phone"),s.Kb(),s.Lb(37,"th"),s.gc(38,"Email"),s.Kb(),s.Kb(),s.Kb(),s.Lb(39,"tbody"),s.fc(40,du,17,8,"tr",17),s.Kb(),s.Kb(),s.Kb()),2&t&&(s.yb(40),s.Vb("ngForOf",e._ar))},directives:[ha,tt,nt],styles:["table[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{padding:0 8px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{cursor:pointer;display:inline;transition:all .3s ease-out}table[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#000;text-decoration:none}.slideOff[_ngcontent-%COMP%]{transform:scale(0);opacity:0;transition:all .3s ease-out}.slideOn[_ngcontent-%COMP%]{transform:scale(1);opacity:1;transition:all .3s ease-in}@media screen and (max-width:992px){table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{display:none;transition:all .3s ease-in}}"]}),vu),gu=((pu=function(){function t(){f(this,t)}return p(t,[{key:"ngOnInit",value:function(){setTimeout(function(){var t=document.querySelector("h2");(null==t?void 0:t.classList.contains("slideOff"))&&t.classList.toggle("slideOn")},200)}}]),t}()).\u0275fac=function(t){return new(t||pu)},pu.\u0275cmp=s.Cb({type:pu,selectors:[["app-leads"]],decls:5,vars:0,consts:[[1,"container"],[1,"py-2","px-3","my-4"],[1,"slideOff"],["aria-hidden","true",1,"fa","fa-id-card-o"]],template:function(t,e){1&t&&(s.Lb(0,"div",0),s.Lb(1,"div",1),s.Lb(2,"h2",2),s.Jb(3,"i",3),s.gc(4," Leads "),s.Kb(),s.Kb(),s.Kb())},styles:[".slideOff[_ngcontent-%COMP%]{transform:scale(0);opacity:0;transition:all .3s ease-out}.slideOn[_ngcontent-%COMP%]{transform:scale(1);opacity:1;transition:all .3s ease-in}"]}),pu),mu=["f"];function bu(t,e){1&t&&(s.Lb(0,"div",14),s.gc(1,"Enter valid mail"),s.Kb())}function _u(t,e){1&t&&(s.Lb(0,"div",14),s.gc(1,"Enter valid password"),s.Kb())}var wu,ku,Cu=((ku=function(){function t(e,n){f(this,t),this.authSer=e,this.route=n}return p(t,[{key:"ngOnInit",value:function(){}},{key:"onSub",value:function(){return Object(zs.b)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("VALID"!=this.myForm.form.status){t.next=13;break}return e=this.myForm.form.value,t.prev=2,t.next=5,this.authSer.logInFb(e.email,e.password);case 5:(n=t.sent).user&&(localStorage.setItem("fb_user",n.user.uid),this.route.navigate(["/admin"])),console.log(n),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),t.t0.code&&alert("Try again user or password worng"),console.log(t.t0);case 12:console.log(this.myForm.form.value);case 13:case"end":return t.stop()}},t,this,[[2,9]])}))}}]),t}()).\u0275fac=function(t){return new(t||ku)(s.Ib(Ws),s.Ib(ca))},ku.\u0275cmp=s.Cb({type:ku,selectors:[["app-login"]],viewQuery:function(t,e){var n;1&t&&s.jc(mu,!0),2&t&&s.Zb(n=s.Tb())&&(e.myForm=n.first)},decls:26,vars:2,consts:[[1,"container-fluid"],[1,"container","text-center","p-5","mt-5"],[1,"display-4"],["aria-hidden","true",1,"fa","fa-angle-double-up","text-success"],[1,"col-lg-6","mx-auto",3,"ngSubmit"],["f","ngForm"],["name","email","ngModel","","type","email","placeholder","\uf0e0 | Enter Your email","required","","email","",1,"form-control","fontAwesome"],["inputEmail","ngModel"],["class","text-danger text-start",4,"ngIf"],["name","password","ngModel","","type","password","placeholder","\uf13e  | Enter Your password","required","","minlength","3",1,"form-control","fontAwesome","mt-3"],["inputPass","ngModel"],[1,"btn","btn-success","w-100","mt-3"],[1,"mt-5"],["routerLink","/signup",1,"text-success","text-decoration-none"],[1,"text-danger","text-start"]],template:function(t,e){if(1&t&&(s.Lb(0,"div",0),s.Lb(1,"div",1),s.Lb(2,"h1",2),s.gc(3,"COMPANY "),s.Jb(4,"i",3),s.gc(5," CRM"),s.Kb(),s.Lb(6,"form",4,5),s.Sb("ngSubmit",function(){return e.onSub()}),s.Lb(8,"h5"),s.gc(9,"Login with your account"),s.Kb(),s.Lb(10,"div"),s.Jb(11,"input",6,7),s.fc(13,bu,2,0,"div",8),s.Kb(),s.Lb(14,"div"),s.Jb(15,"input",9,10),s.fc(17,_u,2,0,"div",8),s.Kb(),s.Lb(18,"div"),s.Lb(19,"button",11),s.gc(20,"Sign in"),s.Kb(),s.Kb(),s.Lb(21,"div",12),s.Lb(22,"a",13),s.gc(23,"Not register yet as user , sign up now!"),s.Kb(),s.Jb(24,"br"),s.gc(25," CRM SYSTEM 2021-2031 "),s.Kb(),s.Kb(),s.Kb(),s.Kb()),2&t){var n=s.ac(12),r=s.ac(16);s.yb(13),s.Vb("ngIf",n.touched&&n.invalid),s.yb(4),s.Vb("ngIf",r.touched&&r.invalid)}},directives:[Sn,Fe,kn,se,Me,En,Tn,An,nt,Pn,ha],styles:["input.ng-touched.ng-invalid[_ngcontent-%COMP%]{border:2px solid red}.fontAwesome[_ngcontent-%COMP%]{font-family:arial,fontAwesome,cursive}"]}),ku),Ou=((wu=function(){function t(){f(this,t)}return p(t,[{key:"ngOnInit",value:function(){setTimeout(function(){var t=document.querySelector("h2");(null==t?void 0:t.classList.contains("slideOff"))&&t.classList.toggle("slideOn")},200)}}]),t}()).\u0275fac=function(t){return new(t||wu)},wu.\u0275cmp=s.Cb({type:wu,selectors:[["app-reports"]],decls:5,vars:0,consts:[[1,"container"],[1,"py-2","px-3","my-4"],[1,"slideOff"],["aria-hidden","true",1,"fa","fa-flag"]],template:function(t,e){1&t&&(s.Lb(0,"div",0),s.Lb(1,"div",1),s.Lb(2,"h2",2),s.Jb(3,"i",3),s.gc(4," Reports "),s.Kb(),s.Kb(),s.Kb())},styles:[".slideOff[_ngcontent-%COMP%]{transform:scale(0);opacity:0;transition:all .3s ease-out}.slideOn[_ngcontent-%COMP%]{transform:scale(1);opacity:1;transition:all .3s ease-in}"]}),wu),Eu=["f"];function Su(t,e){1&t&&(s.Lb(0,"div",23),s.gc(1,"Enter valid mail"),s.Kb())}function Iu(t,e){1&t&&(s.Lb(0,"div",23),s.gc(1,"Enter valid password"),s.Kb())}function Tu(t,e){1&t&&(s.Lb(0,"div",23),s.gc(1,"Enter valid phone"),s.Kb())}function xu(t,e){1&t&&(s.Lb(0,"div",23),s.gc(1,"Enter valid phone"),s.Kb())}function Au(t,e){1&t&&(s.Lb(0,"div",23),s.gc(1,"Enter valid BIrthday"),s.Kb())}function ju(t,e){1&t&&(s.Lb(0,"div",23),s.gc(1,"Enter valid City"),s.Kb())}var Pu=["f"];function Nu(t,e){if(1&t){var n=s.Mb();s.Lb(0,"div",11),s.Lb(1,"button",12),s.Sb("click",function(){s.bc(n);var t=e.$implicit;return s.Ub().delProd(t.id)}),s.gc(2,"X"),s.Kb(),s.Lb(3,"h2"),s.gc(4),s.Kb(),s.Lb(5,"h5"),s.gc(6),s.Kb(),s.Lb(7,"h4"),s.gc(8),s.Kb(),s.Kb()}if(2&t){var r=e.$implicit;s.yb(4),s.hc(r.title),s.yb(2),s.hc(r.category),s.yb(2),s.ic("price:",r.price,"")}}var Du,Ru,Lu,Mu,Fu=[{path:"",component:Cu},{path:"signup",component:(Ru=function(){function t(e,n,r){f(this,t),this.authFb=e,this.router=n,this.dbFire=r}return p(t,[{key:"ngOnInit",value:function(){}},{key:"onSub",value:function(){return Object(zs.b)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(this.myForm.form.value),e=this.myForm.form.value,t.next=4,this.authFb.signUpNewUser(e);case 4:return n=t.sent,t.abrupt("return",(console.log(n),n.user&&(alert("Sign up succesful"),this.dbFire.addUser(e),this.router.navigate(["/"]),setTimeout(function(){window.location.reload()},400)),n.code&&alert(n.message),n));case 6:case"end":return t.stop()}},t,this)}))}}]),t}(),Ru.\u0275fac=function(t){return new(t||Ru)(s.Ib(Ws),s.Ib(ca),s.Ib(Ps))},Ru.\u0275cmp=s.Cb({type:Ru,selectors:[["app-signup"]],viewQuery:function(t,e){var n;1&t&&s.jc(Eu,!0),2&t&&s.Zb(n=s.Tb())&&(e.myForm=n.first)},decls:44,vars:6,consts:[[1,"container-fluid"],[1,"container","text-center","p-5"],[1,"display-4"],["aria-hidden","true",1,"fa","fa-angle-double-up","text-success"],[1,"col-lg-6","mx-auto",3,"ngSubmit"],["f","ngForm"],["name","email","ngModel","","type","email","placeholder","Enter Your email","required","","email","",1,"form-control"],["inputEmail","ngModel"],["class","text-danger text-start",4,"ngIf"],["name","password","ngModel","","type","text","placeholder","Enter Your password","required","","minlength","3",1,"form-control","mt-3"],["inputPass","ngModel"],["name","name","ngModel","","type","text","placeholder","Name...","required","","minlength","3",1,"form-control","mt-3"],["inputName","ngModel"],["name","phone","ngModel","","type","text","placeholder","Phone...","required","","minlength","3",1,"form-control","mt-3"],["inputPhone","ngModel"],[1,"mt-3","text-start"],["name","birth","ngModel","","type","date","placeholder","Birth...","required","","minlength","3",1,"form-control"],["inputBirth","ngModel"],["name","city","ngModel","","type","text","placeholder","City...","required","","minlength","3",1,"form-control","mt-3"],["inputCity","ngModel"],[1,"btn","btn-info","w-100","mt-3"],[1,"mt-5"],["routerLink","/",1,"text-info","text-decoration-none"],[1,"text-danger","text-start"]],template:function(t,e){if(1&t&&(s.Lb(0,"div",0),s.Lb(1,"div",1),s.Lb(2,"h1",2),s.gc(3,"COMPANY "),s.Jb(4,"i",3),s.gc(5," CRM "),s.Kb(),s.Lb(6,"form",4,5),s.Sb("ngSubmit",function(){return e.onSub()}),s.Lb(8,"h5"),s.gc(9,"Sign up new user"),s.Kb(),s.Lb(10,"div"),s.Jb(11,"input",6,7),s.fc(13,Su,2,0,"div",8),s.Kb(),s.Lb(14,"div"),s.Jb(15,"input",9,10),s.fc(17,Iu,2,0,"div",8),s.Kb(),s.Lb(18,"div"),s.Jb(19,"input",11,12),s.fc(21,Tu,2,0,"div",8),s.Kb(),s.Lb(22,"div"),s.Jb(23,"input",13,14),s.fc(25,xu,2,0,"div",8),s.Kb(),s.Lb(26,"div",15),s.Lb(27,"label"),s.gc(28,"Your birth day:"),s.Kb(),s.Jb(29,"input",16,17),s.fc(31,Au,2,0,"div",8),s.Kb(),s.Lb(32,"div"),s.Jb(33,"input",18,19),s.fc(35,ju,2,0,"div",8),s.Kb(),s.Lb(36,"div"),s.Lb(37,"button",20),s.gc(38,"Sign Up"),s.Kb(),s.Kb(),s.Lb(39,"div",21),s.Lb(40,"a",22),s.gc(41,"Already user? Click to Log in now"),s.Kb(),s.Jb(42,"br"),s.gc(43," CRM SYSTEM 2021-2031 "),s.Kb(),s.Kb(),s.Kb(),s.Kb()),2&t){var n=s.ac(12),r=s.ac(16),i=s.ac(20),o=s.ac(24),a=s.ac(30),u=s.ac(34);s.yb(13),s.Vb("ngIf",n.touched&&n.invalid),s.yb(4),s.Vb("ngIf",r.touched&&r.invalid),s.yb(4),s.Vb("ngIf",i.touched&&i.invalid),s.yb(4),s.Vb("ngIf",o.touched&&o.invalid),s.yb(6),s.Vb("ngIf",a.touched&&a.invalid),s.yb(4),s.Vb("ngIf",u.touched&&u.invalid)}},directives:[Sn,Fe,kn,se,Me,En,Tn,An,nt,Pn,ha],styles:[""]}),Ru)},{path:"fire",component:(Du=function(){function t(e){f(this,t),this.afs=e,this.prods_ar=[]}return p(t,[{key:"ngOnInit",value:function(){this.getRealFoods()}},{key:"addProd",value:function(){if("VALID"==this.myForm.form.status){var t=this.myForm.form.value;this.afs.list("testdb").push(t)}}},{key:"delProd",value:function(t){confirm("Are you sure")&&this.afs.list("testdb/"+t).remove()}},{key:"getObserProds",value:function(){return this.afs.list("testdb").snapshotChanges()}},{key:"getRealFoods",value:function(){var t=this;this.getObserProds().subscribe(function(e){t.prods_ar.splice(0,t.prods_ar.length),e.map(function(e){var n=e.payload.val();n.id=e.payload.key,t.prods_ar.push(n)}),console.log(t.prods_ar)})}}]),t}(),Du.\u0275fac=function(t){return new(t||Du)(s.Ib(js))},Du.\u0275cmp=s.Cb({type:Du,selectors:[["app-prods"]],viewQuery:function(t,e){var n;1&t&&s.jc(Pu,!0),2&t&&s.Zb(n=s.Tb())&&(e.myForm=n.first)},decls:17,vars:1,consts:[[1,"container"],[1,"row"],[1,"col-lg-6"],["class","border p-2",4,"ngFor","ngForOf"],[3,"ngSubmit"],["f","ngForm"],["type","text","ngModel","","name","title","required","","placeholder","enter name...",1,"form-control"],["nameInput","ngModel"],["type","text","ngModel","","name","price","required","","placeholder","enter price...",1,"form-control"],["priceInput","ngModel"],[1,"btn","btn-success"],[1,"border","p-2"],[1,"btn","btn-danger","float-end",3,"click"]],template:function(t,e){1&t&&(s.Lb(0,"div",0),s.Lb(1,"h1"),s.gc(2,"List of prod from firestore"),s.Kb(),s.Lb(3,"div",1),s.Lb(4,"div",2),s.fc(5,Nu,9,3,"div",3),s.Kb(),s.Lb(6,"div",2),s.Lb(7,"h2"),s.gc(8,"Add new prod Form"),s.Kb(),s.Lb(9,"form",4,5),s.Sb("ngSubmit",function(){return e.addProd()}),s.Jb(11,"input",6,7),s.Jb(13,"input",8,9),s.Lb(15,"button",10),s.gc(16,"Add new prod"),s.Kb(),s.Kb(),s.Kb(),s.Kb(),s.Kb()),2&t&&(s.yb(5),s.Vb("ngForOf",e.prods_ar))},directives:[tt,Sn,Fe,kn,se,Me,En,Tn],styles:[""]}),Du)},{path:"admin",component:Xs,children:[{path:"",component:yu},{path:"addCustomer",component:Ks},{path:"customerInfo/:id",component:hu},{path:"customerEdit/:id",component:cu},{path:"contacts",component:tu},{path:"leads",component:gu},{path:"reports",component:Ou}]}],Vu=((Mu=function t(){f(this,t)}).\u0275mod=s.Gb({type:Mu}),Mu.\u0275inj=s.Fb({factory:function(t){return new(t||Mu)},imports:[[xa.forRoot(Fu)],xa]}),Mu),Uu=((Lu=function t(){f(this,t),this.title="my-app"}).\u0275fac=function(t){return new(t||Lu)},Lu.\u0275cmp=s.Cb({type:Lu,selectors:[["app-root"]],decls:1,vars:0,template:function(t,e){1&t&&s.Jb(0,"router-outlet")},directives:[ma],styles:["h1[_ngcontent-%COMP%]{color:red}"]}),Lu),qu=function t(){f(this,t)},Bu=function t(){f(this,t)},Hu=function(){function t(e){var n=this;f(this,t),this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?function(){n.headers=new Map,e.split("\n").forEach(function(t){var e=t.indexOf(":");if(e>0){var r=t.slice(0,e),i=r.toLowerCase(),o=t.slice(e+1).trim();n.maybeSetNormalizedName(r,i),n.headers.has(i)?n.headers.get(i).push(o):n.headers.set(i,[o])}})}:function(){n.headers=new Map,Object.keys(e).forEach(function(t){var r=e[t],i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(n.headers.set(i,r),n.maybeSetNormalizedName(t,i))})}:this.headers=new Map}return p(t,[{key:"has",value:function(t){return this.init(),this.headers.has(t.toLowerCase())}},{key:"get",value:function(t){this.init();var e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}},{key:"keys",value:function(){return this.init(),Array.from(this.normalizedNames.values())}},{key:"getAll",value:function(t){return this.init(),this.headers.get(t.toLowerCase())||null}},{key:"append",value:function(t,e){return this.clone({name:t,value:e,op:"a"})}},{key:"set",value:function(t,e){return this.clone({name:t,value:e,op:"s"})}},{key:"delete",value:function(t,e){return this.clone({name:t,value:e,op:"d"})}},{key:"maybeSetNormalizedName",value:function(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}},{key:"init",value:function(){var e=this;this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(function(t){return e.applyUpdate(t)}),this.lazyUpdate=null))}},{key:"copyFrom",value:function(t){var e=this;t.init(),Array.from(t.headers.keys()).forEach(function(n){e.headers.set(n,t.headers.get(n)),e.normalizedNames.set(n,t.normalizedNames.get(n))})}},{key:"clone",value:function(e){var n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}},{key:"applyUpdate",value:function(t){var e=t.name.toLowerCase();switch(t.op){case"a":case"s":var n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);var r=("a"===t.op?this.headers.get(e):void 0)||[];r.push.apply(r,i(n)),this.headers.set(e,r);break;case"d":var o=t.value;if(o){var a=this.headers.get(e);if(!a)return;0===(a=a.filter(function(t){return-1===o.indexOf(t)})).length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,a)}else this.headers.delete(e),this.normalizedNames.delete(e)}}},{key:"forEach",value:function(t){var e=this;this.init(),Array.from(this.normalizedNames.keys()).forEach(function(n){return t(e.normalizedNames.get(n),e.headers.get(n))})}}]),t}(),Ku=function(){function t(){f(this,t)}return p(t,[{key:"encodeKey",value:function(t){return zu(t)}},{key:"encodeValue",value:function(t){return zu(t)}},{key:"decodeKey",value:function(t){return decodeURIComponent(t)}},{key:"decodeValue",value:function(t){return decodeURIComponent(t)}}]),t}();function zu(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}var Wu=function(){function t(){var n=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(f(this,t),this.updates=null,this.cloneFrom=null,this.encoder=r.encoder||new Ku,r.fromString){if(r.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(t,n){var r=new Map;return t.length>0&&t.split("&").forEach(function(t){var i=t.indexOf("="),o=e(-1==i?[n.decodeKey(t),""]:[n.decodeKey(t.slice(0,i)),n.decodeValue(t.slice(i+1))],2),a=o[0],s=o[1],u=r.get(a)||[];u.push(s),r.set(a,u)}),r}(r.fromString,this.encoder)}else r.fromObject?(this.map=new Map,Object.keys(r.fromObject).forEach(function(t){var e=r.fromObject[t];n.map.set(t,Array.isArray(e)?e:[e])})):this.map=null}return p(t,[{key:"has",value:function(t){return this.init(),this.map.has(t)}},{key:"get",value:function(t){this.init();var e=this.map.get(t);return e?e[0]:null}},{key:"getAll",value:function(t){return this.init(),this.map.get(t)||null}},{key:"keys",value:function(){return this.init(),Array.from(this.map.keys())}},{key:"append",value:function(t,e){return this.clone({param:t,value:e,op:"a"})}},{key:"set",value:function(t,e){return this.clone({param:t,value:e,op:"s"})}},{key:"delete",value:function(t,e){return this.clone({param:t,value:e,op:"d"})}},{key:"toString",value:function(){var t=this;return this.init(),this.keys().map(function(e){var n=t.encoder.encodeKey(e);return t.map.get(e).map(function(e){return n+"="+t.encoder.encodeValue(e)}).join("&")}).filter(function(t){return""!==t}).join("&")}},{key:"clone",value:function(e){var n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat([e]),n}},{key:"init",value:function(){var t=this;null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(function(e){return t.map.set(e,t.cloneFrom.map.get(e))}),this.updates.forEach(function(e){switch(e.op){case"a":case"s":var n=("a"===e.op?t.map.get(e.param):void 0)||[];n.push(e.value),t.map.set(e.param,n);break;case"d":if(void 0===e.value){t.map.delete(e.param);break}var r=t.map.get(e.param)||[],i=r.indexOf(e.value);-1!==i&&r.splice(i,1),r.length>0?t.map.set(e.param,r):t.map.delete(e.param)}}),this.cloneFrom=this.updates=null)}}]),t}();function Gu(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function Qu(t){return"undefined"!=typeof Blob&&t instanceof Blob}function Yu(t){return"undefined"!=typeof FormData&&t instanceof FormData}var Ju=function(){function t(e,n,r,i){var o;if(f(this,t),this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.params&&(this.params=o.params)),this.headers||(this.headers=new Hu),this.params){var a=this.params.toString();if(0===a.length)this.urlWithParams=n;else{var s=n.indexOf("?");this.urlWithParams=n+(-1===s?"?":s<n.length-1?"&":"")+a}}else this.params=new Wu,this.urlWithParams=n}return p(t,[{key:"serializeBody",value:function(){return null===this.body?null:Gu(this.body)||Qu(this.body)||Yu(this.body)||"string"==typeof this.body?this.body:this.body instanceof Wu?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}},{key:"detectContentTypeHeader",value:function(){return null===this.body||Yu(this.body)?null:Qu(this.body)?this.body.type||null:Gu(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Wu?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null}},{key:"clone",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=void 0!==e.body?e.body:this.body,a=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,s=void 0!==e.reportProgress?e.reportProgress:this.reportProgress,u=e.headers||this.headers,c=e.params||this.params;return void 0!==e.setHeaders&&(u=Object.keys(e.setHeaders).reduce(function(t,n){return t.set(n,e.setHeaders[n])},u)),e.setParams&&(c=Object.keys(e.setParams).reduce(function(t,n){return t.set(n,e.setParams[n])},c)),new t(n,r,o,{params:c,headers:u,reportProgress:s,responseType:i,withCredentials:a})}}]),t}(),Xu=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}({}),Zu=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"OK";f(this,t),this.headers=e.headers||new Hu,this.status=void 0!==e.status?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300},$u=function(t){v(n,t);var e=g(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f(this,n),(t=e.call(this,r)).type=Xu.ResponseHeader,t}return p(n,[{key:"clone",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new n({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}]),n}(Zu),tc=function(t){v(n,t);var e=g(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f(this,n),(t=e.call(this,r)).type=Xu.Response,t.body=void 0!==r.body?r.body:null,t}return p(n,[{key:"clone",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new n({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}]),n}(Zu),ec=function(t){v(n,t);var e=g(n);function n(t){var r;return f(this,n),(r=e.call(this,t,0,"Unknown Error")).name="HttpErrorResponse",r.ok=!1,r.message=r.status>=200&&r.status<300?"Http failure during parsing for "+(t.url||"(unknown url)"):"Http failure response for ".concat(t.url||"(unknown url)",": ").concat(t.status," ").concat(t.statusText),r.error=t.error||null,r}return n}(Zu);function nc(t,e){return{body:e,headers:t.headers,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}var rc,ic,oc,ac,sc,uc,cc,lc,hc,fc=((rc=function(){function t(e){f(this,t),this.handler=e}return p(t,[{key:"request",value:function(t,e){var n,r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t instanceof Ju)n=t;else{var o=void 0;o=i.headers instanceof Hu?i.headers:new Hu(i.headers);var a=void 0;i.params&&(a=i.params instanceof Wu?i.params:new Wu({fromObject:i.params})),n=new Ju(t,e,void 0!==i.body?i.body:null,{headers:o,params:a,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}var s=Object(Rn.a)(n).pipe(br(function(t){return r.handler.handle(t)}));if(t instanceof Ju||"events"===i.observe)return s;var u=s.pipe(fr(function(t){return t instanceof tc}));switch(i.observe||"body"){case"body":switch(n.responseType){case"arraybuffer":return u.pipe(Object(Jt.a)(function(t){if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body}));case"blob":return u.pipe(Object(Jt.a)(function(t){if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body}));case"text":return u.pipe(Object(Jt.a)(function(t){if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body}));case"json":default:return u.pipe(Object(Jt.a)(function(t){return t.body}))}case"response":return u;default:throw new Error("Unreachable: unhandled observe type ".concat(i.observe,"}"))}}},{key:"delete",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("DELETE",t,e)}},{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("GET",t,e)}},{key:"head",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("HEAD",t,e)}},{key:"jsonp",value:function(t,e){return this.request("JSONP",t,{params:(new Wu).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}},{key:"options",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("OPTIONS",t,e)}},{key:"patch",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("PATCH",t,nc(n,e))}},{key:"post",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("POST",t,nc(n,e))}},{key:"put",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("PUT",t,nc(n,e))}}]),t}()).\u0275fac=function(t){return new(t||rc)(s.Pb(qu))},rc.\u0275prov=s.Eb({token:rc,factory:rc.\u0275fac}),rc),dc=function(){function t(e,n){f(this,t),this.next=e,this.interceptor=n}return p(t,[{key:"handle",value:function(t){return this.interceptor.intercept(t,this.next)}}]),t}(),pc=new s.q("HTTP_INTERCEPTORS"),vc=((ic=function(){function t(){f(this,t)}return p(t,[{key:"intercept",value:function(t,e){return e.handle(t)}}]),t}()).\u0275fac=function(t){return new(t||ic)},ic.\u0275prov=s.Eb({token:ic,factory:ic.\u0275fac}),ic),yc=/^\)\]\}',?\n/,gc=function t(){f(this,t)},mc=((ac=function(){function t(){f(this,t)}return p(t,[{key:"build",value:function(){return new XMLHttpRequest}}]),t}()).\u0275fac=function(t){return new(t||ac)},ac.\u0275prov=s.Eb({token:ac,factory:ac.\u0275fac}),ac),bc=((oc=function(){function t(e){f(this,t),this.xhrFactory=e}return p(t,[{key:"handle",value:function(t){var e=this;if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Qt.a(function(n){var r=e.xhrFactory.build();if(r.open(t.method,t.urlWithParams),t.withCredentials&&(r.withCredentials=!0),t.headers.forEach(function(t,e){return r.setRequestHeader(t,e.join(","))}),t.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){var i=t.detectContentTypeHeader();null!==i&&r.setRequestHeader("Content-Type",i)}if(t.responseType){var o=t.responseType.toLowerCase();r.responseType="json"!==o?o:"text"}var a=t.serializeBody(),s=null,u=function(){if(null!==s)return s;var e=1223===r.status?204:r.status,n=r.statusText||"OK",i=new Hu(r.getAllResponseHeaders()),o=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(r)||t.url;return s=new $u({headers:i,status:e,statusText:n,url:o})},c=function(){var e=u(),i=e.headers,o=e.status,a=e.statusText,s=e.url,c=null;204!==o&&(c=void 0===r.response?r.responseText:r.response),0===o&&(o=c?200:0);var l=o>=200&&o<300;if("json"===t.responseType&&"string"==typeof c){var h=c;c=c.replace(yc,"");try{c=""!==c?JSON.parse(c):null}catch(f){c=h,l&&(l=!1,c={error:f,text:c})}}l?(n.next(new tc({body:c,headers:i,status:o,statusText:a,url:s||void 0})),n.complete()):n.error(new ec({error:c,headers:i,status:o,statusText:a,url:s||void 0}))},l=function(t){var e=u().url,i=new ec({error:t,status:r.status||0,statusText:r.statusText||"Unknown Error",url:e||void 0});n.error(i)},h=!1,f=function(e){h||(n.next(u()),h=!0);var i={type:Xu.DownloadProgress,loaded:e.loaded};e.lengthComputable&&(i.total=e.total),"text"===t.responseType&&r.responseText&&(i.partialText=r.responseText),n.next(i)},d=function(t){var e={type:Xu.UploadProgress,loaded:t.loaded};t.lengthComputable&&(e.total=t.total),n.next(e)};return r.addEventListener("load",c),r.addEventListener("error",l),t.reportProgress&&(r.addEventListener("progress",f),null!==a&&r.upload&&r.upload.addEventListener("progress",d)),r.send(a),n.next({type:Xu.Sent}),function(){r.removeEventListener("error",l),r.removeEventListener("load",c),t.reportProgress&&(r.removeEventListener("progress",f),null!==a&&r.upload&&r.upload.removeEventListener("progress",d)),r.readyState!==r.DONE&&r.abort()}})}}]),t}()).\u0275fac=function(t){return new(t||oc)(s.Pb(gc))},oc.\u0275prov=s.Eb({token:oc,factory:oc.\u0275fac}),oc),_c=new s.q("XSRF_COOKIE_NAME"),wc=new s.q("XSRF_HEADER_NAME"),kc=function t(){f(this,t)},Cc=((hc=function(){function t(e,n,r){f(this,t),this.doc=e,this.platform=n,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}return p(t,[{key:"getToken",value:function(){if("server"===this.platform)return null;var t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Q(t,this.cookieName),this.lastCookieString=t),this.lastToken}}]),t}()).\u0275fac=function(t){return new(t||hc)(s.Pb(y),s.Pb(s.B),s.Pb(_c))},hc.\u0275prov=s.Eb({token:hc,factory:hc.\u0275fac}),hc),Oc=((lc=function(){function t(e,n){f(this,t),this.tokenService=e,this.headerName=n}return p(t,[{key:"intercept",value:function(t,e){var n=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e.handle(t);var r=this.tokenService.getToken();return null===r||t.headers.has(this.headerName)||(t=t.clone({headers:t.headers.set(this.headerName,r)})),e.handle(t)}}]),t}()).\u0275fac=function(t){return new(t||lc)(s.Pb(kc),s.Pb(wc))},lc.\u0275prov=s.Eb({token:lc,factory:lc.\u0275fac}),lc),Ec=((cc=function(){function t(e,n){f(this,t),this.backend=e,this.injector=n,this.chain=null}return p(t,[{key:"handle",value:function(t){if(null===this.chain){var e=this.injector.get(pc,[]);this.chain=e.reduceRight(function(t,e){return new dc(t,e)},this.backend)}return this.chain.handle(t)}}]),t}()).\u0275fac=function(t){return new(t||cc)(s.Pb(Bu),s.Pb(s.r))},cc.\u0275prov=s.Eb({token:cc,factory:cc.\u0275fac}),cc),Sc=((uc=function(){function t(){f(this,t)}return p(t,null,[{key:"disable",value:function(){return{ngModule:t,providers:[{provide:Oc,useClass:vc}]}}},{key:"withOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{ngModule:t,providers:[e.cookieName?{provide:_c,useValue:e.cookieName}:[],e.headerName?{provide:wc,useValue:e.headerName}:[]]}}}]),t}()).\u0275mod=s.Gb({type:uc}),uc.\u0275inj=s.Fb({factory:function(t){return new(t||uc)},providers:[Oc,{provide:pc,useExisting:Oc,multi:!0},{provide:kc,useClass:Cc},{provide:_c,useValue:"XSRF-TOKEN"},{provide:wc,useValue:"X-XSRF-TOKEN"}]}),uc),Ic=((sc=function t(){f(this,t)}).\u0275mod=s.Gb({type:sc}),sc.\u0275inj=s.Fb({factory:function(t){return new(t||sc)},providers:[fc,{provide:qu,useClass:Ec},bc,{provide:Bu,useExisting:bc},mc,{provide:gc,useExisting:mc}],imports:[[Sc.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),sc);function Tc(){return function(t){return t.lift(new xc)}}var xc=function(){function t(){f(this,t)}return p(t,[{key:"call",value:function(t,e){return e.subscribe(new Ac(t))}}]),t}(),Ac=function(t){v(n,t);var e=g(n);function n(t){var r;return f(this,n),(r=e.call(this,t)).hasPrev=!1,r}return p(n,[{key:"_next",value:function(t){var e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}]),n}(Un.a),jc=o("zIRd"),Pc=o("qOnz"),Nc=o("q/0M"),Dc=function(t,e){return(Dc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Rc(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var Lc,Mc="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Fc=Fc||{},Vc=Mc||self;function Uc(){}function qc(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Bc(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Hc="closure_uid_"+(1e9*Math.random()>>>0),Kc=0;function zc(t,e,n){return t.call.apply(t.bind,arguments)}function Wc(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Gc(t,e,n){return(Gc=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?zc:Wc).apply(null,arguments)}function Qc(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function Yc(){return Date.now()}function Jc(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function Xc(){this.j=this.j,this.i=this.i}Xc.prototype.j=!1,Xc.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,Hc)&&t[Hc]||(t[Hc]=++Kc)}(this)},Xc.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var Zc=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},$c=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function tl(t){return Array.prototype.concat.apply([],arguments)}function el(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function nl(t){return/^[\s\xa0]*$/.test(t)}var rl,il=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function ol(t,e){return-1!=t.indexOf(e)}function al(t,e){return t<e?-1:t>e?1:0}t:{var sl=Vc.navigator;if(sl){var ul=sl.userAgent;if(ul){rl=ul;break t}}rl=""}function cl(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function ll(t){var e={};for(var n in t)e[n]=t[n];return e}var hl="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function fl(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<hl.length;o++)n=hl[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function dl(t){return dl[" "](t),t}dl[" "]=Uc;var pl,vl,yl=ol(rl,"Opera"),gl=ol(rl,"Trident")||ol(rl,"MSIE"),ml=ol(rl,"Edge"),bl=ml||gl,_l=ol(rl,"Gecko")&&!(ol(rl.toLowerCase(),"webkit")&&!ol(rl,"Edge"))&&!(ol(rl,"Trident")||ol(rl,"MSIE"))&&!ol(rl,"Edge"),wl=ol(rl.toLowerCase(),"webkit")&&!ol(rl,"Edge");function kl(){var t=Vc.document;return t?t.documentMode:void 0}t:{var Cl="",Ol=(vl=rl,_l?/rv:([^\);]+)(\)|;)/.exec(vl):ml?/Edge\/([\d\.]+)/.exec(vl):gl?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(vl):wl?/WebKit\/(\S+)/.exec(vl):yl?/(?:Version)[ \/]?(\S+)/.exec(vl):void 0);if(Ol&&(Cl=Ol?Ol[1]:""),gl){var El=kl();if(null!=El&&El>parseFloat(Cl)){pl=String(El);break t}}pl=Cl}var Sl={};function Il(t){return function(t,e){var n=Sl;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=il(String(pl)).split("."),r=il(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=al(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||al(0==a[2].length,0==s[2].length)||al(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e})}var Tl=Vc.document&&gl&&(kl()||parseInt(pl,10))||void 0,xl=!gl||9<=Number(Tl),Al=gl&&!Il("9"),jl=function(){if(!Vc.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Vc.addEventListener("test",Uc,e),Vc.removeEventListener("test",Uc,e)}catch(n){}return t}();function Pl(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function Nl(t,e){if(Pl.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(_l){t:{try{dl(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Dl[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}Pl.prototype.b=function(){this.defaultPrevented=!0},Jc(Nl,Pl);var Dl={2:"touch",3:"pen",4:"mouse"};Nl.prototype.b=function(){Nl.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Al)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var Rl="closure_listenable_"+(1e6*Math.random()|0),Ll=0;function Ml(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++Ll,this.Y=this.Z=!1}function Fl(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function Vl(t){this.src=t,this.a={},this.b=0}function Ul(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=Zc(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Fl(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function ql(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}Vl.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=ql(t,e,r,i);return-1<a?(e=t[a],n||(e.Z=!1)):((e=new Ml(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var Bl="closure_lm_"+(1e6*Math.random()|0),Hl={};function Kl(t,e,n,r,i){if(r&&r.once)return Wl(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Kl(t,e[o],n,r,i);return null}return n=th(n),t&&t[Rl]?t.va(e,n,Bc(r)?!!r.capture:!!r,i):zl(t,e,n,!1,r,i)}function zl(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=Bc(i)?!!i.capture:!!i;if(a&&!xl)return null;var s=Zl(t);if(s||(t[Bl]=s=new Vl(t)),(n=s.add(e,n,r,a,o)).proxy)return n;if(r=function(){var t=Xl,e=xl?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)jl||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Yl(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Wl(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)Wl(t,e[o],n,r,i);return null}return n=th(n),t&&t[Rl]?t.wa(e,n,Bc(r)?!!r.capture:!!r,i):zl(t,e,n,!0,r,i)}function Gl(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Gl(t,e[o],n,r,i);else r=Bc(r)?!!r.capture:!!r,n=th(n),t&&t[Rl]?(t=t.c,(e=String(e).toString())in t.a&&-1<(n=ql(o=t.a[e],n,r,i))&&(Fl(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=Zl(t))&&(e=t.a[e.toString()],t=-1,e&&(t=ql(e,n,r,i)),(n=-1<t?e[t]:null)&&Ql(n))}function Ql(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[Rl])Ul(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Yl(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Zl(e))?(Ul(n,t),0==n.b&&(n.src=null,e[Bl]=null)):Fl(t)}}}function Yl(t){return t in Hl?Hl[t]:Hl[t]="on"+t}function Jl(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&Ql(t),n.call(r,e)}function Xl(t,e){if(t.Y)return!0;if(!xl){if(!e)t:{e=["window","event"];for(var n=Vc,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return Jl(t,e=new Nl(e,this))}return Jl(t,new Nl(e,this))}function Zl(t){return(t=t[Bl])instanceof Vl?t:null}var $l="__closure_events_fn_"+(1e9*Math.random()>>>0);function th(t){return"function"==typeof t?t:(t[$l]||(t[$l]=function(e){return t.handleEvent(e)}),t[$l])}function eh(){Xc.call(this),this.c=new Vl(this),this.J=this,this.C=null}function nh(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new Pl(e,t);else if(e instanceof Pl)e.target=e.target||t;else{var i=e;fl(e=new Pl(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var a=e.a=n[o];i=rh(a,r,!0,e)&&i}if(i=rh(a=e.a=t,r,!0,e)&&i,i=rh(a,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=rh(a=e.a=n[o],r,!1,e)&&i}function rh(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.Y&&a.capture==n){var s=a.listener,u=a.ca||a.src;a.Z&&Ul(t.c,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}Jc(eh,Xc),eh.prototype[Rl]=!0,(Lc=eh.prototype).addEventListener=function(t,e,n,r){Kl(this,t,e,n,r)},Lc.removeEventListener=function(t,e,n,r){Gl(this,t,e,n,r)},Lc.G=function(){if(eh.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Fl(n[r]);delete e.a[t],e.b--}}this.C=null},Lc.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},Lc.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var ih=Vc.JSON.stringify;function oh(){this.b=this.a=null}var ah,sh=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())(function(){return new ch},function(t){t.reset()});function uh(){var t=dh,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function ch(){this.next=this.b=this.a=null}function lh(t){Vc.setTimeout(function(){throw t},0)}function hh(t,e){ah||function(){var t=Vc.Promise.resolve(void 0);ah=function(){t.then(ph)}}(),fh||(ah(),fh=!0),dh.add(t,e)}oh.prototype.add=function(t,e){var n=sh.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},ch.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},ch.prototype.reset=function(){this.next=this.b=this.a=null};var fh=!1,dh=new oh;function ph(){for(var t;t=uh();){try{t.a.call(t.b)}catch(n){lh(n)}var e=sh;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}fh=!1}function vh(t,e){eh.call(this),this.b=t||1,this.a=e||Vc,this.f=Gc(this.Za,this),this.g=Yc()}function yh(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function gh(t,e,n){if("function"==typeof t)n&&(t=Gc(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Gc(t.handleEvent,t)}return 2147483647<Number(e)?-1:Vc.setTimeout(t,e||0)}function mh(t){t.a=gh(function(){t.a=null,t.c&&(t.c=!1,mh(t))},t.h);var e=t.b;t.b=null,t.g.apply(null,e)}Jc(vh,eh),(Lc=vh.prototype).aa=!1,Lc.M=null,Lc.Za=function(){if(this.aa){var t=Yc()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),nh(this,"tick"),this.aa&&(yh(this),this.start()))}},Lc.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=Yc())},Lc.G=function(){vh.X.G.call(this),yh(this),delete this.a};var bh=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}Dc(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:mh(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(Vc.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(Xc);function _h(t){Xc.call(this),this.b=t,this.a={}}Jc(_h,Xc);var wh=[];function kh(t,e,n,r){Array.isArray(n)||(n&&(wh[0]=n.toString()),n=wh);for(var i=0;i<n.length;i++){var o=Kl(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Ch(t){cl(t.a,function(t,e){this.a.hasOwnProperty(e)&&Ql(t)},t),t.a={}}function Oh(){this.a=!0}function Eh(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<i.length;a++)i[a]=""}}}return ih(n)}catch(s){return e}}(t,n)+(r?" "+r:"")})}_h.prototype.G=function(){_h.X.G.call(this),Ch(this)},_h.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Oh.prototype.info=function(){};var Sh={},Ih=null;function Th(){return Ih=Ih||new eh}function xh(t){Pl.call(this,Sh.Fa,t)}function Ah(t){var e=Th();nh(e,new xh(e,t))}function jh(t,e){Pl.call(this,Sh.STAT_EVENT,t),this.stat=e}function Ph(t){var e=Th();nh(e,new jh(e,t))}function Nh(t){Pl.call(this,Sh.Ga,t)}function Dh(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Vc.setTimeout(function(){t()},e)}Sh.Fa="serverreachability",Jc(xh,Pl),Sh.STAT_EVENT="statevent",Jc(jh,Pl),Sh.Ga="timingevent",Jc(Nh,Pl);var Rh={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},Lh={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function Mh(){}function Fh(){}Mh.prototype.a=null;var Vh,Uh={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function qh(){Pl.call(this,"d")}function Bh(){Pl.call(this,"c")}function Hh(){}function Kh(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new _h(this),this.P=zh,this.R=new vh(t=bl?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}Jc(qh,Pl),Jc(Bh,Pl),Jc(Hh,Mh),Vh=new Hh;var zh=45e3,Wh={},Gh={};function Qh(t,e,n){t.H=1,t.i=gf(hf(e)),t.j=n,t.I=!0,Yh(t,null)}function Yh(t,e){t.u=Yc(),Zh(t),t.l=hf(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),Af(n.b,"t",r),t.D=0,t.a=Od(t.g,t.g.C?e:null),0<t.O&&(t.F=new bh(Gc(t.Ca,t,t.a),t.O)),kh(t.J,t.a,"readystatechange",t.Xa),e=t.B?ll(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),Ah(1),function(t,e,n,r,i,o){t.info(function(){if(t.a)if(o)for(var a="",s=o.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");a=2<=h.length&&"type"==h[1]?a+(l+"=")+c+"&":a+(l+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+a})}(t.c,t.m,t.l,t.f,t.S,t.j)}function Jh(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=Xh(t,n);if(i==Gh){4==e&&(t.h=4,Ph(14),r=!1),Eh(t.c,t.f,null,"[Incomplete Response]");break}if(i==Wh){t.h=4,Ph(15),Eh(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}Eh(t.c,t.f,i,null),rf(t,i)}4==e&&0==n.length&&(t.h=1,Ph(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),yd(e),e.F=!0,Ph(11))):(Eh(t.c,t.f,n,"[Invalid Chunked Response]"),nf(t),ef(t))}function Xh(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?Gh:(n=Number(e.substring(n,r)),isNaN(n)?Wh:(r+=1)+n>e.length?Gh:(e=e.substr(r,n),t.D=r+n,e))}function Zh(t){t.T=Yc()+t.P,$h(t,t.P)}function $h(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=Dh(Gc(t.Va,t),e)}function tf(t){t.o&&(Vc.clearTimeout(t.o),t.o=null)}function ef(t){0==t.g.v||t.A||bd(t.g,t)}function nf(t){tf(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,yh(t.R),Ch(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function rf(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||Mf(n.b,t)))if(n.I=t.N,!t.C&&Mf(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(iC){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;md(n),sd(n)}vd(n),Ph(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=Dh(Gc(n.Sa,n),6e3));if(1>=Lf(n.b)&&n.ea){try{n.ea()}catch(iC){}n.ea=void 0}}else wd(n,11)}else if((t.C||n.a==t)&&md(n),!nl(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(n.P=(i=e[r])[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var a=i[4];null!=a&&(n.pa=a,n.c.info("SVER="+n.pa));var s=i[5];if(null!=s&&"number"==typeof s&&0<s){var u=1.5*s;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(ol(l,"spdy")||ol(l,"quic")||ol(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(Ff(h,h.b),h.b=null))}if(u.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.na=f,yf(u.B,u.A,f))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=Yc()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var d=t;if((u=n).la=Cd(u,u.C?u.ga:null,u.fa),d.C){Vf(u.b,d);var p=d,v=u.D;v&&p.setTimeout(v),p.o&&(tf(p),Zh(p)),u.a=d}else pd(u);0<n.g.length&&ld(n)}else"stop"!=i[0]&&"close"!=i[0]||wd(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?wd(n,7):ad(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);Ah(4)}catch(iC){}}function of(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(qc(t)||"string"==typeof t)$c(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(qc(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(qc(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function af(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof af)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function sf(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];uf(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)uf(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function uf(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(Lc=Kh.prototype).setTimeout=function(t){this.P=t},Lc.Xa=function(t){t=t.target;var e=this.F;e&&3==nd(t)?e.f():this.Ca(t)},Lc.Ca=function(t){try{if(t==this.a)t:{var e=nd(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!bl&&!this.a.$())){this.A||4!=e||7==n||Ah(8==n||0>=r?3:2),tf(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,a){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+a})}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var a,s=this.a;if((a=s.a?s.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!nl(a)){var u=a;break e}}u=null}if(!u){this.b=!1,this.h=3,Ph(12),nf(this),ef(this);break t}Eh(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,rf(this,u)}this.I?(Jh(this,e,o),bl&&this.b&&3==e&&(kh(this.J,this.R,"tick",this.Wa),this.R.start())):(Eh(this.c,this.f,o,null),rf(this,o)),4==e&&nf(this),this.b&&!this.A&&(4==e?bd(this.g,this):(this.b=!1,Zh(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,Ph(12)):(this.h=0,Ph(13)),nf(this),ef(this)}}}catch(c){}},Lc.Wa=function(){if(this.a){var t=nd(this.a),e=this.a.$();this.D<e.length&&(tf(this),Jh(this,t,e),this.b&&4!=t&&Zh(this))}},Lc.cancel=function(){this.A=!0,nf(this)},Lc.Va=function(){this.o=null;var t=Yc();0<=t-this.T?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.c,this.l),2!=this.H&&(Ah(3),Ph(17)),nf(this),this.h=2,ef(this)):$h(this,this.T-t)},(Lc=af.prototype).K=function(){sf(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},Lc.L=function(){return sf(this),this.a.concat()},Lc.get=function(t,e){return uf(this.b,t)?this.b[t]:e},Lc.set=function(t,e){uf(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},Lc.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var cf=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function lf(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof lf){this.a=void 0!==e?e:t.a,ff(this,t.f),this.j=t.j,df(this,t.c),pf(this,t.h),this.g=t.g,e=t.b;var n=new Sf;n.c=e.c,e.a&&(n.a=new af(e.a),n.b=e.b),vf(this,n),this.i=t.i}else t&&(n=String(t).match(cf))?(this.a=!!e,ff(this,n[1]||"",!0),this.j=mf(n[2]||""),df(this,n[3]||"",!0),pf(this,n[4]),this.g=mf(n[5]||"",!0),vf(this,n[6]||"",!0),this.i=mf(n[7]||"")):(this.a=!!e,this.b=new Sf(null,this.a))}function hf(t){return new lf(t)}function ff(t,e,n){t.f=n?mf(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function df(t,e,n){t.c=n?mf(e,!0):e}function pf(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function vf(t,e,n){e instanceof Sf?(t.b=e,function(t,e){e&&!t.f&&(If(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Tf(this,e),Af(this,n,t))},t)),t.f=e}(t.b,t.a)):(n||(e=bf(e,Of)),t.b=new Sf(e,t.a))}function yf(t,e,n){t.b.set(e,n)}function gf(t){return yf(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Yc()).toString(36)),t}function mf(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function bf(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,_f),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function _f(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}lf.prototype.toString=function(){var t=[],e=this.f;e&&t.push(bf(e,wf,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(bf(e,wf,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(bf(n,"/"==n.charAt(0)?Cf:kf,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",bf(n,Ef)),t.join("")};var wf=/[#\/\?@]/g,kf=/[#\?:]/g,Cf=/[#\?]/g,Of=/[#\?@]/g,Ef=/#/g;function Sf(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function If(t){t.a||(t.a=new af,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function Tf(t,e){If(t),e=jf(t,e),uf(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,uf((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&sf(t)))}function xf(t,e){return If(t),e=jf(t,e),uf(t.a.b,e)}function Af(t,e,n){Tf(t,e),0<n.length&&(t.c=null,t.a.set(jf(t,e),el(n)),t.b+=n.length)}function jf(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(Lc=Sf.prototype).add=function(t,e){If(this),this.c=null,t=jf(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},Lc.forEach=function(t,e){If(this),this.a.forEach(function(n,r){$c(n,function(n){t.call(e,n,r,this)},this)},this)},Lc.L=function(){If(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},Lc.K=function(t){If(this);var e=[];if("string"==typeof t)xf(this,t)&&(e=tl(e,this.a.get(jf(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=tl(e,t[n])}return e},Lc.set=function(t,e){return If(this),this.c=null,xf(this,t=jf(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},Lc.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},Lc.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")};var Pf=function(t,e){this.b=t,this.a=e};function Nf(t){this.g=t||Df,t=Vc.PerformanceNavigationTiming?0<(t=Vc.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Vc.ia&&Vc.ia.ya&&Vc.ia.ya()&&Vc.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var Df=10;function Rf(t){return!!t.b||!!t.a&&t.a.size>=t.f}function Lf(t){return t.b?1:t.a?t.a.size:0}function Mf(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function Ff(t,e){t.a?t.a.add(e):t.b=e}function Vf(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function Uf(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=Rc(t.a.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.s)}catch(a){e={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return el(t.c)}function qf(){}function Bf(){this.a=new qf}function Hf(t,e,n){var r=n||"";try{of(t,function(t,n){var i=t;Bc(t)&&(i=ih(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(qC){throw e.push(r+"type="+encodeURIComponent("_badmap")),qC}}function Kf(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}Nf.prototype.cancel=function(){var t,e;if(this.c=Uf(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=Rc(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},qf.prototype.stringify=function(t){return Vc.JSON.stringify(t,void 0)},qf.prototype.parse=function(t){return Vc.JSON.parse(t,void 0)};var zf=Vc.JSON.parse;function Wf(t){eh.call(this),this.headers=new af,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=Gf,this.D=this.F=!1}Jc(Wf,eh);var Gf="",Qf=/^https?$/i,Yf=["POST","PUT"];function Jf(t){return"content-type"==t.toLowerCase()}function Xf(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Zf(t),td(t)}function Zf(t){t.u||(t.u=!0,nh(t,"complete"),nh(t,"error"))}function $f(t){if(t.b&&void 0!==Fc&&(!t.s[1]||4!=nd(t)||2!=t.W()))if(t.l&&4==nd(t))gh(t.za,0,t);else if(nh(t,"readystatechange"),4==nd(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(cf)[1]||null;if(!o&&Vc.self&&Vc.self.location){var a=Vc.self.location.protocol;o=a.substr(0,a.length-1)}i=!Qf.test(o?o.toLowerCase():"")}e=i}if(e)nh(t,"complete"),nh(t,"success");else{t.h=6;try{var s=2<nd(t)?t.a.statusText:""}catch(n){s=""}t.f=s+" ["+t.W()+"]",Zf(t)}}finally{td(t)}}}function td(t,e){if(t.a){ed(t);var n=t.a,r=t.s[0]?Uc:null;t.a=null,t.s=null,e||nh(t,"ready");try{n.onreadystatechange=r}catch(qC){}}}function ed(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(Vc.clearTimeout(t.m),t.m=null)}function nd(t){return t.a?t.a.readyState:0}function rd(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return cl(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):yf(t,e,n))}function id(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function od(t){this.pa=0,this.g=[],this.c=new Oh,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=id("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=id("baseRetryDelayMs",5e3,t),this.Ra=id("retryDelaySeedMs",1e4,t),this.Ma=id("forwardChannelMaxRetries",2,t),this.ma=id("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new Nf(t&&t.concurrentRequestLimit),this.ka=new Bf,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function ad(t){if(ud(t),3==t.v){var e=t.R++,n=hf(t.B);yf(n,"SID",t.J),yf(n,"RID",e),yf(n,"TYPE","terminate"),fd(t,n),(e=new Kh(t,t.c,e,void 0)).H=2,e.i=gf(hf(n)),n=!1,Vc.navigator&&Vc.navigator.sendBeacon&&(n=Vc.navigator.sendBeacon(e.i.toString(),"")),!n&&Vc.Image&&((new Image).src=e.i,n=!0),n||(e.a=Od(e.g,null),e.a.ba(e.i)),e.u=Yc(),Zh(e)}kd(t)}function sd(t){t.a&&(yd(t),t.a.cancel(),t.a=null)}function ud(t){sd(t),t.j&&(Vc.clearTimeout(t.j),t.j=null),md(t),t.b.cancel(),t.h&&("number"==typeof t.h&&Vc.clearTimeout(t.h),t.h=null)}function cd(t,e){t.g.push(new Pf(t.Oa++,e)),3==t.v&&ld(t)}function ld(t){Rf(t.b)||t.h||(t.h=!0,hh(t.Ba,t),t.u=0)}function hd(t,e){var n;n=e?e.f:t.R++;var r=hf(t.B);yf(r,"SID",t.J),yf(r,"RID",n),yf(r,"AID",t.P),fd(t,r),t.i&&t.l&&rd(r,t.i,t.l),n=new Kh(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=dd(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),Ff(t.b,n),Qh(n,r,e)}function fd(t,e){t.f&&of({},function(t,n){yf(e,n,t)})}function dd(t,e,n){n=Math.min(t.g.length,n);var r=t.f?Gc(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var a=["count="+n];-1==o?0<n?a.push("ofs="+(o=i[0].b)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),s=!1;else try{Hf(l,a,"req"+c+"_")}catch(tp){r&&r(l)}}if(s){r=a.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function pd(t){t.a||t.j||(t.T=1,hh(t.Aa,t),t.o=0)}function vd(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=Dh(Gc(t.Aa,t),_d(t,t.o)),t.o++,0))}function yd(t){null!=t.s&&(Vc.clearTimeout(t.s),t.s=null)}function gd(t){t.a=new Kh(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=hf(t.la);yf(e,"RID","rpc"),yf(e,"SID",t.J),yf(e,"CI",t.H?"0":"1"),yf(e,"AID",t.P),fd(t,e),yf(e,"TYPE","xmlhttp"),t.i&&t.l&&rd(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=gf(hf(e)),n.j=null,n.I=!0,Yh(n,t)}function md(t){null!=t.m&&(Vc.clearTimeout(t.m),t.m=null)}function bd(t,e){var n=null;if(t.a==e){md(t),yd(t),t.a=null;var r=2}else{if(!Mf(t.b,e))return;n=e.s,Vf(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=Yc()-e.u;var i=t.u;nh(r=Th(),new Nh(r,n,e,i)),ld(t)}else pd(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(Lf(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=Dh(Gc(t.Ba,t,e),_d(t,t.u)),t.u++,0)))}(t,e)||2==r&&vd(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:wd(t,5);break;case 4:wd(t,10);break;case 3:wd(t,6);break;default:wd(t,2)}}function _d(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function wd(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=Gc(t.Ya,t);n||(n=new lf("//www.google.com/images/cleardot.gif"),Vc.location&&"http"==Vc.location.protocol||ff(n,"https"),gf(n)),function(t,e){var n=new Oh;if(Vc.Image){var r=new Image;r.onload=Qc(Kf,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Qc(Kf,n,r,"TestLoadImage: error",!1,e),r.onabort=Qc(Kf,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Qc(Kf,n,r,"TestLoadImage: timeout",!1,e),Vc.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else Ph(2);t.v=0,t.f&&t.f.ra(e),kd(t),ud(t)}function kd(t){t.v=0,t.I=-1,t.f&&(0==Uf(t.b).length&&0==t.g.length||(t.b.c.length=0,el(t.g),t.g.length=0),t.f.qa())}function Cd(t,e,n){var r=function(t){return t instanceof lf?hf(t):new lf(t,void 0)}(n);if(""!=r.c)e&&df(r,e+"."+r.c),pf(r,r.h);else{var i=Vc.location;r=function(t,e,n,r){var i=new lf(null,void 0);return t&&ff(i,t),e&&df(i,e),n&&pf(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&cl(t.V,function(t,e){yf(r,e,t)}),n=t.na,(e=t.A)&&n&&yf(r,e,n),yf(r,"VER",t.ha),fd(t,r),r}function Od(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Wf(t.Na)).F=t.C,e}function Ed(){}function Sd(){if(gl&&!(10<=Number(Tl)))throw Error("Environmental error: no available transport.")}function Id(t,e){eh.call(this),this.a=new od(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!nl(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!nl(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new Ad(this)}function Td(t){qh.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function xd(){Bh.call(this),this.status=1}function Ad(t){this.a=t}(Lc=Wf.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:Vh),this.a.onreadystatechange=Gc(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void Xf(this,o)}t=n||"";var i=new af(this.headers);r&&of(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=Jf,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=Vc.FormData&&t instanceof Vc.FormData,!(0<=Zc(Yf,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{ed(this),0<this.o&&((this.D=function(t){return gl&&Il(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=Gc(this.xa,this)):this.m=gh(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){Xf(this,o)}},Lc.xa=function(){void 0!==Fc&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,nh(this,"timeout"),this.abort(8))},Lc.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,nh(this,"complete"),nh(this,"abort"),td(this))},Lc.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),td(this,!0)),Wf.X.G.call(this)},Lc.za=function(){this.j||(this.A||this.l||this.g?$f(this):this.Ua())},Lc.Ua=function(){$f(this)},Lc.W=function(){try{return 2<nd(this)?this.a.status:-1}catch(vl){return-1}},Lc.$=function(){try{return this.a?this.a.responseText:""}catch(vl){return""}},Lc.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),zf(e)}},Lc.ua=function(){return this.h},Lc.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(Lc=od.prototype).ha=8,Lc.v=1,Lc.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new Kh(this,this.c,t,void 0),r=this.l;if(this.O&&(r?fl(r=ll(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=dd(this,n,e),yf(i=hf(this.B),"RID",t),yf(i,"CVER",22),this.A&&yf(i,"X-HTTP-Session-Id",this.A),fd(this,i),this.i&&r&&rd(i,this.i,r),Ff(this.b,n),this.Ia&&yf(i,"TYPE","init"),this.da?(yf(i,"$req",e),yf(i,"SID","null"),n.U=!0,Qh(n,i,null)):Qh(n,i,e),this.v=2}}else 3==this.v&&(t?hd(this,t):0==this.g.length||Rf(this.b)||hd(this))},Lc.Aa=function(){if(this.j=null,gd(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=Dh(Gc(this.Ta,this),t)}},Lc.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,Ph(10),sd(this),gd(this))},Lc.Sa=function(){null!=this.m&&(this.m=null,sd(this),vd(this),Ph(19))},Lc.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),Ph(2)):(this.c.info("Failed to ping google.com"),Ph(1))},(Lc=Ed.prototype).ta=function(){},Lc.sa=function(){},Lc.ra=function(){},Lc.qa=function(){},Lc.Ja=function(){},Sd.prototype.a=function(t,e){return new Id(t,e)},Jc(Id,eh),Id.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;Ph(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=Cd(t,null,t.fa),ld(t)},Id.prototype.close=function(){ad(this.a)},Id.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,cd(this.a,e)}else this.l?((e={}).__data__=ih(t),cd(this.a,e)):cd(this.a,t)},Id.prototype.G=function(){this.a.f=null,delete this.f,ad(this.a),delete this.a,Id.X.G.call(this)},Jc(Td,qh),Jc(xd,Bh),Jc(Ad,Ed),Ad.prototype.ta=function(){nh(this.a,"a")},Ad.prototype.sa=function(t){nh(this.a,new Td(t))},Ad.prototype.ra=function(t){nh(this.a,new xd(t))},Ad.prototype.qa=function(){nh(this.a,"b")},Sd.prototype.createWebChannel=Sd.prototype.a,Id.prototype.send=Id.prototype.h,Id.prototype.open=Id.prototype.g,Id.prototype.close=Id.prototype.close,Rh.NO_ERROR=0,Rh.TIMEOUT=8,Rh.HTTP_ERROR=6,Lh.COMPLETE="complete",Fh.EventType=Uh,Uh.OPEN="a",Uh.CLOSE="b",Uh.ERROR="c",Uh.MESSAGE="d",eh.prototype.listen=eh.prototype.va,Wf.prototype.listenOnce=Wf.prototype.wa,Wf.prototype.getLastError=Wf.prototype.Qa,Wf.prototype.getLastErrorCode=Wf.prototype.ua,Wf.prototype.getStatus=Wf.prototype.W,Wf.prototype.getResponseJson=Wf.prototype.Pa,Wf.prototype.getResponseText=Wf.prototype.$,Wf.prototype.send=Wf.prototype.ba;var jd=Rh,Pd=Lh,Nd=Sh,Dd=Fh,Rd=Wf,Ld=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();Ld.o=-1;var Md={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Fd=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(zs.c)(e,t),e}(Error),Vd=new Nc.b("@firebase/firestore");function Ud(){return Vd.logLevel}function qd(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Vd.logLevel<=Nc.a.DEBUG){var r=e.map(Kd);Vd.debug.apply(Vd,Object(zs.f)(["Firestore (8.5.0): "+t],r))}}function Bd(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Vd.logLevel<=Nc.a.ERROR){var r=e.map(Kd);Vd.error.apply(Vd,Object(zs.f)(["Firestore (8.5.0): "+t],r))}}function Hd(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Vd.logLevel<=Nc.a.WARN){var r=e.map(Kd);Vd.warn.apply(Vd,Object(zs.f)(["Firestore (8.5.0): "+t],r))}}function Kd(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(qC){return t}}function zd(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.5.0) INTERNAL ASSERTION FAILED: "+t;throw Bd(e),new Error(e)}function Wd(t,e){t||zd()}function Gd(t,e){return t}function Qd(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Yd=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Qd(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function Jd(t,e){return t<e?-1:t>e?1:0}function Xd(t,e,n){return t.length===e.length&&t.every(function(t,r){return n(t,e[r])})}function Zd(t){return t+"\0"}var $d=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Fd(Md.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Fd(Md.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Fd(Md.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Fd(Md.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?Jd(this.nanoseconds,t.nanoseconds):Jd(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),tp=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new $d(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function ep(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function np(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function rp(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var ip=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&zd(),void 0===n?n=t.length-e:n>t.length-e&&zd(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),op=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(zs.c)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var a=o[i];if(a.indexOf("//")>=0)throw new Fd(Md.INVALID_ARGUMENT,"Invalid segment ("+a+"). Paths must not contain // in them.");r.push.apply(r,a.split("/").filter(function(t){return t.length>0}))}return new e(r)},e.emptyPath=function(){return new e([])},e}(ip),ap=/^[_a-zA-Z][_a-zA-Z0-9]*$/,sp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(zs.c)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return ap.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Fd(Md.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<t.length;){var s=t[i];if("\\"===s){if(i+1===t.length)throw new Fd(Md.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Fd(Md.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new Fd(Md.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(ip),up=function(){function t(t){this.fields=t,t.sort(sp.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return Xd(this.fields,t.fields,function(t,e){return t.isEqual(e)})},t}(),cp=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.binaryString)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return Jd(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();cp.EMPTY_BYTE_STRING=new cp("");var lp=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function hp(t){if(Wd(!!t),"string"==typeof t){var e=0,n=lp.exec(t);if(Wd(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:fp(t.seconds),nanos:fp(t.nanos)}}function fp(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function dp(t){return"string"==typeof t?cp.fromBase64String(t):cp.fromUint8Array(t)}function pp(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function vp(t){var e=t.mapValue.fields.__previous_value__;return pp(e)?vp(e):e}function yp(t){var e=hp(t.mapValue.fields.__local_write_time__.timestampValue);return new $d(e.seconds,e.nanos)}function gp(t){return null==t}function mp(t){return 0===t&&1/t==-1/0}function bp(t){return"number"==typeof t&&Number.isInteger(t)&&!mp(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var _p=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(op.fromString(e))},t.fromName=function(e){return new t(op.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===op.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return op.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new op(e.slice()))},t}();function wp(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?pp(t)?4:10:zd()}function kp(t,e){var n=wp(t);if(n!==wp(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return yp(t).isEqual(yp(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=hp(t.timestampValue),r=hp(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return dp(t.bytesValue).isEqual(dp(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return fp(t.geoPointValue.latitude)===fp(e.geoPointValue.latitude)&&fp(t.geoPointValue.longitude)===fp(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return fp(t.integerValue)===fp(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=fp(t.doubleValue),r=fp(e.doubleValue);return n===r?mp(n)===mp(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Xd(t.arrayValue.values||[],e.arrayValue.values||[],kp);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(ep(n)!==ep(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!kp(n[i],r[i])))return!1;return!0}(t,e);default:return zd()}}function Cp(t,e){return void 0!==(t.values||[]).find(function(t){return kp(t,e)})}function Op(t,e){var n=wp(t),r=wp(e);if(n!==r)return Jd(n,r);switch(n){case 0:return 0;case 1:return Jd(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=fp(t.integerValue||t.doubleValue),r=fp(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Ep(t.timestampValue,e.timestampValue);case 4:return Ep(yp(t),yp(e));case 5:return Jd(t.stringValue,e.stringValue);case 6:return function(t,e){var n=dp(t),r=dp(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Jd(n[i],r[i]);if(0!==o)return o}return Jd(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Jd(fp(t.latitude),fp(e.latitude));return 0!==n?n:Jd(fp(t.longitude),fp(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Op(n[i],r[i]);if(o)return o}return Jd(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var a=0;a<r.length&&a<o.length;++a){var s=Jd(r[a],o[a]);if(0!==s)return s;var u=Op(n[r[a]],i[o[a]]);if(0!==u)return u}return Jd(r.length,o.length)}(t.mapValue,e.mapValue);default:throw zd()}}function Ep(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Jd(t,e);var n=hp(t),r=hp(e),i=Jd(n.seconds,r.seconds);return 0!==i?i:Jd(n.nanos,r.nanos)}function Sp(t){return Ip(t)}function Ip(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=hp(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?dp(t.bytesValue).toBase64():"referenceValue"in t?_p.fromName(t.referenceValue).toString():"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=Ip(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+Ip(t.fields[o])}return e+"}"}(t.mapValue):zd();var e}function Tp(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function xp(t){return!!t&&"integerValue"in t}function Ap(t){return!!t&&"arrayValue"in t}function jp(t){return!!t&&"nullValue"in t}function Pp(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Np(t){return!!t&&"mapValue"in t}var Dp=function(){function t(t){this.overlayMap=new Map,this.partialValue=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(e){return t.extractNestedValue(this.buildProto(),e)},t.prototype.toProto=function(){return this.field(sp.emptyPath())},t.prototype.set=function(t,e){this.setOverlay(t,e)},t.prototype.setAll=function(t){var e=this;t.forEach(function(t,n){t?e.set(n,t):e.delete(n)})},t.prototype.delete=function(t){this.setOverlay(t,null)},t.prototype.isEqual=function(t){return kp(this.buildProto(),t.buildProto())},t.prototype.setOverlay=function(t,e){for(var n=this.overlayMap,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===wp(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.lastSegment(),e)},t.prototype.applyOverlay=function(e,n){var r=this,i=!1,o=t.extractNestedValue(this.partialValue,e),a=Np(o)?Object.assign({},o.mapValue.fields):{};return n.forEach(function(t,n){if(t instanceof Map){var o=r.applyOverlay(e.child(n),t);null!=o&&(a[n]=o,i=!0)}else null!==t?(a[n]=t,i=!0):a.hasOwnProperty(n)&&(delete a[n],i=!0)}),i?{mapValue:{fields:a}}:null},t.prototype.buildProto=function(){var t=this.applyOverlay(sp.emptyPath(),this.overlayMap);return null!=t&&(this.partialValue=t,this.overlayMap.clear()),this.partialValue},t.extractNestedValue=function(t,e){if(e.isEmpty())return t;for(var n=t,r=0;r<e.length-1;++r){if(!n.mapValue.fields)return null;if(!Np(n=n.mapValue.fields[e.get(r)]))return null}return(n=(n.mapValue.fields||{})[e.lastSegment()])||null},t.prototype.clone=function(){return new t(this.buildProto())},t}();function Rp(t){var e=[];return np(t.fields||{},function(t,n){var r=new sp([t]);if(Np(n)){var i=Rp(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,a=i;o<a.length;o++)e.push(r.child(a[o]))}else e.push(r)}),new up(e)}var Lp=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,tp.min(),Dp.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,Dp.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,Dp.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=Dp.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=Dp.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.toProto())+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),Mp=function(t,e,n,r,i,o,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.h=null};function Fp(t,e,n,r,i,o,a){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),new Mp(t,e,n,r,i,o,a)}function Vp(t){var e=Gd(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(t){return function(t){return t.field.canonicalString()+t.op.toString()+Sp(t.value)}(t)}).join(","),n+="|ob:",n+=e.orderBy.map(function(t){return function(t){return t.field.canonicalString()+t.dir}(t)}).join(","),gp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Zp(e.startAt)),e.endAt&&(n+="|ub:",n+=Zp(e.endAt)),e.h=n}return e.h}function Up(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!tv(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!kp(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!nv(t.startAt,e.startAt)&&nv(t.endAt,e.endAt)}function qp(t){return _p.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Bp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(zs.c)(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new Hp(t,n,r):"array-contains"===n?new Gp(t,r):"in"===n?new Qp(t,r):"not-in"===n?new Yp(t,r):"array-contains-any"===n?new Jp(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new Kp(t,n):new zp(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(Op(e,this.value)):null!==e&&wp(this.value)===wp(e)&&this.m(Op(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return zd()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),Hp=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=_p.fromName(r.referenceValue),i}return Object(zs.c)(e,t),e.prototype.matches=function(t){var e=_p.comparator(t.key,this.key);return this.m(e)},e}(Bp),Kp=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Wp(0,n),r}return Object(zs.c)(e,t),e.prototype.matches=function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},e}(Bp),zp=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Wp(0,n),r}return Object(zs.c)(e,t),e.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},e}(Bp);function Wp(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return _p.fromName(t.referenceValue)})}var Gp=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Object(zs.c)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return Ap(e)&&Cp(e.arrayValue,this.value)},e}(Bp),Qp=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Object(zs.c)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&Cp(this.value.arrayValue,e)},e}(Bp),Yp=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Object(zs.c)(e,t),e.prototype.matches=function(t){if(Cp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!Cp(this.value.arrayValue,e)},e}(Bp),Jp=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(zs.c)(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!Ap(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return Cp(e.value.arrayValue,t)})},e}(Bp),Xp=function(t,e){this.position=t,this.before=e};function Zp(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return Sp(t)}).join(",")}var $p=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function tv(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function ev(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],a=t.position[i];if(r=o.field.isKeyField()?_p.comparator(_p.fromName(a.referenceValue),n.key):Op(a,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function nv(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!kp(t.position[n],e.position[n]))return!1;return!0}var rv=function(t,e,n,r,i,o,a,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===a&&(a=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.p=null,this.T=null};function iv(t,e,n,r,i,o,a,s){return new rv(t,e,n,r,i,o,a,s)}function ov(t){return new rv(t)}function av(t){return!gp(t.limit)&&"F"===t.limitType}function sv(t){return!gp(t.limit)&&"L"===t.limitType}function uv(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function cv(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function lv(t){return null!==t.collectionGroup}function hv(t){var e=Gd(t);if(null===e.p){e.p=[];var n=cv(e),r=uv(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new $p(n)),e.p.push(new $p(sp.keyField(),"asc"));else{for(var i=!1,o=0,a=e.explicitOrderBy;o<a.length;o++){var s=a[o];e.p.push(s),s.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new $p(sp.keyField(),u))}}}return e.p}function fv(t){var e=Gd(t);if(!e.T)if("F"===e.limitType)e.T=Fp(e.path,e.collectionGroup,hv(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=hv(e);r<i.length;r++){var o=i[r];n.push(new $p(o.field,"desc"===o.dir?"asc":"desc"))}var a=e.endAt?new Xp(e.endAt.position,!e.endAt.before):null,s=e.startAt?new Xp(e.startAt.position,!e.startAt.before):null;e.T=Fp(e.path,e.collectionGroup,n,e.filters,e.limit,a,s)}return e.T}function dv(t,e,n){return new rv(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function pv(t,e){return Up(fv(t),fv(e))&&t.limitType===e.limitType}function vv(t){return Vp(fv(t))+"|lt:"+t.limitType}function yv(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(t){return(e=t).field.canonicalString()+" "+e.op+" "+Sp(e.value);var e}).join(", ")+"]"),gp(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Zp(t.startAt)),t.endAt&&(e+=", endAt: "+Zp(t.endAt)),"Target("+e+")"}(fv(t))+"; limitType="+t.limitType+")"}function gv(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):_p.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!ev(t.startAt,hv(t),e)||t.endAt&&ev(t.endAt,hv(t),e))}(t,e)}function mv(t){return function(e,n){for(var r=!1,i=0,o=hv(t);i<o.length;i++){var a=o[i],s=bv(a,e,n);if(0!==s)return s;r=r||a.field.isKeyField()}return 0}}function bv(t,e,n){var r=t.field.isKeyField()?_p.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?Op(r,i):zd()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return zd()}}function _v(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mp(e)?"-0":e}}function wv(t){return{integerValue:""+t}}function kv(t,e){return bp(e)?wv(e):_v(t,e)}var Cv=function(){this._=void 0};function Ov(t,e,n){return t instanceof Iv?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Tv?xv(t,e):t instanceof Av?jv(t,e):function(t,e){var n=Sv(t,e),r=Nv(n)+Nv(t.A);return xp(n)&&xp(t.A)?wv(r):_v(t.R,r)}(t,e)}function Ev(t,e,n){return t instanceof Tv?xv(t,e):t instanceof Av?jv(t,e):n}function Sv(t,e){return t instanceof Pv?xp(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Iv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(zs.c)(e,t),e}(Cv),Tv=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(zs.c)(e,t),e}(Cv);function xv(t,e){for(var n=Dv(e),r=function(t){n.some(function(e){return kp(e,t)})||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Av=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(zs.c)(e,t),e}(Cv);function jv(t,e){for(var n=Dv(e),r=function(t){n=n.filter(function(e){return!kp(e,t)})},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Pv=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return Object(zs.c)(e,t),e}(Cv);function Nv(t){return fp(t.integerValue||t.doubleValue)}function Dv(t){return Ap(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Rv=function(t,e){this.field=t,this.transform=e},Lv=function(t,e){this.version=t,this.transformResults=e},Mv=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Fv(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var Vv=function(){};function Uv(t,e,n){t instanceof zv?function(t,e,n){var r=t.value.clone(),i=Qv(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof Wv?function(t,e,n){if(Fv(t.precondition,e)){var r=Qv(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(Gv(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function qv(t,e,n){t instanceof zv?function(t,e,n){if(Fv(t.precondition,e)){var r=t.value.clone(),i=Yv(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(Kv(e),r).setHasLocalMutations()}}(t,e,n):t instanceof Wv?function(t,e,n){if(Fv(t.precondition,e)){var r=Yv(t.fieldTransforms,n,e),i=e.data;i.setAll(Gv(t)),i.setAll(r),e.convertToFoundDocument(Kv(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){Fv(t.precondition,e)&&e.convertToNoDocument(tp.min())}(t,e)}function Bv(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],a=e.data.field(o.field),s=Sv(o.transform,a||null);null!=s&&(null==n&&(n=Dp.empty()),n.set(o.field,s))}return n||null}function Hv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Xd(t,e,function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Tv&&e instanceof Tv||t instanceof Av&&e instanceof Av?Xd(t.elements,e.elements,kp):t instanceof Pv&&e instanceof Pv?kp(t.A,e.A):t instanceof Iv&&e instanceof Iv}(t.transform,e.transform)}(t,e)})}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function Kv(t){return t.isFoundDocument()?t.version:tp.min()}var zv=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return Object(zs.c)(e,t),e}(Vv),Wv=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var a=this;return(a=t.call(this)||this).key=e,a.data=n,a.fieldMask=r,a.precondition=i,a.fieldTransforms=o,a.type=1,a}return Object(zs.c)(e,t),e}(Vv);function Gv(t){var e=new Map;return t.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}}),e}function Qv(t,e,n){var r=new Map;Wd(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],a=o.transform,s=e.data.field(o.field);r.set(o.field,Ev(a,s,n[i]))}return r}function Yv(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var a=o[i],s=a.transform,u=n.data.field(a.field);r.set(a.field,Ov(s,u,e))}return r}var Jv,Xv,Zv=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return Object(zs.c)(e,t),e}(Vv),$v=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return Object(zs.c)(e,t),e}(Vv),ty=function(t){this.count=t};function ey(t){switch(t){case Md.OK:return zd();case Md.CANCELLED:case Md.UNKNOWN:case Md.DEADLINE_EXCEEDED:case Md.RESOURCE_EXHAUSTED:case Md.INTERNAL:case Md.UNAVAILABLE:case Md.UNAUTHENTICATED:return!1;case Md.INVALID_ARGUMENT:case Md.NOT_FOUND:case Md.ALREADY_EXISTS:case Md.PERMISSION_DENIED:case Md.FAILED_PRECONDITION:case Md.ABORTED:case Md.OUT_OF_RANGE:case Md.UNIMPLEMENTED:case Md.DATA_LOSS:return!0;default:return zd()}}function ny(t){if(void 0===t)return Bd("GRPC error has no .code"),Md.UNKNOWN;switch(t){case Jv.OK:return Md.OK;case Jv.CANCELLED:return Md.CANCELLED;case Jv.UNKNOWN:return Md.UNKNOWN;case Jv.DEADLINE_EXCEEDED:return Md.DEADLINE_EXCEEDED;case Jv.RESOURCE_EXHAUSTED:return Md.RESOURCE_EXHAUSTED;case Jv.INTERNAL:return Md.INTERNAL;case Jv.UNAVAILABLE:return Md.UNAVAILABLE;case Jv.UNAUTHENTICATED:return Md.UNAUTHENTICATED;case Jv.INVALID_ARGUMENT:return Md.INVALID_ARGUMENT;case Jv.NOT_FOUND:return Md.NOT_FOUND;case Jv.ALREADY_EXISTS:return Md.ALREADY_EXISTS;case Jv.PERMISSION_DENIED:return Md.PERMISSION_DENIED;case Jv.FAILED_PRECONDITION:return Md.FAILED_PRECONDITION;case Jv.ABORTED:return Md.ABORTED;case Jv.OUT_OF_RANGE:return Md.OUT_OF_RANGE;case Jv.UNIMPLEMENTED:return Md.UNIMPLEMENTED;case Jv.DATA_LOSS:return Md.DATA_LOSS;default:return zd()}}(Xv=Jv||(Jv={}))[Xv.OK=0]="OK",Xv[Xv.CANCELLED=1]="CANCELLED",Xv[Xv.UNKNOWN=2]="UNKNOWN",Xv[Xv.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xv[Xv.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xv[Xv.NOT_FOUND=5]="NOT_FOUND",Xv[Xv.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xv[Xv.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xv[Xv.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xv[Xv.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xv[Xv.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xv[Xv.ABORTED=10]="ABORTED",Xv[Xv.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xv[Xv.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xv[Xv.INTERNAL=13]="INTERNAL",Xv[Xv.UNAVAILABLE=14]="UNAVAILABLE",Xv[Xv.DATA_LOSS=15]="DATA_LOSS";var ry=function(){function t(t,e){this.comparator=t,this.root=e||oy.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,oy.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,oy.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.inorderTraversal(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new iy(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new iy(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new iy(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new iy(this.root,t,this.comparator,!0)},t}(),iy=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),oy=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw zd();if(this.right.isRed())throw zd();var t=this.left.check();if(t!==this.right.check())throw zd();return t+(this.isRed()?0:1)},t}();oy.EMPTY=null,oy.RED=!0,oy.BLACK=!1,oy.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw zd()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw zd()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw zd()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw zd()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw zd()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new oy(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var ay=function(){function t(t){this.comparator=t,this.data=new ry(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new sy(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new sy(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),sy=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),uy=new ry(_p.comparator);function cy(){return uy}var ly=new ry(_p.comparator);function hy(){return ly}var fy=new ry(_p.comparator);function dy(){return fy}var py=new ay(_p.comparator);function vy(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=py,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var yy=new ay(Jd);function gy(){return yy}var my=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,by.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(tp.min(),r,gy(),cy(),vy())},t}(),by=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(cp.EMPTY_BYTE_STRING,n,vy(),vy(),vy())},t}(),_y=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},wy=function(t,e){this.targetId=t,this.V=e},ky=function(t,e,n,r){void 0===n&&(n=cp.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Cy=function(){function t(){this.S=0,this.D=Sy(),this.C=cp.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"O",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.$=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=vy(),e=vy(),n=vy();return this.D.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:zd()}}),new by(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=Sy()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),Oy=function(){function t(t){this.W=t,this.G=new Map,this.H=cy(),this.J=Ey(),this.Y=new ay(Jd)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.tt(r=o[i],t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.$(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.$(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.$(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.$(t.resumeToken));break;default:zd()}})},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach(function(t,r){n.st(r)&&e(r)})},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(qp(i))if(0===n){var o=new _p(i.path);this.tt(e,o,Lp.newNoDocument(o,tp.min()))}else Wd(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach(function(r,i){var o=e.ot(i);if(o){if(r.current&&qp(o.target)){var a=new _p(o.target.path);null!==e.H.get(a)||e.at(i,a)||e.tt(i,a,Lp.newNoDocument(a,t))}r.O&&(n.set(i,r.M()),r.L())}});var r=vy();this.J.forEach(function(t,n){var i=!0;n.forEachWhile(function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)}),i&&(r=r.add(t))});var i=new my(t,n,this.Y,this.H,r);return this.H=cy(),this.J=Ey(),this.Y=new ay(Jd),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new Cy,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new ay(Jd),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||qd("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new Cy),this.W.getRemoteKeysForTarget(t).forEach(function(n){e.tt(t,n,null)})},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function Ey(){return new ry(_p.comparator)}function Sy(){return new ry(_p.comparator)}var Iy={asc:"ASCENDING",desc:"DESCENDING"},Ty={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},xy=function(t,e){this.databaseId=t,this.I=e};function Ay(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function jy(t,e){return t.I?e.toBase64():e.toUint8Array()}function Py(t,e){return Ay(t,e.toTimestamp())}function Ny(t){return Wd(!!t),tp.fromTimestamp(function(t){var e=hp(t);return new $d(e.seconds,e.nanos)}(t))}function Dy(t,e){return function(t){return new op(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function Ry(t){var e=op.fromString(t);return Wd(og(e)),e}function Ly(t,e){return Dy(t.databaseId,e.path)}function My(t,e){var n=Ry(e);if(n.get(1)!==t.databaseId.projectId)throw new Fd(Md.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Fd(Md.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new _p(qy(n))}function Fy(t,e){return Dy(t.databaseId,e)}function Vy(t){var e=Ry(t);return 4===e.length?op.emptyPath():qy(e)}function Uy(t){return new op(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function qy(t){return Wd(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function By(t,e,n){return{name:Ly(t,e),fields:n.toProto().mapValue.fields}}function Hy(t,e,n){var r=My(t,e.name),i=Ny(e.updateTime),o=new Dp({mapValue:{fields:e.fields}}),a=Lp.newFoundDocument(r,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Ky(t,e){var n;if(e instanceof zv)n={update:By(t,e.key,e.value)};else if(e instanceof Zv)n={delete:Ly(t,e.key)};else if(e instanceof Wv)n={update:By(t,e.key,e.data),updateMask:ig(e.fieldMask)};else{if(!(e instanceof $v))return zd();n={verify:Ly(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(function(t){return function(t,e){var n=e.transform;if(n instanceof Iv)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Tv)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Av)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Pv)return{fieldPath:e.field.canonicalString(),increment:n.A};throw zd()}(0,t)})),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Py(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:zd()}(t,e.precondition)),n}function zy(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Mv.updateTime(Ny(t.updateTime)):void 0!==t.exists?Mv.exists(t.exists):Mv.none()}(e.currentDocument):Mv.none(),r=e.updateTransforms?e.updateTransforms.map(function(e){return function(t,e){var n=null;"setToServerValue"in e?(Wd("REQUEST_TIME"===e.setToServerValue),n=new Iv):"appendMissingElements"in e?n=new Tv(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new Av(e.removeAllFromArray.values||[]):"increment"in e?n=new Pv(t,e.increment):zd();var r=sp.fromServerFormat(e.fieldPath);return new Rv(r,n)}(t,e)}):[];if(e.update){var i=My(t,e.update.name),o=new Dp({mapValue:{fields:e.update.fields}});if(e.updateMask){var a=function(t){return new up((t.fieldPaths||[]).map(function(t){return sp.fromServerFormat(t)}))}(e.updateMask);return new Wv(i,o,a,n,r)}return new zv(i,o,n,r)}if(e.delete){var s=My(t,e.delete);return new Zv(s,n)}if(e.verify){var u=My(t,e.verify);return new $v(u,n)}return zd()}function Wy(t,e){return{documents:[Fy(t,e.path)]}}function Gy(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Fy(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Fy(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return function(t){if("=="===t.op){if(Pp(t.value))return{unaryFilter:{field:tg(t.field),op:"IS_NAN"}};if(jp(t.value))return{unaryFilter:{field:tg(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Pp(t.value))return{unaryFilter:{field:tg(t.field),op:"IS_NOT_NAN"}};if(jp(t.value))return{unaryFilter:{field:tg(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:tg(t.field),op:$y(t.op),value:t.value}}}(t)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map(function(t){return function(t){return{field:tg(t.field),direction:Zy(t.dir)}}(t)})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var a=function(t,e){return t.I||gp(e)?e:{value:e}}(t,e.limit);return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=Jy(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Jy(e.endAt)),n}function Qy(t){var e=Vy(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Wd(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var a=[];n.where&&(a=Yy(n.where));var s=[];n.orderBy&&(s=n.orderBy.map(function(t){return function(t){return new $p(eg(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)}));var u=null;n.limit&&(u=function(t){var e;return gp(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Xy(n.startAt));var l=null;return n.endAt&&(l=Xy(n.endAt)),iv(e,i,s,a,u,"F",c,l)}function Yy(t){return t?void 0!==t.unaryFilter?[rg(t)]:void 0!==t.fieldFilter?[ng(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return Yy(t)}).reduce(function(t,e){return t.concat(e)}):zd():[]}function Jy(t){return{before:t.before,values:t.position}}function Xy(t){return new Xp(t.values||[],!!t.before)}function Zy(t){return Iy[t]}function $y(t){return Ty[t]}function tg(t){return{fieldPath:t.canonicalString()}}function eg(t){return sp.fromServerFormat(t.fieldPath)}function ng(t){return Bp.create(eg(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return zd()}}(t.fieldFilter.op),t.fieldFilter.value)}function rg(t){switch(t.unaryFilter.op){case"IS_NAN":var e=eg(t.unaryFilter.field);return Bp.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=eg(t.unaryFilter.field);return Bp.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=eg(t.unaryFilter.field);return Bp.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=eg(t.unaryFilter.field);return Bp.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return zd()}}function ig(t){var e=[];return t.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}}function og(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function ag(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=ug(e)),e=sg(t.get(n),e);return ug(e)}function sg(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function ug(t){return t+"\x01\x01"}function cg(t){var e=t.length;if(Wd(e>=2),2===e)return Wd("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),op.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var a=t.indexOf("\x01",o);switch((a<0||a>n)&&zd(),t.charAt(a+1)){case"\x01":var s=t.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"\x10":i+=t.substring(o,a),i+="\0";break;case"\x11":i+=t.substring(o,a+1);break;default:zd()}o=a+2}return new op(r)}var lg=function(t,e){this.seconds=t,this.nanoseconds=e},hg=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};hg.store="owner",hg.key="owner";var fg=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};fg.store="mutationQueues",fg.keyPath="userId";var dg=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};dg.store="mutations",dg.keyPath="batchId",dg.userMutationsIndex="userMutationsIndex",dg.userMutationsKeyPath=["userId","batchId"];var pg=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,ag(e)]},t.key=function(t,e,n){return[t,ag(e),n]},t}();pg.store="documentMutations",pg.PLACEHOLDER=new pg;var vg=function(t,e){this.path=t,this.readTime=e},yg=function(t,e){this.path=t,this.version=e},gg=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};gg.store="remoteDocuments",gg.readTimeIndex="readTimeIndex",gg.readTimeIndexPath="readTime",gg.collectionReadTimeIndex="collectionReadTimeIndex",gg.collectionReadTimeIndexPath=["parentPath","readTime"];var mg=function(t){this.byteSize=t};mg.store="remoteDocumentGlobal",mg.key="remoteDocumentGlobalKey";var bg=function(t,e,n,r,i,o,a){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a};bg.store="targets",bg.keyPath="targetId",bg.queryTargetsIndexName="queryTargetsIndex",bg.queryTargetsKeyPath=["canonicalId","targetId"];var _g=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};_g.store="targetDocuments",_g.keyPath=["targetId","path"],_g.documentTargetsIndex="documentTargetsIndex",_g.documentTargetsKeyPath=["path","targetId"];var wg=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};wg.key="targetGlobalKey",wg.store="targetGlobal";var kg=function(t,e){this.collectionId=t,this.parent=e};kg.store="collectionParents",kg.keyPath=["collectionId","parent"];var Cg=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Cg.store="clientMetadata",Cg.keyPath="clientId";var Og=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Og.store="bundles",Og.keyPath="bundleId";var Eg=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Eg.store="namedQueries",Eg.keyPath="name";var Sg=Object(zs.f)(Object(zs.f)([],Object(zs.f)(Object(zs.f)([],Object(zs.f)(Object(zs.f)([],Object(zs.f)(Object(zs.f)([],[fg.store,dg.store,pg.store,gg.store,bg.store,hg.store,wg.store,_g.store]),[Cg.store])),[mg.store])),[kg.store])),[Og.store,Eg.store]),Ig="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Tg=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},t}(),xg=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},Ag=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&zd(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}})},t.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.waitFor=function(e){return new t(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(t){return n(t)})}),o=!0,i===r&&t()})},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.waitFor(r)},t}(),jg=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new xg,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new Dg(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=Vg(e.target.error);n.ft.reject(new Dg(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new Dg(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(qd("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Lg(e)},t}(),Pg=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t(Object(Pc.o)())&&Bd("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return qd("SimpleDb","Removing database:",t),Mg(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=Object(Pc.o)(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return Object(zs.b)(this,void 0,void 0,function(){var e,n=this;return Object(zs.d)(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(qd("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new Dg(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new Fd(Md.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new Dg(t,n))},i.onupgradeneeded=function(t){qd("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.wt.Rt(t.target.result,i.transaction,t.oldVersion,n.version).next(function(){qd("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}})})},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return Object(zs.b)(this,void 0,void 0,function(){var i,o,a,s,u;return Object(zs.d)(this,function(c){switch(c.label){case 0:i="readonly"===e,o=0,a=function(){var e,a,u,c,l;return Object(zs.d)(this,function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,s.At(t)];case 2:return s.db=h.sent(),e=jg.open(s.db,t,i?"readonly":"readwrite",n),a=r(e).catch(function(t){return e.abort(t),Ag.reject(t)}).toPromise(),u={},a.catch(function(){}),[4,e.dt];case 3:return[2,(u.value=(h.sent(),a),u)];case 4:return qd("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&o<3),s.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}})},s=this,c.label=1;case 1:return[5,a()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Ng=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return Mg(this.Pt.delete())},t}(),Dg=function(t){function e(e,n){var r=this;return(r=t.call(this,Md.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(zs.c)(e,t),e}(Fd);function Rg(t){return"IndexedDbTransactionError"===t.name}var Lg=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(qd("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(qd("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Mg(n)},t.prototype.add=function(t){return qd("SimpleDb","ADD",this.store.name,t,t),Mg(this.store.add(t))},t.prototype.get=function(t){var e=this;return Mg(this.store.get(t)).next(function(n){return void 0===n&&(n=null),qd("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return qd("SimpleDb","DELETE",this.store.name,t),Mg(this.store.delete(t))},t.prototype.count=function(){return qd("SimpleDb","COUNT",this.store.name),Mg(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.Ft=function(t,e){qd("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,function(t,e,n){return n.delete()})},t.prototype.Ot=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.$t=function(t){var e=this.cursor({});return new Ag(function(n,r){e.onerror=function(t){var e=Vg(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.xt=function(t,e){var n=[];return new Ag(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Ng(i),a=e(i.primaryKey,i.value,o);if(a instanceof Ag){var s=a.catch(function(t){return o.done(),Ag.reject(t)});n.push(s)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}}).next(function(){return Ag.waitFor(n)})},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Mg(t){return new Ag(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=Vg(t.target.error);n(e)}})}var Fg=!1;function Vg(t){var e=Pg._t(Object(Pc.o)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Fd("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Fg||(Fg=!0,setTimeout(function(){throw r},0)),r}}return t}var Ug=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return Object(zs.c)(e,t),e}(Tg);function qg(t,e){var n=Gd(t);return Pg.It(n.Mt,e)}var Bg=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&Uv(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&qv(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&qv(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach(function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(tp.min())})},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},vy())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Xd(this.mutations,t.mutations,function(t,e){return Hv(t,e)})&&Xd(this.baseMutations,t.baseMutations,function(t,e){return Hv(t,e)})},t}(),Hg=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){Wd(e.mutations.length===r.length);for(var i=dy(),o=e.mutations,a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new t(e,n,r,i)},t}(),Kg=function(){function t(t,e,n,r,i,o,a){void 0===i&&(i=tp.min()),void 0===o&&(o=tp.min()),void 0===a&&(a=cp.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),zg=function(t){this.Lt=t};function Wg(t,e){if(e.document)return Hy(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=_p.fromSegments(e.noDocument.path),r=Xg(e.noDocument.readTime),i=Lp.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=_p.fromSegments(e.unknownDocument.path);return r=Xg(e.unknownDocument.version),Lp.newUnknownDocument(o,r)}return zd()}function Gg(t,e,n){var r=Qg(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:Ly(t,e.key),fields:e.data.toProto().mapValue.fields,updateTime:Ay(t,e.version.toTimestamp())}}(t.Lt,e),a=e.hasCommittedMutations;return new gg(null,null,o,a,r,i)}if(e.isNoDocument()){var s=e.key.path.toArray(),u=Jg(e.version);return a=e.hasCommittedMutations,new gg(null,new vg(s,u),null,a,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),l=Jg(e.version);return new gg(new yg(c,l),null,null,!0,r,i)}return zd()}function Qg(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Yg(t){var e=new $d(t[0],t[1]);return tp.fromTimestamp(e)}function Jg(t){var e=t.toTimestamp();return new lg(e.seconds,e.nanoseconds)}function Xg(t){var e=new $d(t.seconds,t.nanoseconds);return tp.fromTimestamp(e)}function Zg(t,e){for(var n=(e.baseMutations||[]).map(function(e){return zy(t.Lt,e)}),r=0;r<e.mutations.length-1;++r)r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(e.mutations[r].updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r);var i=e.mutations.map(function(e){return zy(t.Lt,e)}),o=$d.fromMillis(e.localWriteTimeMs);return new Bg(e.batchId,o,n,i)}function $g(t){var e,n,r=Xg(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Xg(t.lastLimboFreeSnapshotVersion):tp.min();return void 0!==t.query.documents?(Wd(1===(n=t.query).documents.length),e=fv(ov(Vy(n.documents[0])))):e=function(t){return fv(Qy(t))}(t.query),new Kg(e,t.targetId,0,t.lastListenSequenceNumber,r,i,cp.fromBase64String(t.resumeToken))}function tm(t,e){var n,r=Jg(e.snapshotVersion),i=Jg(e.lastLimboFreeSnapshotVersion);n=qp(e.target)?Wy(t.Lt,e.target):Gy(t.Lt,e.target);var o=e.resumeToken.toBase64();return new bg(e.targetId,Vp(e.target),r,o,e.sequenceNumber,i,n)}function em(t){var e=Qy({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?dv(e,e.limit,"L"):e}var nm=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return rm(t).get(e).next(function(t){if(t)return{id:(e=t).bundleId,createTime:Xg(e.createTime),version:e.version};var e})},t.prototype.saveBundleMetadata=function(t,e){return rm(t).put({bundleId:(n=e).id,createTime:Jg(Ny(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return im(t).get(e).next(function(t){if(t)return{name:(e=t).name,query:em(e.bundledQuery),readTime:Xg(e.readTime)};var e})},t.prototype.saveNamedQuery=function(t,e){return im(t).put(function(t){return{name:t.name,readTime:Jg(Ny(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function rm(t){return qg(t,Og.store)}function im(t){return qg(t,Eg.store)}var om=function(){function t(){this.Bt=new am}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),Ag.resolve()},t.prototype.getCollectionParents=function(t,e){return Ag.resolve(this.Bt.getEntries(e))},t}(),am=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new ay(op.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new ay(op.comparator)).toArray()},t}(),sm=function(){function t(){this.qt=new am}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(function(){n.qt.add(e)});var o={collectionId:r,parent:ag(i)};return um(t).put(o)}return Ag.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Zd(e),""],!1,!0);return um(t).Nt(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(cg(o.parent))}return n})},t}();function um(t){return qg(t,kg.store)}var cm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},lm=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function hm(t,e,n){var r=t.store(dg.store),i=t.store(pg.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.Ot({range:a},function(t,e,n){return s++,n.delete()});o.push(u.next(function(){Wd(1===s)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=pg.key(e,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return Ag.waitFor(o).next(function(){return c})}function fm(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw zd();e=t.noDocument}return JSON.stringify(e).length}lm.DEFAULT_COLLECTION_PERCENTILE=10,lm.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,lm.DEFAULT=new lm(41943040,lm.DEFAULT_COLLECTION_PERCENTILE,lm.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),lm.DISABLED=new lm(-1,0,0);var dm=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Qt={}}return t.Kt=function(e,n,r,i){return Wd(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return vm(t).Ot({index:dg.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=ym(t),a=vm(t);return a.add({}).next(function(s){Wd("number"==typeof s);for(var u=new Bg(s,e,n,r),c=function(t,e,n){var r=n.baseMutations.map(function(e){return Ky(t.Lt,e)}),i=n.mutations.map(function(e){return Ky(t.Lt,e)});return new dg(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new ay(function(t,e){return Jd(t.canonicalString(),e.canonicalString())}),f=0,d=r;f<d.length;f++){var p=d[f],v=pg.key(i.userId,p.key.path,s);h=h.add(p.key.path.popLast()),l.push(a.put(c)),l.push(o.put(v,pg.PLACEHOLDER))}return h.forEach(function(e){l.push(i.Ut.addToCollectionParentIndex(t,e))}),t.addOnCommittedListener(function(){i.Qt[s]=u.keys()}),Ag.waitFor(l).next(function(){return u})})},t.prototype.lookupMutationBatch=function(t,e){var n=this;return vm(t).get(e).next(function(t){return t?(Wd(t.userId===n.userId),Zg(n.R,t)):null})},t.prototype.jt=function(t,e){var n=this;return this.Qt[e]?Ag.resolve(this.Qt[e]):this.lookupMutationBatch(t,e).next(function(t){if(t){var r=t.keys();return n.Qt[e]=r,r}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return vm(t).Ot({index:dg.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(Wd(e.batchId>=r),o=Zg(n.R,e)),i.done()}).next(function(){return o})},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return vm(t).Ot({index:dg.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return vm(t).Nt(dg.userMutationsIndex,n).next(function(t){return t.map(function(t){return Zg(e.R,t)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=pg.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return ym(t).Ot({range:i},function(r,i,a){var s=r[0],u=r[2],c=cg(r[1]);if(s===n.userId&&e.path.isEqual(c))return vm(t).get(u).next(function(t){if(!t)throw zd();Wd(t.userId===n.userId),o.push(Zg(n.R,t))});a.done()}).next(function(){return o})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new ay(Jd),i=[];return e.forEach(function(e){var o=pg.prefixForPath(n.userId,e.path),a=IDBKeyRange.lowerBound(o),s=ym(t).Ot({range:a},function(t,i,o){var a=t[0],s=t[2],u=cg(t[1]);a===n.userId&&e.path.isEqual(u)?r=r.add(s):o.done()});i.push(s)}),Ag.waitFor(i).next(function(){return n.Wt(t,r)})},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=pg.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new ay(Jd);return ym(t).Ot({range:a},function(t,e,o){var a=t[0],u=t[2],c=cg(t[1]);a===n.userId&&r.isPrefixOf(c)?c.length===i&&(s=s.add(u)):o.done()}).next(function(){return n.Wt(t,s)})},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(vm(t).get(e).next(function(t){if(null===t)throw zd();Wd(t.userId===n.userId),r.push(Zg(n.R,t))}))}),Ag.waitFor(i).next(function(){return r})},t.prototype.removeMutationBatch=function(t,e){var n=this;return hm(t.Mt,this.userId,e).next(function(r){return t.addOnCommittedListener(function(){n.Gt(e.batchId)}),Ag.forEach(r,function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)})})},t.prototype.Gt=function(t){delete this.Qt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(n){if(!n)return Ag.resolve();var r=IDBKeyRange.lowerBound(pg.prefixForUser(e.userId)),i=[];return ym(t).Ot({range:r},function(t,n,r){if(t[0]===e.userId){var o=cg(t[1]);i.push(o)}else r.done()}).next(function(){Wd(0===i.length)})})},t.prototype.containsKey=function(t,e){return pm(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return gm(t).get(this.userId).next(function(t){return t||new fg(e.userId,-1,"")})},t}();function pm(t,e,n){var r=pg.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return ym(t).Ot({range:o,kt:!0},function(t,n,r){t[0]===e&&t[1]===i&&(a=!0),r.done()}).next(function(){return a})}function vm(t){return qg(t,dg.store)}function ym(t){return qg(t,pg.store)}function gm(t){return qg(t,fg.store)}var mm=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),bm=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next(function(n){var r=new mm(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next(function(){return n.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next(function(t){return tp.fromTimestamp(new $d(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next(function(t){return t.highestListenSequenceNumber})},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)})},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next(function(){return n.Xt(t).next(function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)})})},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return _m(t).delete(e.targetId)}).next(function(){return n.Xt(t)}).next(function(e){return Wd(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)})},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return _m(t).Ot(function(a,s){var u=$g(s);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))}).next(function(){return Ag.waitFor(o)}).next(function(){return i})},t.prototype.forEachTarget=function(t,e){return _m(t).Ot(function(t,n){var r=$g(n);e(r)})},t.prototype.Xt=function(t){return wm(t).get(wg.key).next(function(t){return Wd(null!==t),t})},t.prototype.Zt=function(t,e){return wm(t).put(wg.key,e)},t.prototype.te=function(t,e){return _m(t).put(tm(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next(function(t){return t.targetCount})},t.prototype.getTargetData=function(t,e){var n=Vp(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return _m(t).Ot({range:r,index:bg.queryTargetsIndexName},function(t,n,r){var o=$g(n);Up(e,o.target)&&(i=o,r.done())}).next(function(){return i})},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=km(t);return e.forEach(function(e){var a=ag(e.path);i.push(o.put(new _g(n,a))),i.push(r.referenceDelegate.addReference(t,n,e))}),Ag.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=km(t);return Ag.forEach(e,function(e){var o=ag(e.path);return Ag.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])})},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=km(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=km(t),i=vy();return r.Ot({range:n,kt:!0},function(t,e,n){var r=cg(t[1]),o=new _p(r);i=i.add(o)}).next(function(){return i})},t.prototype.containsKey=function(t,e){var n=ag(e.path),r=IDBKeyRange.bound([n],[Zd(n)],!1,!0),i=0;return km(t).Ot({index:_g.documentTargetsIndex,kt:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.lt=function(t,e){return _m(t).get(e).next(function(t){return t?$g(t):null})},t}();function _m(t){return qg(t,bg.store)}function wm(t){return qg(t,wg.store)}function km(t){return qg(t,_g.store)}function Cm(t){return Object(zs.b)(this,void 0,void 0,function(){return Object(zs.d)(this,function(e){if(t.code!==Md.FAILED_PRECONDITION||t.message!==Ig)throw t;return qd("LocalStore","Unexpectedly lost primary lease"),[2]})})}function Om(t,e){var n=t[1],r=e[1],i=Jd(t[0],e[0]);return 0===i?Jd(n,r):i}var Em=function(){function t(t){this.ne=t,this.buffer=new ay(Om),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Om(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Sm=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;qd("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,function(){return Object(zs.b)(e,void 0,void 0,function(){var e;return Object(zs.d)(this,function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return Rg(e=n.sent())?(qd("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Cm(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}})})})},t}(),Im=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return Ag.resolve(Ld.o);var r=new Em(e);return this.ae.forEachTarget(t,function(t){return r.re(t.sequenceNumber)}).next(function(){return n.ae.le(t,function(t){return r.re(t)})}).next(function(){return r.maxValue})},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(qd("LruGarbageCollector","Garbage collection skipped; disabled"),Ag.resolve(cm)):this.getCacheSize(t).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(qd("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),cm):n.fe(t,e)})},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,a,s,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(e){return e>c.params.maximumSequenceNumbersToCollect?(qd("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)}).next(function(r){return n=r,a=Date.now(),c.removeTargets(t,n,e)}).next(function(e){return i=e,s=Date.now(),c.removeOrphanedDocuments(t,n)}).next(function(t){return u=Date.now(),Ud()<=Nc.a.DEBUG&&qd("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(a-o)+"ms\n\tRemoved "+i+" targets in "+(s-a)+"ms\n\tRemoved "+t+" documents in "+(u-s)+"ms\nTotal Duration: "+(u-l)+"ms"),Ag.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})})},t}(),Tm=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new Im(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.de=function(t){var e=0;return this.le(t,function(t){e++}).next(function(){return e})},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,function(t,n){return e(n)})},t.prototype.addReference=function(t,e,n){return xm(t,n)},t.prototype.removeReference=function(t,e,n){return xm(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return xm(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return gm(t).$t(function(r){return pm(t,r,e).next(function(t){return t&&(n=!0),Ag.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,function(a,s){if(s<=e){var u=n._e(t,a).next(function(e){if(!e)return o++,r.getEntry(t,a).next(function(){return r.removeEntry(a),km(t).delete([0,ag(a.path)])})});i.push(u)}}).next(function(){return Ag.waitFor(i)}).next(function(){return r.apply(t)}).next(function(){return o})},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return xm(t,e)},t.prototype.we=function(t,e){var n,r=km(t),i=Ld.o;return r.Ot({index:_g.documentTargetsIndex},function(t,r){var o=r.path,a=r.sequenceNumber;0===t[0]?(i!==Ld.o&&e(new _p(cg(n)),i),i=a,n=o):i=Ld.o}).next(function(){i!==Ld.o&&e(new _p(cg(n)),i)})},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function xm(t,e){return km(t).put(function(t,e){return new _g(0,ag(t.path),e)}(e,t.currentSequenceNumber))}var Am=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[1];if(this.equalsFn(o[0],t))return a}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){np(this.inner,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}})},t.prototype.isEmpty=function(){return rp(this.inner)},t}(),jm=function(){function t(){this.changes=new Am(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:tp.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:Lp.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?Ag.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),Pm=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return Rm(t).put(Lm(e),n)},t.prototype.removeEntry=function(t,e){var n=Rm(t),r=Lm(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.me(t,r)})},t.prototype.getEntry=function(t,e){var n=this;return Rm(t).get(Lm(e)).next(function(t){return n.ye(e,t)})},t.prototype.ge=function(t,e){var n=this;return Rm(t).get(Lm(e)).next(function(t){return{document:n.ye(e,t),size:fm(t)}})},t.prototype.getEntries=function(t,e){var n=this,r=cy();return this.pe(t,e,function(t,e){var i=n.ye(t,e);r=r.insert(t,i)}).next(function(){return r})},t.prototype.Ee=function(t,e){var n=this,r=cy(),i=new ry(_p.comparator);return this.pe(t,e,function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,fm(e))}).next(function(){return{documents:r,Te:i}})},t.prototype.pe=function(t,e,n){if(e.isEmpty())return Ag.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return Rm(t).Ot({range:r},function(t,e,r){for(var a=_p.fromSegments(t);o&&_p.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()}).next(function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=cy(),o=e.path.length+1,a={};if(n.isEqual(tp.min())){var s=e.path.toArray();a.range=IDBKeyRange.lowerBound(s)}else{var u=e.path.toArray(),c=Qg(n);a.range=IDBKeyRange.lowerBound([u,c],!0),a.index=gg.collectionReadTimeIndex}return Rm(t).Ot(a,function(t,n,a){if(t.length===o){var s=Wg(r.R,n);e.path.isPrefixOf(s.key.path)?gv(e,s)&&(i=i.insert(s.key,s)):a.done()}}).next(function(){return i})},t.prototype.newChangeBuffer=function(t){return new Nm(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return Dm(t).get(mg.key).next(function(t){return Wd(!!t),t})},t.prototype.me=function(t,e){return Dm(t).put(mg.key,e)},t.prototype.ye=function(t,e){if(e){var n=Wg(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(tp.min()))return n}return Lp.newInvalidDocument(t)},t}(),Nm=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new Am(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return Object(zs.c)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new ay(function(t,e){return Jd(t.canonicalString(),e.canonicalString())});return this.changes.forEach(function(o,a){var s=e.Ae.get(o);if(a.document.isValidDocument()){var u=Gg(e.Ie.R,a.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=fm(u);r+=c-s,n.push(e.Ie.addEntry(t,o,u))}else if(r-=s,e.trackRemovals){var l=Gg(e.Ie.R,Lp.newNoDocument(o,tp.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,l))}else n.push(e.Ie.removeEntry(t,o))}),i.forEach(function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))}),n.push(this.Ie.updateMetadata(t,r)),Ag.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next(function(t){return n.Ae.set(e,t.size),t.document})},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next(function(t){var e=t.documents;return t.Te.forEach(function(t,e){n.Ae.set(t,e)}),e})},e}(jm);function Dm(t){return qg(t,mg.store)}function Rm(t){return qg(t,gg.store)}function Lm(t){return t.path.toArray()}var Mm=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;Wd(n<r&&n>=0&&r<=11);var o=new jg("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(hg.store)}(t),function(t){t.createObjectStore(fg.store,{keyPath:fg.keyPath}),t.createObjectStore(dg.store,{keyPath:dg.keyPath,autoIncrement:!0}).createIndex(dg.userMutationsIndex,dg.userMutationsKeyPath,{unique:!0}),t.createObjectStore(pg.store)}(t),Fm(t),function(t){t.createObjectStore(gg.store)}(t));var a=Ag.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(_g.store),t.deleteObjectStore(bg.store),t.deleteObjectStore(wg.store)}(t),Fm(t)),a=a.next(function(){return function(t){var e=t.store(wg.store),n=new wg(0,0,tp.min().toTimestamp(),0);return e.put(wg.key,n)}(o)})),n<4&&r>=4&&(0!==n&&(a=a.next(function(){return function(t,e){return e.store(dg.store).Nt().next(function(n){t.deleteObjectStore(dg.store),t.createObjectStore(dg.store,{keyPath:dg.keyPath,autoIncrement:!0}).createIndex(dg.userMutationsIndex,dg.userMutationsKeyPath,{unique:!0});var r=e.store(dg.store),i=n.map(function(t){return r.put(t)});return Ag.waitFor(i)})}(t,o)})),a=a.next(function(){!function(t){t.createObjectStore(Cg.store,{keyPath:Cg.keyPath})}(t)})),n<5&&r>=5&&(a=a.next(function(){return i.Re(o)})),n<6&&r>=6&&(a=a.next(function(){return function(t){t.createObjectStore(mg.store)}(t),i.be(o)})),n<7&&r>=7&&(a=a.next(function(){return i.ve(o)})),n<8&&r>=8&&(a=a.next(function(){return i.Pe(t,o)})),n<9&&r>=9&&(a=a.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(gg.store);e.createIndex(gg.readTimeIndex,gg.readTimeIndexPath,{unique:!1}),e.createIndex(gg.collectionReadTimeIndex,gg.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(a=a.next(function(){return i.Ve(o)})),n<11&&r>=11&&(a=a.next(function(){!function(t){t.createObjectStore(Og.store,{keyPath:Og.keyPath})}(t),function(t){t.createObjectStore(Eg.store,{keyPath:Eg.keyPath})}(t)})),a},t.prototype.be=function(t){var e=0;return t.store(gg.store).Ot(function(t,n){e+=fm(n)}).next(function(){var n=new mg(e);return t.store(mg.store).put(mg.key,n)})},t.prototype.Re=function(t){var e=this,n=t.store(fg.store),r=t.store(dg.store);return n.Nt().next(function(n){return Ag.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(dg.userMutationsIndex,i).next(function(r){return Ag.forEach(r,function(r){Wd(r.userId===n.userId);var i=Zg(e.R,r);return hm(t,n.userId,i).next(function(){})})})})})},t.prototype.ve=function(t){var e=t.store(_g.store),n=t.store(gg.store);return t.store(wg.store).get(wg.key).next(function(t){var r=[];return n.Ot(function(n,i){var o=new op(n),a=function(t){return[0,ag(t)]}(o);r.push(e.get(a).next(function(n){return n?Ag.resolve():function(n){return e.put(new _g(0,ag(n),t.highestListenSequenceNumber))}(o)}))}).next(function(){return Ag.waitFor(r)})})},t.prototype.Pe=function(t,e){t.createObjectStore(kg.store,{keyPath:kg.keyPath});var n=e.store(kg.store),r=new am,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:ag(i)})}};return e.store(gg.store).Ot({kt:!0},function(t,e){var n=new op(t);return i(n.popLast())}).next(function(){return e.store(pg.store).Ot({kt:!0},function(t,e){var n=cg(t[1]);return i(n.popLast())})})},t.prototype.Ve=function(t){var e=this,n=t.store(bg.store);return n.Ot(function(t,r){var i=$g(r),o=tm(e.R,i);return n.put(o)})},t}();function Fm(t){t.createObjectStore(_g.store,{keyPath:_g.keyPath}).createIndex(_g.documentTargetsIndex,_g.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(bg.store,{keyPath:bg.keyPath}).createIndex(bg.queryTargetsIndexName,bg.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(wg.store)}var Vm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Um=function(){function t(e,n,r,i,o,a,s,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=a,this.document=s,this.De=c,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.Oe=null,this.$e=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new Fd(Md.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Tm(this,i),this.Le=n+"main",this.R=new zg(u),this.Be=new Pg(this.Le,11,new Mm(this.R)),this.qe=new bm(this.referenceDelegate,this.R),this.Ut=new sm,this.Ue=function(t,e){return new Pm(t,e)}(this.R,this.Ut),this.Qe=new nm,this.window&&this.window.localStorage?this.Ke=this.window.localStorage:(this.Ke=null,!1===l&&Bd("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Fd(Md.FAILED_PRECONDITION,Vm);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t.qe.getHighestSequenceNumber(e)})}).then(function(e){t.Ne=new Ld(e,t.De)}).then(function(){t.xe=!0}).catch(function(e){return t.Be&&t.Be.close(),Promise.reject(e)})},t.prototype.He=function(t){var e=this;return this.Me=function(n){return Object(zs.b)(e,void 0,void 0,function(){return Object(zs.d)(this,function(e){return this.started?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt(function(n){return Object(zs.b)(e,void 0,void 0,function(){return Object(zs.d)(this,function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget(function(){return Object(zs.b)(e,void 0,void 0,function(){return Object(zs.d)(this,function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return Bm(e).put(new Cg(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.Je(e).next(function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable(function(){return t.Me(!1)}))})}).next(function(){return t.Ye(e)}).next(function(n){return t.isPrimary&&!n?t.Xe(e).next(function(){return!1}):!!n&&t.Ze(e).next(function(){return!0})})}).catch(function(e){if(Rg(e))return qd("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return qd("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.Se.enqueueRetryable(function(){return t.Me(e)}),t.isPrimary=e})},t.prototype.Je=function(t){var e=this;return qm(t).get(hg.key).next(function(t){return Ag.resolve(e.tn(t))})},t.prototype.en=function(t){return Bm(t).delete(this.clientId)},t.prototype.nn=function(){return Object(zs.b)(this,void 0,void 0,function(){var t,e,n,r=this;return Object(zs.d)(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.sn(this.$e,18e5)?[3,2]:(this.$e=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var e=qg(t,Cg.store);return e.Nt().next(function(t){var n=r.rn(t,18e5),i=t.filter(function(t){return-1===n.indexOf(t)});return Ag.forEach(i,function(t){return e.delete(t.clientId)}).next(function(){return i})})}).catch(function(){return[]})]);case 1:if(t=i.sent(),this.Ke)for(e=0,n=t;e<n.length;e++)this.Ke.removeItem(this.on(n[e].clientId));i.label=2;case 2:return[2]}})})},t.prototype.ze=function(){var t=this;this.Oe=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.je().then(function(){return t.nn()}).then(function(){return t.ze()})})},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?Ag.resolve(!0):qm(t).get(hg.key).next(function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new Fd(Md.FAILED_PRECONDITION,Vm);return!1}}return!(!e.networkEnabled||!e.inForeground)||Bm(t).Nt().next(function(t){return void 0===e.rn(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&qd("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.shutdown=function(){return Object(zs.b)(this,void 0,void 0,function(){var t=this;return Object(zs.d)(this,function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.Oe&&(this.Oe.cancel(),this.Oe=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[hg.store,Cg.store],function(e){var n=new Ug(e,Ld.o);return t.Xe(n).next(function(){return t.en(n)})})];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}})})},t.prototype.rn=function(t,e){var n=this;return t.filter(function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)})},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return Bm(e).Nt().next(function(e){return t.rn(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return dm.Kt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r,i=this;return qd("IndexedDbPersistence","Starting transaction:",t),this.Be.runTransaction(t,"readonly"===e?"readonly":"readwrite",Sg,function(o){return r=new Ug(o,i.Ne?i.Ne.next():Ld.o),"readwrite-primary"===e?i.Je(r).next(function(t){return!!t||i.Ye(r)}).next(function(e){if(!e)throw Bd("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Se.enqueueRetryable(function(){return i.Me(!1)}),new Fd(Md.FAILED_PRECONDITION,Ig);return n(r)}).next(function(t){return i.Ze(r).next(function(){return t})}):i.dn(r).next(function(){return n(r)})}).then(function(t){return r.raiseOnCommittedEvent(),t})},t.prototype.dn=function(t){var e=this;return qm(t).get(hg.key).next(function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Fd(Md.FAILED_PRECONDITION,Vm)})},t.prototype.Ze=function(t){var e=new hg(this.clientId,this.allowTabSynchronization,Date.now());return qm(t).put(hg.key,e)},t.yt=function(){return Pg.yt()},t.prototype.Xe=function(t){var e=this,n=qm(t);return n.get(hg.key).next(function(t){return e.tn(t)?(qd("IndexedDbPersistence","Releasing primary lease."),n.delete(hg.key)):Ag.resolve()})},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(Bd("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.je()})},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),e.Se.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("unload",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("unload",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Ke)||void 0===e?void 0:e.getItem(this.on(t)));return qd("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return Bd("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Ke)try{this.Ke.setItem(this.on(this.clientId),String(Date.now()))}catch(t){Bd("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Ke)try{this.Ke.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function qm(t){return qg(t,hg.store)}function Bm(t){return qg(t,Cg.store)}function Hm(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Km=function(t,e){this.progress=t,this.wn=e},zm=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(r){return n.yn(t,e,r)})},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next(function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t})},t.prototype.gn=function(t,e){t.forEach(function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)})},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next(function(e){return n.En(t,e).next(function(){return e})})},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(t){return n.gn(e,t)})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return _p.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):lv(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new _p(e)).next(function(t){var e=hy();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e})},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=hy();return this.Ut.getCollectionParents(t,i).next(function(a){return Ag.forEach(a,function(a){var s=function(t,e){return new rv(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,a.child(i));return r.An(t,s,n).next(function(t){t.forEach(function(t,e){o=o.insert(t,e)})})}).next(function(){return o})})},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next(function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)}).next(function(e){return o.Rn(t,i=e,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key,l=r.get(c);null==l&&(l=Lp.newInvalidDocument(c),r=r.insert(c,l)),qv(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}})}).next(function(){return r.forEach(function(t,n){gv(e,n)||(r=r.remove(t))}),r})},t.prototype.Rn=function(t,e,n){for(var r=vy(),i=0,o=e;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof Wv&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next(function(t){return t.forEach(function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))}),c})},t}(),Wm=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=vy(),i=vy(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Gm=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(tp.min())?this.Dn(t,e):this.Sn.pn(t,r).next(function(o){var a=i.Cn(e,o);return(av(e)||sv(e))&&i.Nn(e.limitType,a,r,n)?i.Dn(t,e):(Ud()<=Nc.a.DEBUG&&qd("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),yv(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next(function(t){return a.forEach(function(e){t=t.insert(e.key,e)}),t}))})},t.prototype.Cn=function(t,e){var n=new ay(mv(t));return e.forEach(function(e,r){gv(t,r)&&(n=n.add(r))}),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return Ud()<=Nc.a.DEBUG&&qd("QueryEngine","Using full collection scan to execute query:",yv(e)),this.Sn.getDocumentsMatchingQuery(t,e,tp.min())},t}(),Qm=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new ry(Jd),this.kn=new Am(function(t){return Vp(t)},Up),this.On=tp.min(),this._n=t.getMutationQueue(n),this.$n=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new zm(this.$n,this._n,this.persistence.getIndexManager()),this.Qe=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.collect(n,e.Fn)})},t}();function Ym(t,e,n,r){return new Qm(t,e,n,r)}function Jm(t,e){return Object(zs.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(zs.d)(this,function(a){switch(a.label){case 0:return n=Gd(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",function(t){var o;return n._n.getAllMutationBatches(t).next(function(a){return o=a,r=n.persistence.getMutationQueue(e),i=new zm(n.$n,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)}).next(function(e){for(var n=[],r=[],a=vy(),s=0,u=o;s<u.length;s++){var c=u[s];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)a=a.add(h[l].key)}for(var f=0,d=e;f<d.length;f++){var p=d[f];r.push(p.batchId);for(var v=0,y=p.mutations;v<y.length;v++)a=a.add(y[v].key)}return i.pn(t,a).next(function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}})})})];case 1:return o=a.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}})})}function Xm(t,e){var n=Gd(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r=e.batch.keys(),i=n.$n.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),a=Ag.resolve();return o.forEach(function(t){a=a.next(function(){return r.getEntry(e,t)}).next(function(e){var o=n.docVersions.get(t);Wd(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))})}),a.next(function(){return t._n.removeMutationBatch(e,i)})}(n,t,e,i).next(function(){return i.apply(t)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}function Zm(t){var e=Gd(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.qe.getLastRemoteSnapshotVersion(t)})}function $m(t,e){var n=Gd(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(t){var o=n.$n.newChangeBuffer({trackRemovals:!0});i=n.Fn;var a=[];e.targetChanges.forEach(function(e,o){var s=i.get(o);if(s){a.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next(function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)}));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=s.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return Wd(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(s,c,e)&&a.push(n.qe.updateTargetData(t,c))}}});var s=cy();if(e.documentUpdates.forEach(function(r,i){e.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))}),a.push(tb(t,o,e.documentUpdates,r,void 0).next(function(t){s=t})),!r.isEqual(tp.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next(function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)});a.push(u)}return Ag.waitFor(a).next(function(){return o.apply(t)}).next(function(){return n.Mn.En(t,s)}).next(function(){return s})}).then(function(t){return n.Fn=i,t})}function tb(t,e,n,r,i){var o=vy();return n.forEach(function(t){return o=o.add(t)}),e.getEntries(t,o).next(function(t){var o=cy();return n.forEach(function(n,a){var s=t.get(n),u=(null==i?void 0:i.get(n))||r;a.isNoDocument()&&a.version.isEqual(tp.min())?(e.removeEntry(n,u),o=o.insert(n,a)):!s.isValidDocument()||a.version.compareTo(s.version)>0||0===a.version.compareTo(s.version)&&s.hasPendingWrites?(e.addEntry(a,u),o=o.insert(n,a)):qd("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",a.version)}),o})}function eb(t,e){var n=Gd(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)})}function nb(t,e){var n=Gd(t);return n.persistence.runTransaction("Allocate target","readwrite",function(t){var r;return n.qe.getTargetData(t,e).next(function(i){return i?Ag.resolve(r=i):n.qe.allocateTargetId(t).next(function(i){return r=new Kg(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next(function(){return r})})})}).then(function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t})}function rb(t,e,n){return Object(zs.b)(this,void 0,void 0,function(){var r,i,o,a;return Object(zs.d)(this,function(s){switch(s.label){case 0:r=Gd(t),i=r.Fn.get(e),o=n?"readwrite":"readwrite-primary",s.label=1;case 1:return s.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,function(t){return r.persistence.referenceDelegate.removeTarget(t,i)})];case 2:s.sent(),s.label=3;case 3:return[3,5];case 4:if(!Rg(a=s.sent()))throw a;return qd("LocalStore","Failed to update sequence numbers for target "+e+": "+a),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}})})}function ib(t,e,n){var r=Gd(t),i=tp.min(),o=vy();return r.persistence.runTransaction("Execute query","readonly",function(t){return function(t,e,n){var r=Gd(t),i=r.kn.get(n);return void 0!==i?Ag.resolve(r.Fn.get(i)):r.qe.getTargetData(e,n)}(r,t,fv(e)).next(function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next(function(t){o=t})}).next(function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:tp.min(),n?o:vy())}).next(function(t){return{documents:t,Bn:o}})})}function ob(t,e){var n=Gd(t),r=Gd(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.lt(t,e).next(function(t){return t?t.target:null})})}function ab(t){var e=Gd(t);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return function(t,e,n){var r=Gd(t),i=cy(),o=Qg(n),a=Rm(e),s=IDBKeyRange.lowerBound(o,!0);return a.Ot({index:gg.readTimeIndex,range:s},function(t,e){var n=Wg(r.R,e);i=i.insert(n.key,n),o=e.readTime}).next(function(){return{wn:i,readTime:Yg(o)}})}(e.$n,t,e.On)}).then(function(t){var n=t.wn;return e.On=t.readTime,n})}function sb(t){return Object(zs.b)(this,void 0,void 0,function(){var e;return Object(zs.d)(this,function(n){return[2,(e=Gd(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return function(t){var e=Rm(t),n=tp.min();return e.Ot({index:gg.readTimeIndex,reverse:!0},function(t,e,r){e.readTime&&(n=Yg(e.readTime)),r.done()}).next(function(){return n})}(t)}).then(function(t){e.On=t})]})})}function ub(t,e,n,r){return Object(zs.b)(this,void 0,void 0,function(){var i,o,a,s,u,c,l,h,f,d;return Object(zs.d)(this,function(p){switch(p.label){case 0:for(i=Gd(t),o=vy(),a=cy(),s=dy(),u=0,c=n;u<c.length;u++)h=e.qn((l=c[u]).metadata.name),l.document&&(o=o.add(h)),a=a.insert(h,e.Un(l)),s=s.insert(h,e.Qn(l.metadata.readTime));return f=i.$n.newChangeBuffer({trackRemovals:!0}),[4,nb(i,function(t){return fv(ov(op.fromString("__bundle__/docs/"+t)))}(r))];case 1:return d=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(t){return tb(t,f,a,tp.min(),s).next(function(e){return f.apply(t),e}).next(function(e){return i.qe.removeMatchingKeysForTargetId(t,d.targetId).next(function(){return i.qe.addMatchingKeys(t,o,d.targetId)}).next(function(){return i.Mn.En(t,e)}).next(function(){return e})})})]}})})}function cb(t,e,n){return void 0===n&&(n=vy()),Object(zs.b)(this,void 0,void 0,function(){var r,i;return Object(zs.d)(this,function(o){switch(o.label){case 0:return[4,nb(t,fv(em(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=Gd(t)).persistence.runTransaction("Save named query","readwrite",function(t){var o=Ny(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Qe.saveNamedQuery(t,e);var a=r.withResumeToken(cp.EMPTY_BYTE_STRING,o);return i.Fn=i.Fn.insert(a.targetId,a),i.qe.updateTargetData(t,a).next(function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)}).next(function(){return i.qe.addMatchingKeys(t,n,r.targetId)}).next(function(){return i.Qe.saveNamedQuery(t,e)})})]}})})}var lb=function(){function t(t){this.R=t,this.Kn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return Ag.resolve(this.Kn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Kn.set(e.id,{id:(n=e).id,version:n.version,createTime:Ny(n.createTime)}),Ag.resolve()},t.prototype.getNamedQuery=function(t,e){return Ag.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:em(t.bundledQuery),readTime:Ny(t.readTime)}}(e)),Ag.resolve()},t}(),hb=function(){function t(){this.Wn=new ay(fb.Gn),this.zn=new ay(fb.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new fb(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.Yn(new fb(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.Zn=function(t){var e=this,n=new _p(new op([])),r=new fb(n,t),i=new fb(n,t+1),o=[];return this.zn.forEachInRange([r,i],function(t){e.Yn(t),o.push(t.key)}),o},t.prototype.ts=function(){var t=this;this.Wn.forEach(function(e){return t.Yn(e)})},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new _p(new op([])),n=new fb(e,t),r=new fb(e,t+1),i=vy();return this.zn.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},t.prototype.containsKey=function(t){var e=new fb(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),fb=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return _p.comparator(t.key,e.key)||Jd(t.ns,e.ns)},t.Hn=function(t,e){return Jd(t.ns,e.ns)||_p.comparator(t.key,e.key)},t}(),db=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new ay(fb.Gn)}return t.prototype.checkEmpty=function(t){return Ag.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++;var o=new Bg(i,e,n,r);this._n.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.rs=this.rs.add(new fb(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return Ag.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return Ag.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this.cs(e+1),r=n<0?0:n;return Ag.resolve(this._n.length>r?this._n[r]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return Ag.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return Ag.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new fb(e,0),i=new fb(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],function(t){var e=n.os(t.ns);o.push(e)}),Ag.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new ay(Jd);return e.forEach(function(t){var e=new fb(t,0),i=new fb(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],function(t){r=r.add(t.ns)})}),Ag.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;_p.isDocumentKey(i)||(i=i.child(""));var o=new fb(new _p(i),0),a=new ay(Jd);return this.rs.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(a=a.add(t.ns)),!0)},o),Ag.resolve(this.us(a))},t.prototype.us=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.os(t);null!==r&&n.push(r)}),n},t.prototype.removeMutationBatch=function(t,e){var n=this;Wd(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return Ag.forEach(e.mutations,function(i){var o=new fb(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(function(){n.rs=r})},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new fb(e,0),r=this.rs.firstAfterOrEqual(n);return Ag.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return Ag.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),pb=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new ry(_p.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,a=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:a,readTime:n}),this.size+=a-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return Ag.resolve(n?n.document.clone():Lp.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=cy();return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():Lp.newInvalidDocument(t))}),Ag.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=cy(),i=new _p(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var a=o.getNext(),s=a.value,u=s.document,c=s.readTime;if(!e.path.isPrefixOf(a.key.path))break;c.compareTo(n)<=0||gv(e,u)&&(r=r.insert(u.key,u.clone()))}return Ag.resolve(r)},t.prototype.fs=function(t,e){return Ag.forEach(this.docs,function(t){return e(t)})},t.prototype.newChangeBuffer=function(t){return new vb(this)},t.prototype.getSize=function(t){return Ag.resolve(this.size)},t}(),vb=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return Object(zs.c)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach(function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)}),Ag.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(jm),yb=function(){function t(t){this.persistence=t,this.ds=new Am(function(t){return Vp(t)},Up),this.lastRemoteSnapshotVersion=tp.min(),this.highestTargetId=0,this.ws=0,this._s=new hb,this.targetCount=0,this.ys=mm.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach(function(t,n){return e(n)}),Ag.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return Ag.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return Ag.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),Ag.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),Ag.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new mm(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,Ag.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),Ag.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,Ag.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach(function(a,s){s.sequenceNumber<=e&&null===n.get(s.targetId)&&(r.ds.delete(a),o.push(r.removeMatchingKeysForTargetId(t,s.targetId)),i++)}),Ag.waitFor(o).next(function(){return i})},t.prototype.getTargetCount=function(t){return Ag.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return Ag.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),Ag.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.markPotentiallyOrphaned(t,e))}),Ag.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),Ag.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return Ag.resolve(n)},t.prototype.containsKey=function(t,e){return Ag.resolve(this._s.containsKey(e))},t}(),gb=function(){function t(t,e){var n=this;this.gs={},this.Ne=new Ld(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new yb(this),this.Ut=new om,this.Ue=function(t,e){return new pb(t,function(t){return n.referenceDelegate.ps(t)})}(this.Ut),this.R=new zg(e),this.Qe=new lb(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new db(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r=this;qd("MemoryPersistence","Starting transaction:",t);var i=new mb(this.Ne.next());return this.referenceDelegate.Es(),n(i).next(function(t){return r.referenceDelegate.Ts(i).next(function(){return t})}).toPromise().then(function(t){return i.raiseOnCommittedEvent(),t})},t.prototype.Is=function(t,e){return Ag.or(Object.values(this.gs).map(function(n){return function(){return n.containsKey(t,e)}}))},t}(),mb=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return Object(zs.c)(e,t),e}(Tg),bb=function(){function t(t){this.persistence=t,this.As=new hb,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw zd()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),Ag.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),Ag.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),Ag.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach(function(t){return n.vs.add(t.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.vs.add(t.toString())})}).next(function(){return r.removeTargetData(t,e)})},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ag.forEach(this.vs,function(r){var i=_p.fromPath(r);return e.Ps(t,i).next(function(t){t||n.removeEntry(i)})}).next(function(){return e.Rs=null,n.apply(t)})},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next(function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())})},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return Ag.or([function(){return Ag.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),_b=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function wb(t,e){return"firestore_clients_"+t+"_"+e}function kb(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function Cb(t,e){return"firestore_targets_"+t+"_"+e}_b.UNAUTHENTICATED=new _b(null),_b.GOOGLE_CREDENTIALS=new _b("google-credentials-uid"),_b.FIRST_PARTY=new _b("first-party-uid");var Ob=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),a="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return a&&o.error&&(a="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new Fd(o.error.code,o.error.message)),a?new t(e,n,o.state,i):(Bd("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Eb=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Fd(i.error.code,i.error.message)),o?new t(e,i.state,r):(Bd("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Sb=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=gy(),a=0;i&&a<r.activeTargetIds.length;++a)i=bp(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new t(e,o):(Bd("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Ib=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(Bd("SharedClientState","Failed to parse online state: "+e),null)},t}(),Tb=function(){function t(){this.activeTargetIds=gy()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),xb=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new ry(Jd),this.started=!1,this.Os=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.$s=wb(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.ks=this.ks.insert(this.Ns,new Tb),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Qs=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(zs.b)(this,void 0,void 0,function(){var t,e,n,r,i,o,a,s,u,c,l=this;return Object(zs.d)(this,function(h){switch(h.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(wb(this.persistenceKey,r)))&&(o=Sb.Vs(r,i))&&(this.ks=this.ks.insert(o.clientId,o));for(this.Ks(),(a=this.storage.getItem(this.Us))&&(s=this.js(a))&&this.Ws(s),u=0,c=this.Os;u<c.length;u++)this.Fs(c[u]);return this.Os=[],this.window.addEventListener("unload",function(){return l.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(Cb(this.persistenceKey,t));if(n){var r=Eb.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Ks(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Ks()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(Cb(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.Hs(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.$s),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return qd("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){qd("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){qd("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(qd("SharedClientState","EVENT",n.key,n.newValue),n.key===this.$s)return void Bd("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return Object(zs.b)(e,void 0,void 0,function(){var t,e,r,i,o,a;return Object(zs.d)(this,function(s){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(a=function(t){var e=Ld.o;if(null!=t)try{var n=JSON.parse(t);Wd("number"==typeof n),e=n}catch(t){Bd("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Ld.o&&this.sequenceNumberHandler(a);else if(n.key===this.Qs)return[2,this.syncEngine.ci()]}else this.Os.push(n);return[2]})})})}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Ks=function(){this.setItem(this.$s,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new Ob(this.currentUser,t,e,n),i=kb(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=kb(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){this.storage.setItem(this.Us,JSON.stringify({clientId:this.Ns,onlineState:t}))},t.prototype.Ys=function(t,e,n){var r=Cb(this.persistenceKey,t),i=new Eb(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Qs,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return Sb.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]);return Ob.Vs(new _b(void 0!==n[2]?n[2]:null),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return Eb.Vs(r,e)},t.prototype.js=function(t){return Ib.Vs(t)},t.prototype.ii=function(t){return Object(zs.b)(this,void 0,void 0,function(){return Object(zs.d)(this,function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(qd("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),o=this.Gs(r),a=[],s=[];return o.forEach(function(t){i.has(t)||a.push(t)}),i.forEach(function(t){o.has(t)||s.push(t)}),this.syncEngine.hi(a,s).then(function(){n.ks=r})},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=gy();return t.forEach(function(t,n){e=e.unionWith(n.activeTargetIds)}),e},t}(),Ab=function(){function t(){this.li=new Tb,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new Tb,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),jb=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),Pb=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){qd("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){qd("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Nb={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Db=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),Rb=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n}return Object(zs.c)(e,t),e.prototype.ki=function(t,e,n,r){return new Promise(function(i,o){var a=new Rd;a.listenOnce(Pd.COMPLETE,function(){try{switch(a.getLastErrorCode()){case jd.NO_ERROR:var e=a.getResponseJson();qd("Connection","XHR received:",JSON.stringify(e)),i(e);break;case jd.TIMEOUT:qd("Connection",'RPC "'+t+'" timed out'),o(new Fd(Md.DEADLINE_EXCEEDED,"Request time out"));break;case jd.HTTP_ERROR:var n=a.getStatus();if(qd("Connection",'RPC "'+t+'" failed with status:',n,"response text:",a.getResponseText()),n>0){var r=a.getResponseJson().error;if(r&&r.status&&r.message){var s=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(Md).indexOf(e)>=0?e:Md.UNKNOWN}(r.status);o(new Fd(s,r.message))}else o(new Fd(Md.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Fd(Md.UNAVAILABLE,"Connection failed."));break;default:zd()}}finally{qd("Connection",'RPC "'+t+'" completed.')}});var s=JSON.stringify(r);a.send(e,"POST",s,n,15)})},e.prototype.$i=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new Sd,i=Th(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.Fi(o.initMessageHeaders,e),Object(Pc.v)()||Object(Pc.y)()||Object(Pc.s)()||Object(Pc.u)()||Object(Pc.z)()||Object(Pc.r)()||(o.httpHeadersOverwriteParam="$httpHeaders");var a=n.join("");qd("Connection","Creating WebChannel: "+a,o);var s=r.createWebChannel(a,o),u=!1,c=!1,l=new Db({Ei:function(t){c?qd("Connection","Not sending because WebChannel is closed:",t):(u||(qd("Connection","Opening WebChannel transport."),s.open(),u=!0),qd("Connection","WebChannel sending:",t),s.send(t))},Ti:function(){return s.close()}}),h=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return h(s,Dd.EventType.OPEN,function(){c||qd("Connection","WebChannel transport opened.")}),h(s,Dd.EventType.CLOSE,function(){c||(c=!0,qd("Connection","WebChannel transport closed"),l.Vi())}),h(s,Dd.EventType.ERROR,function(t){c||(c=!0,Hd("Connection","WebChannel transport errored:",t),l.Vi(new Fd(Md.UNAVAILABLE,"The operation could not be completed")))}),h(s,Dd.EventType.MESSAGE,function(t){var e;if(!c){var n=t.data[0];Wd(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){qd("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=Jv[t];if(void 0!==e)return ny(e)}(i),a=r.message;void 0===o&&(o=Md.INTERNAL,a="Unknown error status: "+i+" with message "+r.message),c=!0,l.Vi(new Fd(o,a)),s.close()}else qd("Connection","WebChannel received:",n),l.Si(n)}}),h(i,Nd.STAT_EVENT,function(t){10===t.stat?qd("Connection","Detected buffering proxy"):11===t.stat&&qd("Connection","Detected no buffering proxy")}),setTimeout(function(){l.Pi()},0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Di=(t.ssl?"https":"http")+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);qd("RestConnection","Sending: ",i,n);var o={};return this.Fi(o,r),this.ki(t,i,o,n).then(function(t){return qd("RestConnection","Received: ",t),t},function(e){throw Hd("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e})},t.prototype.Oi=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.5.0",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){return this.Di+"/v1/"+e+":"+Nb[t]},t}());function Lb(){return"undefined"!=typeof window?window:null}function Mb(){return"undefined"!=typeof document?document:null}function Fb(t){return new xy(t,!0)}var Vb=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Qi=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Ki=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Qi),i=Math.max(0,n-r);i>0&&qd("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,function(){return e.Qi=Date.now(),t()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),Ub=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new Vb(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return Object(zs.b)(this,void 0,void 0,function(){return Object(zs.d)(this,function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return t.rr()}))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return Object(zs.b)(this,void 0,void 0,function(){return Object(zs.d)(this,function(t){return this.er()?[2,this.close(0)]:[2]})})},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return Object(zs.b)(this,void 0,void 0,function(){return Object(zs.d)(this,function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===Md.RESOURCE_EXHAUSTED?(Bd(e.toString()),Bd("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Ki()):e&&e.code===Md.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}})})},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then(function(e){t.Yi===n&&t.lr(e)},function(n){e(function(){var e=new Fd(Md.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)})})},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii(function(){n(function(){return e.state=2,e.listener.Ii()})}),this.stream.Ri(function(t){n(function(){return e.dr(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji(function(){return Object(zs.b)(t,void 0,void 0,function(){return Object(zs.d)(this,function(t){return this.state=0,this.start(),[2]})})})},t.prototype.dr=function(t){return qd("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget(function(){return e.Yi===t?n():(qd("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),qb=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,a}return Object(zs.c)(e,t),e.prototype.wr=function(t){return this.Hi.$i("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:zd()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(Wd(void 0===e||"string"==typeof e),cp.fromBase64String(e||"")):(Wd(void 0===e||e instanceof Uint8Array),cp.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),a=(s=e.targetChange.cause)&&function(t){var e=void 0===t.code?Md.UNKNOWN:ny(t.code);return new Fd(e,t.message||"")}(s);n=new ky(r,i,o,a||null)}else if("documentChange"in e){i=My(t,(r=e.documentChange).document.name),o=Ny(r.document.updateTime);var s=new Dp({mapValue:{fields:r.document.fields}}),u=(a=Lp.newFoundDocument(i,o,s),r.targetIds||[]);n=new _y(u,r.removedTargetIds||[],a.key,a)}else if("documentDelete"in e)i=My(t,(r=e.documentDelete).document),o=r.readTime?Ny(r.readTime):tp.min(),s=Lp.newNoDocument(i,o),n=new _y([],a=r.removedTargetIds||[],s.key,s);else if("documentRemove"in e)i=My(t,(r=e.documentRemove).document),n=new _y([],o=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return zd();var c=e.filter;i=new ty(r=c.count||0),n=new wy(o=c.targetId,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return tp.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?tp.min():e.readTime?Ny(e.readTime):tp.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=Uy(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=qp(r)?{documents:Wy(t,r)}:{query:Gy(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=jy(t,e.resumeToken):e.snapshotVersion.compareTo(tp.min())>0&&(n.readTime=Ay(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return zd()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=Uy(this.R),e.removeTarget=t,this.cr(e)},e}(Ub),Bb=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,a.gr=!1,a}return Object(zs.c)(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.$i("Write",t)},e.prototype.onMessage=function(t){if(Wd(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(Wd(void 0!==e),t.map(function(t){return function(t,e){var n=Ny(t.updateTime?t.updateTime:e);return n.isEqual(tp.min())&&(n=Ny(e)),new Lv(n,t.transformResults||[])}(t,e)})):[]}(t.writeResults,t.commitTime),n=Ny(t.commitTime);return this.listener.Tr(n,e)}return Wd(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=Uy(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return Ky(e.R,t)})};this.cr(n)},e}(Ub),Hb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return Object(zs.c)(e,t),e.prototype.br=function(){if(this.Rr)throw new Fd(Md.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.Ni(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===Md.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Fd(Md.UNKNOWN,t.toString())})},e.prototype.Oi=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.Oi(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===Md.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Fd(Md.UNKNOWN,t.toString())})},e.prototype.terminate=function(){this.Rr=!0},e}(function(){}),Kb=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()}))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(Bd(e),this.Vr=!1):qd("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),zb=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.Or=new Map,this.$r=new Set,this.Mr=[],this.Lr=i,this.Lr.di(function(t){n.enqueueAndForget(function(){return Object(zs.b)(o,void 0,void 0,function(){return Object(zs.d)(this,function(t){switch(t.label){case 0:return t_(this)?(qd("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(zs.b)(this,void 0,void 0,function(){var e;return Object(zs.d)(this,function(n){switch(n.label){case 0:return(e=Gd(t)).$r.add(4),[4,Gb(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.$r.delete(4),[4,Wb(e)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Br=new Kb(n,r)};function Wb(t){return Object(zs.b)(this,void 0,void 0,function(){var e,n;return Object(zs.d)(this,function(r){switch(r.label){case 0:if(!t_(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function Gb(t){return Object(zs.b)(this,void 0,void 0,function(){var e,n;return Object(zs.d)(this,function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function Qb(t,e){var n=Gd(t);n.Or.has(e.targetId)||(n.Or.set(e.targetId,e),$b(n)?Zb(n):v_(n).er()&&Jb(n,e))}function Yb(t,e){var n=Gd(t),r=v_(n);n.Or.delete(e),r.er()&&Xb(n,e),0===n.Or.size&&(r.er()?r.ir():t_(n)&&n.Br.set("Unknown"))}function Jb(t,e){t.qr.U(e.targetId),v_(t).mr(e)}function Xb(t,e){t.qr.U(e),v_(t).yr(e)}function Zb(t){t.qr=new Oy({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.Or.get(e)||null}}),v_(t).start(),t.Br.Sr()}function $b(t){return t_(t)&&!v_(t).tr()&&t.Or.size>0}function t_(t){return 0===Gd(t).$r.size}function e_(t){t.qr=void 0}function n_(t){return Object(zs.b)(this,void 0,void 0,function(){return Object(zs.d)(this,function(e){return t.Or.forEach(function(e,n){Jb(t,e)}),[2]})})}function r_(t,e){return Object(zs.b)(this,void 0,void 0,function(){return Object(zs.d)(this,function(n){return e_(t),$b(t)?(t.Br.Nr(e),Zb(t)):t.Br.set("Unknown"),[2]})})}function i_(t,e,n){return Object(zs.b)(this,void 0,void 0,function(){var r,i,o;return Object(zs.d)(this,function(a){switch(a.label){case 0:if(t.Br.set("Online"),!(e instanceof ky&&2===e.state&&e.cause))return[3,6];a.label=1;case 1:return a.trys.push([1,3,,5]),[4,function(t,e){return Object(zs.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(zs.d)(this,function(a){switch(a.label){case 0:n=e.cause,r=0,i=e.targetIds,a.label=1;case 1:return r<i.length?t.Or.has(o=i[r])?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]:[3,5];case 2:a.sent(),t.Or.delete(o),t.qr.removeTarget(o),a.label=3;case 3:a.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return a.sent(),[3,5];case 3:return r=a.sent(),qd("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,o_(t,r)];case 4:return a.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof _y?t.qr.X(e):e instanceof wy?t.qr.rt(e):t.qr.et(e),n.isEqual(tp.min()))return[3,13];a.label=7;case 7:return a.trys.push([7,11,,13]),[4,Zm(t.localStore)];case 8:return i=a.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach(function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.Or.get(r);i&&t.Or.set(r,i.withResumeToken(n.resumeToken,e))}}),n.targetMismatches.forEach(function(e){var n=t.Or.get(e);if(n){t.Or.set(e,n.withResumeToken(cp.EMPTY_BYTE_STRING,n.snapshotVersion)),Xb(t,e);var r=new Kg(n.target,e,1,n.sequenceNumber);Jb(t,r)}}),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:a.sent(),a.label=10;case 10:return[3,13];case 11:return qd("RemoteStore","Failed to raise snapshot:",o=a.sent()),[4,o_(t,o)];case 12:return a.sent(),[3,13];case 13:return[2]}})})}function o_(t,e,n){return Object(zs.b)(this,void 0,void 0,function(){var r=this;return Object(zs.d)(this,function(i){switch(i.label){case 0:if(!Rg(e))throw e;return t.$r.add(1),[4,Gb(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return Zm(t.localStore)}),t.asyncQueue.enqueueRetryable(function(){return Object(zs.b)(r,void 0,void 0,function(){return Object(zs.d)(this,function(e){switch(e.label){case 0:return qd("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.$r.delete(1),[4,Wb(t)];case 2:return e.sent(),[2]}})})}),[2]}})})}function a_(t,e){return e().catch(function(n){return o_(t,n,e)})}function s_(t){return Object(zs.b)(this,void 0,void 0,function(){var e,n,r,i,o;return Object(zs.d)(this,function(a){switch(a.label){case 0:e=Gd(t),n=y_(e),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,a.label=1;case 1:if(!function(t){return t_(t)&&t.kr.length<10}(e))return[3,7];a.label=2;case 2:return a.trys.push([2,4,,6]),[4,eb(e.localStore,r)];case 3:return null===(i=a.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e);var n=y_(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=a.sent(),[4,o_(e,o)];case 5:return a.sent(),[3,6];case 6:return[3,1];case 7:return u_(e)&&c_(e),[2]}})})}function u_(t){return t_(t)&&!y_(t).tr()&&t.kr.length>0}function c_(t){y_(t).start()}function l_(t){return Object(zs.b)(this,void 0,void 0,function(){return Object(zs.d)(this,function(e){return y_(t).Ar(),[2]})})}function h_(t){return Object(zs.b)(this,void 0,void 0,function(){var e,n,r;return Object(zs.d)(this,function(i){for(e=y_(t),n=0,r=t.kr;n<r.length;n++)e.Er(r[n].mutations);return[2]})})}function f_(t,e,n){return Object(zs.b)(this,void 0,void 0,function(){var r,i;return Object(zs.d)(this,function(o){switch(o.label){case 0:return r=t.kr.shift(),i=Hg.from(r,e,n),[4,a_(t,function(){return t.remoteSyncer.applySuccessfulWrite(i)})];case 1:return o.sent(),[4,s_(t)];case 2:return o.sent(),[2]}})})}function d_(t,e){return Object(zs.b)(this,void 0,void 0,function(){return Object(zs.d)(this,function(n){switch(n.label){case 0:return e&&y_(t).pr?[4,function(t,e){return Object(zs.b)(this,void 0,void 0,function(){var n,r;return Object(zs.d)(this,function(i){switch(i.label){case 0:return ey(r=e.code)&&r!==Md.ABORTED?(n=t.kr.shift(),y_(t).sr(),[4,a_(t,function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)})]):[3,3];case 1:return i.sent(),[4,s_(t)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return u_(t)&&c_(t),[2]}})})}function p_(t,e){return Object(zs.b)(this,void 0,void 0,function(){var n;return Object(zs.d)(this,function(r){switch(r.label){case 0:return n=Gd(t),e?(n.$r.delete(2),[4,Wb(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.$r.add(2),[4,Gb(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function v_(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=Gd(t);return r.br(),new qb(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:n_.bind(null,t),Ri:r_.bind(null,t),_r:i_.bind(null,t)}),t.Mr.push(function(n){return Object(zs.b)(e,void 0,void 0,function(){return Object(zs.d)(this,function(e){switch(e.label){case 0:return n?(t.Ur.sr(),$b(t)?Zb(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),e_(t),e.label=3;case 3:return[2]}})})})),t.Ur}function y_(t){var e=this;return t.Qr||(t.Qr=function(t,e,n){var r=Gd(t);return r.br(),new Bb(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:l_.bind(null,t),Ri:d_.bind(null,t),Ir:h_.bind(null,t),Tr:f_.bind(null,t)}),t.Mr.push(function(n){return Object(zs.b)(e,void 0,void 0,function(){return Object(zs.d)(this,function(e){switch(e.label){case 0:return n?(t.Qr.sr(),[4,s_(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Qr.stop()];case 3:e.sent(),t.kr.length>0&&(qd("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),e.label=4;case 4:return[2]}})})})),t.Qr}var g_=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new xg,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}return t.createAndSchedule=function(e,n,r,i,o){var a=new t(e,n,Date.now()+r,i,o);return a.start(r),a},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Fd(Md.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function m_(t,e){if(Bd("AsyncQueue",e+": "+t),Rg(t))return new Fd(Md.UNAVAILABLE,e+": "+t);throw t}var b_=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||_p.comparator(e.key,n.key)}:function(t,e){return _p.comparator(t.key,e.key)},this.keyedMap=hy(),this.sortedSet=new ry(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),__=function(){function t(){this.Kr=new ry(_p.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Kr.get(e);n?0!==t.type&&3===n.type?this.Kr=this.Kr.insert(e,t):3===t.type&&1!==n.type?this.Kr=this.Kr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Kr=this.Kr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Kr=this.Kr.remove(e):1===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):zd():this.Kr=this.Kr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Kr.inorderTraversal(function(e,n){t.push(n)}),t},t}(),w_=function(){function t(t,e,n,r,i,o,a,s){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:0,doc:t})}),new t(e,n,b_.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&pv(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),k_=function(){this.Wr=void 0,this.listeners=[]},C_=function(){this.queries=new Am(function(t){return vv(t)},pv),this.onlineState="Unknown",this.Gr=new Set};function O_(t,e){return Object(zs.b)(this,void 0,void 0,function(){var n,r,i,o,a,s,u;return Object(zs.d)(this,function(c){switch(c.label){case 0:if(n=Gd(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new k_),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),a=o,[4,n.onListen(r)];case 2:return a.Wr=c.sent(),[3,4];case 3:return s=c.sent(),u=m_(s,"Initialization of query '"+yv(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&T_(n),[2]}})})}function E_(t,e){return Object(zs.b)(this,void 0,void 0,function(){var n,r,i,o,a;return Object(zs.d)(this,function(s){return n=Gd(t),i=!1,(o=n.queries.get(r=e.query))&&(a=o.listeners.indexOf(e))>=0&&(o.listeners.splice(a,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]})})}function S_(t,e){for(var n=Gd(t),r=!1,i=0,o=e;i<o.length;i++){var a=o[i],s=n.queries.get(a.query);if(s){for(var u=0,c=s.listeners;u<c.length;u++)c[u].Hr(a)&&(r=!0);s.Wr=a}}r&&T_(n)}function I_(t,e,n){var r=Gd(t),i=r.queries.get(e);if(i)for(var o=0,a=i.listeners;o<a.length;o++)a[o].onError(n);r.queries.delete(e)}function T_(t){t.Gr.forEach(function(t){t.next()})}var x_=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new w_(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){return!t.fromCache||!(this.options.so&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=w_.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),A_=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),j_=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return My(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?Hy(this.R,t.document,!1):Lp.newNoDocument(this.qn(t.metadata.name),this.Qn(t.metadata.readTime))},t.prototype.Qn=function(t){return Ny(t)},t}();!function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new j_(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var a=n.qn(o.metadata.name),s=0,u=o.metadata.queries;s<u.length;s++){var c=u[s],l=(e.get(c)||vy()).add(a);e.set(c,l)}}return e},t.prototype.complete=function(){return Object(zs.b)(this,void 0,void 0,function(){var t,e,n,r,i;return Object(zs.d)(this,function(o){switch(o.label){case 0:return[4,ub(this.localStore,new j_(this.R),this.documents,this.ro.id)];case 1:t=o.sent(),e=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?[4,cb(this.localStore,i=r[n],e.get(i.name))]:[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new Km(Object.assign({},this.progress),t))]}})})}}();var P_=function(t){this.key=t},N_=function(t){this.key=t},D_=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=vy(),this.mutatedKeys=vy(),this.lo=mv(t),this.fo=new b_(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new __,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,a=i,s=!1,u=av(this.query)&&i.size===this.query.limit?i.last():null,c=sv(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(function(t,e){var l=i.get(t),h=gv(n.query,e)?e:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.yo(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(s=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(s=!0)),p&&(h?(a=a.add(h),o=d?o.add(t):o.delete(t)):(a=a.delete(t),o=o.delete(t)))}),av(this.query)||sv(this.query))for(;a.size>this.query.limit;){var l=av(this.query)?a.last():a.first();a=a.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:a,mo:r,Nn:s,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return zd()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)}),this.po(n);var a=e?this.Eo():[],s=0===this.ho.size&&this.current?1:0,u=s!==this.ao;return this.ao=s,0!==o.length||u?{snapshot:new w_(this.query,t.fo,i,o,t.mutatedKeys,0===s,u,!1),To:a}:{To:a}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new __,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e.uo=e.uo.add(t)}),t.modifiedDocuments.forEach(function(t){}),t.removedDocuments.forEach(function(t){return e.uo=e.uo.delete(t)}),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=vy(),this.fo.forEach(function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))});var n=[];return e.forEach(function(e){t.ho.has(e)||n.push(new N_(e))}),this.ho.forEach(function(t){e.has(t)||n.push(new P_(t))}),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=vy();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return w_.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),R_=function(t,e,n){this.query=t,this.targetId=e,this.view=n},L_=function(t){this.key=t,this.bo=!1},M_=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new Am(function(t){return vv(t)},pv),this.Vo=new Map,this.So=new Set,this.Do=new ry(_p.comparator),this.Co=new Map,this.No=new hb,this.xo={},this.Fo=new Map,this.ko=mm.Yt(),this.onlineState="Unknown",this.Oo=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.Oo},enumerable:!1,configurable:!0}),t}();function F_(t,e){return Object(zs.b)(this,void 0,void 0,function(){var n,r,i,o,a;return Object(zs.d)(this,function(s){switch(s.label){case 0:return n=dw(t),(i=n.Po.get(e))?(n.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.Ro(),[3,4]):[3,1];case 1:return[4,nb(n.localStore,fv(e))];case 2:return o=s.sent(),a=n.sharedClientState.addLocalQueryTarget(o.targetId),[4,V_(n,e,o.targetId,"current"===a)];case 3:r=s.sent(),n.isPrimaryClient&&Qb(n.remoteStore,o),s.label=4;case 4:return[2,r]}})})}function V_(t,e,n,r){return Object(zs.b)(this,void 0,void 0,function(){var i,o,a,s,u,c;return Object(zs.d)(this,function(l){switch(l.label){case 0:return t.$o=function(e,n,r){return function(t,e,n,r){return Object(zs.b)(this,void 0,void 0,function(){var i,o,a;return Object(zs.d)(this,function(s){switch(s.label){case 0:return(i=e.view._o(n)).Nn?[4,ib(t.localStore,e.query,!1).then(function(t){return e.view._o(t.documents,i)})]:[3,2];case 1:i=s.sent(),s.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),a=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(Z_(t,e.targetId,a.To),a.snapshot)]}})})}(t,e,n,r)},[4,ib(t.localStore,e,!0)];case 1:return i=l.sent(),o=new D_(e,i.Bn),a=o._o(i.documents),s=by.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(a,t.isPrimaryClient,s),Z_(t,n,u.To),c=new R_(e,n,o),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}})})}function U_(t,e){return Object(zs.b)(this,void 0,void 0,function(){var n,r,i;return Object(zs.d)(this,function(o){switch(o.label){case 0:return n=Gd(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter(function(t){return!pv(t,e)})),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,rb(n.localStore,r.targetId,!1).then(function(){n.sharedClientState.clearQueryState(r.targetId),Yb(n.remoteStore,r.targetId),J_(n,r.targetId)}).catch(Cm)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return J_(n,r.targetId),[4,rb(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}})})}function q_(t,e,n){return Object(zs.b)(this,void 0,void 0,function(){var r,i,o,a;return Object(zs.d)(this,function(s){switch(s.label){case 0:r=pw(t),s.label=1;case 1:return s.trys.push([1,5,,6]),[4,function(t,e){var n,r=Gd(t),i=$d.now(),o=e.reduce(function(t,e){return t.add(e.key)},vy());return r.persistence.runTransaction("Locally write mutations","readwrite",function(t){return r.Mn.pn(t,o).next(function(o){n=o;for(var a=[],s=0,u=e;s<u.length;s++){var c=u[s],l=Bv(c,n.get(c.key));null!=l&&a.push(new Wv(c.key,l,Rp(l.toProto().mapValue),Mv.exists(!0)))}return r._n.addMutationBatch(t,i,a,e)})}).then(function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}})}(r.localStore,e)];case 2:return i=s.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new ry(Jd)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,ew(r,i.changes)];case 3:return s.sent(),[4,s_(r.remoteStore)];case 4:return s.sent(),[3,6];case 5:return o=s.sent(),a=m_(o,"Failed to persist write"),n.reject(a),[3,6];case 6:return[2]}})})}function B_(t,e){return Object(zs.b)(this,void 0,void 0,function(){var n,r;return Object(zs.d)(this,function(i){switch(i.label){case 0:n=Gd(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,$m(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach(function(t,e){var r=n.Co.get(e);r&&(Wd(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?Wd(r.bo):t.removedDocuments.size>0&&(Wd(r.bo),r.bo=!1))}),[4,ew(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,Cm(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function H_(t,e,n){var r=Gd(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach(function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)}),function(t,e){var n=Gd(t);n.onlineState=e;var r=!1;n.queries.forEach(function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)}),r&&T_(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function K_(t,e,n){return Object(zs.b)(this,void 0,void 0,function(){var r,i,o,a,s,u;return Object(zs.d)(this,function(c){switch(c.label){case 0:return(r=Gd(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(a=(a=new ry(_p.comparator)).insert(o,Lp.newNoDocument(o,tp.min())),s=vy().add(o),u=new my(tp.min(),new Map,new ay(Jd),a,s),[4,B_(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),tw(r),[3,4];case 2:return[4,rb(r.localStore,e,!1).then(function(){return J_(r,e,n)}).catch(Cm)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}function z_(t,e){return Object(zs.b)(this,void 0,void 0,function(){var n,r,i;return Object(zs.d)(this,function(o){switch(o.label){case 0:n=Gd(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Xm(n.localStore,e)];case 2:return i=o.sent(),Y_(n,r,null),Q_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,ew(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,Cm(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function W_(t,e,n){return Object(zs.b)(this,void 0,void 0,function(){var r,i;return Object(zs.d)(this,function(o){switch(o.label){case 0:r=Gd(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=Gd(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var r;return n._n.lookupMutationBatch(t,e).next(function(e){return Wd(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}(r.localStore,e)];case 2:return i=o.sent(),Y_(r,e,n),Q_(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,ew(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,Cm(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function G_(t,e){return Object(zs.b)(this,void 0,void 0,function(){var n,r,i,o,a;return Object(zs.d)(this,function(s){switch(s.label){case 0:t_((n=Gd(t)).remoteStore)||qd("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,function(t){var e=Gd(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e._n.getHighestUnacknowledgedBatchId(t)})}(n.localStore)];case 2:return-1===(r=s.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return o=s.sent(),a=m_(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(a),[3,4];case 4:return[2]}})})}function Q_(t,e){(t.Fo.get(e)||[]).forEach(function(t){t.resolve()}),t.Fo.delete(e)}function Y_(t,e,n){var r=Gd(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function J_(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach(function(e){t.No.containsKey(e)||X_(t,e)})}function X_(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(Yb(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),tw(t))}function Z_(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof P_?(t.No.addReference(o.key,e),$_(t,o)):o instanceof N_?(qd("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||X_(t,o.key)):zd()}}function $_(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(qd("SyncEngine","New document in limbo: "+n),t.So.add(r),tw(t))}function tw(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new _p(op.fromString(e)),r=t.ko.next();t.Co.set(r,new L_(n)),t.Do=t.Do.insert(n,r),Qb(t.remoteStore,new Kg(fv(ov(n.path)),r,2,Ld.o))}}function ew(t,e,n){return Object(zs.b)(this,void 0,void 0,function(){var r,i,o,a;return Object(zs.d)(this,function(s){switch(s.label){case 0:return r=Gd(t),i=[],o=[],a=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach(function(t,s){a.push(r.$o(s,e,n).then(function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(s.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=Wm.Pn(s.targetId,t);o.push(e)}}))}),[4,Promise.all(a)]);case 1:return s.sent(),r.vo._r(i),[4,function(t,e){return Object(zs.b)(this,void 0,void 0,function(){var n,r,i,o,a,s,u,c;return Object(zs.d)(this,function(l){switch(l.label){case 0:n=Gd(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return Ag.forEach(e,function(e){return Ag.forEach(e.bn,function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)}).next(function(){return Ag.forEach(e.vn,function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)})})})})];case 2:return l.sent(),[3,4];case 3:if(!Rg(r=l.sent()))throw r;return qd("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)s=(a=o[i]).targetId,a.fromCache||(u=n.Fn.get(s),c=u.withLastLimboFreeSnapshotVersion(u.snapshotVersion),n.Fn=n.Fn.insert(s,c));return[2]}})})}(r.localStore,o)];case 2:s.sent(),s.label=3;case 3:return[2]}})})}function nw(t,e){return Object(zs.b)(this,void 0,void 0,function(){var n,r;return Object(zs.d)(this,function(i){switch(i.label){case 0:return(n=Gd(t)).currentUser.isEqual(e)?[3,3]:(qd("SyncEngine","User change. New user:",e.toKey()),[4,Jm(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fo.forEach(function(t){t.forEach(function(t){t.reject(new Fd(Md.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.Fo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,ew(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function rw(t,e){var n=Gd(t),r=n.Co.get(e);if(r&&r.bo)return vy().add(r.key);var i=vy(),o=n.Vo.get(e);if(!o)return i;for(var a=0,s=o;a<s.length;a++){var u=n.Po.get(s[a]);i=i.unionWith(u.view.wo)}return i}function iw(t,e){return Object(zs.b)(this,void 0,void 0,function(){var n,r,i;return Object(zs.d)(this,function(o){switch(o.label){case 0:return[4,ib((n=Gd(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&Z_(n,e.targetId,i.To),i)]}})})}function ow(t){return Object(zs.b)(this,void 0,void 0,function(){var e;return Object(zs.d)(this,function(n){return[2,ab((e=Gd(t)).localStore).then(function(t){return ew(e,t)})]})})}function aw(t,e,n,r){return Object(zs.b)(this,void 0,void 0,function(){var i,o;return Object(zs.d)(this,function(a){switch(a.label){case 0:return[4,function(t,e){var n=Gd(t),r=Gd(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return r.jt(t,e).next(function(e){return e?n.Mn.pn(t,e):Ag.resolve(null)})})}((i=Gd(t)).localStore,e)];case 1:return null===(o=a.sent())?[3,6]:"pending"!==n?[3,3]:[4,s_(i.remoteStore)];case 2:return a.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Y_(i,e,r||null),Q_(i,e),function(t,e){Gd(Gd(t)._n).Gt(e)}(i.localStore,e)):zd(),a.label=4;case 4:return[4,ew(i,o)];case 5:return a.sent(),[3,7];case 6:qd("SyncEngine","Cannot apply mutation batch with id: "+e),a.label=7;case 7:return[2]}})})}function sw(t,e){return Object(zs.b)(this,void 0,void 0,function(){var n,r,i,o,a,s,u;return Object(zs.d)(this,function(c){switch(c.label){case 0:return dw(n=Gd(t)),pw(n),!0!==e||!0===n.Oo?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,uw(n,r.toArray())]);case 1:return i=c.sent(),n.Oo=!0,[4,p_(n.remoteStore,!0)];case 2:for(c.sent(),o=0,a=i;o<a.length;o++)Qb(n.remoteStore,a[o]);return[3,7];case 3:return!1!==e||!1===n.Oo?[3,7]:(s=[],u=Promise.resolve(),n.Vo.forEach(function(t,e){n.sharedClientState.isLocalQueryTarget(e)?s.push(e):u=u.then(function(){return J_(n,e),rb(n.localStore,e,!0)}),Yb(n.remoteStore,e)}),[4,u]);case 4:return c.sent(),[4,uw(n,s)];case 5:return c.sent(),function(t){var e=Gd(t);e.Co.forEach(function(t,n){Yb(e.remoteStore,n)}),e.No.ts(),e.Co=new Map,e.Do=new ry(_p.comparator)}(n),n.Oo=!1,[4,p_(n.remoteStore,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})}function uw(t,e,n){return Object(zs.b)(this,void 0,void 0,function(){var n,r,i,o,a,s,u,c,l,h,f,d,p;return Object(zs.d)(this,function(v){switch(v.label){case 0:n=Gd(t),r=[],i=[],o=0,a=e,v.label=1;case 1:return o<a.length?(u=void 0,(c=n.Vo.get(s=a[o]))&&0!==c.length?[4,nb(n.localStore,fv(c[0]))]:[3,7]):[3,13];case 2:u=v.sent(),l=0,h=c,v.label=3;case 3:return l<h.length?(f=n.Po.get(h[l]),[4,iw(n,f)]):[3,6];case 4:(d=v.sent()).snapshot&&i.push(d.snapshot),v.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,ob(n.localStore,s)];case 8:return p=v.sent(),[4,nb(n.localStore,p)];case 9:return u=v.sent(),[4,V_(n,cw(p),s,!1)];case 10:v.sent(),v.label=11;case 11:r.push(u),v.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}})})}function cw(t){return iv(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function lw(t){var e=Gd(t);return Gd(Gd(e.localStore).persistence).fn()}function hw(t,e,n,r){return Object(zs.b)(this,void 0,void 0,function(){var i,o,a;return Object(zs.d)(this,function(s){switch(s.label){case 0:return(i=Gd(t)).Oo?(qd("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,ab(i.localStore)];case 3:return o=s.sent(),a=my.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,ew(i,o,a)];case 4:return s.sent(),[3,8];case 5:return[4,rb(i.localStore,e,!0)];case 6:return s.sent(),J_(i,e,r),[3,8];case 7:zd(),s.label=8;case 8:return[2]}})})}function fw(t,e,n){return Object(zs.b)(this,void 0,void 0,function(){var r,i,o,a,s,u,c,l,h;return Object(zs.d)(this,function(f){switch(f.label){case 0:if(!(r=dw(t)).Oo)return[3,10];i=0,o=e,f.label=1;case 1:return i<o.length?r.Vo.has(a=o[i])?(qd("SyncEngine","Adding an already active target "+a),[3,5]):[4,ob(r.localStore,a)]:[3,6];case 2:return s=f.sent(),[4,nb(r.localStore,s)];case 3:return u=f.sent(),[4,V_(r,cw(s),u.targetId,!1)];case 4:f.sent(),Qb(r.remoteStore,u),f.label=5;case 5:return i++,[3,1];case 6:c=function(t){return Object(zs.d)(this,function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,rb(r.localStore,t,!1).then(function(){Yb(r.remoteStore,t),J_(r,t)}).catch(Cm)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},l=0,h=n,f.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:f.sent(),f.label=9;case 9:return l++,[3,7];case 10:return[2]}})})}function dw(t){var e=Gd(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=B_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=rw.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=K_.bind(null,e),e.vo._r=S_.bind(null,e.eventManager),e.vo.Mo=I_.bind(null,e.eventManager),e}function pw(t){var e=Gd(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=z_.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=W_.bind(null,e),e}var vw=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(zs.b)(this,void 0,void 0,function(){return Object(zs.d)(this,function(e){switch(e.label){case 0:return this.R=Fb(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Qo(t),[2]}})})},t.prototype.Uo=function(t){return null},t.prototype.Qo=function(t){return Ym(this.persistence,new Gm,t.initialUser,this.R)},t.prototype.qo=function(t){return new gb(bb.bs,this.R)},t.prototype.Bo=function(t){return new Ab},t.prototype.terminate=function(){return Object(zs.b)(this,void 0,void 0,function(){return Object(zs.d)(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},t}(),yw=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Ko=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(zs.c)(e,t),e.prototype.initialize=function(e){return Object(zs.b)(this,void 0,void 0,function(){return Object(zs.d)(this,function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,sb(this.localStore)];case 2:return n.sent(),[4,this.Ko.initialize(this,e)];case 3:return n.sent(),[4,pw(this.Ko.syncEngine)];case 4:return n.sent(),[4,s_(this.Ko.remoteStore)];case 5:return n.sent(),[2]}})})},e.prototype.Qo=function(t){return Ym(this.persistence,new Gm,t.initialUser,this.R)},e.prototype.Uo=function(t){return new Sm(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)},e.prototype.qo=function(t){var e=Hm(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?lm.withCacheSize(this.cacheSizeBytes):lm.DEFAULT;return new Um(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,Lb(),Mb(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new Ab},e}(vw),gw=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Ko=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(zs.c)(e,t),e.prototype.initialize=function(e){return Object(zs.b)(this,void 0,void 0,function(){var n,r=this;return Object(zs.d)(this,function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Ko.syncEngine,this.sharedClientState instanceof xb?(this.sharedClientState.syncEngine={ui:aw.bind(null,n),ai:hw.bind(null,n),hi:fw.bind(null,n),fn:lw.bind(null,n),ci:ow.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He(function(t){return Object(zs.b)(r,void 0,void 0,function(){return Object(zs.d)(this,function(e){switch(e.label){case 0:return[4,sw(this.Ko.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}})})})];case 4:return i.sent(),[2]}})})},e.prototype.Bo=function(t){var e=Lb();if(!xb.yt(e))throw new Fd(Md.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Hm(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new xb(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(yw),mw=function(){function t(){}return t.prototype.initialize=function(t,e){return Object(zs.b)(this,void 0,void 0,function(){var n=this;return Object(zs.d)(this,function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return H_(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=nw.bind(null,this.syncEngine),[4,p_(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.createEventManager=function(t){return new C_},t.prototype.createDatastore=function(t){var e=Fb(t.databaseInfo.databaseId),n=new Rb(t.databaseInfo);return function(t,e,n){return new Hb(t,e,n)}(t.credentials,n,e)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,a=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return H_(a.syncEngine,t,0)},o=Pb.yt()?new Pb:new jb,new zb(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,a){var s=new M_(t,e,n,r,i,o);return a&&(s.Oo=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return Object(zs.b)(this,void 0,void 0,function(){var e;return Object(zs.d)(this,function(n){switch(n.label){case 0:return e=Gd(t),qd("RemoteStore","RemoteStore shutting down."),e.$r.add(5),[4,Gb(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}})})}(this.remoteStore)},t}(),bw=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),_w=(function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new xg,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return Object(zs.b)(this,void 0,void 0,function(){return Object(zs.d)(this,function(t){return[2,this.metadata.promise]})})},t.prototype.Lo=function(){return Object(zs.b)(this,void 0,void 0,function(){return Object(zs.d)(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}})})},t.prototype.Ho=function(){return Object(zs.b)(this,void 0,void 0,function(){var t,e,n,r;return Object(zs.d)(this,function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new A_(JSON.parse(r),t.length+n)]}})})},t.prototype.Zo=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},t.prototype.Jo=function(){return Object(zs.b)(this,void 0,void 0,function(){var t,e;return Object(zs.d)(this,function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}})})},t.prototype.Xo=function(t){return Object(zs.b)(this,void 0,void 0,function(){var e;return Object(zs.d)(this,function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}})})},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return Object(zs.b)(this,void 0,void 0,function(){var t,e;return Object(zs.d)(this,function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}})})}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return Object(zs.b)(this,void 0,void 0,function(){var e,n=this;return Object(zs.d)(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Fd(Md.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Object(zs.b)(this,void 0,void 0,function(){var n,r,i,o,a,s;return Object(zs.d)(this,function(u){switch(u.label){case 0:return n=Gd(t),r=Uy(n.R)+"/documents",i={documents:e.map(function(t){return Ly(n.R,t)})},[4,n.Oi("BatchGetDocuments",r,i)];case 1:return o=u.sent(),a=new Map,o.forEach(function(t){var e=function(t,e){return"found"in e?function(t,e){Wd(!!e.found);var n=My(t,e.found.name),r=Ny(e.found.updateTime),i=new Dp({mapValue:{fields:e.found.fields}});return Lp.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){Wd(!!e.missing),Wd(!!e.readTime);var n=My(t,e.missing),r=Ny(e.readTime);return Lp.newNoDocument(n,r)}(t,e):zd()}(n.R,t);a.set(e.key.toString(),e)}),s=[],[2,(e.forEach(function(t){var e=a.get(t.toString());Wd(!!e),s.push(e)}),s)]}})})}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach(function(t){return n.recordVersion(t)}),e)]}})})},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new Zv(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return Object(zs.b)(this,void 0,void 0,function(){var t,e=this;return Object(zs.d)(this,function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(t,n){var r=_p.fromPath(n);e.mutations.push(new $v(r,e.precondition(r)))}),[4,function(t,e){return Object(zs.b)(this,void 0,void 0,function(){var n,r,i;return Object(zs.d)(this,function(o){switch(o.label){case 0:return n=Gd(t),r=Uy(n.R)+"/documents",i={writes:e.map(function(t){return Ky(n.R,t)})},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}})})},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw zd();e=tp.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Fd(Md.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?Mv.updateTime(e):Mv.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(tp.min()))throw new Fd(Md.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Mv.updateTime(e)}return Mv.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),ww=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new Vb(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji(function(){return Object(zs.b)(t,void 0,void 0,function(){var t,e,n=this;return Object(zs.d)(this,function(r){return t=new _w(this.datastore),(e=this.sc(t))&&e.then(function(e){n.asyncQueue.enqueueAndForget(function(){return t.commit().then(function(){n.deferred.resolve(e)}).catch(function(t){n.ic(t)})})}).catch(function(t){n.ic(t)}),[2]})})})},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!gp(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return e.nc(),Promise.resolve()})):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!ey(e)}return!1},t}(),kw=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=_b.UNAUTHENTICATED,this.clientId=Yd.u(),this.credentialListener=function(){},this.receivedInitialUser=new xg,this.credentials.setChangeListener(function(t){qd("FirestoreClient","Received user=",t.uid),r.user=t,r.credentialListener(t),r.receivedInitialUser.resolve()})}return t.prototype.getConfiguration=function(){return Object(zs.b)(this,void 0,void 0,function(){return Object(zs.d)(this,function(t){switch(t.label){case 0:return[4,this.receivedInitialUser.promise];case 1:return[2,(t.sent(),{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100})]}})})},t.prototype.setCredentialChangeListener=function(t){var e=this;this.credentialListener=t,this.receivedInitialUser.promise.then(function(){return e.credentialListener(e.user)})},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new Fd(Md.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new xg;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return Object(zs.b)(t,void 0,void 0,function(){var t,n;return Object(zs.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=m_(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}})})}),e.promise},t}();function Cw(t,e){return Object(zs.b)(this,void 0,void 0,function(){var n,r,i=this;return Object(zs.d)(this,function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),qd("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener(function(n){r.isEqual(n)||(r=n,t.asyncQueue.enqueueRetryable(function(){return Object(zs.b)(i,void 0,void 0,function(){return Object(zs.d)(this,function(t){switch(t.label){case 0:return[4,Jm(e.localStore,n)];case 1:return t.sent(),[2]}})})}))}),e.persistence.setDatabaseDeletedListener(function(){return t.terminate()}),t.offlineComponents=e,[2]}})})}function Ow(t,e){return Object(zs.b)(this,void 0,void 0,function(){var n,r;return Object(zs.d)(this,function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,Ew(t)];case 1:return n=i.sent(),qd("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener(function(n){return t.asyncQueue.enqueueRetryable(function(){return function(t,e){return Object(zs.b)(this,void 0,void 0,function(){var n,r;return Object(zs.d)(this,function(i){switch(i.label){case 0:return(n=Gd(t)).asyncQueue.verifyOperationInProgress(),qd("RemoteStore","RemoteStore received new credentials"),r=t_(n),n.$r.add(3),[4,Gb(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.$r.delete(3),[4,Wb(n)];case 3:return i.sent(),[2]}})})}(e.remoteStore,n)})}),t.onlineComponents=e,[2]}})})}function Ew(t){return Object(zs.b)(this,void 0,void 0,function(){return Object(zs.d)(this,function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(qd("FirestoreClient","Using default OfflineComponentProvider"),[4,Cw(t,new vw)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}})})}function Sw(t){return Object(zs.b)(this,void 0,void 0,function(){return Object(zs.d)(this,function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(qd("FirestoreClient","Using default OnlineComponentProvider"),[4,Ow(t,new mw)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}})})}function Iw(t){return Ew(t).then(function(t){return t.persistence})}function Tw(t){return Ew(t).then(function(t){return t.localStore})}function xw(t){return Sw(t).then(function(t){return t.remoteStore})}function Aw(t){return Sw(t).then(function(t){return t.syncEngine})}function jw(t){return Object(zs.b)(this,void 0,void 0,function(){var e,n;return Object(zs.d)(this,function(r){switch(r.label){case 0:return[4,Sw(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=F_.bind(null,e.syncEngine),n.onUnlisten=U_.bind(null,e.syncEngine),n)]}})})}function Pw(t,e,n){var r=this;void 0===n&&(n={});var i=new xg;return t.asyncQueue.enqueueAndForget(function(){return Object(zs.b)(r,void 0,void 0,function(){var r;return Object(zs.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new bw({next:function(o){e.enqueueAndForget(function(){return E_(t,a)});var s=o.docs.has(n);!s&&o.fromCache?i.reject(new Fd(Md.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&o.fromCache&&r&&"server"===r.source?i.reject(new Fd(Md.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),a=new x_(ov(n.path),o,{includeMetadataChanges:!0,so:!0});return O_(t,a)},[4,jw(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}function Nw(t,e,n){var r=this;void 0===n&&(n={});var i=new xg;return t.asyncQueue.enqueueAndForget(function(){return Object(zs.b)(r,void 0,void 0,function(){var r;return Object(zs.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new bw({next:function(n){e.enqueueAndForget(function(){return E_(t,a)}),n.fromCache&&"server"===r.source?i.reject(new Fd(Md.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),a=new x_(n,o,{includeMetadataChanges:!0,so:!0});return O_(t,a)},[4,jw(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}var Dw=function(t,e,n,r,i,o,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a},Rw=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Lw=new Map,Mw=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},Fw=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t){this.changeListener=t,t(_b.UNAUTHENTICATED)},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Vw=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t){this.changeListener=t,t(this.token.user)},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Uw=function(){function t(t){var e=this;this.oc=null,this.currentUser=_b.UNAUTHENTICATED,this.receivedInitialUser=!1,this.cc=0,this.changeListener=null,this.forceRefresh=!1,this.oc=function(){e.cc++,e.currentUser=e.uc(),e.receivedInitialUser=!0,e.changeListener&&e.changeListener(e.currentUser)},this.cc=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.oc):(this.oc(null),t.get().then(function(t){e.auth=t,e.oc&&e.auth.addAuthTokenListener(e.oc)},function(){}))}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return t.cc!==e?(qd("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Wd("string"==typeof n.accessToken),new Mw(n.accessToken,t.currentUser)):null}):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t){this.changeListener=t,this.receivedInitialUser&&t(this.currentUser)},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.oc),this.oc=null,this.changeListener=null},t.prototype.uc=function(){var t=this.auth&&this.auth.getUid();return Wd(null===t||"string"==typeof t),new _b(t)},t}(),qw=function(){function t(t,e,n){this.ac=t,this.hc=e,this.lc=n,this.type="FirstParty",this.user=_b.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.hc},e=this.ac.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.lc&&(t["X-Goog-Iam-Authorization-Token"]=this.lc),t},enumerable:!1,configurable:!0}),t}(),Bw=function(){function t(t,e,n){this.ac=t,this.hc=e,this.lc=n}return t.prototype.getToken=function(){return Promise.resolve(new qw(this.ac,this.hc,this.lc))},t.prototype.setChangeListener=function(t){t(_b.FIRST_PARTY)},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function Hw(t,e,n){if(!n)throw new Fd(Md.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Kw(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Fd(Md.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function zw(t,e,n,r){if(!0===e&&!0===r)throw new Fd(Md.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Ww(t){if(!_p.isDocumentKey(t))throw new Fd(Md.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Gw(t){if(_p.isDocumentKey(t))throw new Fd(Md.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function Qw(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":zd()}function Yw(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Fd(Md.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Qw(t);throw new Fd(Md.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Jw(t,e){if(e<=0)throw new Fd(Md.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var Xw=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Fd(Md.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Fd(Md.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,zw("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),Zw=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Xw({}),this._settingsFrozen=!1,t instanceof Rw?(this._databaseId=t,this._credentials=new Fw):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Fd(Md.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Rw(t.options.projectId)}(t),this._credentials=new Uw(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new Fd(Md.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new Fd(Md.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Xw(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new Fw;switch(t.type){case"gapi":var e=t.client;return Wd(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Bw(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Fd(Md.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(t=Lw.get(this))&&(qd("ComponentProvider","Removing Datastore"),Lw.delete(this),t.terminate()),Promise.resolve();var t},t}(),$w=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new ek(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),tk=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),ek=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,ov(r))||this)._path=r,i.type="collection",i}return Object(zs.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new $w(this.firestore,null,new _p(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(tk);function nk(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Object(Pc.n)(t),Hw("collection","path",e),t instanceof Zw)return Gw(n=op.fromString.apply(op,Object(zs.f)([e],r))),new ek(t,null,n);if(!(t instanceof $w||t instanceof ek))throw new Fd(Md.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Gw(n=op.fromString.apply(op,Object(zs.f)([t.path],r)).child(op.fromString(e))),new ek(t.firestore,null,n)}function rk(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Object(Pc.n)(t),1===arguments.length&&(e=Yd.u()),Hw("doc","path",e),t instanceof Zw)return Ww(n=op.fromString.apply(op,Object(zs.f)([e],r))),new $w(t,null,new _p(n));if(!(t instanceof $w||t instanceof ek))throw new Fd(Md.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Ww(n=t._path.child(op.fromString.apply(op,Object(zs.f)([e],r)))),new $w(t.firestore,t instanceof ek?t.converter:null,new _p(n))}function ik(t,e){return t=Object(Pc.n)(t),e=Object(Pc.n)(e),(t instanceof $w||t instanceof ek)&&(e instanceof $w||e instanceof ek)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function ok(t,e){return t=Object(Pc.n)(t),e=Object(Pc.n)(e),t instanceof tk&&e instanceof tk&&t.firestore===e.firestore&&pv(t._query,e._query)&&t.converter===e.converter}var ak=function(){function t(){var t=this;this.fc=Promise.resolve(),this.dc=[],this.wc=!1,this._c=[],this.mc=null,this.yc=!1,this.gc=[],this.Zi=new Vb(this,"async_queue_retry"),this.Ec=function(){var e=Mb();e&&qd("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=Mb();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ec)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this.wc},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Tc(),this.Ic(t)},t.prototype.enterRestrictedMode=function(){if(!this.wc){this.wc=!0;var t=Mb();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ec)}},t.prototype.enqueue=function(t){return this.Tc(),this.wc?new Promise(function(t){}):this.Ic(t)},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget(function(){return e.dc.push(t),e.Ac()})},t.prototype.Ac=function(){return Object(zs.b)(this,void 0,void 0,function(){var t,e=this;return Object(zs.d)(this,function(n){switch(n.label){case 0:if(0===this.dc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.dc[0]()];case 2:return n.sent(),this.dc.shift(),this.Zi.reset(),[3,4];case 3:if(!Rg(t=n.sent()))throw t;return qd("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.dc.length>0&&this.Zi.ji(function(){return e.Ac()}),n.label=5;case 5:return[2]}})})},t.prototype.Ic=function(t){var e=this,n=this.fc.then(function(){return e.yc=!0,t().catch(function(t){throw e.mc=t,e.yc=!1,Bd("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(function(t){return e.yc=!1,t})});return this.fc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Tc(),this.gc.indexOf(t)>-1&&(e=0);var i=g_.createAndSchedule(this,t,e,n,function(t){return r.Rc(t)});return this._c.push(i),i},t.prototype.Tc=function(){this.mc&&zd()},t.prototype.verifyOperationInProgress=function(){},t.prototype.bc=function(){return Object(zs.b)(this,void 0,void 0,function(){var t;return Object(zs.d)(this,function(e){switch(e.label){case 0:return[4,t=this.fc];case 1:e.sent(),e.label=2;case 2:if(t!==this.fc)return[3,0];e.label=3;case 3:return[2]}})})},t.prototype.vc=function(t){for(var e=0,n=this._c;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Pc=function(t){var e=this;return this.bc().then(function(){e._c.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var n=0,r=e._c;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.bc()})},t.prototype.Vc=function(t){this.gc.push(t)},t.prototype.Rc=function(t){var e=this._c.indexOf(t);this._c.splice(e,1)},t}();function sk(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new xg,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var uk=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new ak,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return Object(zs.c)(e,t),e.prototype._terminate=function(){return this._firestoreClient||lk(this),this._firestoreClient.terminate()},e}(Zw);function ck(t){return t._firestoreClient||lk(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function lk(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new Dw(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new kw(t._credentials,t._queue,r)}function hk(t,e,n){var r=this,i=new xg;return t.asyncQueue.enqueue(function(){return Object(zs.b)(r,void 0,void 0,function(){var r;return Object(zs.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,Cw(t,n)];case 1:return o.sent(),[4,Ow(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===Md.FAILED_PRECONDITION||t.code===Md.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function fk(t){if(t._initialized||t._terminated)throw new Fd(Md.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var dk=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Fd(Md.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new sp(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),pk=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(cp.fromBase64String(e))}catch(e){throw new Fd(Md.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(cp.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),vk=function(t){this._methodName=t},yk=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new Fd(Md.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Fd(Md.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return Jd(this._lat,t._lat)||Jd(this._long,t._long)},t}(),gk=/^__.*__$/,mk=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new Wv(t,this.data,this.fieldMask,e,this.fieldTransforms):new zv(t,this.data,e,this.fieldTransforms)},t}(),bk=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new Wv(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function _k(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw zd()}}var wk=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Sc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dc",{get:function(){return this.settings.Dc},enumerable:!1,configurable:!0}),t.prototype.Cc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.Nc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Cc({path:n,xc:!1});return r.Fc(t),r},t.prototype.kc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Cc({path:n,xc:!1});return r.Sc(),r},t.prototype.Oc=function(t){return this.Cc({path:void 0,xc:!0})},t.prototype.$c=function(t){return qk(t,this.settings.methodName,this.settings.Mc||!1,this.path,this.settings.Lc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},t.prototype.Sc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Fc(this.path.get(t))},t.prototype.Fc=function(t){if(0===t.length)throw this.$c("Document fields must not be empty");if(_k(this.Dc)&&gk.test(t))throw this.$c('Document fields cannot begin and end with "__"')},t}(),kk=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||Fb(t)}return t.prototype.Bc=function(t,e,n,r){return void 0===r&&(r=!1),new wk({Dc:t,methodName:e,Lc:n,path:sp.emptyPath(),xc:!1,Mc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function Ck(t){var e=t._freezeSettings(),n=Fb(t._databaseId);return new kk(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Ok(t,e,n,r,i,o){void 0===o&&(o={});var a=t.Bc(o.merge||o.mergeFields?2:0,e,n,i);Mk("Data must be an object, but it was:",a,r);var s,u,c=Rk(r,a);if(o.merge)s=new up(a.fieldMask),u=a.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var d=Fk(e,f[h],n);if(!a.contains(d))throw new Fd(Md.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");Bk(l,d)||l.push(d)}s=new up(l),u=a.fieldTransforms.filter(function(t){return s.covers(t.field)})}else s=null,u=a.fieldTransforms;return new mk(new Dp(c),s,u)}var Ek=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(zs.c)(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Dc)throw t.$c(1===t.Dc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(vk);function Sk(t,e,n){return new wk({Dc:3,Lc:e.settings.Lc,methodName:t._methodName,xc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var Ik=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(zs.c)(e,t),e.prototype._toFieldTransform=function(t){return new Rv(t.path,new Iv)},e.prototype.isEqual=function(t){return t instanceof e},e}(vk),Tk=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).qc=n,r}return Object(zs.c)(e,t),e.prototype._toFieldTransform=function(t){var e=Sk(this,t,!0),n=this.qc.map(function(t){return Dk(t,e)}),r=new Tv(n);return new Rv(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(vk),xk=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).qc=n,r}return Object(zs.c)(e,t),e.prototype._toFieldTransform=function(t){var e=Sk(this,t,!0),n=this.qc.map(function(t){return Dk(t,e)}),r=new Av(n);return new Rv(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(vk),Ak=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Uc=n,r}return Object(zs.c)(e,t),e.prototype._toFieldTransform=function(t){var e=new Pv(t.R,kv(t.R,this.Uc));return new Rv(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(vk);function jk(t,e,n,r){var i=t.Bc(1,e,n);Mk("Data must be an object, but it was:",i,r);var o=[],a=Dp.empty();np(r,function(t,r){var s=Uk(e,t,n);r=Object(Pc.n)(r);var u=i.kc(s);if(r instanceof Ek)o.push(s);else{var c=Dk(r,u);null!=c&&(o.push(s),a.set(s,c))}});var s=new up(o);return new bk(a,s,i.fieldTransforms)}function Pk(t,e,n,r,i,o){var a=t.Bc(1,e,n),s=[Fk(e,r,n)],u=[i];if(o.length%2!=0)throw new Fd(Md.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)s.push(Fk(e,o[c])),u.push(o[c+1]);for(var l=[],h=Dp.empty(),f=s.length-1;f>=0;--f)if(!Bk(l,s[f])){var d=s[f],p=u[f];p=Object(Pc.n)(p);var v=a.kc(d);if(p instanceof Ek)l.push(d);else{var y=Dk(p,v);null!=y&&(l.push(d),h.set(d,y))}}var g=new up(l);return new bk(h,g,a.fieldTransforms)}function Nk(t,e,n,r){return void 0===r&&(r=!1),Dk(n,t.Bc(r?4:3,e))}function Dk(t,e){if(Lk(t=Object(Pc.n)(t)))return Mk("Unsupported field value:",e,t),Rk(t,e);if(t instanceof vk)return function(t,e){if(!_k(e.Dc))throw e.$c(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.$c(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xc&&4!==e.Dc)throw e.$c("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var a=Dk(o[i],e.Oc(r));null==a&&(a={nullValue:"NULL_VALUE"}),n.push(a),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=Object(Pc.n)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return kv(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=$d.fromDate(t);return{timestampValue:Ay(e.R,n)}}if(t instanceof $d)return n=new $d(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:Ay(e.R,n)};if(t instanceof yk)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof pk)return{bytesValue:jy(e.R,t._byteString)};if(t instanceof $w){var r=t.firestore._databaseId;if(!r.isEqual(n=e.databaseId))throw e.$c("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Dy(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.$c("Unsupported field value: "+Qw(t))}(t,e)}function Rk(t,e){var n={};return rp(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):np(t,function(t,r){var i=Dk(r,e.Nc(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function Lk(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof $d||t instanceof yk||t instanceof pk||t instanceof $w||t instanceof vk)}function Mk(t,e,n){if(!Lk(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=Qw(n);throw e.$c("an object"===r?t+" a custom object":t+" "+r)}}function Fk(t,e,n){if((e=Object(Pc.n)(e))instanceof dk)return e._internalPath;if("string"==typeof e)return Uk(t,e);throw qk("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var Vk=new RegExp("[~\\*/\\[\\]]");function Uk(t,e,n){if(e.search(Vk)>=0)throw qk("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(dk.bind.apply(dk,Object(zs.f)([void 0],e.split(".")))))._internalPath}catch(r){throw qk("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function qk(t,e,n,r,i){var o=r&&!r.isEmpty(),a=void 0!==i,s="Function "+e+"() called with invalid data";n&&(s+=" (via `toFirestore()`)");var u="";return(o||a)&&(u+=" (found",o&&(u+=" in field "+r),a&&(u+=" in document "+i),u+=")"),new Fd(Md.INVALID_ARGUMENT,(s+=". ")+t+u)}function Bk(t,e){return t.some(function(t){return t.isEqual(e)})}var Hk=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new $w(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new Kk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.toProto())}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(zk("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),Kk=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(zs.c)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(Hk);function zk(t,e){return"string"==typeof e?Uk(t,e):e instanceof dk?e._internalPath:e._delegate._internalPath}var Wk=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Gk=function(t){function e(e,n,r,i,o,a){var s=this;return(s=t.call(this,e,n,r,i,a)||this)._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return Object(zs.c)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new Qk(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.toProto(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(zk("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(Hk),Qk=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(zs.c)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(Gk),Yk=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Wk(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach(function(r){t.call(e,new Qk(n._firestore,n._userDataWriter,r.key,r,new Wk(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))})},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Fd(Md.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map(function(e){return{type:"added",doc:new Qk(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Wk(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}})}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter(function(t){return e||3!==t.type}).map(function(e){var n=new Qk(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Wk(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Jk(e.type),doc:n,oldIndex:i,newIndex:o}})}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function Jk(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return zd()}}function Xk(t,e){return t instanceof Gk&&e instanceof Gk?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Yk&&e instanceof Yk&&t._firestore===e._firestore&&ok(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function Zk(t){if(sv(t)&&0===t.explicitOrderBy.length)throw new Fd(Md.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var $k=function(){};function tC(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var eC=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qc=e,i.Kc=n,i.jc=r,i.type="where",i}return Object(zs.c)(e,t),e.prototype._apply=function(t){var e=Ck(t.firestore),n=function(t,e,n,r,i,o,a){var s;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new Fd(Md.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){uC(a,o);for(var u=[],c=0,l=a;c<l.length;c++)u.push(sC(r,t,l[c]));s={arrayValue:{values:u}}}else s=sC(r,t,a)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||uC(a,o),s=Nk(n,"where",a,"in"===o||"not-in"===o);var h=Bp.create(i,o,s);return function(t,e){if(e.g()){var n=cv(t);if(null!==n&&!n.isEqual(e.field))throw new Fd(Md.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=uv(t);null!==r&&cC(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new Fd(Md.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t._query,0,e,t.firestore._databaseId,this.Qc,this.Kc,this.jc);return new tk(t.firestore,t.converter,function(t,e){var n=t.filters.concat([e]);return new rv(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}($k),nC=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Qc=e,r.Wc=n,r.type="orderBy",r}return Object(zs.c)(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new Fd(Md.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Fd(Md.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new $p(e,n);return function(t,e){if(null===uv(t)){var n=cv(t);null!==n&&cC(0,n,e.field)}}(t,r),r}(t._query,this.Qc,this.Wc);return new tk(t.firestore,t.converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new rv(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}($k),rC=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Gc=n,i.zc=r,i}return Object(zs.c)(e,t),e.prototype._apply=function(t){return new tk(t.firestore,t.converter,dv(t._query,this.Gc,this.zc))},e}($k),iC=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return Object(zs.c)(e,t),e.prototype._apply=function(t){var e=aC(t,this.type,this.Hc,this.Jc);return new tk(t.firestore,t.converter,function(t,e){return new rv(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}($k),oC=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return Object(zs.c)(e,t),e.prototype._apply=function(t){var e=aC(t,this.type,this.Hc,this.Jc);return new tk(t.firestore,t.converter,function(t,e){return new rv(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}($k);function aC(t,e,n,r){if(n[0]=Object(Pc.n)(n[0]),n[0]instanceof Hk)return function(t,e,n,r,i){if(!r)throw new Fd(Md.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],a=0,s=hv(t);a<s.length;a++){var u=s[a];if(u.field.isKeyField())o.push(Tp(e,r.key));else{var c=r.data.field(u.field);if(pp(c))throw new Fd(Md.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new Fd(Md.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Xp(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=Ck(t.firestore);return function(t,e,n,r,i,o){var a=t.explicitOrderBy;if(i.length>a.length)throw new Fd(Md.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var s=[],u=0;u<i.length;u++){var c=i[u];if(a[u].field.isKeyField()){if("string"!=typeof c)throw new Fd(Md.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!lv(t)&&-1!==c.indexOf("/"))throw new Fd(Md.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(op.fromString(c));if(!_p.isDocumentKey(l))throw new Fd(Md.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new _p(l);s.push(Tp(e,h))}else{var f=Nk(n,r,c);s.push(f)}}return new Xp(s,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function sC(t,e,n){if("string"==typeof(n=Object(Pc.n)(n))){if(""===n)throw new Fd(Md.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!lv(e)&&-1!==n.indexOf("/"))throw new Fd(Md.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(op.fromString(n));if(!_p.isDocumentKey(r))throw new Fd(Md.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Tp(t,new _p(r))}if(n instanceof $w)return Tp(t,n._key);throw new Fd(Md.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Qw(n)+".")}function uC(t,e){if(!Array.isArray(t)||0===t.length)throw new Fd(Md.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Fd(Md.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function cC(t,e,n){if(!n.isEqual(e))throw new Fd(Md.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var lC=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),wp(t)){case 0:return null;case 1:return t.booleanValue;case 2:return fp(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(dp(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw zd()}},t.prototype.convertObject=function(t,e){var n=this,r={};return np(t.fields||{},function(t,i){r[t]=n.convertValue(i,e)}),r},t.prototype.convertGeoPoint=function(t){return new yk(fp(t.latitude),fp(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.convertValue(t,e)})},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=vp(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(yp(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=hp(t);return new $d(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=op.fromString(t);Wd(og(n));var r=new Rw(n.get(1),n.get(3)),i=new _p(n.popFirst(5));return r.isEqual(e)||Bd("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function hC(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var fC=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(zs.c)(e,t),e.prototype.convertBytes=function(t){return new pk(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new $w(this.firestore,null,e)},e}(lC),dC=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Ck(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=pC(t,this._firestore),i=hC(r.converter,e,n),o=Ok(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,Mv.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,a=pC(t,this._firestore);return o="string"==typeof(e=Object(Pc.n)(e))||e instanceof dk?Pk(this._dataReader,"WriteBatch.update",a._key,e,n,r):jk(this._dataReader,"WriteBatch.update",a._key,e),this._mutations.push(o.toMutation(a._key,Mv.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=pC(t,this._firestore);return this._mutations=this._mutations.concat(new Zv(e._key,Mv.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new Fd(Md.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function pC(t,e){if((t=Object(Pc.n)(t)).firestore!==e)throw new Fd(Md.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var vC=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(zs.c)(e,t),e.prototype.convertBytes=function(t){return new pk(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new $w(this.firestore,null,e)},e}(lC);function yC(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=Yw(t,$w);var o=Yw(t.firestore,uk),a=Ck(o);return mC(o,[("string"==typeof(e=Object(Pc.n)(e))||e instanceof dk?Pk(a,"updateDoc",t._key,e,n,r):jk(a,"updateDoc",t._key,e)).toMutation(t._key,Mv.exists(!0))])}function gC(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t=Object(Pc.n)(t);var a={includeMetadataChanges:!1},s=0;"object"!=typeof i[s]||sk(i[s])||(a=i[s],s++);var u,c,l,h={includeMetadataChanges:a.includeMetadataChanges};if(sk(i[s])){var f=i[s];i[s]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[s+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[s+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof $w)c=Yw(t.firestore,uk),l=ov(t._key.path),u={next:function(e){i[s]&&i[s](bC(c,t,e))},error:i[s+1],complete:i[s+2]};else{var d=Yw(t,tk);c=Yw(d.firestore,uk),l=d._query;var p=new vC(c);u={next:function(t){i[s]&&i[s](new Yk(c,p,d,t))},error:i[s+1],complete:i[s+2]},Zk(t._query)}return function(t,e,n,r){var i=this,o=new bw(r),a=new x_(e,o,n);return t.asyncQueue.enqueueAndForget(function(){return Object(zs.b)(i,void 0,void 0,function(){var e;return Object(zs.d)(this,function(n){switch(n.label){case 0:return e=O_,[4,jw(t)];case 1:return[2,e.apply(void 0,[n.sent(),a])]}})})}),function(){o.Wo(),t.asyncQueue.enqueueAndForget(function(){return Object(zs.b)(i,void 0,void 0,function(){var e;return Object(zs.d)(this,function(n){switch(n.label){case 0:return e=E_,[4,jw(t)];case 1:return[2,e.apply(void 0,[n.sent(),a])]}})})})}}(ck(c),l,h,u)}function mC(t,e){return function(t,e){var n=this,r=new xg;return t.asyncQueue.enqueueAndForget(function(){return Object(zs.b)(n,void 0,void 0,function(){var n;return Object(zs.d)(this,function(i){switch(i.label){case 0:return n=q_,[4,Aw(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(ck(t),e)}function bC(t,e,n){var r=n.docs.get(e._key),i=new vC(t);return new Gk(t,i,e._key,r,new Wk(n.hasPendingWrites,n.fromCache),e.converter)}var _C=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return Object(zs.c)(e,t),e.prototype.get=function(e){var n=this,r=pC(e,this._firestore),i=new vC(this._firestore);return t.prototype.get.call(this,e).then(function(t){return new Gk(n._firestore,i,r._key,t._document,new Wk(!1,!1),r.converter)})},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=Ck(t)}return t.prototype.get=function(t){var e=this,n=pC(t,this._firestore),r=new fC(this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return zd();var i=t[0];if(i.isFoundDocument())return new Hk(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Hk(e._firestore,r,n._key,null,n.converter);throw zd()})},t.prototype.set=function(t,e,n){var r=pC(t,this._firestore),i=hC(r.converter,e,n),o=Ok(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,a=pC(t,this._firestore);return o="string"==typeof(e=Object(Pc.n)(e))||e instanceof dk?Pk(this._dataReader,"Transaction.update",a._key,e,n,r):jk(this._dataReader,"Transaction.update",a._key,e),this._transaction.update(a._key,o),this},t.prototype.delete=function(t){var e=pC(t,this._firestore);return this._transaction.delete(e._key),this},t}());function wC(){if("undefined"==typeof Uint8Array)throw new Fd(Md.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function kC(){if("undefined"==typeof atob)throw new Fd(Md.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var CC=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return kC(),new t(pk.fromBase64String(e))},t.fromUint8Array=function(e){return wC(),new t(pk.fromUint8Array(e))},t.prototype.toBase64=function(){return kC(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return wC(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),OC=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){fk(t=Yw(t,uk));var n=ck(t),r=t._freezeSettings(),i=new mw;return hk(n,i,new yw(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){fk(t=Yw(t,uk));var e=ck(t),n=t._freezeSettings(),r=new mw;return hk(e,r,new gw(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new Fd(Md.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new xg;return t._queue.enqueueAndForgetEvenWhileRestricted(function(){return Object(zs.b)(e,void 0,void 0,function(){var e;return Object(zs.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Object(zs.b)(this,void 0,void 0,function(){return Object(zs.d)(this,function(e){switch(e.label){case 0:return Pg.yt()?[4,Pg.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}})})}(Hm(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise}(t._delegate)},t}(),EC=function(){function t(t,e,n){var r=this;this._delegate=e,this.Yc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof Rw||(this.Xc=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this._delegate._getSettings()),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={});var i=(t=Yw(t,Zw))._getSettings();if("firestore.googleapis.com"!==i.host&&i.host!==e&&Hd("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},i),{host:e+":"+n,ssl:!1})),r.mockUserToken){var o=Object(Pc.i)(r.mockUserToken),a=r.mockUserToken.sub||r.mockUserToken.user_id;if(!a)throw new Fd(Md.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");t._credentials=new Vw(new Mw(o,new _b(a)))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return Object(zs.b)(e,void 0,void 0,function(){var e,n;return Object(zs.d)(this,function(r){switch(r.label){case 0:return[4,Iw(t)];case 1:return e=r.sent(),[4,xw(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=Gd(t);return e.$r.delete(0),Wb(e)}(n))]}})})})}(ck(Yw(this._delegate,uk)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return Object(zs.b)(e,void 0,void 0,function(){var e,n;return Object(zs.d)(this,function(r){switch(r.label){case 0:return[4,Iw(t)];case 1:return e=r.sent(),[4,xw(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return Object(zs.b)(this,void 0,void 0,function(){var e;return Object(zs.d)(this,function(n){switch(n.label){case 0:return(e=Gd(t)).$r.add(0),[4,Gb(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}})})}(n))]}})})})}(ck(Yw(this._delegate,uk)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&zw("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Yc.enableMultiTabIndexedDbPersistence(this):this.Yc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Yc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.Xc&&(this.Xc._removeServiceInstance("firestore"),this.Xc._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new xg;return t.asyncQueue.enqueueAndForget(function(){return Object(zs.b)(e,void 0,void 0,function(){var e;return Object(zs.d)(this,function(r){switch(r.label){case 0:return e=G_,[4,Aw(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}})})}),n.promise}(ck(Yw(this._delegate,uk)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new bw(e);return t.asyncQueue.enqueueAndForget(function(){return Object(zs.b)(n,void 0,void 0,function(){var e;return Object(zs.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){Gd(t).Gr.add(e),e.next()},[4,jw(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})}),function(){r.Wo(),t.asyncQueue.enqueueAndForget(function(){return Object(zs.b)(n,void 0,void 0,function(){var e;return Object(zs.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){Gd(t).Gr.delete(e)},[4,jw(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})})}}(ck(t=Yw(t,uk)),sk(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.Xc)throw new Fd(Md.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Xc},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new VC(this,nk(this._delegate,t))}catch(t){throw jC(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new AC(this,rk(this._delegate,t))}catch(t){throw jC(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new LC(this,function(t,e){if(t=Yw(t,Zw),Hw("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Fd(Md.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new tk(t,null,function(t){return new rv(op.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw jC(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new xg;return t.asyncQueue.enqueueAndForget(function(){return Object(zs.b)(n,void 0,void 0,function(){var n;return Object(zs.d)(this,function(i){switch(i.label){case 0:return[4,function(t){return Sw(t).then(function(t){return t.datastore})}(t)];case 1:return n=i.sent(),new ww(t.asyncQueue,n,e,r).run(),[2]}})})}),r.promise}(ck(t),function(n){return e(new _C(t,n))})}(this._delegate,function(n){return t(new IC(e,n))})},t.prototype.batch=function(){var t=this;return ck(this._delegate),new TC(new dC(this._delegate,function(e){return mC(t._delegate,e)}))},t.prototype.loadBundle=function(t){throw new Fd(Md.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new Fd(Md.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),SC=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(zs.c)(e,t),e.prototype.convertBytes=function(t){return new CC(new pk(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return AC.Zc(e,this.firestore,null)},e}(lC),IC=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new SC(t)}return t.prototype.get=function(t){var e=this,n=UC(t);return this._delegate.get(n).then(function(t){return new DC(e._firestore,new Gk(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))})},t.prototype.set=function(t,e,n){var r=UC(t);return n?(Kw("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=UC(t);return 2===arguments.length?this._delegate.update(a,e):(r=this._delegate).update.apply(r,Object(zs.f)([a,e,n],i)),this},t.prototype.delete=function(t){var e=UC(t);return this._delegate.delete(e),this},t}(),TC=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=UC(t);return n?(Kw("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=UC(t);return 2===arguments.length?this._delegate.update(a,e):(r=this._delegate).update.apply(r,Object(zs.f)([a,e,n],i)),this},t.prototype.delete=function(t){var e=UC(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),xC=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new Qk(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new RC(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.tu=function(e,n){var r=t.eu,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new SC(e),n),i.set(n,o)),o},t}();xC.eu=new WeakMap;var AC=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new SC(t)}return t.nu=function(e,n,r){if(e.length%2!=0)throw new Fd(Md.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new $w(n._delegate,r,new _p(e)))},t.Zc=function(e,n,r){return new t(n,new $w(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new VC(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new VC(this.firestore,nk(this._delegate,t))}catch(t){throw jC(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=Object(Pc.n)(t))instanceof $w&&ik(this._delegate,t)},t.prototype.set=function(t,e){e=Kw("DocumentReference.set",e);try{return function(t,e,n){t=Yw(t,$w);var r=Yw(t.firestore,uk),i=hC(t.converter,e,n);return mC(r,[Ok(Ck(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,Mv.none())])}(this._delegate,t,e)}catch(t){throw jC(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?yC(this._delegate,t):yC.apply(void 0,Object(zs.f)([this._delegate,t,e],n))}catch(t){throw jC(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return mC(Yw((t=this._delegate).firestore,uk),[new Zv(t._key,Mv.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=PC(e),i=NC(e,function(e){return new DC(t.firestore,new Gk(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))});return gC(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Yw(t,$w);var e=Yw(t.firestore,uk),n=ck(e),r=new vC(e);return function(t,e){var n=this,r=new xg;return t.asyncQueue.enqueueAndForget(function(){return Object(zs.b)(n,void 0,void 0,function(){var n;return Object(zs.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(zs.b)(this,void 0,void 0,function(){var r,i;return Object(zs.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=Gd(t);return n.persistence.runTransaction("read document","readonly",function(t){return n.Mn.mn(t,e)})}(t,e)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new Fd(Md.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=m_(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}})})},[4,Tw(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._key).then(function(n){return new Gk(e,r,t._key,n,new Wk(null!==n&&n.hasLocalMutations,!0),t.converter)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Yw(t,$w);var e=Yw(t.firestore,uk);return Pw(ck(e),t._key,{source:"server"}).then(function(n){return bC(e,t,n)})}(this._delegate):function(t){t=Yw(t,$w);var e=Yw(t.firestore,uk);return Pw(ck(e),t._key).then(function(n){return bC(e,t,n)})}(this._delegate)).then(function(t){return new DC(e.firestore,new Gk(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))})},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?xC.tu(this.firestore,e):null))},t}();function jC(t,e,n){return t.message=t.message.replace(e,n),t}function PC(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!sk(r))return r}return{}}function NC(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=sk(t[0])?t[0]:sk(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var DC=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new AC(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return Xk(this._delegate,t._delegate)},t}(),RC=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(zs.c)(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(DC),LC=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new SC(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,tC(this._delegate,function(t,e,n){var r=e,i=zk("where",t);return new eC(i,r,n)}(e,n,r)))}catch(e){throw jC(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,tC(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=zk("orderBy",t);return new nC(r,n)}(e,n)))}catch(e){throw jC(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,tC(this._delegate,function(t){return Jw("limit",t),new rC("limit",t,"F")}(e)))}catch(e){throw jC(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,tC(this._delegate,function(t){return Jw("limitToLast",t),new rC("limitToLast",t,"L")}(e)))}catch(e){throw jC(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,tC(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new iC("startAt",t,!0)}).apply(void 0,e)))}catch(e){throw jC(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,tC(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new iC("startAfter",t,!1)}).apply(void 0,e)))}catch(e){throw jC(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,tC(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new oC("endBefore",t,!0)}).apply(void 0,e)))}catch(e){throw jC(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,tC(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new oC("endAt",t,!1)}).apply(void 0,e)))}catch(e){throw jC(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return ok(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Yw(t,tk);var e=Yw(t.firestore,uk),n=ck(e),r=new vC(e);return function(t,e){var n=this,r=new xg;return t.asyncQueue.enqueueAndForget(function(){return Object(zs.b)(n,void 0,void 0,function(){var n;return Object(zs.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(zs.b)(this,void 0,void 0,function(){var r,i,o,a,s;return Object(zs.d)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,ib(t,e,!0)];case 1:return s=u.sent(),r=new D_(e,s.Bn),i=r._o(s.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return a=u.sent(),s=m_(a,"Failed to execute query '"+e+" against cache"),n.reject(s),[3,3];case 3:return[2]}})})},[4,Tw(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._query).then(function(n){return new Yk(e,r,t,n)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Yw(t,tk);var e=Yw(t.firestore,uk),n=ck(e),r=new vC(e);return Nw(n,t._query,{source:"server"}).then(function(n){return new Yk(e,r,t,n)})}(this._delegate):function(t){t=Yw(t,tk);var e=Yw(t.firestore,uk),n=ck(e),r=new vC(e);return Zk(t._query),Nw(n,t._query).then(function(n){return new Yk(e,r,t,n)})}(this._delegate)).then(function(t){return new FC(e.firestore,new Yk(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))})},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=PC(e),i=NC(e,function(e){return new FC(t.firestore,new Yk(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))});return gC(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?xC.tu(this.firestore,e):null))},t}(),MC=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new RC(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),FC=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new LC(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map(function(e){return new RC(t._firestore,e)})},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map(function(t){return new MC(e._firestore,t)})},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach(function(r){t.call(e,new RC(n._firestore,r))})},t.prototype.isEqual=function(t){return Xk(this._delegate,t._delegate)},t}(),VC=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return Object(zs.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new AC(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new AC(this.firestore,void 0===t?rk(this._delegate):rk(this._delegate,t))}catch(t){throw jC(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=Yw(t.firestore,uk),r=rk(t),i=hC(t.converter,e);return mC(n,[Ok(Ck(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,Mv.exists(!1))]).then(function(){return r})}(this._delegate,t).then(function(t){return new AC(e.firestore,t)})},e.prototype.isEqual=function(t){return ik(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?xC.tu(this.firestore,t):null))},e}(LC);function UC(t){return Yw(t,$w)}var qC,BC=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(dk.bind.apply(dk,Object(zs.f)([void 0],t)))}return t.documentId=function(){return new t(sp.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=Object(Pc.n)(t))instanceof dk&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),HC=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new Ik("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new Ek("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Tk("arrayUnion",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new xk("arrayRemove",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new Ak("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}(),KC=o("/6Yf"),zC={Firestore:EC,GeoPoint:yk,Timestamp:$d,Blob:CC,Transaction:IC,WriteBatch:TC,DocumentReference:AC,DocumentSnapshot:DC,Query:LC,QueryDocumentSnapshot:RC,QuerySnapshot:FC,CollectionReference:VC,FieldPath:BC,FieldValue:HC,setLogLevel:function(t){Vd.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};function WC(t,e){return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Va.a;return new Qt.a(function(n){var r;return null!=e?e.schedule(function(){r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),function(){null!=r&&r()}})}(t,e)}function GC(t,e){return WC(t,e).pipe(Object(Jt.a)(function(t){return{payload:t,type:"query"}}))}function QC(t,n){return GC(t,n).pipe(ur(void 0),Tc(),Object(Jt.a)(function(t){var n=e(t,2),r=n[0],i=n[1],o=i.payload.docChanges(),a=o.map(function(t){return{type:t.type,payload:t}});return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach(function(t,e){var n=o.find(function(e){return e.doc.ref.isEqual(t.ref)}),i=null==r?void 0:r.payload.docs.find(function(e){return e.ref.isEqual(t.ref)});n&&JSON.stringify(n.doc.metadata)===JSON.stringify(t.metadata)||!n&&i&&JSON.stringify(i.metadata)===JSON.stringify(t.metadata)||a.push({type:"modified",payload:{oldIndex:e,newIndex:e,type:"modified",doc:t}})}),a}))}function YC(t,e,n){return QC(t,n).pipe(cr(function(t,n){return function(t,e,n){return e.forEach(function(e){n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return JC(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){var n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return JC(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return JC(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(function(t){return t.payload}),e)},[]),Ba(),Object(Jt.a)(function(t){return t.map(function(t){return{type:t.type,payload:t}})}))}function JC(t,e,n){for(var r=t.slice(),i=arguments.length,o=new Array(i>3?i-3:0),a=3;a<i;a++)o[a-3]=arguments[a];return r.splice.apply(r,[e,n].concat(o)),r}function XC(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}(function(t,e){t.INTERNAL.registerComponent(new KC.a("firestore",function(t){return function(t,e){return new EC(t,new uk(t,e),new OC)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},zC)))})(qC=jc.a),qC.registerVersion("@firebase/firestore","2.3.0");var ZC=function(){function n(t,e,r){f(this,n),this.ref=t,this.query=e,this.afs=r}return p(n,[{key:"stateChanges",value:function(t){var n=QC(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(n=n.pipe(Object(Jt.a)(function(e){return e.filter(function(e){return t.indexOf(e.type)>-1})}))),n.pipe(ur(void 0),Tc(),fr(function(t){var n=e(t,2),r=n[0];return n[1].length>0||!r}),Object(Jt.a)(function(t){var n=e(t,2);n[0];return n[1]}),this.afs.keepUnstableUntilFirst)}},{key:"auditTrail",value:function(t){return this.stateChanges(t).pipe(cr(function(t,e){return[].concat(i(t),i(e))},[]))}},{key:"snapshotChanges",value:function(t){var e=XC(t);return YC(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}},{key:"valueChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return GC(this.query,this.afs.schedulers.outsideAngular).pipe(Object(Jt.a)(function(n){return n.payload.docs.map(function(n){return e.idField?Object.assign(Object.assign({},n.data()),t({},e.idField,n.id)):n.data()})}),this.afs.keepUnstableUntilFirst)}},{key:"get",value:function(t){return Object(Zt.a)(this.query.get(t)).pipe(Object(Ja.b)(this.afs.schedulers.insideAngular))}},{key:"add",value:function(t){return this.ref.add(t)}},{key:"doc",value:function(t){return new $C(this.ref.doc(t),this.afs)}}]),n}(),$C=function(){function n(t,e){f(this,n),this.ref=t,this.afs=e}return p(n,[{key:"set",value:function(t,e){return this.ref.set(t,e)}},{key:"update",value:function(t){return this.ref.update(t)}},{key:"delete",value:function(){return this.ref.delete()}},{key:"collection",value:function(t,e){var n=oO(this.ref.collection(t),e),r=n.ref,i=n.query;return new ZC(r,i,this.afs)}},{key:"snapshotChanges",value:function(){return WC(this.ref,this.afs.schedulers.outsideAngular).pipe(ur(void 0),Tc(),Object(Jt.a)(function(t){var n=e(t,2),r=n[0],i=n[1];return i.exists?(null==r?void 0:r.exists)?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}})).pipe(this.afs.keepUnstableUntilFirst)}},{key:"valueChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.snapshotChanges().pipe(Object(Jt.a)(function(n){var r=n.payload;return e.idField?Object.assign(Object.assign({},r.data()),t({},e.idField,r.id)):r.data()}))}},{key:"get",value:function(t){return Object(Zt.a)(this.ref.get(t)).pipe(Object(Ja.b)(this.afs.schedulers.insideAngular))}}]),n}(),tO=function(){function e(t,n){f(this,e),this.query=t,this.afs=n}return p(e,[{key:"stateChanges",value:function(t){return t&&0!==t.length?QC(this.query,this.afs.schedulers.outsideAngular).pipe(Object(Jt.a)(function(e){return e.filter(function(e){return t.indexOf(e.type)>-1})}),fr(function(t){return t.length>0}),this.afs.keepUnstableUntilFirst):QC(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}},{key:"auditTrail",value:function(t){return this.stateChanges(t).pipe(cr(function(t,e){return[].concat(i(t),i(e))},[]))}},{key:"snapshotChanges",value:function(t){var e=XC(t);return YC(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}},{key:"valueChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return GC(this.query,this.afs.schedulers.outsideAngular).pipe(Object(Jt.a)(function(n){return n.payload.docs.map(function(n){return e.idField?Object.assign(t({},e.idField,n.id),n.data()):n.data()})}),this.afs.keepUnstableUntilFirst)}},{key:"get",value:function(t){return Object(Zt.a)(this.query.get(t)).pipe(Object(Ja.b)(this.afs.schedulers.insideAngular))}}]),e}(),eO=new s.q("angularfire2.enableFirestorePersistence"),nO=new s.q("angularfire2.firestore.persistenceSettings"),rO=new s.q("angularfire2.firestore.settings"),iO=new s.q("angularfire2.firestore.use-emulator");function oO(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t){return t};return{query:e(t),ref:t}}var aO,sO,uO,cO=((uO=function(){function t(n,r,o,a,s,u,c,l,h){f(this,t),this.schedulers=new Ya.d(u),this.keepUnstableUntilFirst=Object(Ya.h)(this.schedulers);var d=Object(Ya.g)(n,u,r);!ps.a.auth&&h&&Object(Ya.j)();var p=l,v=e(Object(Ya.f)(d.name+".firestore","AngularFirestore",d,function(){var t=u.runOutsideAngular(function(){return d.firestore()});return a&&t.settings(a),p&&t.useEmulator.apply(t,i(p)),o&&!st(s)?[t,u.runOutsideAngular(function(){try{return Object(Zt.a)(t.enablePersistence(c||void 0).then(function(){return!0},function(){return!1}))}catch(qC){return"undefined"!=typeof console&&console.warn(qC),Object(Rn.a)(!1)}})]:[t,Object(Rn.a)(!1)]},[a,p,o]),2);this.firestore=v[0],this.persistenceEnabled$=v[1]}return p(t,[{key:"collection",value:function(t,e){var n=oO("string"==typeof t?this.firestore.collection(t):t,e),r=n.ref,i=n.query,o=this.schedulers.ngZone.run(function(){return r});return new ZC(o,i,this)}},{key:"collectionGroup",value:function(t,e){var n=e||function(t){return t},r=this.firestore.collectionGroup(t);return new tO(n(r),this)}},{key:"doc",value:function(t){var e;e="string"==typeof t?this.firestore.doc(t):t;var n=this.schedulers.ngZone.run(function(){return e});return new $C(n,this)}},{key:"createId",value:function(){return this.firestore.collection("_").doc().id}}]),t}()).\u0275fac=function(t){return new(t||uO)(s.Pb(Ya.c),s.Pb(Ya.b,8),s.Pb(eO,8),s.Pb(rO,8),s.Pb(s.B),s.Pb(s.z),s.Pb(nO,8),s.Pb(iO,8),s.Pb(os,8))},uO.\u0275prov=Object(s.Eb)({factory:function(){return new uO(Object(s.Pb)(Ya.c),Object(s.Pb)(Ya.b,8),Object(s.Pb)(eO,8),Object(s.Pb)(rO,8),Object(s.Pb)(s.B),Object(s.Pb)(s.z),Object(s.Pb)(nO,8),Object(s.Pb)(iO,8),Object(s.Pb)(os,8))},token:uO,providedIn:"any"}),uO),lO=((sO=function(){function t(){f(this,t)}return p(t,null,[{key:"enablePersistence",value:function(e){return{ngModule:t,providers:[{provide:eO,useValue:!0},{provide:nO,useValue:e}]}}}]),t}()).\u0275mod=s.Gb({type:sO}),sO.\u0275inj=s.Fb({factory:function(t){return new(t||sO)},providers:[cO]}),sO),hO=((aO=function t(){f(this,t)}).\u0275mod=s.Gb({type:aO,bootstrap:[Uu]}),aO.\u0275inj=s.Fb({factory:function(t){return new(t||aO)},providers:[],imports:[[Gt,Vu,Dn,Ic,Ya.a.initializeApp(u,"clientpanel"),lO,ds]]}),aO);Object(s.S)(),zt().bootstrapModule(hO).catch(function(t){return console.error(t)})},zn8P:function(t,e){function n(t){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"},zx2A:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return s}),n.d(e,"c",function(){return u});var r=n("7o/Q"),i=n("HDdC"),o=n("SeVD"),a=function(t){v(n,t);var e=g(n);function n(t){var r;return f(this,n),(r=e.call(this)).parent=t,r}return p(n,[{key:"_next",value:function(t){this.parent.notifyNext(t)}},{key:"_error",value:function(t){this.parent.notifyError(t),this.unsubscribe()}},{key:"_complete",value:function(){this.parent.notifyComplete(),this.unsubscribe()}}]),n}(r.a),s=function(t){v(n,t);var e=g(n);function n(){return f(this,n),e.apply(this,arguments)}return p(n,[{key:"notifyNext",value:function(t){this.destination.next(t)}},{key:"notifyError",value:function(t){this.destination.error(t)}},{key:"notifyComplete",value:function(){this.destination.complete()}}]),n}(r.a);function u(t,e){if(!e.closed){if(t instanceof i.a)return t.subscribe(e);var n;try{n=Object(o.a)(t)(e)}catch(r){e.error(r)}return n}}}},[[0,0]]])}();